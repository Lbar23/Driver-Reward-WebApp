import{g as le,f as ue,h as F,m as ne,n as se,Y as dt,X as Kn,t as Br,j as t,o as ee,p as ce,aw as Ws,Z as Zn,$ as nr,a8 as ye,C as Qn,V as At,B as Bs,q as Wt,i as Z,a2 as Rt,a1 as Et,l as lt,b as Fr,ax as Fs,T as zs,ay as Us,az as Hs,aA as es,W as w,aB as Vs,G as Gs,a9 as qs,a6 as ts,_ as Ys,a7 as rs,A as Js,x as ns,D as Xs,U as Ks,aC as Zs,aD as dr,aE as zr,aF as Qs,aG as ln,k as Se,af as sr,aH as Dt,v as eo,H as Tt,r as er,aI as Pt,aj as to,a3 as tr,aa as ss,w as at,aJ as ro,aK as no,aL as Ce,ao as q,M as so,al as oo,as as Ur,ag as ao}from"./mui-core-BZjoSEI0.js";import{b as io,r as u,u as yt,L as mt,c as Hr,d as lo,g as co,n as Je,e as uo,f as $e,O as po,N as Rr,B as ho}from"./vendor-DuMT9bzH.js";import{E as go,a as os,D as mo,A as Sr,S as cn,I as Ht,P as dn,b as jr,B as un,c as fo,Q as pn,T as as,d as xo,N as yo,L as is,e as vo,f as bo,M as wo,g as So,h as jo,C as Co,R as _o,i as ko,j as hn,k as Do,l as Io,m as To,n as ls,H as Po,G as gn,W as Ao,o as mn,p as Ro,q as Eo,r as Mo,s as fn,t as Vr,u as Gr,v as $o,w as No,x as Lo}from"./mui-icons-BmvHMZC-.js";import{I as We,C as Oo,g as Wo,a as Bo,G as Fo,S as zo,T as Uo,b as qr,B as Ho,c as Vo,L as Er,d as Mr,e as xn,f as yn,h as or,D as ct,u as Go,M as cs,i as O,j as Yr,k as qo,l as Cr,m as Y,n as Ke,F as Le,o as Oe,p as ke,q as et,r as Jr,s as Xr,v as Bt,w as Kr,x as I,P as Mt,y as Zr,z as Yo,A as Qr,E as en,H as ds,J as ar,K as us}from"./mui-data-visualization-JF77iimx.js";import{a as U,l as Jo,p as Xo,i as Ko,f as $r,b as Zo,c as Qo,d as ea,e as ta,g as ra,h as _r,j as vn,k as bn,m as kr,n as na,s as sa,o as oa,q as aa,r as ia,t as la,u as ca,v as da,w as ua,x as pa,y as ha,z as ga,A as ma,B as fa,C as xa,D as ya,E as va,F as ba,G as wa,H as Sa,I as ja,J as Ca,K as _a,L as ka,M as Da,N as Ia,O as Ta,P as Pa,Q as Aa,R as Ra}from"./utilities-B7C2XMaF.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Nr={},wn=io;Nr.createRoot=wn.createRoot,Nr.hydrateRoot=wn.hydrateRoot;function Ea(r){return ue("MuiCollapse",r)}le("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ma=r=>{const{orientation:e,classes:n}=r,s={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return ce(s,Ea,n)},$a=F("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(ne(({theme:r})=>({height:0,overflow:"hidden",transition:r.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:r.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Na=F("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(r,e)=>e.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),La=F("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(r,e)=>e.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),$t=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiCollapse"}),{addEndListener:o,children:a,className:i,collapsedSize:l="0px",component:c,easing:d,in:p,onEnter:v,onEntered:h,onEntering:y,onExit:x,onExited:b,onExiting:m,orientation:g="vertical",style:S,timeout:f=Ws.standard,TransitionComponent:C=Zn,...D}=s,E={...s,orientation:g,collapsedSize:l},A=Ma(E),B=dt(),T=Kn(),M=u.useRef(null),R=u.useRef(),L=typeof l=="number"?`${l}px`:l,j=g==="horizontal",$=j?"width":"height",W=u.useRef(null),te=Br(n,W),Q=X=>je=>{if(X){const ve=W.current;je===void 0?X(ve):X(ve,je)}},H=()=>M.current?M.current[j?"clientWidth":"clientHeight"]:0,re=Q((X,je)=>{M.current&&j&&(M.current.style.position="absolute"),X.style[$]=L,v&&v(X,je)}),he=Q((X,je)=>{const ve=H();M.current&&j&&(M.current.style.position="");const{duration:Be,easing:Fe}=nr({style:S,timeout:f,easing:d},{mode:"enter"});if(f==="auto"){const Ye=B.transitions.getAutoHeightDuration(ve);X.style.transitionDuration=`${Ye}ms`,R.current=Ye}else X.style.transitionDuration=typeof Be=="string"?Be:`${Be}ms`;X.style[$]=`${ve}px`,X.style.transitionTimingFunction=Fe,y&&y(X,je)}),ge=Q((X,je)=>{X.style[$]="auto",h&&h(X,je)}),Ve=Q(X=>{X.style[$]=`${H()}px`,x&&x(X)}),ut=Q(b),vt=Q(X=>{const je=H(),{duration:ve,easing:Be}=nr({style:S,timeout:f,easing:d},{mode:"exit"});if(f==="auto"){const Fe=B.transitions.getAutoHeightDuration(je);X.style.transitionDuration=`${Fe}ms`,R.current=Fe}else X.style.transitionDuration=typeof ve=="string"?ve:`${ve}ms`;X.style[$]=L,X.style.transitionTimingFunction=Be,m&&m(X)}),Ct=X=>{f==="auto"&&T.start(R.current||0,X),o&&o(W.current,X)};return t.jsx(C,{in:p,onEnter:re,onEntered:ge,onEntering:he,onExit:Ve,onExited:ut,onExiting:vt,addEndListener:Ct,nodeRef:W,timeout:f==="auto"?null:f,...D,children:(X,je)=>t.jsx($a,{as:c,className:ee(A.root,i,{entered:A.entered,exited:!p&&L==="0px"&&A.hidden}[X]),style:{[j?"minWidth":"minHeight"]:L,...S},ref:te,...je,ownerState:{...E,state:X},children:t.jsx(Na,{ownerState:{...E,state:X},className:A.wrapper,ref:M,children:t.jsx(La,{ownerState:{...E,state:X},className:A.wrapperInner,children:a})})})})});$t&&($t.muiSupportAuto=!0);const ps=u.createContext({});function Oa(r){return ue("MuiAccordion",r)}const Vt=le("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),Wa=r=>{const{classes:e,square:n,expanded:s,disabled:o,disableGutters:a}=r;return ce({root:["root",!n&&"rounded",s&&"expanded",o&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},Oa,e)},Ba=F(ye,{name:"MuiAccordion",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[{[`& .${Vt.region}`]:e.region},e.root,!n.square&&e.rounded,!n.disableGutters&&e.gutters]}})(ne(({theme:r})=>{const e={duration:r.transitions.duration.shortest};return{position:"relative",transition:r.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(r.vars||r).palette.divider,transition:r.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Vt.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Vt.disabled}`]:{backgroundColor:(r.vars||r).palette.action.disabledBackground}}}),ne(({theme:r})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(r.vars||r).shape.borderRadius,borderBottomRightRadius:(r.vars||r).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${Vt.expanded}`]:{margin:"16px 0"}}}]}))),Fa=F("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(r,e)=>e.heading})({all:"unset"}),za=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiAccordion"}),{children:o,className:a,defaultExpanded:i=!1,disabled:l=!1,disableGutters:c=!1,expanded:d,onChange:p,square:v=!1,slots:h={},slotProps:y={},TransitionComponent:x,TransitionProps:b,...m}=s,[g,S]=Qn({controlled:d,default:i,name:"Accordion",state:"expanded"}),f=u.useCallback(te=>{S(!g),p&&p(te,!g)},[g,p,S]),[C,...D]=u.Children.toArray(o),E=u.useMemo(()=>({expanded:g,disabled:l,disableGutters:c,toggle:f}),[g,l,c,f]),A={...s,square:v,disabled:l,disableGutters:c,expanded:g},B=Wa(A),T={transition:x,...h},M={transition:b,...y},R={slots:T,slotProps:M},[L,j]=At("heading",{elementType:Fa,externalForwardedProps:R,className:B.heading,ownerState:A}),[$,W]=At("transition",{elementType:$t,externalForwardedProps:R,ownerState:A});return t.jsxs(Ba,{className:ee(B.root,a),ref:n,ownerState:A,square:v,...m,children:[t.jsx(L,{...j,children:t.jsx(ps.Provider,{value:E,children:C})}),t.jsx($,{in:g,timeout:"auto",...W,children:t.jsx("div",{"aria-labelledby":C.props.id,id:C.props["aria-controls"],role:"region",className:B.region,children:D})})]})});function Ua(r){return ue("MuiAccordionDetails",r)}le("MuiAccordionDetails",["root"]);const Ha=r=>{const{classes:e}=r;return ce({root:["root"]},Ua,e)},Va=F("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(r,e)=>e.root})(ne(({theme:r})=>({padding:r.spacing(1,2,2)}))),Ga=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiAccordionDetails"}),{className:o,...a}=s,i=s,l=Ha(i);return t.jsx(Va,{className:ee(l.root,o),ref:n,ownerState:i,...a})});function qa(r){return ue("MuiAccordionSummary",r)}const wt=le("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Ya=r=>{const{classes:e,expanded:n,disabled:s,disableGutters:o}=r;return ce({root:["root",n&&"expanded",s&&"disabled",!o&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!o&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},qa,e)},Ja=F(Bs,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(r,e)=>e.root})(ne(({theme:r})=>{const e={duration:r.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:r.spacing(0,2),transition:r.transitions.create(["min-height","background-color"],e),[`&.${wt.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${wt.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity},[`&:hover:not(.${wt.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${wt.expanded}`]:{minHeight:64}}}]}})),Xa=F("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(r,e)=>e.content})(ne(({theme:r})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:r.transitions.create(["margin"],{duration:r.transitions.duration.shortest}),[`&.${wt.expanded}`]:{margin:"20px 0"}}}]}))),Ka=F("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(r,e)=>e.expandIconWrapper})(ne(({theme:r})=>({display:"flex",color:(r.vars||r).palette.action.active,transform:"rotate(0deg)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shortest}),[`&.${wt.expanded}`]:{transform:"rotate(180deg)"}}))),Za=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiAccordionSummary"}),{children:o,className:a,expandIcon:i,focusVisibleClassName:l,onClick:c,...d}=s,{disabled:p=!1,disableGutters:v,expanded:h,toggle:y}=u.useContext(ps),x=g=>{y&&y(g),c&&c(g)},b={...s,expanded:h,disabled:p,disableGutters:v},m=Ya(b);return t.jsxs(Ja,{focusRipple:!1,disableRipple:!0,disabled:p,component:"div","aria-expanded":h,className:ee(m.root,a),focusVisibleClassName:ee(m.focusVisible,l),onClick:x,ref:n,ownerState:b,...d,children:[t.jsx(Xa,{className:m.content,ownerState:b,children:o}),i&&t.jsx(Ka,{className:m.expandIconWrapper,ownerState:b,children:i})]})});function Qa(r){return ue("MuiAlert",r)}const Sn=le("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),ei=Wt(t.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ti=Wt(t.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ri=Wt(t.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),ni=Wt(t.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),si=r=>{const{variant:e,color:n,severity:s,classes:o}=r,a={root:["root",`color${Z(n||s)}`,`${e}${Z(n||s)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return ce(a,Qa,o)},oi=F(ye,{name:"MuiAlert",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[n.variant],e[`${n.variant}${Z(n.color||n.severity)}`]]}})(ne(({theme:r})=>{const e=r.palette.mode==="light"?Rt:Et,n=r.palette.mode==="light"?Et:Rt;return{...r.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(r.palette).filter(lt(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:r.vars?r.vars.palette.Alert[`${s}Color`]:e(r.palette[s].light,.6),backgroundColor:r.vars?r.vars.palette.Alert[`${s}StandardBg`]:n(r.palette[s].light,.9),[`& .${Sn.icon}`]:r.vars?{color:r.vars.palette.Alert[`${s}IconColor`]}:{color:r.palette[s].main}}})),...Object.entries(r.palette).filter(lt(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:r.vars?r.vars.palette.Alert[`${s}Color`]:e(r.palette[s].light,.6),border:`1px solid ${(r.vars||r).palette[s].light}`,[`& .${Sn.icon}`]:r.vars?{color:r.vars.palette.Alert[`${s}IconColor`]}:{color:r.palette[s].main}}})),...Object.entries(r.palette).filter(lt(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:r.typography.fontWeightMedium,...r.vars?{color:r.vars.palette.Alert[`${s}FilledColor`],backgroundColor:r.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:r.palette.mode==="dark"?r.palette[s].dark:r.palette[s].main,color:r.palette.getContrastText(r.palette[s].main)}}}))]}})),ai=F("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(r,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),ii=F("div",{name:"MuiAlert",slot:"Message",overridesResolver:(r,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),jn=F("div",{name:"MuiAlert",slot:"Action",overridesResolver:(r,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Cn={success:t.jsx(ei,{fontSize:"inherit"}),warning:t.jsx(ti,{fontSize:"inherit"}),error:t.jsx(ri,{fontSize:"inherit"}),info:t.jsx(ni,{fontSize:"inherit"})},Ae=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiAlert"}),{action:o,children:a,className:i,closeText:l="Close",color:c,components:d={},componentsProps:p={},icon:v,iconMapping:h=Cn,onClose:y,role:x="alert",severity:b="success",slotProps:m={},slots:g={},variant:S="standard",...f}=s,C={...s,color:c,severity:b,variant:S,colorSeverity:c||b},D=si(C),E={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...g},slotProps:{...p,...m}},[A,B]=At("closeButton",{elementType:We,externalForwardedProps:E,ownerState:C}),[T,M]=At("closeIcon",{elementType:Oo,externalForwardedProps:E,ownerState:C});return t.jsxs(oi,{role:x,elevation:0,ownerState:C,className:ee(D.root,i),ref:n,...f,children:[v!==!1?t.jsx(ai,{ownerState:C,className:D.icon,children:v||h[b]||Cn[b]}):null,t.jsx(ii,{ownerState:C,className:D.message,children:a}),o!=null?t.jsx(jn,{ownerState:C,className:D.action,children:o}):null,o==null&&y?t.jsx(jn,{ownerState:C,className:D.action,children:t.jsx(A,{size:"small","aria-label":l,title:l,color:"inherit",onClick:y,...B,children:t.jsx(T,{fontSize:"small",...M})})}):null]})});function li(r){return ue("MuiAppBar",r)}le("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ci=r=>{const{color:e,position:n,classes:s}=r,o={root:["root",`color${Z(e)}`,`position${Z(n)}`]};return ce(o,li,s)},_n=(r,e)=>r?`${r==null?void 0:r.replace(")","")}, ${e})`:e,di=F(ye,{name:"MuiAppBar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[`position${Z(n.position)}`],e[`color${Z(n.color)}`]]}})(ne(({theme:r})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[100],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[100]),...r.applyStyles("dark",{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[900],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[900])})}},...Object.entries(r.palette).filter(lt(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(r.vars??r).palette[e].main,"--AppBar-color":(r.vars??r).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundColor:r.vars?_n(r.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:r.vars?_n(r.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundImage:"none"})}}]}))),hs=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiAppBar"}),{className:o,color:a="primary",enableColorOnDark:i=!1,position:l="fixed",...c}=s,d={...s,color:a,position:l,enableColorOnDark:i},p=ci(d);return t.jsx(di,{square:!0,component:"header",ownerState:d,elevation:4,className:ee(p.root,o,l==="fixed"&&"mui-fixed"),ref:n,...c})}),ui=Wt(t.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function pi(r){return ue("MuiAvatar",r)}le("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const hi=r=>{const{classes:e,variant:n,colorDefault:s}=r;return ce({root:["root",n,s&&"colorDefault"],img:["img"],fallback:["fallback"]},pi,e)},gi=F("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(ne(({theme:r})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(r.vars||r).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(r.vars||r).palette.background.default,...r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:{backgroundColor:r.palette.grey[400],...r.applyStyles("dark",{backgroundColor:r.palette.grey[600]})}}}]}))),mi=F("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(r,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),fi=F(ui,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(r,e)=>e.fallback})({width:"75%",height:"75%"});function xi({crossOrigin:r,referrerPolicy:e,src:n,srcSet:s}){const[o,a]=u.useState(!1);return u.useEffect(()=>{if(!n&&!s)return;a(!1);let i=!0;const l=new Image;return l.onload=()=>{i&&a("loaded")},l.onerror=()=>{i&&a("error")},l.crossOrigin=r,l.referrerPolicy=e,l.src=n,s&&(l.srcset=s),()=>{i=!1}},[r,e,n,s]),o}const jt=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiAvatar"}),{alt:o,children:a,className:i,component:l="div",slots:c={},slotProps:d={},imgProps:p,sizes:v,src:h,srcSet:y,variant:x="circular",...b}=s;let m=null;const g=xi({...p,src:h,srcSet:y}),S=h||y,f=S&&g!=="error",C={...s,colorDefault:!f,component:l,variant:x};delete C.ownerState;const D=hi(C),[E,A]=At("img",{className:D.img,elementType:mi,externalForwardedProps:{slots:c,slotProps:{img:{...p,...d.img}}},additionalProps:{alt:o,src:h,srcSet:y,sizes:v},ownerState:C});return f?m=t.jsx(E,{...A}):a||a===0?m=a:S&&o?m=o[0]:m=t.jsx(fi,{ownerState:C,className:D.fallback}),t.jsx(gi,{as:l,className:ee(D.root,i),ref:n,...b,ownerState:C,children:m})}),yi=le("MuiBox",["root"]),vi=Fr(),_=Fs({themeId:zs,defaultTheme:vi,defaultClassName:yi.root,generateClassName:Us.generate});function bi(r){return ue("MuiCardContent",r)}le("MuiCardContent",["root"]);const wi=r=>{const{classes:e}=r;return ce({root:["root"]},bi,e)},Si=F("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(r,e)=>e.root})({padding:16,"&:last-child":{paddingBottom:24}}),_e=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiCardContent"}),{className:o,component:a="div",...i}=s,l={...s,component:a},c=wi(l);return t.jsx(Si,{as:a,className:ee(c.root,o),ownerState:l,ref:n,...i})});function ji(r){return ue("MuiCardMedia",r)}le("MuiCardMedia",["root","media","img"]);const Ci=r=>{const{classes:e,isMediaComponent:n,isImageComponent:s}=r;return ce({root:["root",n&&"media",s&&"img"]},ji,e)},_i=F("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r,{isMediaComponent:s,isImageComponent:o}=n;return[e.root,s&&e.media,o&&e.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),ki=["video","audio","picture","iframe","img"],Di=["picture","img"],Ii=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiCardMedia"}),{children:o,className:a,component:i="div",image:l,src:c,style:d,...p}=s,v=ki.includes(i),h=!v&&l?{backgroundImage:`url("${l}")`,...d}:d,y={...s,component:i,isMediaComponent:v,isImageComponent:Di.includes(i)},x=Ci(y);return t.jsx(_i,{className:ee(x.root,a),as:i,role:!v&&l?"img":void 0,ref:n,style:h,ownerState:y,src:v?l||c:void 0,...p,children:o})}),ft=Hs({createStyledComponent:F("div",{name:"MuiContainer",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[`maxWidth${Z(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:r=>se({props:r,name:"MuiContainer"})}),Lr=typeof es({})=="function",Ti=(r,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!r.vars&&{colorScheme:r.palette.mode}}),Pi=r=>({color:(r.vars||r).palette.text.primary,...r.typography.body1,backgroundColor:(r.vars||r).palette.background.default,"@media print":{backgroundColor:(r.vars||r).palette.common.white}}),gs=(r,e=!1)=>{var a,i;const n={};e&&r.colorSchemes&&typeof r.getColorSchemeSelector=="function"&&Object.entries(r.colorSchemes).forEach(([l,c])=>{var p,v;const d=r.getColorSchemeSelector(l);d.startsWith("@")?n[d]={":root":{colorScheme:(p=c.palette)==null?void 0:p.mode}}:n[d.replace(/\s*&/,"")]={colorScheme:(v=c.palette)==null?void 0:v.mode}});let s={html:Ti(r,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:r.typography.fontWeightBold},body:{margin:0,...Pi(r),"&::backdrop":{backgroundColor:(r.vars||r).palette.background.default}},...n};const o=(i=(a=r.components)==null?void 0:a.MuiCssBaseline)==null?void 0:i.styleOverrides;return o&&(s=[s,o]),s},rr="mui-ecs",Ai=r=>{const e=gs(r,!1),n=Array.isArray(e)?e[0]:e;return!r.vars&&n&&(n.html[`:root:has(${rr})`]={colorScheme:r.palette.mode}),r.colorSchemes&&Object.entries(r.colorSchemes).forEach(([s,o])=>{var i,l;const a=r.getColorSchemeSelector(s);a.startsWith("@")?n[a]={[`:root:not(:has(.${rr}))`]:{colorScheme:(i=o.palette)==null?void 0:i.mode}}:n[a.replace(/\s*&/,"")]={[`&:not(:has(.${rr}))`]:{colorScheme:(l=o.palette)==null?void 0:l.mode}}}),e},Ri=es(Lr?({theme:r,enableColorScheme:e})=>gs(r,e):({theme:r})=>Ai(r));function ur(r){const e=se({props:r,name:"MuiCssBaseline"}),{children:n,enableColorScheme:s=!1}=e;return t.jsxs(u.Fragment,{children:[Lr&&t.jsx(Ri,{enableColorScheme:s}),!Lr&&!s&&t.jsx("span",{className:rr,style:{display:"none"}}),n]})}const Ei=r=>{const{classes:e}=r;return ce({root:["root"]},Wo,e)},Mi=F(w,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(r,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),tn=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiDialogTitle"}),{className:o,id:a,...i}=s,l=s,c=Ei(l),{titleId:d=a}=u.useContext(Vs);return t.jsx(Mi,{component:"h2",className:ee(c.root,o),ownerState:l,ref:n,variant:"h6",id:a??d,...i})});function $i(r,e,n){const s=e.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),a=ts(e);let i;if(e.fakeTransform)i=e.fakeTransform;else{const d=a.getComputedStyle(e);i=d.getPropertyValue("-webkit-transform")||d.getPropertyValue("transform")}let l=0,c=0;if(i&&i!=="none"&&typeof i=="string"){const d=i.split("(")[1].split(")")[0].split(",");l=parseInt(d[4],10),c=parseInt(d[5],10)}return r==="left"?o?`translateX(${o.right+l-s.left}px)`:`translateX(${a.innerWidth+l-s.left}px)`:r==="right"?o?`translateX(-${s.right-o.left-l}px)`:`translateX(-${s.left+s.width-l}px)`:r==="up"?o?`translateY(${o.bottom+c-s.top}px)`:`translateY(${a.innerHeight+c-s.top}px)`:o?`translateY(-${s.top-o.top+s.height-c}px)`:`translateY(-${s.top+s.height-c}px)`}function Ni(r){return typeof r=="function"?r():r}function Gt(r,e,n){const s=Ni(n),o=$i(r,e,s);o&&(e.style.webkitTransform=o,e.style.transform=o)}const Li=u.forwardRef(function(e,n){const s=dt(),o={enter:s.transitions.easing.easeOut,exit:s.transitions.easing.sharp},a={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:c,container:d,direction:p="down",easing:v=o,in:h,onEnter:y,onEntered:x,onEntering:b,onExit:m,onExited:g,onExiting:S,style:f,timeout:C=a,TransitionComponent:D=Zn,...E}=e,A=u.useRef(null),B=Br(Gs(c),A,n),T=H=>re=>{H&&(re===void 0?H(A.current):H(A.current,re))},M=T((H,re)=>{Gt(p,H,d),Ys(H),y&&y(H,re)}),R=T((H,re)=>{const he=nr({timeout:C,style:f,easing:v},{mode:"enter"});H.style.webkitTransition=s.transitions.create("-webkit-transform",{...he}),H.style.transition=s.transitions.create("transform",{...he}),H.style.webkitTransform="none",H.style.transform="none",b&&b(H,re)}),L=T(x),j=T(S),$=T(H=>{const re=nr({timeout:C,style:f,easing:v},{mode:"exit"});H.style.webkitTransition=s.transitions.create("-webkit-transform",re),H.style.transition=s.transitions.create("transform",re),Gt(p,H,d),m&&m(H)}),W=T(H=>{H.style.webkitTransition="",H.style.transition="",g&&g(H)}),te=H=>{i&&i(A.current,H)},Q=u.useCallback(()=>{A.current&&Gt(p,A.current,d)},[p,d]);return u.useEffect(()=>{if(h||p==="down"||p==="right")return;const H=qs(()=>{A.current&&Gt(p,A.current,d)}),re=ts(A.current);return re.addEventListener("resize",H),()=>{H.clear(),re.removeEventListener("resize",H)}},[p,h,d]),u.useEffect(()=>{h||Q()},[h,Q]),t.jsx(D,{nodeRef:A,onEnter:M,onEntered:L,onEntering:R,onExit:$,onExited:W,onExiting:j,addEndListener:te,appear:l,in:h,timeout:C,...E,children:(H,re)=>u.cloneElement(c,{ref:B,style:{visibility:H==="exited"&&!h?"hidden":void 0,...f,...c.props.style},...re})})});function Oi(r){return ue("MuiDrawer",r)}const Wi=le("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]),ms=(r,e)=>{const{ownerState:n}=r;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},Bi=r=>{const{classes:e,anchor:n,variant:s}=r,o={root:["root"],docked:[(s==="permanent"||s==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Z(n)}`,s!=="temporary"&&`paperAnchorDocked${Z(n)}`]};return ce(o,Oi,e)},Fi=F(rs,{name:"MuiDrawer",slot:"Root",overridesResolver:ms})(ne(({theme:r})=>({zIndex:(r.vars||r).zIndex.drawer}))),kn=F("div",{shouldForwardProp:Js,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:ms})({flex:"0 0 auto"}),zi=F(ye,{name:"MuiDrawer",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.paper,e[`paperAnchor${Z(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${Z(n.anchor)}`]]}})(ne(({theme:r})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(r.vars||r).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(r.vars||r).palette.divider}`}}]}))),fs={left:"right",right:"left",top:"down",bottom:"up"};function Ui(r){return["left","right"].includes(r)}function Hi({direction:r},e){return r==="rtl"&&Ui(e)?fs[e]:e}const xs=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiDrawer"}),o=dt(),a=ns(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:c,children:d,className:p,elevation:v=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:y,...x}={},onClose:b,open:m=!1,PaperProps:g={},SlideProps:S,TransitionComponent:f=Li,transitionDuration:C=i,variant:D="temporary",...E}=s,A=u.useRef(!1);u.useEffect(()=>{A.current=!0},[]);const B=Hi({direction:a?"rtl":"ltr"},l),M={...s,anchor:l,elevation:v,open:m,variant:D,...E},R=Bi(M),L=t.jsx(zi,{elevation:D==="temporary"?v:0,square:!0,...g,className:ee(R.paper,g.className),ownerState:M,children:d});if(D==="permanent")return t.jsx(kn,{className:ee(R.root,R.docked,p),ownerState:M,ref:n,...E,children:L});const j=t.jsx(f,{in:m,direction:fs[B],timeout:C,appear:A.current,...S,children:L});return D==="persistent"?t.jsx(kn,{className:ee(R.root,R.docked,p),ownerState:M,ref:n,...E,children:j}):t.jsx(Fi,{BackdropProps:{...c,...y,transitionDuration:C},className:ee(R.root,R.modal,p),open:m,ownerState:M,onClose:b,hideBackdrop:h,ref:n,...E,...x,children:j})});function Vi(r){return ue("MuiFormGroup",r)}le("MuiFormGroup",["root","row","error"]);const Gi=r=>{const{classes:e,row:n,error:s}=r;return ce({root:["root",n&&"row",s&&"error"]},Vi,e)},qi=F("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,n.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Yi=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiFormGroup"}),{className:o,row:a=!1,...i}=s,l=Xs(),c=Ks({props:s,muiFormControl:l,states:["error"]}),d={...s,row:a,error:c.error},p=Gi(d);return t.jsx(qi,{className:ee(p.root,o),ownerState:d,ref:n,...i})}),Dn=u.createContext();function Ji(r){return ue("MuiGrid",r)}const Xi=[0,1,2,3,4,5,6,7,8,9,10],Ki=["column-reverse","column","row-reverse","row"],Zi=["nowrap","wrap-reverse","wrap"],It=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Nt=le("MuiGrid",["root","container","item","zeroMinWidth",...Xi.map(r=>`spacing-xs-${r}`),...Ki.map(r=>`direction-xs-${r}`),...Zi.map(r=>`wrap-xs-${r}`),...It.map(r=>`grid-xs-${r}`),...It.map(r=>`grid-sm-${r}`),...It.map(r=>`grid-md-${r}`),...It.map(r=>`grid-lg-${r}`),...It.map(r=>`grid-xl-${r}`)]);function Qi({theme:r,ownerState:e}){let n;return r.breakpoints.keys.reduce((s,o)=>{let a={};if(e[o]&&(n=e[o]),!n)return s;if(n===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const i=dr({values:e.columns,breakpoints:r.breakpoints.values}),l=typeof i=="object"?i[o]:i;if(l==null)return s;const c=`${Math.round(n/l*1e8)/1e6}%`;let d={};if(e.container&&e.item&&e.columnSpacing!==0){const p=r.spacing(e.columnSpacing);if(p!=="0px"){const v=`calc(${c} + ${p})`;d={flexBasis:v,maxWidth:v}}}a={flexBasis:c,flexGrow:0,maxWidth:c,...d}}return r.breakpoints.values[o]===0?Object.assign(s,a):s[r.breakpoints.up(o)]=a,s},{})}function el({theme:r,ownerState:e}){const n=dr({values:e.direction,breakpoints:r.breakpoints.values});return zr({theme:r},n,s=>{const o={flexDirection:s};return s.startsWith("column")&&(o[`& > .${Nt.item}`]={maxWidth:"none"}),o})}function ys({breakpoints:r,values:e}){let n="";Object.keys(e).forEach(o=>{n===""&&e[o]!==0&&(n=o)});const s=Object.keys(r).sort((o,a)=>r[o]-r[a]);return s.slice(0,s.indexOf(n))}function tl({theme:r,ownerState:e}){const{container:n,rowSpacing:s}=e;let o={};if(n&&s!==0){const a=dr({values:s,breakpoints:r.breakpoints.values});let i;typeof a=="object"&&(i=ys({breakpoints:r.breakpoints.values,values:a})),o=zr({theme:r},a,(l,c)=>{const d=r.spacing(l);return d!=="0px"?{marginTop:`-${d}`,[`& > .${Nt.item}`]:{paddingTop:d}}:i!=null&&i.includes(c)?{}:{marginTop:0,[`& > .${Nt.item}`]:{paddingTop:0}}})}return o}function rl({theme:r,ownerState:e}){const{container:n,columnSpacing:s}=e;let o={};if(n&&s!==0){const a=dr({values:s,breakpoints:r.breakpoints.values});let i;typeof a=="object"&&(i=ys({breakpoints:r.breakpoints.values,values:a})),o=zr({theme:r},a,(l,c)=>{const d=r.spacing(l);if(d!=="0px"){const p=`-${d}`;return{width:`calc(100% + ${d})`,marginLeft:p,[`& > .${Nt.item}`]:{paddingLeft:d}}}return i!=null&&i.includes(c)?{}:{width:"100%",marginLeft:0,[`& > .${Nt.item}`]:{paddingLeft:0}}})}return o}function nl(r,e,n={}){if(!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[n[`spacing-xs-${String(r)}`]];const s=[];return e.forEach(o=>{const a=r[o];Number(a)>0&&s.push(n[`spacing-${o}-${String(a)}`])}),s}const sl=F("div",{name:"MuiGrid",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r,{container:s,direction:o,item:a,spacing:i,wrap:l,zeroMinWidth:c,breakpoints:d}=n;let p=[];s&&(p=nl(i,d,e));const v=[];return d.forEach(h=>{const y=n[h];y&&v.push(e[`grid-${h}-${String(y)}`])}),[e.root,s&&e.container,a&&e.item,c&&e.zeroMinWidth,...p,o!=="row"&&e[`direction-xs-${String(o)}`],l!=="wrap"&&e[`wrap-xs-${String(l)}`],...v]}})(({ownerState:r})=>({boxSizing:"border-box",...r.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...r.item&&{margin:0},...r.zeroMinWidth&&{minWidth:0},...r.wrap!=="wrap"&&{flexWrap:r.wrap}}),el,tl,rl,Qi);function ol(r,e){if(!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[`spacing-xs-${String(r)}`];const n=[];return e.forEach(s=>{const o=r[s];if(Number(o)>0){const a=`spacing-${s}-${String(o)}`;n.push(a)}}),n}const al=r=>{const{classes:e,container:n,direction:s,item:o,spacing:a,wrap:i,zeroMinWidth:l,breakpoints:c}=r;let d=[];n&&(d=ol(a,c));const p=[];c.forEach(h=>{const y=r[h];y&&p.push(`grid-${h}-${String(y)}`)});const v={root:["root",n&&"container",o&&"item",l&&"zeroMinWidth",...d,s!=="row"&&`direction-xs-${String(s)}`,i!=="wrap"&&`wrap-xs-${String(i)}`,...p]};return ce(v,Ji,e)},G=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiGrid"}),{breakpoints:o}=dt(),a=Zs(s),{className:i,columns:l,columnSpacing:c,component:d="div",container:p=!1,direction:v="row",item:h=!1,rowSpacing:y,spacing:x=0,wrap:b="wrap",zeroMinWidth:m=!1,...g}=a,S=y||x,f=c||x,C=u.useContext(Dn),D=p?l||12:C,E={},A={...g};o.keys.forEach(M=>{g[M]!=null&&(E[M]=g[M],delete A[M])});const B={...a,columns:D,container:p,direction:v,item:h,rowSpacing:S,columnSpacing:f,wrap:b,zeroMinWidth:m,spacing:x,...E,breakpoints:o.keys},T=al(B);return t.jsx(Dn.Provider,{value:D,children:t.jsx(sl,{ownerState:B,className:ee(T.root,i),as:d,ref:n,...A})})}),de=Qs({createStyledComponent:F("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(r,e)=>e.root}),componentName:"MuiGrid2",useThemeProps:r=>se({props:r,name:"MuiGrid2"})});function il(r){return ue("MuiLink",r)}const ll=le("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),cl=({theme:r,ownerState:e})=>{const n=e.color,s=ln(r,`palette.${n}`,!1)||e.color,o=ln(r,`palette.${n}Channel`);return"vars"in r&&o?`rgba(${o} / 0.4)`:Se(s,.4)},In={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},dl=r=>{const{classes:e,component:n,focusVisible:s,underline:o}=r,a={root:["root",`underline${Z(o)}`,n==="button"&&"button",s&&"focusVisible"]};return ce(a,il,e)},ul=F(w,{name:"MuiLink",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[`underline${Z(n.underline)}`],n.component==="button"&&e.button]}})(ne(({theme:r})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:n})=>e==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(r.palette).filter(lt()).map(([e])=>({props:{underline:"always",color:e},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette[e].mainChannel} / 0.4)`:Se(r.palette[e].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.4)`:Se(r.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.secondaryChannel} / 0.4)`:Se(r.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(r.vars||r).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ll.focusVisible}`]:{outline:"auto"}}}]}))),Or=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiLink"}),o=dt(),{className:a,color:i="primary",component:l="a",onBlur:c,onFocus:d,TypographyClasses:p,underline:v="always",variant:h="inherit",sx:y,...x}=s,[b,m]=u.useState(!1),g=D=>{sr(D.target)||m(!1),c&&c(D)},S=D=>{sr(D.target)&&m(!0),d&&d(D)},f={...s,color:i,component:l,focusVisible:b,underline:v,variant:h},C=dl(f);return t.jsx(ul,{color:i,className:ee(C.root,a),classes:p,component:l,onBlur:g,onFocus:S,ref:n,ownerState:f,variant:h,...x,sx:[...In[i]===void 0?[{color:i}]:[],...Array.isArray(y)?y:[y]],style:{...x.style,...v==="always"&&i!=="inherit"&&!In[i]&&{"--Link-underlineColor":cl({theme:o,ownerState:f})}}})});function pl(r,e,n=(s,o)=>s===o){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}const hl=2;function vs(r,e){return r-e}function Tn(r,e){const{index:n}=r.reduce((s,o,a)=>{const i=Math.abs(e-o);return s===null||i<s.distance||i===s.distance?{distance:i,index:a}:s},null)??{};return n}function qt(r,e){if(e.current!==void 0&&r.changedTouches){const n=r;for(let s=0;s<n.changedTouches.length;s+=1){const o=n.changedTouches[s];if(o.identifier===e.current)return{x:o.clientX,y:o.clientY}}return!1}return{x:r.clientX,y:r.clientY}}function ir(r,e,n){return(r-e)*100/(n-e)}function gl(r,e,n){return(n-e)*r+e}function ml(r){if(Math.abs(r)<1){const n=r.toExponential().split("e-"),s=n[0].split(".")[1];return(s?s.length:0)+parseInt(n[1],10)}const e=r.toString().split(".")[1];return e?e.length:0}function fl(r,e,n){const s=Math.round((r-n)/e)*e+n;return Number(s.toFixed(ml(e)))}function Pn({values:r,newValue:e,index:n}){const s=r.slice();return s[n]=e,s.sort(vs)}function Yt({sliderRef:r,activeIndex:e,setActive:n}){var o,a,i;const s=er(r.current);(!((o=r.current)!=null&&o.contains(s.activeElement))||Number((a=s==null?void 0:s.activeElement)==null?void 0:a.getAttribute("data-index"))!==e)&&((i=r.current)==null||i.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function Jt(r,e){return typeof r=="number"&&typeof e=="number"?r===e:typeof r=="object"&&typeof e=="object"?pl(r,e):!1}const xl={horizontal:{offset:r=>({left:`${r}%`}),leap:r=>({width:`${r}%`})},"horizontal-reverse":{offset:r=>({right:`${r}%`}),leap:r=>({width:`${r}%`})},vertical:{offset:r=>({bottom:`${r}%`}),leap:r=>({height:`${r}%`})}},yl=r=>r;let Xt;function An(){return Xt===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Xt=CSS.supports("touch-action","none"):Xt=!0),Xt}function vl(r){const{"aria-labelledby":e,defaultValue:n,disabled:s=!1,disableSwap:o=!1,isRtl:a=!1,marks:i=!1,max:l=100,min:c=0,name:d,onChange:p,onChangeCommitted:v,orientation:h="horizontal",rootRef:y,scale:x=yl,step:b=1,shiftStep:m=10,tabIndex:g,value:S}=r,f=u.useRef(void 0),[C,D]=u.useState(-1),[E,A]=u.useState(-1),[B,T]=u.useState(!1),M=u.useRef(0),[R,L]=Qn({controlled:S,default:n??c,name:"Slider"}),j=p&&((P,N,z)=>{const K=P.nativeEvent||P,be=new K.constructor(K.type,K);Object.defineProperty(be,"target",{writable:!0,value:{value:N,name:d}}),p(be,N,z)}),$=Array.isArray(R);let W=$?R.slice().sort(vs):[R];W=W.map(P=>P==null?c:Dt(P,c,l));const te=i===!0&&b!==null?[...Array(Math.floor((l-c)/b)+1)].map((P,N)=>({value:c+b*N})):i||[],Q=te.map(P=>P.value),[H,re]=u.useState(-1),he=u.useRef(null),ge=Br(y,he),Ve=P=>N=>{var K;const z=Number(N.currentTarget.getAttribute("data-index"));sr(N.target)&&re(z),A(z),(K=P==null?void 0:P.onFocus)==null||K.call(P,N)},ut=P=>N=>{var z;sr(N.target)||re(-1),A(-1),(z=P==null?void 0:P.onBlur)==null||z.call(P,N)},vt=(P,N)=>{const z=Number(P.currentTarget.getAttribute("data-index")),K=W[z],be=Q.indexOf(K);let J=N;if(te&&b==null){const Me=Q[Q.length-1];J>Me?J=Me:J<Q[0]?J=Q[0]:J=J<K?Q[be-1]:Q[be+1]}if(J=Dt(J,c,l),$){o&&(J=Dt(J,W[z-1]||-1/0,W[z+1]||1/0));const Me=J;J=Pn({values:W,newValue:J,index:z});let ze=z;o||(ze=J.indexOf(Me)),Yt({sliderRef:he,activeIndex:ze})}L(J),re(z),j&&!Jt(J,R)&&j(P,J,z),v&&v(P,J)},Ct=P=>N=>{var z;if(b!==null){const K=Number(N.currentTarget.getAttribute("data-index")),be=W[K];let J=null;(N.key==="ArrowLeft"||N.key==="ArrowDown")&&N.shiftKey||N.key==="PageDown"?J=Math.max(be-m,c):((N.key==="ArrowRight"||N.key==="ArrowUp")&&N.shiftKey||N.key==="PageUp")&&(J=Math.min(be+m,l)),J!==null&&(vt(N,J),N.preventDefault())}(z=P==null?void 0:P.onKeyDown)==null||z.call(P,N)};eo(()=>{var P;s&&he.current.contains(document.activeElement)&&((P=document.activeElement)==null||P.blur())},[s]),s&&C!==-1&&D(-1),s&&H!==-1&&re(-1);const X=P=>N=>{var z;(z=P.onChange)==null||z.call(P,N),vt(N,N.target.valueAsNumber)},je=u.useRef(void 0);let ve=h;a&&h==="horizontal"&&(ve+="-reverse");const Be=({finger:P,move:N=!1})=>{const{current:z}=he,{width:K,height:be,bottom:J,left:Me}=z.getBoundingClientRect();let ze;ve.startsWith("vertical")?ze=(J-P.y)/be:ze=(P.x-Me)/K,ve.includes("-reverse")&&(ze=1-ze);let Ie;if(Ie=gl(ze,c,l),b)Ie=fl(Ie,b,c);else{const kt=Tn(Q,Ie);Ie=Q[kt]}Ie=Dt(Ie,c,l);let Ze=0;if($){N?Ze=je.current:Ze=Tn(W,Ie),o&&(Ie=Dt(Ie,W[Ze-1]||-1/0,W[Ze+1]||1/0));const kt=Ie;Ie=Pn({values:W,newValue:Ie,index:Ze}),o&&N||(Ze=Ie.indexOf(kt),je.current=Ze)}return{newValue:Ie,activeIndex:Ze}},Fe=Tt(P=>{const N=qt(P,f);if(!N)return;if(M.current+=1,P.type==="mousemove"&&P.buttons===0){Ye(P);return}const{newValue:z,activeIndex:K}=Be({finger:N,move:!0});Yt({sliderRef:he,activeIndex:K,setActive:D}),L(z),!B&&M.current>hl&&T(!0),j&&!Jt(z,R)&&j(P,z,K)}),Ye=Tt(P=>{const N=qt(P,f);if(T(!1),!N)return;const{newValue:z}=Be({finger:N,move:!0});D(-1),P.type==="touchend"&&A(-1),v&&v(P,z),f.current=void 0,De()}),pt=Tt(P=>{if(s)return;An()||P.preventDefault();const N=P.changedTouches[0];N!=null&&(f.current=N.identifier);const z=qt(P,f);if(z!==!1){const{newValue:be,activeIndex:J}=Be({finger:z});Yt({sliderRef:he,activeIndex:J,setActive:D}),L(be),j&&!Jt(be,R)&&j(P,be,J)}M.current=0;const K=er(he.current);K.addEventListener("touchmove",Fe,{passive:!0}),K.addEventListener("touchend",Ye,{passive:!0})}),De=u.useCallback(()=>{const P=er(he.current);P.removeEventListener("mousemove",Fe),P.removeEventListener("mouseup",Ye),P.removeEventListener("touchmove",Fe),P.removeEventListener("touchend",Ye)},[Ye,Fe]);u.useEffect(()=>{const{current:P}=he;return P.addEventListener("touchstart",pt,{passive:An()}),()=>{P.removeEventListener("touchstart",pt),De()}},[De,pt]),u.useEffect(()=>{s&&De()},[s,De]);const hr=P=>N=>{var be;if((be=P.onMouseDown)==null||be.call(P,N),s||N.defaultPrevented||N.button!==0)return;N.preventDefault();const z=qt(N,f);if(z!==!1){const{newValue:J,activeIndex:Me}=Be({finger:z});Yt({sliderRef:he,activeIndex:Me,setActive:D}),L(J),j&&!Jt(J,R)&&j(N,J,Me)}M.current=0;const K=er(he.current);K.addEventListener("mousemove",Fe,{passive:!0}),K.addEventListener("mouseup",Ye)},Ft=ir($?W[0]:c,c,l),gr=ir(W[W.length-1],c,l)-Ft,Re=(P={})=>{const N=Pt(P),z={onMouseDown:hr(N||{})},K={...N,...z};return{...P,ref:ge,...K}},_t=P=>N=>{var K;(K=P.onMouseOver)==null||K.call(P,N);const z=Number(N.currentTarget.getAttribute("data-index"));A(z)},zt=P=>N=>{var z;(z=P.onMouseLeave)==null||z.call(P,N),A(-1)};return{active:C,axis:ve,axisProps:xl,dragging:B,focusedThumbIndex:H,getHiddenInputProps:(P={})=>{const N=Pt(P),z={onChange:X(N||{}),onFocus:Ve(N||{}),onBlur:ut(N||{}),onKeyDown:Ct(N||{})},K={...N,...z};return{tabIndex:g,"aria-labelledby":e,"aria-orientation":h,"aria-valuemax":x(l),"aria-valuemin":x(c),name:d,type:"range",min:r.min,max:r.max,step:r.step===null&&r.marks?"any":r.step??void 0,disabled:s,...P,...K,style:{...to,direction:a?"rtl":"ltr",width:"100%",height:"100%"}}},getRootProps:Re,getThumbProps:(P={})=>{const N=Pt(P),z={onMouseOver:_t(N||{}),onMouseLeave:zt(N||{})};return{...P,...N,...z}},marks:te,open:E,range:$,rootRef:ge,trackLeap:gr,trackOffset:Ft,values:W,getThumbStyle:P=>({pointerEvents:C!==-1&&C!==P?"none":void 0})}}const bl=r=>!r||!tr(r);function wl(r){return ue("MuiSlider",r)}const qe=le("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Sl=r=>{const{open:e}=r;return{offset:ee(e&&qe.valueLabelOpen),circle:qe.valueLabelCircle,label:qe.valueLabelLabel}};function jl(r){const{children:e,className:n,value:s}=r,o=Sl(r);return e?u.cloneElement(e,{className:ee(e.props.className)},t.jsxs(u.Fragment,{children:[e.props.children,t.jsx("span",{className:ee(o.offset,n),"aria-hidden":!0,children:t.jsx("span",{className:o.circle,children:t.jsx("span",{className:o.label,children:s})})})]})):null}function Rn(r){return r}const Cl=F("span",{name:"MuiSlider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[`color${Z(n.color)}`],n.size!=="medium"&&e[`size${Z(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(ne(({theme:r})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${qe.disabled}`]:{pointerEvents:"none",cursor:"default",color:(r.vars||r).palette.grey[400]},[`&.${qe.dragging}`]:{[`& .${qe.thumb}, & .${qe.track}`]:{transition:"none"}},variants:[...Object.entries(r.palette).filter(lt()).map(([e])=>({props:{color:e},style:{color:(r.vars||r).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),_l=F("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(r,e)=>e.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),kl=F("span",{name:"MuiSlider",slot:"Track",overridesResolver:(r,e)=>e.track})(ne(({theme:r})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:r.transitions.create(["left","width","bottom","height"],{duration:r.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(r.palette).filter(lt()).map(([e])=>({props:{color:e,track:"inverted"},style:{...r.vars?{backgroundColor:r.vars.palette.Slider[`${e}Track`],borderColor:r.vars.palette.Slider[`${e}Track`]}:{backgroundColor:Et(r.palette[e].main,.62),borderColor:Et(r.palette[e].main,.62),...r.applyStyles("dark",{backgroundColor:Rt(r.palette[e].main,.5)}),...r.applyStyles("dark",{borderColor:Rt(r.palette[e].main,.5)})}}}))]}))),Dl=F("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.thumb,e[`thumbColor${Z(n.color)}`],n.size!=="medium"&&e[`thumbSize${Z(n.size)}`]]}})(ne(({theme:r})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:r.transitions.create(["box-shadow","left","bottom"],{duration:r.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(r.vars||r).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${qe.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(r.palette).filter(lt()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${qe.focusVisible}`]:{...r.vars?{boxShadow:`0px 0px 0px 8px rgba(${r.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Se(r.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${qe.active}`]:{...r.vars?{boxShadow:`0px 0px 0px 14px rgba(${r.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Se(r.palette[e].main,.16)}`}}}}))]}))),Il=F(jl,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(r,e)=>e.valueLabel})(ne(({theme:r})=>({zIndex:1,whiteSpace:"nowrap",...r.typography.body2,fontWeight:500,transition:r.transitions.create(["transform"],{duration:r.transitions.duration.shortest}),position:"absolute",backgroundColor:(r.vars||r).palette.grey[600],borderRadius:2,color:(r.vars||r).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${qe.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${qe.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:r.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Tl=F("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:r=>ss(r)&&r!=="markActive",overridesResolver:(r,e)=>{const{markActive:n}=r;return[e.mark,n&&e.markActive]}})(ne(({theme:r})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(r.vars||r).palette.background.paper,opacity:.8}}]}))),Pl=F("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:r=>ss(r)&&r!=="markLabelActive",overridesResolver:(r,e)=>e.markLabel})(ne(({theme:r})=>({...r.typography.body2,color:(r.vars||r).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(r.vars||r).palette.text.primary}}]}))),Al=r=>{const{disabled:e,dragging:n,marked:s,orientation:o,track:a,classes:i,color:l,size:c}=r,d={root:["root",e&&"disabled",n&&"dragging",s&&"marked",o==="vertical"&&"vertical",a==="inverted"&&"trackInverted",a===!1&&"trackFalse",l&&`color${Z(l)}`,c&&`size${Z(c)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",c&&`thumbSize${Z(c)}`,l&&`thumbColor${Z(l)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ce(d,wl,i)},Rl=({children:r})=>r,El=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiSlider"}),o=ns(),{"aria-label":a,"aria-valuetext":i,"aria-labelledby":l,component:c="span",components:d={},componentsProps:p={},color:v="primary",classes:h,className:y,disableSwap:x=!1,disabled:b=!1,getAriaLabel:m,getAriaValueText:g,marks:S=!1,max:f=100,min:C=0,name:D,onChange:E,onChangeCommitted:A,orientation:B="horizontal",shiftStep:T=10,size:M="medium",step:R=1,scale:L=Rn,slotProps:j,slots:$,tabIndex:W,track:te="normal",value:Q,valueLabelDisplay:H="off",valueLabelFormat:re=Rn,...he}=s,ge={...s,isRtl:o,max:f,min:C,classes:h,disabled:b,disableSwap:x,orientation:B,marks:S,color:v,size:M,step:R,shiftStep:T,scale:L,track:te,valueLabelDisplay:H,valueLabelFormat:re},{axisProps:Ve,getRootProps:ut,getHiddenInputProps:vt,getThumbProps:Ct,open:X,active:je,axis:ve,focusedThumbIndex:Be,range:Fe,dragging:Ye,marks:pt,values:De,trackOffset:hr,trackLeap:Ft,getThumbStyle:gr}=vl({...ge,rootRef:n});ge.marked=pt.length>0&&pt.some(me=>me.label),ge.dragging=Ye,ge.focusedThumbIndex=Be;const Re=Al(ge),_t=($==null?void 0:$.root)??d.Root??Cl,zt=($==null?void 0:$.rail)??d.Rail??_l,mr=($==null?void 0:$.track)??d.Track??kl,fr=($==null?void 0:$.thumb)??d.Thumb??Dl,xr=($==null?void 0:$.valueLabel)??d.ValueLabel??Il,P=($==null?void 0:$.mark)??d.Mark??Tl,N=($==null?void 0:$.markLabel)??d.MarkLabel??Pl,z=($==null?void 0:$.input)??d.Input??"input",K=(j==null?void 0:j.root)??p.root,be=(j==null?void 0:j.rail)??p.rail,J=(j==null?void 0:j.track)??p.track,Me=(j==null?void 0:j.thumb)??p.thumb,ze=(j==null?void 0:j.valueLabel)??p.valueLabel,Ie=(j==null?void 0:j.mark)??p.mark,Ze=(j==null?void 0:j.markLabel)??p.markLabel,kt=(j==null?void 0:j.input)??p.input,Ms=at({elementType:_t,getSlotProps:ut,externalSlotProps:K,externalForwardedProps:he,additionalProps:{...bl(_t)&&{as:c}},ownerState:{...ge,...K==null?void 0:K.ownerState},className:[Re.root,y]}),$s=at({elementType:zt,externalSlotProps:be,ownerState:ge,className:Re.rail}),Ns=at({elementType:mr,externalSlotProps:J,additionalProps:{style:{...Ve[ve].offset(hr),...Ve[ve].leap(Ft)}},ownerState:{...ge,...J==null?void 0:J.ownerState},className:Re.track}),yr=at({elementType:fr,getSlotProps:Ct,externalSlotProps:Me,ownerState:{...ge,...Me==null?void 0:Me.ownerState},className:Re.thumb}),Ls=at({elementType:xr,externalSlotProps:ze,ownerState:{...ge,...ze==null?void 0:ze.ownerState},className:Re.valueLabel}),vr=at({elementType:P,externalSlotProps:Ie,ownerState:ge,className:Re.mark}),br=at({elementType:N,externalSlotProps:Ze,ownerState:ge,className:Re.markLabel}),Os=at({elementType:z,getSlotProps:vt,externalSlotProps:kt,ownerState:ge});return t.jsxs(_t,{...Ms,children:[t.jsx(zt,{...$s}),t.jsx(mr,{...Ns}),pt.filter(me=>me.value>=C&&me.value<=f).map((me,Te)=>{const wr=ir(me.value,C,f),Ut=Ve[ve].offset(wr);let ot;return te===!1?ot=De.includes(me.value):ot=te==="normal"&&(Fe?me.value>=De[0]&&me.value<=De[De.length-1]:me.value<=De[0])||te==="inverted"&&(Fe?me.value<=De[0]||me.value>=De[De.length-1]:me.value>=De[0]),t.jsxs(u.Fragment,{children:[t.jsx(P,{"data-index":Te,...vr,...!tr(P)&&{markActive:ot},style:{...Ut,...vr.style},className:ee(vr.className,ot&&Re.markActive)}),me.label!=null?t.jsx(N,{"aria-hidden":!0,"data-index":Te,...br,...!tr(N)&&{markLabelActive:ot},style:{...Ut,...br.style},className:ee(Re.markLabel,br.className,ot&&Re.markLabelActive),children:me.label}):null]},Te)}),De.map((me,Te)=>{const wr=ir(me,C,f),Ut=Ve[ve].offset(wr),ot=H==="off"?Rl:xr;return t.jsx(ot,{...!tr(ot)&&{valueLabelFormat:re,valueLabelDisplay:H,value:typeof re=="function"?re(L(me),Te):re,index:Te,open:X===Te||je===Te||H==="on",disabled:b},...Ls,children:t.jsx(fr,{"data-index":Te,...yr,className:ee(Re.thumb,yr.className,je===Te&&Re.active,Be===Te&&Re.focusVisible),style:{...Ut,...gr(Te),...yr.style},children:t.jsx(z,{"data-index":Te,"aria-label":m?m(Te):a,"aria-valuenow":L(me),"aria-labelledby":l,"aria-valuetext":g?g(L(me),Te):i,value:De[Te],...Os})})},Te)})]})});function Ml(r={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:s,open:o,resumeHideDuration:a}=r,i=Kn();u.useEffect(()=>{if(!o)return;function g(S){S.defaultPrevented||S.key==="Escape"&&(s==null||s(S,"escapeKeyDown"))}return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[o,s]);const l=Tt((g,S)=>{s==null||s(g,S)}),c=Tt(g=>{!s||g==null||i.start(g,()=>{l(null,"timeout")})});u.useEffect(()=>(o&&c(e),i.clear),[o,e,c,i]);const d=g=>{s==null||s(g,"clickaway")},p=i.clear,v=u.useCallback(()=>{e!=null&&c(a??e*.5)},[e,a,c]),h=g=>S=>{const f=g.onBlur;f==null||f(S),v()},y=g=>S=>{const f=g.onFocus;f==null||f(S),p()},x=g=>S=>{const f=g.onMouseEnter;f==null||f(S),p()},b=g=>S=>{const f=g.onMouseLeave;f==null||f(S),v()};return u.useEffect(()=>{if(!n&&o)return window.addEventListener("focus",v),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",v),window.removeEventListener("blur",p)}},[n,o,v,p]),{getRootProps:(g={})=>{const S={...Pt(r),...Pt(g)};return{role:"presentation",...g,...S,onBlur:h(S),onFocus:y(S),onMouseEnter:x(S),onMouseLeave:b(S)}},onClickAway:d}}function $l(r){return ue("MuiSnackbarContent",r)}le("MuiSnackbarContent",["root","message","action"]);const Nl=r=>{const{classes:e}=r;return ce({root:["root"],action:["action"],message:["message"]},$l,e)},Ll=F(ye,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(r,e)=>e.root})(ne(({theme:r})=>{const e=r.palette.mode==="light"?.8:.98,n=ro(r.palette.background.default,e);return{...r.typography.body2,color:r.vars?r.vars.palette.SnackbarContent.color:r.palette.getContrastText(n),backgroundColor:r.vars?r.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(r.vars||r).shape.borderRadius,flexGrow:1,[r.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Ol=F("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(r,e)=>e.message})({padding:"8px 0"}),Wl=F("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(r,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Bl=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiSnackbarContent"}),{action:o,className:a,message:i,role:l="alert",...c}=s,d=s,p=Nl(d);return t.jsxs(Ll,{role:l,square:!0,elevation:6,className:ee(p.root,a),ownerState:d,ref:n,...c,children:[t.jsx(Ol,{className:p.message,ownerState:d,children:i}),o?t.jsx(Wl,{className:p.action,ownerState:d,children:o}):null]})});function Fl(r){return ue("MuiSnackbar",r)}le("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const zl=r=>{const{classes:e,anchorOrigin:n}=r,s={root:["root",`anchorOrigin${Z(n.vertical)}${Z(n.horizontal)}`]};return ce(s,Fl,e)},En=F("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,e[`anchorOrigin${Z(n.anchorOrigin.vertical)}${Z(n.anchorOrigin.horizontal)}`]]}})(ne(({theme:r})=>({zIndex:(r.vars||r).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>e.anchorOrigin.vertical==="top",style:{top:8,[r.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>e.anchorOrigin.vertical!=="top",style:{bottom:8,[r.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[r.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[r.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="center",style:{[r.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),rn=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiSnackbar"}),o=dt(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{action:i,anchorOrigin:{vertical:l,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:d=null,children:p,className:v,ClickAwayListenerProps:h,ContentProps:y,disableWindowBlurListener:x=!1,message:b,onBlur:m,onClose:g,onFocus:S,onMouseEnter:f,onMouseLeave:C,open:D,resumeHideDuration:E,TransitionComponent:A=Fo,transitionDuration:B=a,TransitionProps:{onEnter:T,onExited:M,...R}={},...L}=s,j={...s,anchorOrigin:{vertical:l,horizontal:c},autoHideDuration:d,disableWindowBlurListener:x,TransitionComponent:A,transitionDuration:B},$=zl(j),{getRootProps:W,onClickAway:te}=Ml({...j}),[Q,H]=u.useState(!0),re=at({elementType:En,getSlotProps:W,externalForwardedProps:L,ownerState:j,additionalProps:{ref:n},className:[$.root,v]}),he=Ve=>{H(!0),M&&M(Ve)},ge=(Ve,ut)=>{H(!1),T&&T(Ve,ut)};return!D&&Q?null:t.jsx(Bo,{onClickAway:te,...h,children:t.jsx(En,{...re,children:t.jsx(A,{appear:!0,in:D,timeout:B,direction:l==="top"?"down":"up",onEnter:ge,onExited:he,...R,children:p||t.jsx(Bl,{message:b,action:i,...y})})})})}),Ne=no({createStyledComponent:F("div",{name:"MuiStack",slot:"Root",overridesResolver:(r,e)=>e.root}),useThemeProps:r=>se({props:r,name:"MuiStack"})});function Ul(r){return ue("MuiSwitch",r)}const Ee=le("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Hl=r=>{const{classes:e,edge:n,size:s,color:o,checked:a,disabled:i}=r,l={root:["root",n&&`edge${Z(n)}`,`size${Z(s)}`],switchBase:["switchBase",`color${Z(o)}`,a&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=ce(l,Ul,e);return{...e,...c}},Vl=F("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,n.edge&&e[`edge${Z(n.edge)}`],e[`size${Z(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Ee.thumb}`]:{width:16,height:16},[`& .${Ee.switchBase}`]:{padding:4,[`&.${Ee.checked}`]:{transform:"translateX(16px)"}}}}]}),Gl=F(zo,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.switchBase,{[`& .${Ee.input}`]:e.input},n.color!=="default"&&e[`color${Z(n.color)}`]]}})(ne(({theme:r})=>({position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:`${r.palette.mode==="light"?r.palette.common.white:r.palette.grey[300]}`,transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest}),[`&.${Ee.checked}`]:{transform:"translateX(20px)"},[`&.${Ee.disabled}`]:{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:`${r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[600]}`},[`&.${Ee.checked} + .${Ee.track}`]:{opacity:.5},[`&.${Ee.disabled} + .${Ee.track}`]:{opacity:r.vars?r.vars.opacity.switchTrackDisabled:`${r.palette.mode==="light"?.12:.2}`},[`& .${Ee.input}`]:{left:"-100%",width:"300%"}})),ne(({theme:r})=>({"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Se(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(r.palette).filter(lt(["light"])).map(([e])=>({props:{color:e},style:{[`&.${Ee.checked}`]:{color:(r.vars||r).palette[e].main,"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Se(r.palette[e].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ee.disabled}`]:{color:r.vars?r.vars.palette.Switch[`${e}DisabledColor`]:`${r.palette.mode==="light"?Et(r.palette[e].main,.62):Rt(r.palette[e].main,.55)}`}},[`&.${Ee.checked} + .${Ee.track}`]:{backgroundColor:(r.vars||r).palette[e].main}}}))]}))),ql=F("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(r,e)=>e.track})(ne(({theme:r})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:r.transitions.create(["opacity","background-color"],{duration:r.transitions.duration.shortest}),backgroundColor:r.vars?r.vars.palette.common.onBackground:`${r.palette.mode==="light"?r.palette.common.black:r.palette.common.white}`,opacity:r.vars?r.vars.opacity.switchTrack:`${r.palette.mode==="light"?.38:.3}`}))),Yl=F("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(r,e)=>e.thumb})(ne(({theme:r})=>({boxShadow:(r.vars||r).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Jl=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiSwitch"}),{className:o,color:a="primary",edge:i=!1,size:l="medium",sx:c,...d}=s,p={...s,color:a,edge:i,size:l},v=Hl(p),h=t.jsx(Yl,{className:v.thumb,ownerState:p});return t.jsxs(Vl,{className:ee(v.root,o),sx:c,ownerState:p,children:[t.jsx(Gl,{type:"checkbox",icon:h,checkedIcon:h,ref:n,ownerState:p,...d,classes:{...v,root:v.switchBase}}),t.jsx(ql,{className:v.track,ownerState:p})]})});function Xl(r){return ue("MuiTable",r)}le("MuiTable",["root","stickyHeader"]);const Kl=r=>{const{classes:e,stickyHeader:n}=r;return ce({root:["root",n&&"stickyHeader"]},Xl,e)},Zl=F("table",{name:"MuiTable",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,n.stickyHeader&&e.stickyHeader]}})(ne(({theme:r})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...r.typography.body2,padding:r.spacing(2),color:(r.vars||r).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),Mn="table",tt=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiTable"}),{className:o,component:a=Mn,padding:i="normal",size:l="medium",stickyHeader:c=!1,...d}=s,p={...s,component:a,padding:i,size:l,stickyHeader:c},v=Kl(p),h=u.useMemo(()=>({padding:i,size:l,stickyHeader:c}),[i,l,c]);return t.jsx(Uo.Provider,{value:h,children:t.jsx(Zl,{as:a,role:a===Mn?null:"table",ref:n,className:ee(v.root,o),ownerState:p,...d})})});function Ql(r){return ue("MuiTableBody",r)}le("MuiTableBody",["root"]);const ec=r=>{const{classes:e}=r;return ce({root:["root"]},Ql,e)},tc=F("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(r,e)=>e.root})({display:"table-row-group"}),rc={variant:"body"},$n="tbody",rt=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiTableBody"}),{className:o,component:a=$n,...i}=s,l={...s,component:a},c=ec(l);return t.jsx(qr.Provider,{value:rc,children:t.jsx(tc,{className:ee(c.root,o),as:a,ref:n,role:a===$n?null:"rowgroup",ownerState:l,...i})})});function nc(r){return ue("MuiTableContainer",r)}le("MuiTableContainer",["root"]);const sc=r=>{const{classes:e}=r;return ce({root:["root"]},nc,e)},oc=F("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(r,e)=>e.root})({width:"100%",overflowX:"auto"}),nt=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiTableContainer"}),{className:o,component:a="div",...i}=s,l={...s,component:a},c=sc(l);return t.jsx(oc,{ref:n,as:a,className:ee(c.root,o),ownerState:l,...i})});function ac(r){return ue("MuiTableHead",r)}le("MuiTableHead",["root"]);const ic=r=>{const{classes:e}=r;return ce({root:["root"]},ac,e)},lc=F("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(r,e)=>e.root})({display:"table-header-group"}),cc={variant:"head"},Nn="thead",st=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiTableHead"}),{className:o,component:a=Nn,...i}=s,l={...s,component:a},c=ic(l);return t.jsx(qr.Provider,{value:cc,children:t.jsx(lc,{as:a,className:ee(c.root,o),ref:n,role:a===Nn?null:"rowgroup",ownerState:l,...i})})});function dc(r){return ue("MuiTableRow",r)}const Ln=le("MuiTableRow",["root","selected","hover","head","footer"]),uc=r=>{const{classes:e,selected:n,hover:s,head:o,footer:a}=r;return ce({root:["root",n&&"selected",s&&"hover",o&&"head",a&&"footer"]},dc,e)},pc=F("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(ne(({theme:r})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Ln.hover}:hover`]:{backgroundColor:(r.vars||r).palette.action.hover},[`&.${Ln.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Se(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Se(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}}}))),On="tr",oe=u.forwardRef(function(e,n){const s=se({props:e,name:"MuiTableRow"}),{className:o,component:a=On,hover:i=!1,selected:l=!1,...c}=s,d=u.useContext(qr),p={...s,component:a,hover:i,selected:l,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},v=uc(p);return t.jsx(pc,{as:a,ref:n,className:ee(v.root,o),role:a===On?null:"row",ownerState:p,...c})});function nn({showBadge:r=!1,...e}){return t.jsx(Ho,{color:"error",variant:"dot",invisible:!r,sx:{[`& .${Vo.badge}`]:{right:2,top:2}},children:t.jsx(We,{size:"small",...e})})}const Wn={purchaseConfirmation:!0,pointEarned:!0,pointBalanceDrop:!0,orderIssue:!0,systemDrop:!0,applicationApproved:!0},bs=u.createContext(void 0),hc=({children:r})=>{const[e,n]=u.useState(()=>sessionStorage.getItem("isAuthenticated")==="true"),[s,o]=u.useState(()=>{const g=sessionStorage.getItem("user");try{return g?JSON.parse(g):null}catch{return null}}),[a,i]=u.useState(()=>sessionStorage.getItem("viewRole")||null),[l,c]=u.useState(!e),[d,p]=u.useState(()=>{const g=localStorage.getItem("notifySettings");try{return g?JSON.parse(g):Wn}catch{return Wn}}),v=u.useCallback(g=>{i(g),g?sessionStorage.setItem("viewRole",g):sessionStorage.removeItem("viewRole")},[]),h=u.useCallback((g,S)=>{g==="systemDrop"||g==="applicationApproved"||p(f=>{const C={...f,[g]:S};return localStorage.setItem("notifySettings",JSON.stringify(C)),C})},[]),y=u.useCallback(async()=>{var g,S,f,C,D;c(!0);try{const{data:E}=await U.get("/api/user/currentuser",{withCredentials:!0}),A={...E,sponsorDetails:E.roles.includes("Sponsor")?{sponsorID:((g=E.sponsorDetails)==null?void 0:g.sponsorID)??0,companyName:((S=E.sponsorDetails)==null?void 0:S.companyName)??"",IsPrimary:((f=E.sponsorDetails)==null?void 0:f.IsPrimary)??!1,joinDate:((C=E.sponsorDetails)==null?void 0:C.joinDate)??"",sponsorRole:((D=E.sponsorDetails)==null?void 0:D.sponsorRole)??0}:void 0};o(A),n(!0),sessionStorage.setItem("user",JSON.stringify(A)),sessionStorage.setItem("isAuthenticated","true")}catch{x()}finally{c(!1)}},[]),x=u.useCallback(()=>{o(null),n(!1),v(null),sessionStorage.clear()},[v]),b=u.useCallback(async()=>{try{await U.post("/api/system/logout",{},{withCredentials:!0}),o(null),n(!1),v(null),sessionStorage.clear()}catch{}},[v]);u.useEffect(()=>{e?c(!1):y()},[e,y]);const m={user:s,isAuthenticated:e,isLoading:l,viewRole:a,setViewRole:v,checkAuth:y,logout:b,notifySettings:d,updateNotifySetting:h};return t.jsx(bs.Provider,{value:m,children:r})},He=()=>{const r=u.useContext(bs);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},ws=u.createContext(void 0),Ss=()=>{const r=u.useContext(ws);if(!r)throw new Error("useView must be used within a ViewProvider");return r},gc=({children:r})=>{const[e,n]=u.useState("MAIN"),[s,o]=u.useState(null),[a,i]=u.useState(!1),l=u.useCallback(async p=>{const h={Driver:"/api/admin/drivers/details",Sponsor:"/api/admin/sponsors/details",Admin:"/api/admin/admins/details"}[p];if(!h)throw new Error("Invalid role");return(await U.get(h,{withCredentials:!0})).data.map(x=>({id:x.userId,userName:x.name,email:x.email,userType:p}))},[]),c=u.useCallback(async p=>{try{const v=await U.post("/api/admin/impersonate-user",{userId:p},{withCredentials:!0});o(v.data),i(!0)}catch{throw new Error("Failed to impersonate user")}},[]),d=u.useCallback(async()=>{try{await U.post("/api/admin/stop-impersonation",{},{withCredentials:!0}),o(null),i(!1)}catch{throw new Error("Failed to stop impersonation")}},[]);return t.jsx(ws.Provider,{value:{currentView:e,setCurrentView:n,isImpersonating:a,impersonatedUser:s,fetchUsersByRole:l,impersonateUser:c,stopImpersonation:d},children:r})},Bn={base:[{text:"Dashboard",icon:t.jsx(mo,{}),view:"MAIN"}],Guest:[{text:"Applications",icon:t.jsx(Sr,{}),view:"DRIVER_APPLICATION"}],Driver:[{text:"Applications",icon:t.jsx(Sr,{}),view:"DRIVER_APPLICATION"},{text:"Product Catalog",icon:t.jsx(cn,{}),path:"/catalog"},{text:"Points",icon:t.jsx(Ht,{}),view:"DRIVER_POINTS"},{text:"Activity",icon:t.jsx(Ht,{}),view:"DRIVER_ACTIVITY"},{text:"Profile",icon:t.jsx(Ht,{}),view:"PROFILE"}],Admin:[{text:"Manage Users",icon:t.jsx(dn,{}),nestedItems:[{text:"Drivers",icon:t.jsx(jr,{}),view:"MANAGE_DRIVERS"},{text:"Sponsors",icon:t.jsx(jr,{}),view:"MANAGE_SPONSORS"},{text:"Admins",icon:t.jsx(jr,{}),view:"MANAGE_ADMINS"}]},{text:"Reports Views",icon:t.jsx(un,{}),nestedItems:[{text:"General",icon:t.jsx(fo,{}),view:"ADMIN_REPORTS"},{text:"Audits",icon:t.jsx(pn,{}),view:"ADMIN_AUDIT_REPORTS"}]},{text:"Console",icon:t.jsx(as,{}),view:"ADMIN_CONSOLE"}],Sponsor:[{text:"Manage Drivers",icon:t.jsx(dn,{}),view:"SPONSOR_DRIVERS"},{text:"Approve/Reject Applications",icon:t.jsx(Sr,{}),view:"APPLICATION_MANAGER"},{text:"Product Catalog",icon:t.jsx(cn,{}),path:"/catalog"},{text:"Reports Views",icon:t.jsx(un,{}),nestedItems:[{text:"General",icon:t.jsx(Ht,{}),view:"SPONSOR_REPORTS"},{text:"Audits",icon:t.jsx(pn,{}),view:"SPONSOR_AUDIT_REPORTS"}]}]};function js(){const{setCurrentView:r}=Ss(),{user:e,viewRole:n}=He(),s=yt(),[o,a]=u.useState({}),i=u.useMemo(()=>{var p;return n||((p=e==null?void 0:e.roles)!=null&&p.length?e.roles[0]:"Guest")},[n,e==null?void 0:e.roles]),l=[...Bn.base,...Bn[i]||[]],c=p=>{a(v=>({...v,[p]:!v[p]}))},d=(p,v)=>{v?s(v):p&&r(p)};return t.jsx(Er,{dense:!0,children:l.map((p,v)=>t.jsxs(u.Fragment,{children:[t.jsx(Mr,{disablePadding:!0,children:t.jsxs(xn,{onClick:()=>p.nestedItems?c(p.text):d(p.view,p.path),children:[t.jsx(yn,{children:p.icon}),t.jsx(or,{primary:p.text}),p.nestedItems?o[p.text]?t.jsx(go,{}):t.jsx(os,{}):null]})}),p.nestedItems&&t.jsx($t,{in:o[p.text],timeout:"auto",unmountOnExit:!0,children:t.jsx(Er,{component:"div",disablePadding:!0,children:p.nestedItems.map((h,y)=>t.jsx(Mr,{disablePadding:!0,children:t.jsxs(xn,{onClick:()=>d(h.view,h.path),children:[t.jsx(yn,{children:h.icon}),t.jsx(or,{primary:h.text})]})},y))})})]},v))})}function mc(){return t.jsx(Ce,{variant:"outlined",sx:{m:1.5,p:1.5},children:t.jsxs(_e,{children:[t.jsx(xo,{fontSize:"small"}),t.jsx(w,{gutterBottom:!0,sx:{fontWeight:600},children:"Something"}),t.jsx(w,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"Earn points by driving safe!"}),t.jsx(q,{variant:"contained",size:"small",fullWidth:!0,children:"Make the pledge"})]})})}function fc({open:r,toggleDrawer:e}){const{user:n,viewRole:s,logout:o}=He(),a=s?{userName:`Viewing as ${s}`,email:`${s.toLowerCase()}@example.com`,userType:s}:n;return t.jsx(xs,{anchor:"right",open:r,onClose:e(!1),sx:{zIndex:i=>i.zIndex.drawer+1,[`& .${Wi.paper}`]:{backgroundImage:"none",backgroundColor:"background.paper"}},children:t.jsxs(Ne,{sx:{maxWidth:"70dvw",height:"100%"},children:[t.jsxs(Ne,{direction:"row",sx:{p:2,pb:0,gap:1},children:[a?t.jsxs(Ne,{direction:"row",sx:{gap:1,alignItems:"center",flexGrow:1,p:1},children:[t.jsx(jt,{alt:a.userName,src:"/static/images/avatar/7.jpg",sx:{width:24,height:24}}),t.jsx(w,{component:"p",variant:"h6",children:a.userName})]}):t.jsx(w,{variant:"body2",sx:{flexGrow:1,p:1},children:"Please log in to access more features."}),t.jsx(nn,{showBadge:!0,children:t.jsx(yo,{})})]}),t.jsx(ct,{}),t.jsxs(Ne,{sx:{flexGrow:1},children:[t.jsx(js,{}),t.jsx(ct,{})]}),t.jsx(mc,{}),a&&t.jsx(Ne,{sx:{p:2},children:t.jsx(q,{variant:"outlined",fullWidth:!0,startIcon:t.jsx(is,{}),onClick:o,children:"Logout"})})]})})}function xc(r){const{mode:e,systemMode:n,setMode:s}=Go(),o=dt(),[a,i]=u.useState(null),l=!!a,c=y=>{i(y.currentTarget)},d=()=>{i(null)},p=y=>()=>{s(y),d()};if(!e)return t.jsx(_,{"data-screenshot":"toggle-mode",sx:{verticalAlign:"bottom",display:"inline-flex",width:"2.25rem",height:"2.25rem",borderRadius:o.shape.borderRadius,border:"1px solid",borderColor:o.palette.divider}});const h=(n||e)==="light"?t.jsx(vo,{}):t.jsx(bo,{});return t.jsxs(u.Fragment,{children:[t.jsx(We,{"data-screenshot":"toggle-mode",onClick:c,disableRipple:!0,size:"small","aria-controls":l?"color-scheme-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,...r,children:h}),t.jsxs(cs,{anchorEl:a,id:"color-scheme-menu",open:l,onClose:d,onClick:d,PaperProps:{variant:"outlined",sx:{my:"4px"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[t.jsx(O,{selected:e==="system",onClick:p("system"),children:"System"}),t.jsx(O,{selected:e==="light",onClick:p("light"),children:"Light"}),t.jsx(O,{selected:e==="dark",onClick:p("dark"),children:"Dark"})]})]})}function yc(){const[r,e]=u.useState(!1);He();const n=s=>()=>{e(s)};return t.jsx(hs,{position:"fixed",sx:{zIndex:s=>s.zIndex.drawer+1,boxShadow:0,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",maxWidth:"100vw",overflow:"hidden"},children:t.jsxs(Yr,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:1,maxWidth:"100%",overflow:"hidden"},children:[t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1,flexShrink:0},children:[t.jsx(vc,{}),t.jsx(w,{variant:"h5",component:"a",href:"/",sx:{color:"text.primary",textDecoration:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"GitGud Drivers"})]}),t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:{xs:1,md:2},flexWrap:"wrap",justifyContent:"flex-end",width:{xs:"100%",md:"auto"}},children:[t.jsx(w,{component:mt,to:"/about",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"About"}),t.jsx(w,{component:mt,to:"/faq",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"FAQ"}),t.jsx(xc,{}),t.jsxs(_,{sx:{display:{xs:"block",md:"none"}},children:[t.jsx(nn,{"aria-label":"menu",onClick:n(!0),children:t.jsx(wo,{})}),t.jsx(fc,{open:r,toggleDrawer:n})]})]})]})})}function vc(){return t.jsx(_,{sx:{width:"1.5rem",height:"1.5rem",bgcolor:"black",borderRadius:"999px",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(135deg, hsl(210, 98%, 60%) 0%, hsl(210, 100%, 35%) 100%)",color:"hsla(210, 100%, 95%, 0.9)",border:"1px solid",borderColor:"hsl(210, 100%, 55%)",boxShadow:"inset 0 2px 5px rgba(255, 255, 255, 0.3)"},children:t.jsx(So,{color:"inherit",sx:{fontSize:"1rem"}})})}const Cs=Fr(),Fn=[...Cs.shadows],we={50:"hsl(210, 100%, 95%)",100:"hsl(210, 100%, 92%)",200:"hsl(210, 100%, 80%)",300:"hsl(210, 100%, 65%)",400:"hsl(210, 98%, 48%)",500:"hsl(210, 98%, 42%)",600:"hsl(210, 98%, 55%)",700:"hsl(210, 100%, 35%)",800:"hsl(210, 100%, 16%)",900:"hsl(210, 100%, 21%)"},fe={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},Ge={50:"hsl(120, 80%, 98%)",100:"hsl(120, 75%, 94%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",600:"hsl(120, 70%, 25%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},Qe={50:"hsl(45, 100%, 97%)",100:"hsl(45, 92%, 90%)",200:"hsl(45, 94%, 80%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",600:"hsl(45, 91%, 25%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},it={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",600:"hsl(0, 91%, 25%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},bc=(r,e=14)=>{Fn[1]="hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px";const n={h1:{fontSize:`${e*3.43}px`,fontWeight:600,lineHeight:1.2},h2:{fontSize:`${e*2.57}px`,fontWeight:600,lineHeight:1.2},h3:{fontSize:`${e*2.14}px`,lineHeight:1.2},h4:{fontSize:`${e*1.71}px`,fontWeight:600,lineHeight:1.5},h5:{fontSize:`${e*1.43}px`,fontWeight:600},h6:{fontSize:`${e*1.29}px`,fontWeight:600},body1:{fontSize:`${e}px`},body2:{fontSize:`${e}px`,fontWeight:400},caption:{fontSize:`${e*.86}px`,fontWeight:400}};return{palette:{mode:r,primary:{light:we[200],main:we[400],dark:we[700],contrastText:we[50]},secondary:{light:Ge[200],main:Ge[400],dark:Ge[700],contrastText:fe[50]},error:{light:it[300],main:it[500],dark:it[700]},warning:{light:Qe[300],main:Qe[400],dark:Qe[800]},success:{light:Ge[300],main:Ge[400],dark:Ge[800]},grey:{...fe},background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:fe[800],secondary:fe[600]},divider:Se(fe[300],.4),action:{hover:Se(fe[200],.2),selected:Se(fe[200],.3)}},typography:{fontFamily:['"Inter", "sans-serif"'].join(","),fontSize:e,...n},shadows:Fn,shape:{borderRadius:8}}},wc={light:{palette:{primary:{light:we[200],main:we[400],dark:we[700],contrastText:we[50]},info:{light:we[100],main:we[300],dark:we[600],contrastText:fe[50]},warning:{light:Qe[300],main:Qe[400],dark:Qe[800]},error:{light:it[300],main:it[400],dark:it[800]},success:{light:Ge[300],main:Ge[400],dark:Ge[800]},grey:{...fe},divider:Se(fe[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:fe[800],secondary:fe[600],warning:Qe[400]},action:{hover:Se(fe[200],.2),selected:`${Se(fe[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:we[50],light:we[300],main:we[400],dark:we[700]},info:{contrastText:we[300],light:we[500],main:we[700],dark:we[900]},warning:{light:Qe[400],main:Qe[500],dark:Qe[700]},error:{light:it[400],main:it[500],dark:it[700]},success:{light:Ge[400],main:Ge[500],dark:Ge[700]},grey:{...fe},divider:Se(fe[700],.6),background:{default:fe[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:fe[400]},action:{hover:Se(fe[600],.2),selected:Se(fe[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}};[...Cs.shadows.slice(2)];const Sc=r=>{switch(r){case"highContrast":return{palette:{text:{primary:"hsl(0, 0%, 100%)",secondary:"hsl(0, 0%, 90%)"},background:{default:"hsl(0, 0%, 10%)",paper:"hsl(0, 0%, 15%)"}}};case"RGColorblind":return{palette:{primary:{main:"hsl(220, 79%, 50%)"},secondary:{main:"hsl(51, 90%, 50%)"},success:{main:"hsl(180, 50%, 40%)"},warning:{main:"hsl(35, 90%, 60%)"},error:{main:"hsl(0, 70%, 50%)"}}};case"BYColorblind":return{palette:{primary:{main:"hsl(210, 80%, 40%)"},secondary:{main:"hsl(45, 75%, 50%)"},success:{main:"hsl(100, 40%, 50%)"},warning:{main:"hsl(60, 70%, 60%)"},error:{main:"hsl(10, 70%, 50%)"}}};case"monochrome":return{palette:{primary:{main:"hsl(0, 0%, 50%)"},text:{primary:"hsl(0, 0%, 20%)",secondary:"hsl(0, 0%, 50%)"}}};default:return{}}},Dr="appThemeSettings",_s=u.createContext(void 0),jc=()=>{const r=u.useContext(_s);if(!r)throw new Error("useAppTheme must be used within an AppThemeProvider");return r},Cc=({children:r})=>{const[e,n]=u.useState(()=>{try{const l=localStorage.getItem(Dr);return l?JSON.parse(l).fontSize:14}catch{return 14}}),[s,o]=u.useState(()=>{try{const l=localStorage.getItem(Dr);return l?JSON.parse(l).accessibilityProfile:"default"}catch{return"default"}});u.useEffect(()=>{const l={fontSize:e,accessibilityProfile:s};localStorage.setItem(Dr,JSON.stringify(l))},[e,s]);const a=u.useMemo(()=>{const l=bc("light",e),c=Sc(s),d=so(l,c||{});return Fr({...d,cssVariables:{colorSchemeSelector:"data-mui-color-scheme",cssVarPrefix:"template"},colorSchemes:wc})},[e,s]),i=u.useMemo(()=>({fontSize:e,setFontSize:n,accessibilityProfile:s,setAccessibilityProfile:o}),[e,s]);return t.jsx(_s.Provider,{value:i,children:t.jsxs(qo,{theme:a,children:[t.jsx(ur,{}),r]})})},_c=()=>{const{user:r}=He(),e=yt();if(!r)return t.jsx(_,{sx:{p:2},children:t.jsx(w,{variant:"body1","aria-label":"User not authenticated",children:"User not authenticated. Please log in to view the profile."})});const n=()=>{e("/change-password")},s=()=>{var o,a;return r.userType==="Driver"?t.jsxs(_,{children:[t.jsx(w,{variant:"body1",sx:{mb:1},children:t.jsx("strong",{children:"Driver Information:"})}),t.jsxs(w,{variant:"body2",children:[t.jsx("strong",{children:"License Number:"})," ","G1TGUD"]}),t.jsxs(w,{variant:"body2",children:[t.jsx("strong",{children:"Member Since:"})," ",r.createdAt||"Just now!"]})]}):r.userType==="Sponsor"?t.jsxs(_,{children:[t.jsx(w,{variant:"body1",sx:{mb:1},children:t.jsx("strong",{children:"Sponsor Information:"})}),t.jsxs(w,{variant:"body2",children:[t.jsx("strong",{children:"Company:"})," ",((o=r.sponsorDetails)==null?void 0:o.companyName)||"N/A"]}),t.jsxs(w,{variant:"body2",children:[t.jsx("strong",{children:"Company Sponsor Since:"})," ",((a=r.sponsorDetails)==null?void 0:a.joinDate)||0]}),t.jsxs(w,{variant:"body2",children:[t.jsx("strong",{children:"Member Since:"})," ",r.createdAt||"Just now!"]})]}):r.userType==="Admin"?t.jsxs(_,{children:[t.jsx(w,{variant:"body1",sx:{mb:1},children:t.jsx("strong",{children:"Admin Information:"})}),t.jsxs(w,{variant:"body2",children:[t.jsx("strong",{children:"Managed Roles:"})," ","Sponsors, Drivers, Guests"]}),t.jsxs(w,{variant:"body2",children:[t.jsx("strong",{children:"Member Since:"})," ",r.createdAt||"Just now!"]})]}):t.jsxs(_,{children:[t.jsx(w,{variant:"body1",children:t.jsx("strong",{children:"Guest Information:"})}),t.jsx(w,{variant:"body2",children:"Limited access. Please log in to view more details."})]})};return t.jsxs(_,{sx:{display:"flex",width:"100%",minHeight:"100vh"},children:[t.jsx(ur,{}),t.jsxs(_,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",ml:"15px",p:2},id:"profile-main",children:[t.jsx(Ne,{direction:"row",spacing:2,alignItems:"center",children:t.jsx(w,{variant:"h6",component:"h1",tabIndex:0,"aria-label":`Profile Page - Current user: ${r.userName}`,children:"Profile Page"})}),t.jsx(_,{sx:{mt:4},children:t.jsxs(de,{container:!0,spacing:2,children:[t.jsx(de,{size:{xs:12,sm:6,md:4},sx:{display:"flex",justifyContent:"center"},children:t.jsx(jt,{src:r.email||"",alt:`${r.userName}'s profile picture`,sx:{width:150,height:150},children:r.userName[0]})}),t.jsx(de,{size:{xs:12,md:8},children:t.jsxs(Ne,{spacing:2,children:[t.jsx(w,{variant:"h5",children:r.userName}),t.jsxs(w,{variant:"body1",color:"textSecondary",children:[t.jsx("strong",{children:"Email:"})," ",r.email]}),t.jsxs(w,{variant:"body1",color:"textSecondary",children:[t.jsx("strong",{children:"Role:"})," ",r.userType]}),s()]})})]})}),t.jsx(_,{sx:{mt:4},children:t.jsx(q,{variant:"contained",color:"primary",onClick:n,children:"Change Password"})})]})]})},kc=F(O)({margin:"2px"}),Ir=u.forwardRef(({to:r,children:e,onClick:n},s)=>t.jsx(O,{component:mt,to:r,ref:s,onClick:n,children:e}));function Dc(){const[r,e]=u.useState(null),{logout:n}=He(),s=!!r,o=l=>{e(l.currentTarget)},a=()=>{e(null)},i=()=>{n(),a()};return t.jsxs(t.Fragment,{children:[t.jsx(nn,{"aria-label":"Open menu",onClick:o,sx:{borderColor:"transparent"},children:t.jsx(jo,{})}),t.jsxs(cs,{anchorEl:r,id:"menu",open:s,onClose:a,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiList-root":{padding:"4px"},"& .MuiPaper-root":{padding:0}},children:[t.jsx(Ir,{to:"/profile",onClick:a,children:"Profile"}),t.jsx(ct,{}),t.jsx(Ir,{to:"/settings",onClick:a,children:"Settings"}),t.jsx(Ir,{to:"/feedback",onClick:a,children:"Feedback"}),t.jsx(ct,{}),t.jsxs(kc,{onClick:i,children:[t.jsx(is,{fontSize:"small"}),t.jsx(or,{children:"Logout"})]})]})]})}const zn=240;function Ic(){const{user:r,viewRole:e}=He(),n=e?{userName:`Viewing as ${e}`,email:`${e.toLowerCase()}@example.com`,userType:e}:r;return t.jsxs(_,{sx:{display:"flex"},children:[t.jsx(ur,{}),t.jsx(hs,{position:"fixed",sx:{zIndex:s=>s.zIndex.drawer+1}}),t.jsxs(xs,{variant:"permanent",sx:{display:{xs:"none",md:"block"},width:zn,flexShrink:0,"& .MuiDrawer-paper":{width:zn,boxSizing:"border-box"}},children:[t.jsx(Yr,{}),t.jsx(_,{sx:{overflow:"auto"},children:n&&t.jsxs(t.Fragment,{children:[t.jsxs(_,{sx:{display:"flex",alignItems:"center",p:2},children:[t.jsx(jt,{alt:n.userName,src:"/static/images/avatar/7.jpg",sx:{width:36,height:36}}),t.jsxs(_,{sx:{ml:2},children:[t.jsx(w,{variant:"body2",sx:{fontWeight:500,lineHeight:"16px"},children:n.userName}),t.jsx(w,{variant:"caption",sx:{color:"text.secondary"},children:n.email})]}),t.jsx(Dc,{})]}),t.jsx(ct,{}),t.jsx(js,{})]})})]})]})}const ks=u.createContext(null),Tc=({children:r})=>{const e=u.useRef(null),n=(o,a="polite")=>{e.current&&(e.current.setAttribute("aria-live",a),e.current.textContent=o,setTimeout(()=>{e.current&&(e.current.textContent="")},1e3))},s=o=>{const a=document.querySelector(o);a&&(a.focus(),n(`Focused ${a.getAttribute("aria-label")||"element"}`))};return u.useEffect(()=>{const o=a=>{var i;if(a.altKey)switch(a.key){case"h":a.preventDefault(),s("#dashboard-home");break;case"m":a.preventDefault(),s("#main-content");break;case"n":a.preventDefault(),s('[role="navigation"]');break;case"s":a.preventDefault(),s('[role="search"]');break}a.key==="Escape"&&((i=document.querySelector('[role="dialog"] [aria-label="Close"]'))==null||i.click())};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]),t.jsxs(ks.Provider,{value:{announce:n,focusElement:s},children:[t.jsx("div",{ref:e,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),r]})},Pc=()=>{const r=u.useContext(ks);if(!r)throw new Error("useAccessibility must be used within an AccessibilityProvider");return r},Tr=({icon:r,title:e,description:n})=>t.jsxs(ye,{elevation:3,sx:{p:3,height:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",transition:s=>s.transitions.create("transform",{duration:s.transitions.duration.shortest}),"&:hover":{transform:"translateY(-8px)",boxShadow:s=>s.shadows[6]}},children:[t.jsx(jt,{sx:{mb:2,width:72,height:72,bgcolor:"primary.main",color:"primary.contrastText"},children:r}),t.jsx(w,{variant:"h6",gutterBottom:!0,children:e}),t.jsx(w,{variant:"body2",color:"text.secondary",children:n})]}),Ac=()=>{const r=yt();return t.jsx(_,{sx:{background:e=>`linear-gradient(135deg, ${e.palette.background.default}, ${e.palette.background.paper})`,minHeight:"100vh",pt:8,pb:8},children:t.jsxs(ft,{maxWidth:"lg",children:[t.jsxs(_,{sx:{textAlign:"center",mb:8,p:6,borderRadius:3,backgroundColor:e=>e.palette.background.paper,boxShadow:e=>e.shadows[3],animation:e=>e.transitions.create("opacity",{duration:e.transitions.duration.standard})},children:[t.jsx(w,{variant:"h2",component:"h1",sx:{mb:3,fontWeight:700,background:e=>`linear-gradient(45deg, ${e.palette.primary.dark}, ${e.palette.primary.light})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"GitGud Drivers"}),t.jsx(w,{variant:"h6",color:"text.primary",sx:{mb:4,maxWidth:700,mx:"auto"},children:"Join a rewards program that helps professional drivers achieve excellence and unlock valuable rewards."}),t.jsxs(_,{children:[t.jsx(q,{variant:"contained",size:"large",onClick:()=>r("/register"),sx:{mr:2,px:5,py:2,textTransform:"none"},children:"Join Now"}),t.jsx(q,{variant:"outlined",size:"large",onClick:()=>r("/login"),sx:{px:5,py:2,textTransform:"none"},children:"Sign In"})]})]}),t.jsx(w,{variant:"h4",align:"center",gutterBottom:!0,sx:{mb:4,fontWeight:600,color:"primary.main"},children:"Why Join GitGud Drivers"}),t.jsxs(de,{container:!0,spacing:4,sx:{mb:6},children:[t.jsx(de,{size:{xs:12,sm:6,md:4},children:t.jsx(Tr,{icon:t.jsx(Co,{fontSize:"large"}),title:"Professional Drivers",description:"Join a community of drivers committed to excellence."})}),t.jsx(de,{size:{xs:12,sm:6,md:4},children:t.jsx(Tr,{icon:t.jsx(_o,{fontSize:"large"}),title:"Reward System",description:"Earn points for safety, customer satisfaction, and professionalism."})}),t.jsx(de,{size:{xs:12,sm:6,md:4},children:t.jsx(Tr,{icon:t.jsx(ko,{fontSize:"large"}),title:"Easy Process",description:"Simple onboarding and transparent tracking."})})]}),t.jsxs(_,{sx:{bgcolor:"background.paper",p:4,borderRadius:3,boxShadow:e=>e.shadows[2]},children:[t.jsx(w,{variant:"h5",align:"center",gutterBottom:!0,sx:{mb:4,fontWeight:600,color:"primary.main"},children:"Your Journey in 4 Steps"}),t.jsx(de,{container:!0,spacing:3,children:["Sign Up","Get Verified","Start Driving","Earn Rewards"].map((e,n)=>t.jsx(de,{size:{xs:12,sm:6,md:3},children:t.jsxs(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[t.jsx(jt,{sx:{mb:2,bgcolor:"primary.light",color:"primary.contrastText",width:56,height:56},children:n+1}),t.jsx(w,{variant:"body1",children:e})]})},n))})]})]})})},Kt=({icon:r,title:e,value:n})=>t.jsxs(G,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",p:2,borderBottom:"1px solid",borderColor:"divider",transition:"background-color 0.3s ease","&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(_,{sx:{mr:3,color:"primary.main",display:"flex",alignItems:"center"},children:r}),t.jsxs(_,{children:[t.jsx(w,{variant:"subtitle1",fontWeight:"bold",color:"text.secondary",children:e}),t.jsx(w,{variant:"body1",children:n})]})]}),Rc=()=>{const[r,e]=u.useState(null),[n,s]=u.useState(null),[o,a]=u.useState(!0);return u.useEffect(()=>{(async()=>{try{const l=await U.get("/api/system/about",{withCredentials:!0});e(l.data)}catch(l){s(l.message)}finally{a(!1)}})()},[]),n?t.jsx(ft,{maxWidth:"sm",children:t.jsxs(ye,{elevation:3,sx:{p:3,mt:4,textAlign:"center",backgroundColor:"error.light",color:"error.contrastText"},children:[t.jsx(w,{variant:"h6",children:"Error Loading Information"}),t.jsx(w,{children:n})]})}):t.jsx(ft,{maxWidth:"md",children:t.jsx(oo,{in:!o,timeout:500,children:t.jsxs(ye,{elevation:4,sx:{p:4,mt:4,borderRadius:2,background:"linear-gradient(145deg, #f0f4f8 0%, #ffffff 100%)"},children:[t.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,sx:{textAlign:"center",mb:4,fontWeight:600,color:"primary.main"},children:"About Our Product"}),o?t.jsxs(t.Fragment,{children:[t.jsx(Cr,{variant:"rectangular",width:"100%",height:60,sx:{mb:2}}),t.jsx(Cr,{variant:"rectangular",width:"100%",height:60,sx:{mb:2}}),t.jsx(Cr,{variant:"rectangular",width:"100%",height:60})]}):t.jsxs(G,{container:!0,spacing:2,children:[t.jsx(Kt,{icon:t.jsx(hn,{}),title:"Team",value:(r==null?void 0:r.team)||"N/A"}),t.jsx(Kt,{icon:t.jsx(Do,{}),title:"Version",value:(r==null?void 0:r.version.toString())||"N/A"}),t.jsx(Kt,{icon:t.jsx(Io,{}),title:"Release Date",value:r?new Date(r.release).toLocaleDateString():"N/A"}),t.jsx(Kt,{icon:t.jsx(hn,{}),title:"Product",value:(r==null?void 0:r.product)||"N/A"}),t.jsxs(G,{item:!0,xs:12,sx:{p:2,backgroundColor:"background.default",borderRadius:1},children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Description"}),t.jsx(w,{variant:"body1",children:(r==null?void 0:r.description)||"No description available."})]})]})]})})})},Ec=()=>{const r=yt(),e=Hr(),{checkAuth:n,isAuthenticated:s,isLoading:o}=He(),a=new URLSearchParams(e.search),i=a.get("step")==="2fa"?"2fa":"login",l=a.get("userId"),[c,d]=u.useState(i),[p,v]=u.useState(l),[h,y]=u.useState(!1),[x,b]=u.useState(""),[m,g]=u.useState(""),[S,f]=u.useState(""),[C,D]=u.useState(null);u.useEffect(()=>{s&&!o&&r("/dashboard")},[s,o,r]);const E=async T=>{var M,R;T.preventDefault(),y(!0),D(null);try{const L=await U.post("/api/system/login",{username:x.trim(),password:m},{withCredentials:!0});if(L.data.requiresTwoFactor){const j=new URLSearchParams;j.set("step","2fa"),j.set("userId",L.data.userId.toString()),d("2fa"),v(L.data.userId.toString()),r({pathname:"/login",search:j.toString()},{replace:!0})}else await n(),r("/dashboard")}catch(L){D(((R=(M=L.response)==null?void 0:M.data)==null?void 0:R.message)||"Login failed. Please try again.")}finally{y(!1)}},A=async T=>{var M,R,L;if(T.preventDefault(),!p){D("Invalid session. Please try logging in again."),r("/login",{replace:!0});return}y(!0),D(null);try{const j=await U.post("/api/system/verify-2fa",{userId:p.toString(),code:S.trim()},{withCredentials:!0});if(j.data.succeeded)await n(),r("/dashboard",{replace:!0});else throw new Error(j.data.message||"2FA verification failed")}catch(j){D(((R=(M=j.response)==null?void 0:M.data)==null?void 0:R.message)||"Verification failed. Please try again."),((L=j.response)==null?void 0:L.status)===401&&setTimeout(()=>{r("/login",{replace:!0})},2e3)}finally{y(!1)}},B=()=>{D(null),d("login"),v(null),f(""),r("/login",{replace:!0})};return s&&!o?null:t.jsxs(_,{component:"form",onSubmit:c==="login"?E:A,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[t.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,children:c==="login"?"Login":"2FA Verification"}),C&&t.jsx(Ae,{severity:"error",sx:{mb:2,width:"100%"},action:t.jsx(q,{color:"inherit",size:"small",onClick:B,children:"Start Over"}),children:C}),c==="login"?t.jsxs(t.Fragment,{children:[t.jsx(Y,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"username",value:x,onChange:T=>b(T.target.value),required:!0,disabled:h}),t.jsx(Y,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"current-password",value:m,onChange:T=>g(T.target.value),required:!0,disabled:h})]}):t.jsx(Y,{label:"2FA Code",variant:"outlined",margin:"normal",fullWidth:!0,value:S,onChange:T=>f(T.target.value),required:!0,disabled:h,autoFocus:!0}),t.jsx(q,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:h,children:h?t.jsx(Ke,{size:24}):c==="login"?"Log In":"Verify 2FA"}),c==="2fa"&&t.jsx(q,{variant:"text",color:"primary",onClick:B,disabled:h,children:"Back to Login"}),c==="login"&&t.jsxs(_,{sx:{textAlign:"center",mt:2},children:[t.jsx(Or,{component:mt,to:"/register",variant:"body2",sx:{display:"block",mb:1},children:"Don't have an account? Sign Up"}),t.jsx(Or,{component:mt,to:"/reset-password",variant:"body2",children:"Forgot Password? Click here to Reset it"})]})]})};var Mc=function(){function r(e){if(this._states=[{name:"Alabama",abbreviation:"AL",territory:!1,capital:"Montgomery",contiguous:!0},{name:"Alaska",abbreviation:"AK",territory:!1,capital:"Juneau",contiguous:!1},{name:"American Samoa",abbreviation:"AS",territory:!0,capital:"Pago Pago",contiguous:!1},{name:"Arizona",abbreviation:"AZ",territory:!1,capital:"Phoenix",contiguous:!0},{name:"Arkansas",abbreviation:"AR",territory:!1,capital:"Little Rock",contiguous:!0},{name:"California",abbreviation:"CA",territory:!1,capital:"Sacramento",contiguous:!0},{name:"Colorado",abbreviation:"CO",territory:!1,capital:"Denver",contiguous:!0},{name:"Connecticut",abbreviation:"CT",territory:!1,capital:"Hartford",contiguous:!0},{name:"Delaware",abbreviation:"DE",territory:!1,capital:"Dover",contiguous:!0},{name:"District Of Columbia",abbreviation:"DC",territory:!1,capital:"",contiguous:!0},{name:"Federated States Of Micronesia",abbreviation:"FM",territory:!0,capital:"Palikir",contiguous:!1},{name:"Florida",abbreviation:"FL",territory:!1,capital:"Tallahassee",contiguous:!0},{name:"Georgia",abbreviation:"GA",territory:!1,capital:"Atlanta",contiguous:!0},{name:"Guam",abbreviation:"GU",territory:!0,capital:"Hagåtña",contiguous:!1},{name:"Hawaii",abbreviation:"HI",territory:!1,capital:"Honolulu",contiguous:!1},{name:"Idaho",abbreviation:"ID",territory:!1,capital:"Boise",contiguous:!0},{name:"Illinois",abbreviation:"IL",territory:!1,capital:"Springfield",contiguous:!0},{name:"Indiana",abbreviation:"IN",territory:!1,capital:"Indianapolis",contiguous:!0},{name:"Iowa",abbreviation:"IA",territory:!1,capital:"Des Moines",contiguous:!0},{name:"Kansas",abbreviation:"KS",territory:!1,capital:"Topeka",contiguous:!0},{name:"Kentucky",abbreviation:"KY",territory:!1,capital:"Frankfort",contiguous:!0},{name:"Louisiana",abbreviation:"LA",territory:!1,capital:"Baton Rouge",contiguous:!0},{name:"Maine",abbreviation:"ME",territory:!1,capital:"Augusta",contiguous:!0},{name:"Marshall Islands",abbreviation:"MH",territory:!0,capital:"Majuro",contiguous:!1},{name:"Maryland",abbreviation:"MD",territory:!1,capital:"Annapolis",contiguous:!0},{name:"Massachusetts",abbreviation:"MA",territory:!1,capital:"Boston",contiguous:!0},{name:"Michigan",abbreviation:"MI",territory:!1,capital:"Lansing",contiguous:!0},{name:"Minnesota",abbreviation:"MN",territory:!1,capital:"Saint Paul",contiguous:!0},{name:"Mississippi",abbreviation:"MS",territory:!1,capital:"Jackson",contiguous:!0},{name:"Missouri",abbreviation:"MO",territory:!1,capital:"Jefferson City",contiguous:!0},{name:"Montana",abbreviation:"MT",territory:!1,capital:"Helena",contiguous:!0},{name:"Nebraska",abbreviation:"NE",territory:!1,capital:"Lincoln",contiguous:!0},{name:"Nevada",abbreviation:"NV",territory:!1,capital:"Carson City",contiguous:!0},{name:"New Hampshire",abbreviation:"NH",territory:!1,capital:"Concord",contiguous:!0},{name:"New Jersey",abbreviation:"NJ",territory:!1,capital:"Trenton",contiguous:!0},{name:"New Mexico",abbreviation:"NM",territory:!1,capital:"Santa Fe",contiguous:!0},{name:"New York",abbreviation:"NY",territory:!1,capital:"Albany",contiguous:!0},{name:"North Carolina",abbreviation:"NC",territory:!1,capital:"Raleigh",contiguous:!0},{name:"North Dakota",abbreviation:"ND",territory:!1,capital:"Bismarck",contiguous:!0},{name:"Northern Mariana Islands",abbreviation:"MP",territory:!0,capital:"Saipan",contiguous:!1},{name:"Ohio",abbreviation:"OH",territory:!1,capital:"Columbus",contiguous:!0},{name:"Oklahoma",abbreviation:"OK",territory:!1,capital:"Oklahoma City",contiguous:!0},{name:"Oregon",abbreviation:"OR",territory:!1,capital:"Salem",contiguous:!0},{name:"Palau",abbreviation:"PW",territory:!0,capital:"Ngerulmud",contiguous:!1},{name:"Pennsylvania",abbreviation:"PA",territory:!1,capital:"Harrisburg",contiguous:!0},{name:"Puerto Rico",abbreviation:"PR",territory:!0,capital:"San Juan",contiguous:!1},{name:"Rhode Island",abbreviation:"RI",territory:!1,capital:"Providence",contiguous:!0},{name:"South Carolina",abbreviation:"SC",territory:!1,capital:"Columbia",contiguous:!0},{name:"South Dakota",abbreviation:"SD",territory:!1,capital:"Pierre",contiguous:!0},{name:"Tennessee",abbreviation:"TN",territory:!1,capital:"Nashville",contiguous:!0},{name:"Texas",abbreviation:"TX",territory:!1,capital:"Austin",contiguous:!0},{name:"Utah",abbreviation:"UT",territory:!1,capital:"Salt Lake City",contiguous:!0},{name:"Vermont",abbreviation:"VT",territory:!1,capital:"Montpelier",contiguous:!0},{name:"Virgin Islands",abbreviation:"VI",territory:!0,capital:"Charlotte Amalie",contiguous:!1},{name:"Virginia",abbreviation:"VA",territory:!1,capital:"Richmond",contiguous:!0},{name:"Washington",abbreviation:"WA",territory:!1,capital:"Olympia",contiguous:!0},{name:"West Virginia",abbreviation:"WV",territory:!1,capital:"Charleston",contiguous:!0},{name:"Wisconsin",abbreviation:"WI",territory:!1,capital:"Madison",contiguous:!0},{name:"Wyoming",abbreviation:"WY",territory:!1,capital:"Cheyenne",contiguous:!0}],this.selectorAliases={abbreviation:["a","abbreviations","abbr"],name:["names","state","states","s","n"],capital:["c","cap","capitals"]},this.defaultFormat={abbreviation:"name"},this.defaultSelector="abbreviation",this.defaultConfig={contiguousOnly:!1,includeTerritories:!1,exclude:[]},this.config=this.defaultConfig,e)for(var n in this.config)typeof e[n]<"u"&&(this.config[n]=e[n]);this.aliasKeys=Object.keys(this.selectorAliases),this.states=this.generateStates()}return r.prototype.generateStates=function(){for(var e=[],n=0,s=this._states;n<s.length;n++){var o=s[n];this.config.contiguousOnly&&!o.contiguous||!this.config.includeTerritories&&o.territory||this.config.exclude&&(this.config.exclude.indexOf(o.abbreviation)>=0||this.config.exclude.indexOf(o.name)>=0||this.config.exclude.indexOf(o.capital)>=0)||e.push(o)}return e},r.prototype.arrayOf=function(e){var n=e?this.findSelector(e):this.defaultSelector;if(!n)throw new Error("Invalid selector used: "+e);for(var s=[],o=0,a=this.states;o<a.length;o++){var i=a[o];s.push(i[n])}return s},r.prototype.format=function(e){for(var n=[],s=e?this.normalizeFormat(e):this.defaultFormat,o=0,a=this.states;o<a.length;o++){var i=a[o],l={};for(var c in s){var d=this.findSelector(c),p=this.findSelector(s[c]);!d&&c[0]==="$"&&(c=c.substr(1)),!p&&s[c][0]==="$"&&(s[c]=s[c].substr(1)),l[d?i[d]:c]=p?i[p]:s[c]}n.push(l)}return n},r.prototype.normalizeFormat=function(e){var n={};for(var s in e){var o=this.findSelector(s),a=this.findSelector(e[s]);n[o||s]=a||e[s]}return n},r.prototype.findSelector=function(e){var n=e.toLowerCase();if(this.aliasKeys.indexOf(n)>=0)return n;for(var s=0,o=this.aliasKeys;s<o.length;s++){var a=o[s];if(this.selectorAliases[a].indexOf(n)>=0)return a}return null},r}(),$c=Mc;const Nc=r=>{const[e,n]=u.useState(0);return u.useEffect(()=>{n((o=>{let a=0;return o.length>=8&&(a+=1),/[A-Z]/.test(o)&&(a+=1),/[0-9]/.test(o)&&(a+=1),/[^A-Za-z0-9]/.test(o)&&(a+=1),a/4*100})(r))},[r]),e},Lc=r=>r.length<8?"Password must be at least 8 characters long.":/[A-Z]/.test(r)?/[0-9]/.test(r)?/[^A-Za-z0-9]/.test(r)?null:"Password must contain at least one special character.":"Password must contain at least one number.":"Password must contain at least one uppercase letter.",Oc=()=>{const[r,e]=u.useState({username:"",firstName:"",lastName:"",email:"",password:"",state:""}),[n,s]=u.useState(!1),[o,a]=u.useState(!1),[i,l]=u.useState(null),[c,d]=u.useState(null),p=yt();Hr();const v=Nc(r.password),h=new $c().states,y=g=>{const{name:S,value:f}=g.target;e(C=>({...C,[S]:f}))},x=g=>{e(S=>({...S,state:g.target.value}))},b=g=>g<33?"error":g<66?"warning":"success",m=async g=>{var f,C;g.preventDefault(),l(null),d(null);const S=Lc(r.password);if(S){d(S);return}a(!0);try{const D=await U.post("/api/system/register",{...r,enable2FA:n,role:"Guest"});if(D.data.requiresTwoFactor&&D.data.userId){const E=new URLSearchParams;E.set("step","2fa"),E.set("userId",D.data.userId.toString()),p({pathname:"/login",search:E.toString()})}else p("/login")}catch(D){l(((C=(f=D.response)==null?void 0:f.data)==null?void 0:C.message)||"Registration failed. Please try again.")}finally{a(!1)}};return t.jsxs(_,{component:"form",onSubmit:m,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[t.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create Account"}),i&&t.jsx(Ae,{severity:"error",sx:{width:"100%",mb:2},children:i}),c&&t.jsx(Ae,{severity:"warning",sx:{width:"100%",mb:2},children:c}),t.jsxs(_,{sx:{display:"flex",gap:2,width:"100%"},children:[t.jsx(Y,{label:"First Name",name:"firstName",variant:"outlined",margin:"normal",fullWidth:!0,value:r.firstName,onChange:y,required:!0,disabled:o}),t.jsx(Y,{label:"Last Name",name:"lastName",variant:"outlined",margin:"normal",fullWidth:!0,value:r.lastName,onChange:y,required:!0,disabled:o})]}),t.jsx(Y,{label:"Username",name:"username",variant:"outlined",margin:"normal",fullWidth:!0,value:r.username,onChange:y,required:!0,disabled:o}),t.jsxs(_,{sx:{display:"flex",gap:2,width:"100%"},children:[t.jsx(Y,{label:"Email",name:"email",type:"email",variant:"outlined",margin:"normal",fullWidth:!0,value:r.email,onChange:y,required:!0,disabled:o}),t.jsxs(Le,{fullWidth:!0,margin:"normal",children:[t.jsx(Oe,{id:"state-select-label",children:"State"}),t.jsx(ke,{labelId:"state-select-label",id:"state-select",value:r.state,label:"State",onChange:x,required:!0,disabled:o,children:h.map(g=>t.jsx(O,{value:g.abbreviation,children:g.name},g.abbreviation))})]})]}),t.jsx(Y,{label:"Password",name:"password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,value:r.password,onChange:y,required:!0,disabled:o}),t.jsxs(_,{sx:{width:"100%",mt:1},children:[t.jsx(et,{variant:"determinate",value:v,color:b(v)}),t.jsxs(w,{variant:"body2",sx:{mt:1},children:["Password strength: ",v<33?"Weak":v<66?"Medium":"Strong"]})]}),t.jsx(Jr,{control:t.jsx(Xr,{checked:n,onChange:g=>s(g.target.checked),color:"primary",disabled:o}),label:"Enable Two-Factor Authentication (2FA)"}),t.jsx(q,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:o,children:o?t.jsx(Ke,{size:24}):"Register"}),t.jsx(Or,{component:mt,to:"/login",variant:"body2",children:"Already have an account? Sign in"})]})},Wc=()=>{const[r,e]=u.useState([]),[n,s]=u.useState([]),[o,a]=u.useState(!0),[i,l]=u.useState(null),[c,d]=u.useState(null),[p,v]=u.useState(!1);u.useEffect(()=>{h()},[]);const h=async()=>{var m;try{const g=await U.get("/api/driver/available-sponsors",{withCredentials:!0});e(Array.isArray(g.data)?g.data:[]),l(null)}catch(g){if(U.isAxiosError(g)){const S=((m=g.response)==null?void 0:m.data)||"Failed to load sponsors. Please try again later.";l(typeof S=="string"?S:"An error occurred.")}else l("Failed to load sponsors. Please try again later.");e([])}finally{a(!1)}},y=m=>{s(g=>g.includes(m)?g.filter(S=>S!==m):[...g,m])},x=async()=>{var m,g;if(n.length===0){l("Please select at least one sponsor");return}v(!0),l(null),d(null);try{const S=await U.post("/api/driver/apply-sponsors",n,{withCredentials:!0,headers:{"Content-Type":"application/json"}});d(S.data.message||"Application submitted successfully!"),s([])}catch(S){if(U.isAxiosError(S)){const f=((g=(m=S.response)==null?void 0:m.data)==null?void 0:g.message)||"Failed to submit application. Please try again.";l(typeof f=="string"?f:"Submission failed.")}else l("Failed to submit application. Please try again.")}finally{v(!1)}},b=u.useMemo(()=>r.map(m=>t.jsxs(_,{sx:{mb:2},children:[t.jsx(Jr,{control:t.jsx(Xr,{checked:n.includes(m.sponsorID),onChange:()=>y(m.sponsorID),color:"primary"}),label:t.jsxs(Ne,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(To,{color:"action"}),t.jsx(w,{children:m.companyName}),t.jsx(Bt,{icon:t.jsx(ls,{}),label:`$${m.pointDollarValue.toFixed(2)} per point`,size:"small",color:"primary",variant:"outlined"})]})}),t.jsx(ct,{sx:{ml:7,my:1}})]},m.sponsorID)),[r,n]);return o?t.jsx(_,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:t.jsx(Ke,{})}):t.jsxs(_,{sx:{maxWidth:800,mx:"auto",p:2},children:[t.jsx(w,{variant:"h5",component:"h1",gutterBottom:!0,children:"Driver Application"}),t.jsx(Ce,{sx:{mb:2,bgcolor:"background.paper"},children:t.jsxs(_e,{children:[t.jsxs(Ne,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[t.jsx(w,{variant:"subtitle1",children:"Available Reward Programs"}),t.jsx(Kr,{title:"Select multiple sponsors to join their reward programs",children:t.jsx(We,{size:"small",children:t.jsx(Po,{color:"action",fontSize:"small"})})})]}),i&&t.jsx(Ae,{severity:"error",sx:{mb:2},children:i}),c&&t.jsx(Ae,{severity:"success",sx:{mb:2},children:c}),t.jsx(Yi,{children:r.length===0?t.jsx(w,{color:"text.secondary",children:"No available sponsors found."}):b}),t.jsx(q,{variant:"contained",color:"primary",onClick:x,disabled:n.length===0||p,sx:{mt:2},children:p?t.jsx(Ke,{size:24,color:"inherit"}):`Submit Application (${n.length} Sponsor${n.length!==1?"s":""})`})]})})]})},Bc={0:"Submitted",1:"Approved",2:"Rejected"},Fc=()=>{const[r,e]=u.useState([]),[n,s]=u.useState(!0),[o,a]=u.useState(null),i=async()=>{var h;try{const y=await U.get("/api/sponsor/applications");e(y.data)}catch(y){a(((h=y.response)==null?void 0:h.data)||"Failed to load applications.")}finally{s(!1)}};u.useEffect(()=>{i()},[]);const l=async(h,y)=>{var x;try{await U.post(`/api/sponsor/applications/${h}/process?action=${y}`),e(b=>b.map(m=>m.applicationID===h?{...m,status:y==="approve"?1:2}:m))}catch(b){a(((x=b.response)==null?void 0:x.data)||`Failed to ${y} application.`)}};if(n)return t.jsx(Ke,{});if(o)return t.jsx(Ae,{severity:"error",children:o});const c=r.filter(h=>h.status===0),d=r.filter(h=>h.status===1),p=r.filter(h=>h.status===2),v=(h,y)=>h.length>0?h.map(x=>t.jsx(de,{size:{xs:12,sm:6,md:4},children:t.jsx(Ce,{children:t.jsxs(_e,{children:[t.jsxs(w,{variant:"subtitle1",children:["Application ID: ",x.applicationID]}),t.jsxs(w,{children:["User ID: ",x.userID]}),t.jsxs(w,{children:["Apply Date: ",x.applyDate]}),t.jsxs(w,{children:["Status: ",Bc[x.status]]}),x.status===0&&t.jsxs(t.Fragment,{children:[t.jsx(q,{color:"primary",variant:"contained",onClick:()=>l(x.applicationID,"approve"),children:"Approve"}),t.jsx(q,{color:"secondary",variant:"contained",onClick:()=>l(x.applicationID,"reject"),sx:{ml:1},children:"Reject"})]})]})})},x.applicationID)):t.jsx(w,{variant:"body2",color:"textSecondary",sx:{mt:2},children:y});return t.jsxs(ft,{children:[t.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"Driver Applications"}),t.jsxs(_,{children:[t.jsx(w,{variant:"h6",children:"Submitted Applications"}),t.jsx(ct,{sx:{mb:2}}),t.jsx(de,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:v(c,"No pending applications")})]}),t.jsxs(_,{sx:{mt:4},children:[t.jsx(w,{variant:"h6",children:"Approved Applications"}),t.jsx(ct,{sx:{mb:2}}),t.jsx(de,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:v(d,"No approved applications")})]}),t.jsxs(_,{sx:{mt:4},children:[t.jsx(w,{variant:"h6",children:"Rejected Applications"}),t.jsx(ct,{sx:{mb:2}}),t.jsx(de,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:v(p,"No rejected applications")})]})]})},zc=(r="Driver")=>{switch(r){case"Admin":return[{check:e=>e.length>=20,message:"At least 20 characters long"},{check:e=>/[0-9]/.test(e),message:"Contains at least one digit"},{check:e=>/[a-z]/.test(e),message:"Contains at least one lowercase letter"},{check:e=>/[A-Z]/.test(e),message:"Contains at least one uppercase letter"},{check:e=>/[^A-Za-z0-9]/.test(e),message:"Contains at least three symbols"},{check:e=>new Set(e).size>=3,message:"Contains at least 3 unique characters"},{check:e=>/^(?=.*[!@#$%^&*])(?=.*[0-9])(?=.*[A-Z]).*$/.test(e),message:"Combination of numbers, symbols, and uppercase"}];case"Driver":return[{check:e=>e.length>=8,message:"At least 8 characters long"},{check:e=>/[0-9]/.test(e),message:"Contains at least one digit"},{check:e=>/[a-z]/.test(e),message:"Contains at least one lowercase letter"},{check:e=>/[A-Z]/.test(e),message:"Contains at least one uppercase letter"},{check:e=>/[^A-Za-z0-9]/.test(e),message:"Contains at least one special character"},{check:e=>new Set(e).size>=1,message:"Contains at least 1 unique character"}];default:return[{check:e=>e.length>=6,message:"At least 6 characters long"},{check:e=>/[0-9]/.test(e),message:"Contains at least one digit"},{check:e=>/[a-zA-Z]/.test(e),message:"Contains at least one letter"},{check:e=>new Set(e).size>=1,message:"Contains at least 1 unique character"}]}},Ds=()=>{const[r,e]=u.useState(""),[n,s]=u.useState(""),[o,a]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState(!1),[p,v]=u.useState(!1),[h,y]=u.useState("Driver");u.useEffect(()=>{(async()=>{try{const S=await U.get("/api/user/currentuser");y(S.data.userType)}catch{}})()},[]);const x=zc(h),b=g=>x.every(S=>S.check(g)),m=async g=>{var S,f;if(g.preventDefault(),l(""),d(!1),v(!0),n!==o){l("New passwords do not match"),v(!1);return}if(!b(n)){l("New password does not meet all requirements"),v(!1);return}try{const C=await U.post("/api/user/change-password",{currentPassword:r,newPassword:n});d(!0),e(""),s(""),a("")}catch(C){U.isAxiosError(C)?l(((f=(S=C.response)==null?void 0:S.data)==null?void 0:f.message)||"Failed to change password"):l("An unexpected error occurred")}finally{v(!1)}};return t.jsxs(_,{sx:{width:"100%",maxWidth:400,margin:"auto",mt:4},children:[t.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"Change Password"}),i&&t.jsx(Ae,{severity:"error",sx:{mt:2,mb:2},children:i}),c&&t.jsx(Ae,{severity:"success",sx:{mt:2,mb:2},children:"Password changed successfully!"}),t.jsxs(_,{component:"form",onSubmit:m,noValidate:!0,sx:{mt:1},children:[t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,name:"currentPassword",label:"Current Password",type:"password",id:"currentPassword",autoComplete:"current-password",value:r,onChange:g=>e(g.target.value)}),t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New Password",type:"password",id:"newPassword",autoComplete:"new-password",value:n,onChange:g=>s(g.target.value)}),t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:o,onChange:g=>a(g.target.value)}),t.jsxs(_,{sx:{mt:4},children:[t.jsxs(w,{variant:"h6",children:["Password Requirements for ",h,":"]}),x.map((g,S)=>t.jsxs(_,{sx:{display:"flex",alignItems:"center",mt:1},children:[t.jsx(_,{sx:{flexGrow:1,mr:1},children:t.jsx(et,{variant:"determinate",value:g.check(n)?100:0,color:g.check(n)?"success":"error"})}),t.jsx(_,{sx:{minWidth:200},children:t.jsx(w,{variant:"body2",color:"text.secondary",children:g.message})})]},S))]}),t.jsx(q,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:p,children:p?t.jsx(Ke,{size:24}):"Change Password"})]})]})},Uc=()=>{const[r,e]=u.useState([]),[n,s]=u.useState(null),[o,a]=u.useState(""),[i,l]=u.useState(!0),[c,d]=u.useState("");u.useEffect(()=>{p()},[]),u.useEffect(()=>{o&&v(o)},[o]);const p=async()=>{try{l(!0);const m=await U.get("/api/driver/my-sponsors");e(m.data),m.data.length>0&&!o&&a(m.data[0].sponsorId),d("")}catch{d("Failed to load sponsor points data")}finally{l(!1)}},v=async m=>{try{const g=await U.get(`/api/driver/sponsor-points/${m}`);s(g.data)}catch{}},h=m=>{a(m.target.value)};if(i)return t.jsx(_,{sx:{width:"100%",mt:2},children:t.jsx(et,{})});if(c)return t.jsx(w,{color:"error",sx:{mt:2},children:c});if(r.length===0)return t.jsx(w,{sx:{mt:2},children:"You are not currently registered with any sponsors."});const y=r.find(m=>m.sponsorId===o),x=r.map(m=>({id:m.sponsorId,value:m.totalPoints,label:m.sponsorName})),b=(n==null?void 0:n.pointsHistory.map(m=>({date:new Date(m.date).toLocaleDateString(),points:m.points,reason:m.reason})).reverse())||[];return t.jsxs(_,{sx:{width:"100%",mb:2,mt:2},children:[t.jsxs(Le,{fullWidth:!0,sx:{mb:2},children:[t.jsx(Oe,{children:"Select Sponsor"}),t.jsx(ke,{value:o,label:"Select Sponsor",onChange:h,children:r.map(m=>t.jsx(O,{value:m.sponsorId,children:m.sponsorName},m.sponsorId))})]}),t.jsxs(G,{container:!0,spacing:3,children:[t.jsx(G,{item:!0,xs:12,children:t.jsx(ye,{children:t.jsx(nt,{children:t.jsxs(tt,{"aria-label":"sponsor points details",children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Sponsor"}),t.jsx(I,{align:"right",children:"Total Points"}),t.jsx(I,{align:"right",children:"Point Value ($)"}),t.jsx(I,{align:"right",children:"Total Value ($)"})]})}),t.jsx(rt,{children:y&&t.jsxs(oe,{children:[t.jsx(I,{children:y.sponsorName}),t.jsx(I,{align:"right",children:y.totalPoints.toLocaleString()}),t.jsxs(I,{align:"right",children:["$",y.pointDollarValue.toFixed(2)]}),t.jsxs(I,{align:"right",children:["$",(y.totalPoints*y.pointDollarValue).toFixed(2)]})]})})]})})})}),t.jsx(G,{item:!0,xs:12,md:6,children:t.jsxs(ye,{sx:{p:2},children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Points Distribution Across Sponsors"}),t.jsx(_,{sx:{width:"100%",height:300},children:t.jsx(Mt,{series:[{data:x,highlightScope:{faded:"global",highlighted:"item"},faded:{innerRadius:30,additionalRadius:-30}}],height:300})})]})}),t.jsx(G,{item:!0,xs:12,md:6,children:t.jsxs(ye,{sx:{p:2},children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Recent Points History"}),b.length>0?t.jsx(_,{sx:{width:"100%",height:300},children:t.jsx(Zr,{xAxis:[{scaleType:"band",data:b.map(m=>m.date),label:"Date"}],series:[{data:b.map(m=>m.points),label:"Points"}],height:300,tooltip:{trigger:"item"}})}):t.jsx(w,{children:"No history data available"})]})})]})]})},Hc=()=>{const[r,e]=u.useState(null),[n,s]=u.useState(!0),[o,a]=u.useState("");return u.useEffect(()=>{(async()=>{try{s(!0);const l=await U.get("/api/driver/activity");e(l.data)}catch{a("Failed to load driver activity")}finally{s(!1)}})()},[]),n?t.jsx(et,{}):o?t.jsx(w,{color:"error",children:o}):r?t.jsxs(_,{sx:{p:3},children:[r.pointValue&&t.jsx(Ce,{sx:{mb:4},children:t.jsxs(_e,{children:[t.jsxs(w,{variant:"h6",gutterBottom:!0,children:["Points Value - ",r.pointValue.sponsorName||"Unknown Sponsor"]}),t.jsxs(w,{children:["Current Balance: ",r.pointValue.totalPoints.toLocaleString()," points"]}),t.jsxs(w,{children:["Point Value: $",r.pointValue.pointValue.toFixed(2)," each"]}),t.jsxs(w,{variant:"h5",sx:{mt:2},children:["Total Value: $",r.pointValue.totalValue.toFixed(2)]})]})}),t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Activity History"}),t.jsx(nt,{component:ye,children:t.jsxs(tt,{children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Date"}),t.jsx(I,{children:"Type"}),t.jsx(I,{children:"Points"}),t.jsx(I,{children:"Details"}),t.jsx(I,{children:"Status"})]})}),t.jsx(rt,{children:r.transactions&&r.transactions.length>0?r.transactions.map((i,l)=>t.jsxs(oe,{children:[t.jsx(I,{children:i.date?new Date(i.date).toLocaleDateString():"N/A"}),t.jsx(I,{children:i.type}),t.jsxs(I,{sx:{color:i.points>0?"success.main":"error.main"},children:[i.points>0?"+":"",i.points]}),t.jsx(I,{children:i.reason}),t.jsx(I,{children:t.jsx(Bt,{label:"Ordered",color:i.status=="Ordered"?"success":i.status=="Cancelled"?"error":"default",size:"small"})})]},l)):t.jsx(oe,{children:t.jsx(I,{colSpan:5,align:"center",children:"No transactions available"})})})]})})]}):null};function Pr({icon:r,title:e,value:n,description:s}){return t.jsx(Ce,{sx:{height:"100%"},children:t.jsxs(_e,{children:[t.jsx(r,{sx:{color:"primary.main",mb:1}}),t.jsx(w,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600",mb:1},children:e}),t.jsx(w,{variant:"h4",sx:{mb:1},children:n}),t.jsx(w,{sx:{color:"text.secondary",mb:1},children:s})]})})}function Vc(){const r=dt(),e=Yo(r.breakpoints.down("sm")),[n,s]=u.useState([]),[o,a]=u.useState(null),[i,l]=u.useState(!0),[c,d]=u.useState(null),[p,v]=u.useState({}),[h,y]=u.useState(!1),[x,b]=u.useState(""),[m,g]=u.useState({open:!1,message:"",severity:"success"});u.useEffect(()=>{(async()=>{try{l(!0);const M=await fetch("/api/sponsor/drivers",{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch drivers");const R=await M.json();s(R);const L=await fetch("/api/sponsor/point-ratio",{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch point ratio");const j=await L.json();a(j)}catch(M){d(M instanceof Error?M.message:"An error occurred while fetching data")}finally{l(!1)}})()},[]);const S=async()=>{if(o)try{const T=await fetch("/api/sponsor/point-value",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(parseFloat(x))});if(!T.ok)throw new Error("Failed to update point value");const M=await T.json();a(R=>R?{...R,pointDollarValue:parseFloat(x)}:null),y(!1),g({open:!0,message:"Point value updated successfully",severity:"success"})}catch(T){g({open:!0,message:T instanceof Error?T.message:"Failed to update point value",severity:"error"})}},f=async(T,M)=>{if(o)try{const R=await fetch(`/api/sponsor/driver/${T}/points`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(M)});if(!R.ok)throw new Error("Failed to update driver points");const L=await R.json();s(j=>j.map($=>$.userID===T?{...$,totalPoints:M}:$)),v(j=>{const $={...j};return delete $[T],$}),g({open:!0,message:"Points updated successfully",severity:"success"})}catch(R){g({open:!0,message:R instanceof Error?R.message:"Failed to update points",severity:"error"})}},C=(o==null?void 0:o.pointDollarValue)!==void 0?`$${o.pointDollarValue.toFixed(2)}`:"$0.00";if(i)return t.jsx(_,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:t.jsx(Ke,{})});if(c)return t.jsx(Ae,{severity:"error",sx:{mb:2},children:c});const D=n.reduce((T,M)=>T+M.totalPoints,0),E=[...n].sort((T,M)=>M.totalPoints-T.totalPoints),A=Math.max(...n.map(T=>T.totalPoints)),B=n.map(T=>({id:T.userID,value:T.totalPoints,label:T.email}));return t.jsxs(_,{sx:{width:"100%"},children:[t.jsx(w,{component:"h2",variant:"h6",sx:{mb:2},children:"Sponsored Drivers Overview"}),t.jsxs(de,{container:!0,spacing:2,columns:12,children:[t.jsx(de,{size:{xs:12,lg:3},children:t.jsxs(Ne,{gap:2,direction:{xs:"column",sm:"row",lg:"column"},children:[t.jsx(Pr,{icon:gn,title:"Active Drivers",value:n.length.toString(),description:"Currently sponsored drivers"}),t.jsx(Pr,{icon:Ao,title:"Total Points",value:D.toLocaleString(),description:"Accumulated driver points"}),t.jsx(Pr,{icon:ls,title:"Point Value",value:C,description:t.jsx(q,{size:"small",startIcon:t.jsx(mn,{}),onClick:()=>{b((o==null?void 0:o.pointDollarValue.toString())||"0.00"),y(!0)},children:"Update Value"})})]})}),t.jsx(de,{size:{xs:12,lg:9},children:t.jsx(Ce,{sx:{height:"100%"},children:t.jsx(_e,{children:n.length===0?t.jsx(_,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:t.jsx(w,{color:"text.secondary",children:"No drivers found under your sponsorship."})}):t.jsx(nt,{children:t.jsxs(tt,{sx:{minWidth:650},children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Driver ID"}),t.jsx(I,{children:"Email"}),t.jsx(I,{align:"right",children:"Points"}),t.jsx(I,{align:"right",children:"Progress"})]})}),t.jsx(rt,{children:n.map(T=>t.jsxs(oe,{children:[t.jsx(I,{component:"th",scope:"row",children:T.userID}),t.jsx(I,{children:T.email}),t.jsx(I,{align:"right",children:p[T.userID]!==void 0?t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"flex-end"},children:[t.jsx(Y,{size:"small",type:"number",value:p[T.userID],onChange:M=>v(R=>({...R,[T.userID]:parseInt(M.target.value)||0})),inputProps:{min:0}}),t.jsx(We,{size:"small",color:"primary",onClick:()=>f(T.userID,p[T.userID]),children:t.jsx(Ro,{})}),t.jsx(We,{size:"small",color:"error",onClick:()=>v(M=>{const R={...M};return delete R[T.userID],R}),children:t.jsx(Eo,{})})]}):t.jsxs(_,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1},children:[T.totalPoints.toLocaleString(),t.jsx(We,{size:"small",onClick:()=>v(M=>({...M,[T.userID]:T.totalPoints})),children:t.jsx(mn,{})})]})}),t.jsx(I,{align:"right",sx:{width:"30%"},children:t.jsxs(_,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(_,{sx:{width:"100%",mr:1},children:t.jsx(et,{variant:"determinate",value:T.totalPoints/A*100})}),t.jsxs(w,{variant:"body2",color:"text.secondary",children:[Math.round(T.totalPoints/A*100),"%"]})]})})]},T.userID))})]})})})})}),n.length>0&&t.jsx(de,{size:12,children:t.jsx(Ce,{sx:{mt:2},children:t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Points Distribution"}),t.jsx(_,{sx:{height:400},children:t.jsx(Mt,{series:[{data:B,highlightScope:{faded:"global",highlighted:"item"}}],height:350})})]})})}),n.length>0&&t.jsx(de,{size:12,children:t.jsx(Ce,{sx:{mt:2},children:t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Driver Leaderboard"}),t.jsx(nt,{children:t.jsxs(tt,{children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Rank"}),t.jsx(I,{children:"Driver"}),t.jsx(I,{align:"right",children:"Points"}),t.jsx(I,{align:"right",children:"Progress"})]})}),t.jsx(rt,{children:E.map((T,M)=>t.jsxs(oe,{children:[t.jsx(I,{children:M+1}),t.jsx(I,{children:T.email}),t.jsx(I,{align:"right",children:T.totalPoints.toLocaleString()}),t.jsx(I,{align:"right",sx:{width:"30%"},children:t.jsxs(_,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(_,{sx:{width:"100%",mr:1},children:t.jsx(et,{variant:"determinate",value:T.totalPoints/A*100})}),t.jsxs(w,{variant:"body2",color:"text.secondary",children:[Math.round(T.totalPoints/A*100),"%"]})]})})]},T.userID))})]})})]})})})]}),t.jsx(w,{component:"h2",variant:"h6",sx:{mb:2,mt:4},children:"Driver Management"}),t.jsx(de,{container:!0,spacing:2,columns:12,children:t.jsx(de,{size:{xs:12,sm:6,lg:4},children:t.jsx(Ce,{sx:{height:"100%"},children:t.jsxs(_e,{children:[t.jsx(gn,{sx:{color:"primary.main",mb:1}}),t.jsx(w,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600"},children:"Manage Drivers"}),t.jsx(w,{sx:{color:"text.secondary",mb:2},children:"Add or remove drivers from your sponsorship."}),t.jsx(q,{variant:"contained",size:"small",color:"primary",endIcon:t.jsx(Mo,{}),fullWidth:e,children:"Manage Drivers"})]})})})}),t.jsxs(Ur,{open:h,onClose:()=>y(!1),children:[t.jsx(tn,{children:"Update Point Dollar Value"}),t.jsx(Qr,{children:t.jsx(Y,{autoFocus:!0,margin:"dense",label:"Dollar Value per Point",type:"number",fullWidth:!0,value:x,onChange:T=>b(T.target.value),inputProps:{step:"0.01",min:"0"}})}),t.jsxs(en,{children:[t.jsx(q,{onClick:()=>y(!1),children:"Cancel"}),t.jsx(q,{onClick:S,variant:"contained",children:"Update"})]})]}),t.jsx(rn,{open:m.open,autoHideDuration:6e3,onClose:()=>g(T=>({...T,open:!1})),message:m.message})]})}const Gc=()=>{const{driverId:r}=lo(),[e,n]=u.useState([]),[s,o]=u.useState(!0),[a,i]=u.useState("");return u.useEffect(()=>{(async()=>{try{o(!0);const c=await U.get("/api/driver/transactions");n(c.data),i("")}catch{i("Failed to load transaction data")}finally{o(!1)}})()},[r]),s?t.jsx(_,{sx:{width:"100%",mt:2},children:t.jsx(et,{})}):a?t.jsx(w,{color:"error",sx:{mt:2},children:a}):t.jsx(ye,{sx:{width:"100%",mb:2,mt:2},children:t.jsx(nt,{children:t.jsxs(tt,{"aria-label":"driver transactions table",children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Date"}),t.jsx(I,{children:"Points Changed"}),t.jsx(I,{children:"Reason"})]})}),t.jsx(rt,{children:e.map(l=>t.jsxs(oe,{children:[t.jsx(I,{children:new Date(l.transactionDate).toLocaleDateString()}),t.jsx(I,{children:l.pointsChanged}),t.jsx(I,{children:l.reason})]},l.transactionId))})]})})})};var Wr={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},s=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},o=function(c,d){var p=c.match(/(P+)(p+)?/)||[],v=p[1],h=p[2];if(!h)return n(c,d);var y;switch(v){case"P":y=d.dateTime({width:"short"});break;case"PP":y=d.dateTime({width:"medium"});break;case"PPP":y=d.dateTime({width:"long"});break;case"PPPP":default:y=d.dateTime({width:"full"});break}return y.replace("{{date}}",n(v,d)).replace("{{time}}",s(h,d))},a={p:s,P:o},i=a;e.default=i,r.exports=e.default})(Wr,Wr.exports);var qc=Wr.exports;const Yc=co(qc),Jc={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Xc={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Kc{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=Jc,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=i=>typeof i>"u"?new Date:i===null?null:new Date(i),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=i=>i,this.toJsDate=i=>i,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=i=>{const l=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return i.match(l).map(c=>{const d=c[0];if(d==="p"||d==="P"){const p=this.longFormatters[d];return p(c,this.locale.formatLong)}return c}).join("")},this.formatNumber=i=>i,this.getDayOfWeek=i=>i.getDay()+1;const{locale:n,formats:s,longFormatters:o,lib:a}=e;this.locale=n,this.formats=ao({},Xc,s),this.longFormatters=o,this.lib=a||"date-fns"}}class Is extends Kc{constructor({locale:e,formats:n}={}){super({locale:e??Jo,formats:n,longFormatters:Yc}),this.parse=(s,o)=>s===""?null:Xo(s,o,new Date,{locale:this.locale}),this.isValid=s=>s==null?!1:Ko(s),this.format=(s,o)=>this.formatByString(s,this.formats[o]),this.formatByString=(s,o)=>$r(s,o,{locale:this.locale}),this.isEqual=(s,o)=>s===null&&o===null?!0:s===null||o===null?!1:Zo(s,o),this.isSameYear=(s,o)=>Qo(s,o),this.isSameMonth=(s,o)=>ea(s,o),this.isSameDay=(s,o)=>ta(s,o),this.isSameHour=(s,o)=>ra(s,o),this.isAfter=(s,o)=>_r(s,o),this.isAfterYear=(s,o)=>_r(s,vn(o)),this.isAfterDay=(s,o)=>_r(s,bn(o)),this.isBefore=(s,o)=>kr(s,o),this.isBeforeYear=(s,o)=>kr(s,this.startOfYear(o)),this.isBeforeDay=(s,o)=>kr(s,this.startOfDay(o)),this.isWithinRange=(s,[o,a])=>na(s,{start:o,end:a}),this.startOfYear=s=>sa(s),this.startOfMonth=s=>oa(s),this.startOfWeek=s=>aa(s,{locale:this.locale}),this.startOfDay=s=>ia(s),this.endOfYear=s=>vn(s),this.endOfMonth=s=>la(s),this.endOfWeek=s=>ca(s,{locale:this.locale}),this.endOfDay=s=>bn(s),this.addYears=(s,o)=>da(s,o),this.addMonths=(s,o)=>ua(s,o),this.addWeeks=(s,o)=>pa(s,o),this.addDays=(s,o)=>ha(s,o),this.addHours=(s,o)=>ga(s,o),this.addMinutes=(s,o)=>ma(s,o),this.addSeconds=(s,o)=>fa(s,o),this.getYear=s=>xa(s),this.getMonth=s=>ya(s),this.getDate=s=>va(s),this.getHours=s=>ba(s),this.getMinutes=s=>wa(s),this.getSeconds=s=>Sa(s),this.getMilliseconds=s=>ja(s),this.setYear=(s,o)=>Ca(s,o),this.setMonth=(s,o)=>_a(s,o),this.setDate=(s,o)=>ka(s,o),this.setHours=(s,o)=>Da(s,o),this.setMinutes=(s,o)=>Ia(s,o),this.setSeconds=(s,o)=>Ta(s,o),this.setMilliseconds=(s,o)=>Pa(s,o),this.getDaysInMonth=s=>Aa(s),this.getWeekArray=s=>{const o=this.startOfWeek(this.startOfMonth(s)),a=this.endOfWeek(this.endOfMonth(s));let i=0,l=o;const c=[];for(;this.isBefore(l,a);){const d=Math.floor(i/7);c[d]=c[d]||[],c[d].push(l),l=this.addDays(l,1),i+=1}return c},this.getWeekNumber=s=>Ra(s,{locale:this.locale}),this.getYearRange=([s,o])=>{const a=this.startOfYear(s),i=this.endOfYear(o),l=[];let c=a;for(;this.isBefore(c,i);)l.push(c),c=this.addYears(c,1);return l}}}const Ts=({dateRange:r,setDateRange:e})=>{const[n,s]=r,[o,a]=u.useState(!1),i=l=>{const c=new Date,d=new Date;d.setDate(c.getDate()-l),e([d,c])};return t.jsx(ds,{dateAdapter:Is,children:t.jsxs(Ne,{direction:"column",spacing:2,alignItems:"flex-start",sx:{mb:2},children:[t.jsx(Jr,{control:t.jsx(Xr,{checked:o,onChange:()=>a(!o)}),label:"Custom Date Range"}),o?t.jsxs(Ne,{direction:"row",spacing:2,alignItems:"center",children:[t.jsxs(_,{display:"flex",alignItems:"center",gap:1,children:[t.jsx(fn,{fontSize:"small"}),t.jsx(ar,{label:"Start",value:n,onChange:l=>e([l,s]),disableFuture:!0})]}),t.jsxs(_,{display:"flex",alignItems:"center",gap:1,children:[t.jsx(fn,{fontSize:"small"}),t.jsx(ar,{label:"End",value:s,onChange:l=>e([n,l]),disableFuture:!0})]})]}):t.jsxs(Ne,{direction:"row",spacing:1,children:[t.jsx(q,{variant:"outlined",size:"small",onClick:()=>i(7),children:"Last 7 Days"}),t.jsx(q,{variant:"outlined",size:"small",onClick:()=>i(30),children:"Last 30 Days"}),t.jsx(q,{variant:"outlined",size:"small",onClick:()=>i(365),children:"Last Year"})]})]})})};function Ps({chartType:r,title:e,viewType:n,data:s,categoryKey:o="category",valueKey:a="value",stackKey:i="group"}){const l=dt(),c=()=>{const p=Array.from(new Set(s.map(y=>y[o]))),v={};s.forEach(y=>{const x=y[i]||"Default";v[x]||(v[x]=Array(p.length).fill(0));const b=p.indexOf(y[o]);b>=0&&(v[x][b]+=y[a]||0)});const h=Object.entries(v).map(([y,x])=>({label:y,data:x,color:l.palette.secondary.main}));return t.jsx(Zr,{xAxis:[{scaleType:"band",data:p}],series:h,height:300,grid:{horizontal:!0}})},d=()=>{if(n==="summary")return t.jsx(Mt,{series:[{data:s.map(p=>({id:p[o]||"Unknown",value:p[a]||0,label:p[o]||"Unknown"}))}],height:300});if(n==="detail"){const p={};s.forEach(h=>{const y=h[i]||"Default";p[y]||(p[y]=[]),p[y].push({id:h[o]||"Unknown",value:h[a]||0,label:h[o]||"Unknown"})});const v=Object.entries(p).map(([h,y])=>({id:h,value:y.reduce((x,b)=>x+b.value,0),label:h,children:y}));return t.jsx(Mt,{series:[{data:v}],height:300})}return null};return t.jsxs(_,{children:[t.jsx(w,{variant:"h6",align:"center",gutterBottom:!0,children:e}),r==="bar"?c():d()]})}function Zc({columns:r,fetchData:e,defaultPageSize:n=10,pageSizeOptions:s=[5,10,25,50],refreshTrigger:o}){const[a,i]=u.useState([]),[l,c]=u.useState(0),[d,p]=u.useState(0),[v,h]=u.useState(n),[y,x]=u.useState(!1),[b,m]=u.useState(null),g=async()=>{try{x(!0),m(null);const C=await e(d+1,v);i(C.data),c(C.totalCount)}catch{m("Failed to fetch data. Please try again later."),i([]),c(0)}finally{x(!1)}};u.useEffect(()=>{g()},[d,v,o]);const S=(C,D)=>{p(D)},f=C=>{const D=parseInt(C.target.value,10);h(D),p(0)};return t.jsxs(ye,{children:[b&&t.jsx(_,{sx:{p:2,color:"error.main"},children:b}),t.jsx(nt,{children:t.jsxs(tt,{children:[t.jsx(st,{children:t.jsx(oe,{children:r.map(C=>t.jsx(I,{children:C.label},C.id))})}),t.jsx(rt,{children:y?t.jsx(oe,{children:t.jsx(I,{colSpan:r.length,align:"center",sx:{py:3},children:t.jsx(Ke,{size:24})})}):a.length===0?t.jsx(oe,{children:t.jsx(I,{colSpan:r.length,align:"center",children:"No data found."})}):a.map((C,D)=>t.jsx(oe,{children:r.map(E=>t.jsx(I,{children:E.render?E.render(C):C[E.id]!==void 0&&C[E.id]!==null?String(C[E.id]):"N/A"},E.id))},D))})]})}),t.jsx(us,{component:"div",count:l,page:d,rowsPerPage:v,onPageChange:S,onRowsPerPageChange:f,rowsPerPageOptions:s})]})}const Qc=()=>{var S;const{user:r,isLoading:e,isAuthenticated:n}=He(),[s,o]=u.useState({viewType:"summary",reportType:"driver-points",auditCategory:null,selectedDriver:null,dateRange:[null,null]}),[a,i]=u.useState([]),[l,c]=u.useState([]),[d,p]=u.useState(null);u.useEffect(()=>{var C;if(!((C=r==null?void 0:r.sponsorDetails)!=null&&C.sponsorID)||e||!n)return;(async()=>{var D;try{const E=await U.get("/api/sponsor/drivers",{params:{sponsorID:(D=r.sponsorDetails)==null?void 0:D.sponsorID}});i(E.data)}catch{p("Failed to fetch drivers. Please try again later.")}})()},[r,e,n]);const v=async()=>{var f;if(!((f=r==null?void 0:r.sponsorDetails)!=null&&f.sponsorID)){p("Sponsor details are missing.");return}try{p(null);const C=s.reportType==="driver-points"?"/api/reports/driver-points":"/api/reports/audit-logs",[D,E]=s.dateRange,A={sponsorID:r.sponsorDetails.sponsorID,startDate:D?D.toISOString().split("T")[0]:"",endDate:E?E.toISOString().split("T")[0]:""};s.reportType==="driver-points"&&s.selectedDriver&&(A.driverID=s.selectedDriver),s.reportType==="audit-log"&&s.auditCategory&&(A.category=s.auditCategory);const B=await U.get(C,{params:A});if(s.reportType==="audit-log"){const T=B.data;c(T.logs)}else c(B.data)}catch{p("Failed to fetch reports. Please try again later.")}},h=()=>{if(s.reportType==="driver-points")return s.viewType==="summary"?l.map(f=>({category:f.driverName||"",value:f.totalPoints||0})):l.map(f=>({category:f.driverName||"",group:f.transactionDate||"",value:f.pointsChanged||0}));{const f={};return l.forEach(C=>{C.category!==void 0&&(f[C.category]=(f[C.category]||0)+1)}),Object.entries(f).map(([C,D])=>({category:y(Number(C)),value:D}))}},y=f=>({1:"Points",2:"User",3:"Purchase",4:"Application",5:"Product",6:"System"})[f]||"Unknown",x=()=>s.reportType==="driver-points"?[{id:"driverName",label:"Driver Name"},{id:"totalPoints",label:"Total Points"},{id:"transactionDate",label:"Date"},{id:"pointsChanged",label:"Points Changed"}]:[{id:"timestamp",label:"Timestamp"},{id:"category",label:"Category",render:f=>f.category!==void 0?y(f.category):"Unknown"},{id:"description",label:"Description",render:f=>{if(!f.description)return"N/A";try{const C=JSON.parse(f.description);return`${C.action}: ${C.reason} (${C.amount} points)`}catch{return f.description}}}],b=u.useCallback(async(f,C)=>{var M;if(!((M=r==null?void 0:r.sponsorDetails)!=null&&M.sponsorID))throw new Error("Sponsor details are missing.");const D=s.reportType==="driver-points"?"/api/reports/driver-points":"/api/reports/audit-logs",[E,A]=s.dateRange,B={sponsorID:r.sponsorDetails.sponsorID,startDate:E?E.toISOString().split("T")[0]:"",endDate:A?A.toISOString().split("T")[0]:"",page:f,pageSize:C};s.reportType==="driver-points"&&s.selectedDriver&&(B.driverID=s.selectedDriver),s.reportType==="audit-log"&&s.auditCategory&&(B.category=s.auditCategory);const T=await U.get(D,{params:B});if(s.reportType==="audit-log"){const R=T.data;return{data:R.logs,totalCount:R.totalCount}}return{data:T.data,totalCount:T.data.length}},[s,(S=r==null?void 0:r.sponsorDetails)==null?void 0:S.sponsorID]),m=async()=>{var f,C;try{const[D,E]=s.dateRange,A={reportType:s.reportType,metadata:{Sponsor:(f=r==null?void 0:r.sponsorDetails)==null?void 0:f.companyName,StartDate:D?D.toISOString().split("T")[0]:"N/A",EndDate:E?E.toISOString().split("T")[0]:"N/A",SelectedDriver:s.selectedDriver&&((C=a.find(L=>L.userID===s.selectedDriver))==null?void 0:C.name)||"All Drivers"},data:l},B=await U.post("/api/reports/export-csv",A,{responseType:"blob"}),T=new Blob([B.data],{type:"text/csv;charset=utf-8;"}),M=URL.createObjectURL(T),R=document.createElement("a");R.href=M,R.download=`${s.reportType}_report.csv`,R.click()}catch{p("Failed to export CSV. Please try again later.")}},g=async()=>{var f,C;try{const[D,E]=s.dateRange,A={reportType:s.reportType,metadata:{Sponsor:(f=r==null?void 0:r.sponsorDetails)==null?void 0:f.companyName,StartDate:D?D.toISOString().split("T")[0]:"N/A",EndDate:E?E.toISOString().split("T")[0]:"N/A",SelectedDriver:s.selectedDriver&&((C=a.find(L=>L.userID===s.selectedDriver))==null?void 0:C.name)||"All Drivers"},data:l},B=await U.post("/api/reports/export-pdf",A,{responseType:"blob"}),T=new Blob([B.data],{type:"application/pdf"}),M=URL.createObjectURL(T),R=document.createElement("a");R.href=M,R.download=`${s.reportType}_report.pdf`,R.click()}catch{p("Failed to export PDF. Please try again later.")}};return e?t.jsx(w,{children:"Loading sponsor details..."}):!n||!(r!=null&&r.sponsorDetails)?t.jsx(w,{color:"error",children:"Sponsor details are missing or user is not authenticated."}):t.jsxs(_,{sx:{padding:4},children:[t.jsxs(w,{variant:"h4",gutterBottom:!0,children:["Sponsor Reports (",r.sponsorDetails.companyName,")"]}),t.jsxs(_,{sx:{display:"flex",flexWrap:"wrap",gap:3,alignItems:"center",mb:3},children:[t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"Report Type"}),t.jsxs(ke,{value:s.reportType,onChange:f=>o(C=>({...C,reportType:f.target.value,auditCategory:null})),children:[t.jsx(O,{value:"driver-points",children:"Driver Points"}),t.jsx(O,{value:"audit-log",children:"Audit Log"})]})]}),s.reportType==="driver-points"&&t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"View Type"}),t.jsxs(ke,{value:s.viewType,onChange:f=>o(C=>({...C,viewType:f.target.value})),children:[t.jsx(O,{value:"summary",children:"Summary"}),t.jsx(O,{value:"detail",children:"Detailed"})]})]}),s.reportType==="driver-points"&&t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"Select Driver"}),t.jsxs(ke,{value:s.selectedDriver||"",onChange:f=>o(C=>({...C,selectedDriver:f.target.value?Number(f.target.value):null})),children:[t.jsx(O,{value:"",children:"All Drivers"}),a.map(f=>t.jsx(O,{value:f.userID,children:f.name},f.userID))]})]}),s.reportType==="audit-log"&&t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"Audit Category"}),t.jsxs(ke,{value:s.auditCategory||"",onChange:f=>o(C=>({...C,auditCategory:f.target.value||null})),children:[t.jsx(O,{value:"",children:"All Categories"}),t.jsx(O,{value:"User",children:"User"}),t.jsx(O,{value:"Points",children:"Points"}),t.jsx(O,{value:"Purchase",children:"Purchase"}),t.jsx(O,{value:"Application",children:"Application"}),t.jsx(O,{value:"Product",children:"Product"}),t.jsx(O,{value:"System",children:"System"})]})]})]}),t.jsx(_,{sx:{mb:3},children:t.jsx(Ts,{dateRange:s.dateRange,setDateRange:f=>o(C=>({...C,dateRange:f}))})}),t.jsxs(_,{sx:{display:"flex",gap:2,mb:4},children:[t.jsx(q,{variant:"contained",onClick:v,children:"Fetch Reports"}),t.jsx(q,{variant:"outlined",onClick:m,children:"Export CSV"}),t.jsx(q,{variant:"outlined",onClick:g,children:"Export PDF"})]}),d&&t.jsx(w,{color:"error",sx:{mb:2},children:d}),t.jsxs(_,{sx:{mt:4,mb:4},children:[t.jsx(w,{variant:"h5",gutterBottom:!0,children:"Report Chart"}),t.jsx(Ps,{chartType:s.reportType==="driver-points"?"bar":"pie",title:s.reportType==="driver-points"?s.viewType==="summary"?"Driver Points (Summary)":"Driver Points (Detailed)":"Audit Log Breakdown",viewType:s.viewType,data:h()})]}),t.jsxs(_,{sx:{mt:4},children:[t.jsx(w,{variant:"h5",gutterBottom:!0,children:"Report Details"}),t.jsx(Zc,{columns:x(),fetchData:b,refreshTrigger:s})]})]})},ed=()=>{const[r,e]=u.useState({reportType:"sales-sponsor",viewType:"summary",selectedSponsor:null,selectedDriver:null,dateRange:[null,null]}),[n,s]=u.useState([]),[o,a]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(null);u.useEffect(()=>{(async()=>{try{const b=await U.get("/api/sponsor/list-all");s(b.data)}catch{d("Failed to fetch sponsors. Please try again later.")}})()},[]),u.useEffect(()=>{r.reportType==="sales-driver"&&r.selectedSponsor?(async()=>{try{const b=await U.get("/api/sponsor/drivers",{params:{sponsorID:r.selectedSponsor}});a(b.data)}catch{d("Failed to fetch drivers. Please try again later.")}})():a([])},[r.reportType,r.selectedSponsor]);const p=async()=>{try{d(null);const[x,b]=r.dateRange,m=await U.get(`/api/reports/${r.reportType}`,{params:{sponsorID:r.selectedSponsor,driverID:r.selectedDriver,startDate:x?x.toISOString().split("T")[0]:"",endDate:b?b.toISOString().split("T")[0]:"",viewType:r.viewType}});l(Array.isArray(m.data)?m.data:[])}catch{d("Failed to fetch reports. Please try again later.")}},v=async()=>{var x,b;try{const[m,g]=r.dateRange,S={reportType:r.reportType,metadata:{SelectedSponsor:r.selectedSponsor&&((x=o.find(A=>A.userID===r.selectedSponsor))==null?void 0:x.driverName)||"All Sponsors",StartDate:m?m.toISOString().split("T")[0]:"N/A",EndDate:g?g.toISOString().split("T")[0]:"N/A",SelectedDriver:r.selectedDriver&&((b=o.find(A=>A.userID===r.selectedDriver))==null?void 0:b.driverName)||"All Drivers"},data:i},f=await U.post("/api/reports/export-csv",S,{responseType:"blob"}),C=new Blob([f.data],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(C),E=document.createElement("a");E.href=D,E.download=`${r.reportType}_report.csv`,E.click()}catch{d("Failed to export CSV. Please try again later.")}},h=async()=>{var x,b;try{const[m,g]=r.dateRange,S={reportType:r.reportType,metadata:{SelectedSponsor:r.selectedSponsor&&((x=o.find(A=>A.userID===r.selectedSponsor))==null?void 0:x.driverName)||"All Sponsors",StartDate:m?m.toISOString().split("T")[0]:"N/A",EndDate:g?g.toISOString().split("T")[0]:"N/A",SelectedDriver:r.selectedDriver&&((b=o.find(A=>A.userID===r.selectedDriver))==null?void 0:b.driverName)||"All Drivers"},data:i},f=await U.post("/api/reports/export-pdf",S,{responseType:"blob"}),C=new Blob([f.data],{type:"application/pdf"}),D=URL.createObjectURL(C),E=document.createElement("a");E.href=D,E.download=`${r.reportType}_report.pdf`,E.click()}catch{d("Failed to export PDF. Please try again later.")}},y=()=>{switch(r.reportType){case"sales-sponsor":return r.viewType==="summary"?i.map(x=>({category:x.sponsorName,value:x.totalSales})):i.map(x=>({category:x.sponsorName,group:x.transactionDate,value:x.saleAmount}));case"sales-driver":return r.viewType==="summary"?i.map(x=>({category:x.driverName,value:x.totalSales})):i.map(x=>({category:x.driverName,group:x.transactionDate,value:x.saleAmount}));case"invoice":return i.map(x=>({category:x.sponsorName,value:x.invoiceTotal}));default:return[]}};return t.jsxs(_,{sx:{padding:4},children:[t.jsx(w,{variant:"h4",gutterBottom:!0,children:"Admin Reports"}),t.jsxs(_,{sx:{display:"flex",gap:3,mb:3},children:[t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"Report Type"}),t.jsxs(ke,{value:r.reportType,onChange:x=>e(b=>({...b,reportType:x.target.value,selectedDriver:null})),children:[t.jsx(O,{value:"sales-sponsor",children:"Sales by Sponsor"}),t.jsx(O,{value:"sales-driver",children:"Sales by Driver"}),t.jsx(O,{value:"invoice",children:"Invoice Report"})]})]}),r.reportType!=="invoice"&&t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"View Type"}),t.jsxs(ke,{value:r.viewType,onChange:x=>e(b=>({...b,viewType:x.target.value})),children:[t.jsx(O,{value:"summary",children:"Summary"}),t.jsx(O,{value:"detail",children:"Detailed"})]})]}),t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"Select Sponsor"}),t.jsxs(ke,{value:r.selectedSponsor||"",onChange:x=>e(b=>({...b,selectedSponsor:Number(x.target.value)||null})),children:[t.jsx(O,{value:"",children:"All Sponsors"}),n.map(x=>t.jsx(O,{value:x.sponsorID,children:x.companyName},x.sponsorID))]})]}),r.reportType==="sales-driver"&&t.jsxs(Le,{sx:{minWidth:200},children:[t.jsx(Oe,{children:"Select Driver"}),t.jsxs(ke,{value:r.selectedDriver||"",onChange:x=>e(b=>({...b,selectedDriver:Number(x.target.value)||null})),children:[t.jsx(O,{value:"",children:"All Drivers"}),o.map(x=>t.jsx(O,{value:x.userID,children:x.driverName},x.userID))]})]})]}),t.jsx(Ts,{dateRange:r.dateRange,setDateRange:x=>e(b=>({...b,dateRange:x}))}),t.jsxs(_,{sx:{display:"flex",gap:2,mb:4},children:[t.jsx(q,{variant:"contained",onClick:p,children:"Fetch Reports"}),t.jsx(q,{variant:"outlined",onClick:v,children:"Export CSV"}),t.jsx(q,{variant:"outlined",onClick:h,children:"Export PDF"})]}),t.jsx(Ps,{chartType:"bar",title:`${r.reportType} Report (${r.viewType})`,viewType:r.viewType,data:y()})]})},td=()=>{const[r,e]=u.useState([]),[n,s]=u.useState([]),[o,a]=u.useState(!0),[i,l]=u.useState(null),[c,d]=u.useState("");u.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0);const[b,m]=await Promise.all([U.get("/api/admin/view-users/sponsors"),U.get("/api/admin/view-users/drivers")]);e(b.data);const g=new Map;m.data.forEach(S=>{S.sponsorRelationships.forEach(f=>{const C=g.get(f.sponsorId)||{sponsorId:f.sponsorId,sponsorName:f.sponsorName,totalDrivers:0,totalPoints:0,averagePoints:0};g.set(f.sponsorId,{...C,totalDrivers:C.totalDrivers+1,totalPoints:C.totalPoints+f.points,averagePoints:(C.totalPoints+f.points)/(C.totalDrivers+1)})})}),s(Array.from(g.values())),l(null)}catch{l("Failed to load sponsor data")}finally{a(!1)}},v=async(b,m)=>{try{await U.post("/api/admin/change-user-type",{userId:b,newUserType:m}),await fetchSponsors()}catch(g){l(g.message)}},h=async b=>{try{await U.delete(`/api/admin/remove-user/${b}`),await fetchSponsors()}catch(m){l(m.message)}},y=r.filter(b=>b.userName.toLowerCase().includes(c.toLowerCase())||b.email.toLowerCase().includes(c.toLowerCase())||b.companyName.toLowerCase().includes(c.toLowerCase()));if(o)return t.jsx(_,{sx:{width:"100%",mt:2},children:t.jsx(et,{})});if(i)return t.jsx(Ae,{severity:"error",sx:{mt:2},children:i});const x=n.map(b=>({id:b.sponsorId,value:b.totalDrivers,label:b.sponsorName}));return n.map(b=>({value:b.totalPoints,label:b.sponsorName})),t.jsxs(_,{sx:{width:"100%",p:3},children:[t.jsx(w,{variant:"h5",gutterBottom:!0,children:"Sponsor Management Dashboard"}),t.jsxs(G,{container:!0,spacing:3,sx:{mb:3},children:[t.jsx(G,{item:!0,xs:12,md:4,children:t.jsx(Ce,{children:t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Total Sponsors"}),t.jsx(w,{variant:"h3",children:r.length})]})})}),t.jsx(G,{item:!0,xs:12,md:4,children:t.jsx(Ce,{children:t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Total Drivers"}),t.jsx(w,{variant:"h3",children:n.reduce((b,m)=>b+m.totalDrivers,0)})]})})}),t.jsx(G,{item:!0,xs:12,md:4,children:t.jsx(Ce,{children:t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Total Points"}),t.jsx(w,{variant:"h3",children:n.reduce((b,m)=>b+m.totalPoints,0).toLocaleString()})]})})})]}),t.jsxs(G,{container:!0,spacing:3,sx:{mb:3},children:[t.jsx(G,{item:!0,xs:12,md:6,children:t.jsx(Ce,{children:t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Driver Distribution by Sponsor"}),t.jsx(_,{sx:{height:400},children:t.jsx(Mt,{series:[{data:x,highlightScope:{faded:"global",highlighted:"item"}}],height:350})})]})})}),t.jsx(G,{item:!0,xs:12,md:6,children:t.jsx(Ce,{children:t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Total Points by Sponsor"}),t.jsx(_,{sx:{height:400},children:t.jsx(Zr,{xAxis:[{scaleType:"band",data:n.map(b=>b.sponsorName)}],series:[{data:n.map(b=>b.totalPoints)}],height:350})})]})})})]}),t.jsx(Ce,{children:t.jsxs(_e,{children:[t.jsx(_,{sx:{display:"flex",alignItems:"center",mb:3},children:t.jsx(Y,{fullWidth:!0,variant:"outlined",placeholder:"Search sponsors by name, email, or company...",value:c,onChange:b=>d(b.target.value),InputProps:{endAdornment:t.jsx(We,{children:t.jsx(Vr,{})})}})}),t.jsx(nt,{component:ye,children:t.jsxs(tt,{children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Name"}),t.jsx(I,{children:"Email"}),t.jsx(I,{children:"Company"}),t.jsx(I,{children:"Sponsor Type"}),t.jsx(I,{children:"Point Value ($)"}),t.jsx(I,{children:"Total Drivers"}),t.jsx(I,{children:"Total Points"}),t.jsx(I,{children:"User Type"}),t.jsx(I,{children:"Actions"})]})}),t.jsx(rt,{children:y.map(b=>{const m=n.find(g=>g.sponsorId===b.userId);return t.jsxs(oe,{children:[t.jsx(I,{children:b.name}),t.jsx(I,{children:b.email}),t.jsx(I,{children:b.companyName}),t.jsx(I,{children:t.jsx(Bt,{label:b.sponsorType,color:"primary",size:"small"})}),t.jsxs(I,{children:["$",b.pointDollarValue.toFixed(2)]}),t.jsx(I,{children:(m==null?void 0:m.totalDrivers)||0}),t.jsx(I,{children:(m==null?void 0:m.totalPoints.toLocaleString())||0}),t.jsx(I,{children:t.jsxs(ke,{size:"small",value:b.userType||"sponsor",onChange:g=>v(b.userId.toString(),g.target.value),children:[t.jsx(O,{value:"sponsor",children:"Sponsor"}),t.jsx(O,{value:"admin",children:"Admin"}),t.jsx(O,{value:"driver",children:"Driver"})]})}),t.jsx(I,{children:t.jsx(We,{onClick:()=>h(b.userId.toString()),color:"error",size:"small",children:t.jsx(Gr,{})})})]},b.userId)})})]})})]})})]})},bt={Driver:0,Sponsor:1,Admin:2},rd=({open:r,onClose:e})=>{const[n,s]=u.useState({Username:"",Email:"",Password:"",UserType:bt.Admin,CompanyName:"",SponsorType:"",PointDollarValue:.01,SponsorID:""}),o=i=>{const{name:l,value:c}=i.target;s(l==="UserType"?d=>({...d,[l]:bt[c]}):d=>({...d,[l]:l==="SponsorID"?c===""?"":parseInt(c):c}))},a=async i=>{var c,d;i.preventDefault();const l={...n,CompanyName:n.CompanyName||null,SponsorType:n.SponsorType||null,PointDollarValue:n.PointDollarValue||null,SponsorID:n.SponsorID===""?null:parseInt(n.SponsorID)};try{const p=await U.post("/api/admin/create-user",l,{headers:{"Content-Type":"application/json"}});alert("User created successfully"),e(),s({Username:"",Email:"",Password:"",UserType:"Admin",CompanyName:"",SponsorType:"",PointDollarValue:.01,SponsorID:""})}catch(p){const v=((d=(c=p.response)==null?void 0:c.data)==null?void 0:d.details)||"Failed to create user";alert(v)}};return t.jsx(rs,{open:r,onClose:e,"aria-labelledby":"create-user-modal-title","aria-describedby":"create-user-modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:t.jsxs(_,{sx:{backgroundColor:"white",padding:4,borderRadius:2,width:"100%",maxWidth:400},children:[t.jsx(w,{id:"create-user-modal-title",variant:"h6",component:"h2",children:"Create New User"}),t.jsxs("form",{onSubmit:a,children:[t.jsx(_,{sx:{mb:2},children:t.jsx(Y,{label:"Username",name:"Username",value:n.Username,onChange:o,required:!0,fullWidth:!0})}),t.jsx(_,{sx:{mb:2},children:t.jsx(Y,{label:"Email",name:"Email",type:"email",value:n.Email,onChange:o,required:!0,fullWidth:!0})}),t.jsx(_,{sx:{mb:2},children:t.jsx(Y,{label:"Password",name:"Password",type:"password",value:n.Password,onChange:o,required:!0,fullWidth:!0})}),t.jsx(_,{sx:{mb:2},children:t.jsxs(Le,{fullWidth:!0,children:[t.jsx(Oe,{id:"user-type-label",children:"User Type"}),t.jsxs(ke,{labelId:"user-type-label",name:"UserType",value:Object.keys(bt).find(i=>bt[i]===n.UserType),onChange:o,required:!0,children:[t.jsx(O,{value:"Admin",children:"Admin"}),t.jsx(O,{value:"Sponsor",children:"Sponsor"}),t.jsx(O,{value:"Driver",children:"Driver"})]})]})}),n.UserType===bt.Sponsor&&t.jsxs(t.Fragment,{children:[t.jsx(_,{sx:{mb:2},children:t.jsx(Y,{label:"Company Name",name:"CompanyName",value:n.CompanyName,onChange:o,required:!0,fullWidth:!0})}),t.jsx(_,{sx:{mb:2},children:t.jsx(Y,{label:"Sponsor Type",name:"SponsorType",value:n.SponsorType,onChange:o,required:!0,fullWidth:!0})}),t.jsx(_,{sx:{mb:2},children:t.jsx(Y,{label:"Point Dollar Value",name:"PointDollarValue",type:"number",step:"0.01",value:n.PointDollarValue,onChange:o,required:!0,fullWidth:!0})})]}),n.UserType===bt.Driver&&t.jsx(_,{sx:{mb:2},children:t.jsx(Y,{label:"Sponsor ID",name:"SponsorID",type:"number",value:n.SponsorID,onChange:o,required:!0,fullWidth:!0})}),t.jsx(q,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Create User"})]})]})})},nd=()=>{const[r,e]=u.useState([]),[n,s]=u.useState(!0),[o,a]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState(!1);u.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const x=await U.get("/api/admin/view-users/admins");e(x.data),a("")}catch{a("Failed to load admin data")}finally{s(!1)}},v=async(x,b)=>{try{await U.post("/api/admin/change-user-type",{userId:x,newUserType:b}),await p()}catch(m){a(m.message)}},h=async x=>{try{await U.delete(`/api/admin/remove-user/${x}`),await p()}catch(b){a(b.message)}},y=r.filter(x=>x.userName.toLowerCase().includes(i.toLowerCase())||x.email.toLowerCase().includes(i.toLowerCase()));return n?t.jsx(_,{sx:{width:"100%",mt:2},children:t.jsx(et,{})}):o?t.jsx(Ae,{severity:"error",sx:{mt:2},children:o}):t.jsxs(_,{sx:{width:"100%",p:3},children:[t.jsx(w,{variant:"h5",gutterBottom:!0,children:"Manage Administrators"}),t.jsxs(_,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(Y,{fullWidth:!0,variant:"outlined",placeholder:"Search admins by username or email...",value:i,onChange:x=>l(x.target.value),InputProps:{endAdornment:t.jsx(We,{children:t.jsx(Vr,{})})}}),t.jsx(q,{variant:"contained",color:"primary",onClick:()=>d(!0),sx:{ml:2},children:"Create User"})]}),c&&t.jsx(rd,{open:c,onClose:()=>d(!1)}),t.jsx(nt,{component:ye,children:t.jsxs(tt,{children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"UserName"}),t.jsx(I,{children:"Email"}),t.jsx(I,{children:"Created At"}),t.jsx(I,{children:"Last Login"}),t.jsx(I,{children:"User Type"}),t.jsx(I,{children:"Actions"})]})}),t.jsx(rt,{children:y.map(x=>t.jsxs(oe,{children:[t.jsx(I,{children:x.userName}),t.jsx(I,{children:x.email}),t.jsx(I,{children:new Date(x.createdAt).toLocaleDateString()}),t.jsx(I,{children:new Date(x.lastLogin).toLocaleDateString()}),t.jsx(I,{children:t.jsxs(ke,{size:"small",value:x.userType||"admin",onChange:b=>v(x.userId.toString(),b.target.value),children:[t.jsx(O,{value:"admin",children:"Admin"}),t.jsx(O,{value:"sponsor",children:"Sponsor"}),t.jsx(O,{value:"driver",children:"Driver"})]})}),t.jsx(I,{children:t.jsx(We,{onClick:()=>h(x.userId.toString()),color:"error",size:"small",children:t.jsx(Gr,{})})})]},x.userId))})]})})]})},sd=()=>{const[r,e]=u.useState([]),[n,s]=u.useState(!0),[o,a]=u.useState(""),[i,l]=u.useState("");u.useEffect(()=>{c()},[]);const c=async()=>{try{s(!0);const h=await U.get("/api/admin/view-users/drivers");e(h.data),a("")}catch{a("Failed to load driver data")}finally{s(!1)}},d=async(h,y)=>{try{await U.post("/api/admin/change-user-type",{userId:h,newUserType:y}),await c()}catch(x){a(x.message)}},p=async h=>{try{await U.delete(`/api/admin/remove-user/${h}`),await c()}catch(y){a(y.message)}},v=Array.isArray(r)?r.filter(h=>h.name.toLowerCase().includes(i.toLowerCase())||h.email.toLowerCase().includes(i.toLowerCase())||h.sponsorRelationships.some(y=>y.sponsorName.toLowerCase().includes(i.toLowerCase()))):[];return n?t.jsx(_,{sx:{width:"100%",mt:2},children:t.jsx(et,{})}):o?t.jsx(Ae,{severity:"error",sx:{mt:2},children:o}):t.jsxs(_,{sx:{width:"100%",p:3},children:[t.jsx(w,{variant:"h5",gutterBottom:!0,children:"Driver-Sponsor Associations"}),t.jsxs(_,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(Y,{fullWidth:!0,variant:"outlined",placeholder:"Search by driver name, email, or sponsor...",value:i,onChange:h=>l(h.target.value)}),t.jsx(We,{sx:{ml:-4},children:t.jsx(Vr,{})})]}),t.jsx(nt,{component:ye,children:t.jsxs(tt,{children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Driver Name"}),t.jsx(I,{children:"Email"}),t.jsx(I,{children:"Sponsors"}),t.jsx(I,{align:"center",children:"Total Sponsors"}),t.jsx(I,{children:"Points Distribution"}),t.jsx(I,{children:"User Type"}),t.jsx(I,{children:"Actions"})]})}),t.jsx(rt,{children:v.map(h=>t.jsxs(oe,{children:[t.jsx(I,{children:h.name}),t.jsx(I,{children:h.email}),t.jsx(I,{children:t.jsx(_,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:h.sponsorRelationships.map(y=>t.jsx(Bt,{label:y.sponsorName,size:"small",color:"primary"},y.sponsorId))})}),t.jsx(I,{align:"center",children:h.sponsorRelationships.length}),t.jsx(I,{children:t.jsx(_,{sx:{display:"flex",alignItems:"center",gap:1},children:h.sponsorRelationships.map(y=>t.jsx(Kr,{title:`${y.sponsorName}: ${y.points} points`,children:t.jsx(_,{sx:{display:"flex",alignItems:"center"},children:t.jsx(w,{variant:"body2",children:y.points})})},y.sponsorId))})}),t.jsx(I,{children:t.jsxs(ke,{size:"small",value:h.userType||"",onChange:y=>d(h.userId.toString(),y.target.value),children:[t.jsx(O,{value:"driver",children:"Driver"}),t.jsx(O,{value:"sponsor",children:"Sponsor"}),t.jsx(O,{value:"admin",children:"Admin"})]})}),t.jsx(I,{children:t.jsx(We,{onClick:()=>p(h.userId.toString()),color:"error",size:"small",children:t.jsx(Gr,{})})})]},h.userId))})]})})]})};var As=(r=>(r.User="User",r.Point="Point",r.Purchase="Purchase",r.Application="Application",r.Product="Product",r.System="System",r))(As||{});const od=()=>{const[r,e]=u.useState([]),[n,s]=u.useState(0),[o,a]=u.useState(!1),[i,l]=u.useState(null),[c,d]=u.useState({page:0,pageSize:10}),p=async()=>{try{a(!0),l(null);const m=new URLSearchParams;c.userID&&m.append("userId",c.userID.toString()),c.category&&m.append("category",c.category),c.startDate&&m.append("startDate",c.startDate.toISOString()),c.endDate&&m.append("endDate",c.endDate.toISOString()),m.append("page",(c.page+1).toString()),m.append("pageSize",c.pageSize.toString());const g=await U.get(`/api/reports/audit-logs?${m.toString()}`);e(g.data.logs),s(g.data.totalCount)}catch{l("Failed to fetch audit logs")}finally{a(!1)}},v=async()=>{try{const m=new URLSearchParams;c.startDate&&m.append("startDate",c.startDate.toISOString()),c.endDate&&m.append("endDate",c.endDate.toISOString()),c.category&&m.append("category",c.category);const g=await U.get(`/api/reports/audit-logs/export?${m.toString()}`,{responseType:"blob"}),S=window.URL.createObjectURL(new Blob([g.data])),f=document.createElement("a");f.href=S,f.setAttribute("download",`audit_logs_${$r(new Date,"yyyyMMdd")}.csv`),document.body.appendChild(f),f.click(),f.remove()}catch{l("Failed to export audit logs")}};u.useEffect(()=>{p()},[c]);const h=(m,g)=>{d(S=>({...S,page:g}))},y=m=>{d(g=>({...g,pageSize:parseInt(m.target.value,10),page:0}))},x=m=>{const g=m.target.value;d(S=>({...S,category:g||void 0,page:0}))},b=m=>({User:"primary",Point:"success",Purchase:"info",Application:"warning",Product:"secondary",System:"error"})[m]||"default";return t.jsx(ds,{dateAdapter:Is,children:t.jsx(_,{sx:{p:3},children:t.jsxs(G,{container:!0,spacing:3,children:[t.jsxs(G,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(w,{variant:"h4",children:"Audit Log Dashboard"}),t.jsx(q,{variant:"contained",startIcon:t.jsx($o,{}),onClick:v,disabled:o,children:"Export CSV"})]}),i&&t.jsx(G,{item:!0,xs:12,children:t.jsx(Ae,{severity:"error",children:i})}),t.jsx(G,{item:!0,xs:12,children:t.jsx(ye,{sx:{p:2,mb:2},children:t.jsxs(G,{container:!0,spacing:2,alignItems:"center",children:[t.jsx(G,{item:!0,xs:12,sm:6,md:2,children:t.jsx(Y,{fullWidth:!0,label:"User ID",type:"number",value:c.userID||"",onChange:m=>d(g=>({...g,userID:m.target.value?parseInt(m.target.value):void 0,page:0}))})}),t.jsx(G,{item:!0,xs:12,sm:6,md:2,children:t.jsxs(Le,{fullWidth:!0,children:[t.jsx(Oe,{children:"Category"}),t.jsxs(ke,{value:c.category||"",label:"Category",onChange:x,children:[t.jsx(O,{value:"",children:"All"}),Object.values(As).map(m=>t.jsx(O,{value:m,children:m},m))]})]})}),t.jsx(G,{item:!0,xs:12,sm:6,md:2,children:t.jsx(ar,{label:"Start Date",value:c.startDate,onChange:m=>d(g=>({...g,startDate:m||void 0,page:0})),slotProps:{textField:{fullWidth:!0}}})}),t.jsx(G,{item:!0,xs:12,sm:6,md:2,children:t.jsx(ar,{label:"End Date",value:c.endDate,onChange:m=>d(g=>({...g,endDate:m||void 0,page:0})),slotProps:{textField:{fullWidth:!0}}})}),t.jsx(G,{item:!0,xs:12,sm:6,md:1,children:t.jsx(We,{onClick:()=>p(),disabled:o,children:t.jsx(No,{})})})]})})}),t.jsx(G,{item:!0,xs:12,children:t.jsxs(ye,{children:[t.jsx(nt,{children:t.jsxs(tt,{children:[t.jsx(st,{children:t.jsxs(oe,{children:[t.jsx(I,{children:"Log ID"}),t.jsx(I,{children:"Timestamp"}),t.jsx(I,{children:"User"}),t.jsx(I,{children:"Category"}),t.jsx(I,{children:"Description"})]})}),t.jsx(rt,{children:o?t.jsx(oe,{children:t.jsx(I,{colSpan:5,align:"center",children:"Loading..."})}):r.length===0?t.jsx(oe,{children:t.jsx(I,{colSpan:5,align:"center",children:"No audit logs found"})}):r.map(m=>t.jsxs(oe,{children:[t.jsx(I,{children:m.logID}),t.jsx(I,{children:$r(new Date(m.timestamp),"MMM dd, yyyy HH:mm:ss")}),t.jsx(I,{children:m.userName||m.userID||"N/A"}),t.jsx(I,{children:t.jsx(Bt,{label:m.category,size:"small",color:b(m.category)})}),t.jsx(I,{children:m.description})]},m.logID))})]})}),t.jsx(us,{component:"div",count:n,page:c.page,onPageChange:h,rowsPerPage:c.pageSize,onRowsPerPageChange:y,rowsPerPageOptions:[5,10,25,50]})]})})]})})})};function Un(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var s,o,a=n.call(r),i=[];try{for(;(e===void 0||e-- >0)&&!(s=a.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}var Zt=function(r){var e=r.children;return Je.createElement("div",{className:"react-terminal-line"},e)},lr;(function(r,e){e===void 0&&(e={});var n=e.insertAt;if(typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=r:o.appendChild(document.createTextNode(r))}})(`/**
 * Modfied version of [termynal.js](https://github.com/ines/termynal/blob/master/termynal.css).
 *
 * @author Ines Montani <ines@ines.io>
 * @version 0.0.1
 * @license MIT
 */
 .react-terminal-wrapper {
  width: 100%;
  background: #252a33;
  color: #eee;
  font-size: 18px;
  font-family: 'Fira Mono', Consolas, Menlo, Monaco, 'Courier New', Courier, monospace;
  border-radius: 4px;
  padding: 75px 45px 35px;
  position: relative;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
 }

.react-terminal {
  overflow: auto;
  display: flex;
  flex-direction: column;
}

.react-terminal-wrapper.react-terminal-light {
  background: #ddd;
  color: #1a1e24;
}

.react-terminal-window-buttons {
  position: absolute;
  top: 15px;
  left: 15px;
  display: flex;
  flex-direction: row;
  gap: 10px;
}

.react-terminal-window-buttons button {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  border: 0;
}

.react-terminal-window-buttons button.clickable {
  cursor: pointer;
}

.react-terminal-window-buttons button.red-btn {
  background: #d9515d;
}

.react-terminal-window-buttons button.yellow-btn {
  background: #f4c025;
}

.react-terminal-window-buttons button.green-btn {
  background: #3ec930;
}

.react-terminal-wrapper:after {
  content: attr(data-terminal-name);
  position: absolute;
  color: #a2a2a2;
  top: 5px;
  left: 0;
  width: 100%;
  text-align: center;
  pointer-events: none;
}

.react-terminal-wrapper.react-terminal-light:after {
  color: #D76D77;
}

.react-terminal-line {
  white-space: pre;
}

.react-terminal-line:before {
  /* Set up defaults and ensure empty lines are displayed. */
  content: '';
  display: inline-block;
  vertical-align: middle;
  color: #a2a2a2;
}

.react-terminal-light .react-terminal-line:before {
  color: #D76D77;
}

.react-terminal-input:before {
  margin-right: 0.75em;
  content: '$';
}

.react-terminal-input[data-terminal-prompt]:before {
  content: attr(data-terminal-prompt);
}

.react-terminal-wrapper:focus-within .react-terminal-active-input .cursor {
  position: relative;
  display: inline-block;
  width: 0.55em;
  height: 1em;
  top: 0.225em;
  background: #fff;
  -webkit-animation: blink 1s infinite;
          animation: blink 1s infinite;
}

/* Cursor animation */

@-webkit-keyframes blink {
  50% {
      opacity: 0;
  }
}

@keyframes blink {
  50% {
      opacity: 0;
  }
}

.terminal-hidden-input {
    position: fixed;
    left: -1000px;
}

/* .react-terminal-progress {
  display: flex;
  margin: .5rem 0;
}

.react-terminal-progress-bar {
  background-color: #fff;
  border-radius: .25rem;
  width: 25%;
}

.react-terminal-wrapper.react-terminal-light .react-terminal-progress-bar {
  background-color: #000;
} */
`),function(r){r[r.Light=0]="Light",r[r.Dark=1]="Dark"}(lr||(lr={}));var ad=function(r){var e=r.name,n=r.prompt,s=r.height,o=s===void 0?"600px":s,a=r.colorMode,i=r.onInput,l=r.children,c=r.startingInputValue,d=c===void 0?"":c,p=r.redBtnCallback,v=r.yellowBtnCallback,h=r.greenBtnCallback,y=r.scrollToPosition,x=y===void 0||y,b=Un(u.useState(""),2),m=b[0],g=b[1],S=Un(u.useState(0),2),f=S[0],C=S[1],D=u.useRef(null);u.useEffect(function(){g(d.trim())},[d]),u.useEffect(function(){var A,B;if(i!=null){var T=[],M=function(j){var $=function(){var W;return(W=j==null?void 0:j.querySelector(".terminal-hidden-input"))===null||W===void 0?void 0:W.focus()};j==null||j.addEventListener("click",$),T.push({terminalEl:j,listener:$})};try{for(var R=function(j){var $=typeof Symbol=="function"&&Symbol.iterator,W=$&&j[$],te=0;if(W)return W.call(j);if(j&&typeof j.length=="number")return{next:function(){return j&&te>=j.length&&(j=void 0),{value:j&&j[te++],done:!j}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(document.getElementsByClassName("react-terminal-wrapper")),L=R.next();!L.done;L=R.next())M(L.value)}catch(j){A={error:j}}finally{try{L&&!L.done&&(B=R.return)&&B.call(R)}finally{if(A)throw A.error}}return function(){T.forEach(function(j){j.terminalEl.removeEventListener("click",j.listener)})}}},[i]);var E=["react-terminal-wrapper"];return a===lr.Light&&E.push("react-terminal-light"),Je.createElement("div",{className:E.join(" "),"data-terminal-name":e},Je.createElement("div",{className:"react-terminal-window-buttons"},Je.createElement("button",{className:(v?"clickable":"")+" red-btn",disabled:!p,onClick:p}),Je.createElement("button",{className:(v?"clickable":"")+" yellow-btn",disabled:!v,onClick:v}),Je.createElement("button",{className:(h?"clickable":"")+" green-btn",disabled:!h,onClick:h})),Je.createElement("div",{className:"react-terminal",style:{height:o}},l,typeof i=="function"&&Je.createElement("div",{className:"react-terminal-line react-terminal-input react-terminal-active-input","data-terminal-prompt":n||"$",key:"terminal-line-prompt"},m,Je.createElement("span",{className:"cursor",style:{left:f+1+"px"}})),Je.createElement("div",{ref:D})),Je.createElement("input",{className:"terminal-hidden-input",placeholder:"Terminal Hidden Input",value:m,autoFocus:i!=null,onChange:function(A){g(A.target.value)},onKeyDown:function(A){var B,T,M;if(i){if(A.key==="Enter")i(m),C(0),g(""),x&&setTimeout(function(){var W;return(W=D==null?void 0:D.current)===null||W===void 0?void 0:W.scrollIntoView({behavior:"auto",block:"nearest"})},500);else if(["ArrowLeft","ArrowRight","ArrowDown","ArrowUp","Delete"].includes(A.key)){var R=A.currentTarget,L="",j=m.length-(R.selectionStart||0);B=j,T=0,M=m.length,j=B>M?M:B<T?T:B,A.key==="ArrowLeft"?(j>m.length-1&&j--,L=m.slice(m.length-1-j)):A.key==="ArrowRight"||A.key==="Delete"?L=m.slice(m.length-j+1):A.key==="ArrowUp"&&(L=m.slice(0));var $=function(W,te){var Q=document.createElement("span");Q.style.visibility="hidden",Q.style.position="absolute",Q.style.fontSize=window.getComputedStyle(W).fontSize,Q.style.fontFamily=window.getComputedStyle(W).fontFamily,Q.innerText=te,document.body.appendChild(Q);var H=Q.getBoundingClientRect().width;return document.body.removeChild(Q),-H}(R,L);C($)}}}}))};class ht extends Error{constructor(e,n){const s=new.target.prototype;super(`${e}: Status code '${n}'`),this.statusCode=n,this.__proto__=s}}class sn extends Error{constructor(e="A timeout occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class Xe extends Error{constructor(e="An abort occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class id extends Error{constructor(e,n){const s=new.target.prototype;super(e),this.transport=n,this.errorType="UnsupportedTransportError",this.__proto__=s}}class ld extends Error{constructor(e,n){const s=new.target.prototype;super(e),this.transport=n,this.errorType="DisabledTransportError",this.__proto__=s}}class cd extends Error{constructor(e,n){const s=new.target.prototype;super(e),this.transport=n,this.errorType="FailedToStartTransportError",this.__proto__=s}}class Hn extends Error{constructor(e){const n=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=n}}class dd extends Error{constructor(e,n){const s=new.target.prototype;super(e),this.innerErrors=n,this.__proto__=s}}class Rs{constructor(e,n,s){this.statusCode=e,this.statusText=n,this.content=s}}class pr{get(e,n){return this.send({...n,method:"GET",url:e})}post(e,n){return this.send({...n,method:"POST",url:e})}delete(e,n){return this.send({...n,method:"DELETE",url:e})}getCookieString(e){return""}}var k;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(k||(k={}));class Lt{constructor(){}log(e,n){}}Lt.instance=new Lt;const ud="8.0.7";class xe{static isRequired(e,n){if(e==null)throw new Error(`The '${n}' argument is required.`)}static isNotEmpty(e,n){if(!e||e.match(/^\s*$/))throw new Error(`The '${n}' argument should not be empty.`)}static isIn(e,n,s){if(!(e in n))throw new Error(`Unknown ${s} value: ${e}.`)}}class ie{static get isBrowser(){return!ie.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!ie.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!ie.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Ot(r,e){let n="";return xt(r)?(n=`Binary data of length ${r.byteLength}`,e&&(n+=`. Content: '${pd(r)}'`)):typeof r=="string"&&(n=`String data of length ${r.length}`,e&&(n+=`. Content: '${r}'`)),n}function pd(r){const e=new Uint8Array(r);let n="";return e.forEach(s=>{const o=s<16?"0":"";n+=`0x${o}${s.toString(16)} `}),n.substr(0,n.length-1)}function xt(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function Es(r,e,n,s,o,a){const i={},[l,c]=St();i[l]=c,r.log(k.Trace,`(${e} transport) sending data. ${Ot(o,a.logMessageContent)}.`);const d=xt(o)?"arraybuffer":"text",p=await n.post(s,{content:o,headers:{...i,...a.headers},responseType:d,timeout:a.timeout,withCredentials:a.withCredentials});r.log(k.Trace,`(${e} transport) request complete. Response status: ${p.statusCode}.`)}function hd(r){return r===void 0?new cr(k.Information):r===null?Lt.instance:r.log!==void 0?r:new cr(r)}class gd{constructor(e,n){this._subject=e,this._observer=n}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(n=>{})}}class cr{constructor(e){this._minLevel=e,this.out=console}log(e,n){if(e>=this._minLevel){const s=`[${new Date().toISOString()}] ${k[e]}: ${n}`;switch(e){case k.Critical:case k.Error:this.out.error(s);break;case k.Warning:this.out.warn(s);break;case k.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function St(){let r="X-SignalR-User-Agent";return ie.isNode&&(r="User-Agent"),[r,md(ud,fd(),yd(),xd())]}function md(r,e,n,s){let o="Microsoft SignalR/";const a=r.split(".");return o+=`${a[0]}.${a[1]}`,o+=` (${r}; `,e&&e!==""?o+=`${e}; `:o+="Unknown OS; ",o+=`${n}`,s?o+=`; ${s}`:o+="; Unknown Runtime Version",o+=")",o}function fd(){if(ie.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function xd(){if(ie.isNode)return process.versions.node}function yd(){return ie.isNode?"NodeJS":"Browser"}function Ar(r){return r.stack?r.stack:r.message?r.message:`${r}`}function vd(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class bd extends pr{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||ie.isNode){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(n("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=n("node-fetch"):this._fetchType=fetch,this._fetchType=n("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(vd());if(typeof AbortController>"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=n("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Xe;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const n=new this._abortControllerType;let s;e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),s=new Xe});let o=null;if(e.timeout){const c=e.timeout;o=setTimeout(()=>{n.abort(),this._logger.log(k.Warning,"Timeout from HTTP request."),s=new sn},c)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},xt(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let a;try{a=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:n.signal})}catch(c){throw s||(this._logger.log(k.Warning,`Error from HTTP request. ${c}.`),c)}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!a.ok){const c=await Vn(a,"text");throw new ht(c||a.statusText,a.status)}const l=await Vn(a,e.responseType);return new Rs(a.status,a.statusText,l)}getCookieString(e){let n="";return ie.isNode&&this._jar&&this._jar.getCookies(e,(s,o)=>n=o.join("; ")),n}}function Vn(r,e){let n;switch(e){case"arraybuffer":n=r.arrayBuffer();break;case"text":n=r.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:n=r.text();break}return n}class wd extends pr{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Xe):e.method?e.url?new Promise((n,s)=>{const o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(xt(e.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const a=e.headers;a&&Object.keys(a).forEach(i=>{o.setRequestHeader(i,a[i])}),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),s(new Xe)}),e.timeout&&(o.timeout=e.timeout),o.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?n(new Rs(o.status,o.statusText,o.response||o.responseText)):s(new ht(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(k.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),s(new ht(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(k.Warning,"Timeout from HTTP request."),s(new sn)},o.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Sd extends pr{constructor(e){if(super(),typeof fetch<"u"||ie.isNode)this._httpClient=new bd(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new wd(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Xe):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class Ue{static write(e){return`${e}${Ue.RecordSeparator}`}static parse(e){if(e[e.length-1]!==Ue.RecordSeparator)throw new Error("Message is incomplete.");const n=e.split(Ue.RecordSeparator);return n.pop(),n}}Ue.RecordSeparatorCode=30;Ue.RecordSeparator=String.fromCharCode(Ue.RecordSeparatorCode);class jd{writeHandshakeRequest(e){return Ue.write(JSON.stringify(e))}parseHandshakeResponse(e){let n,s;if(xt(e)){const l=new Uint8Array(e),c=l.indexOf(Ue.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");const d=c+1;n=String.fromCharCode.apply(null,Array.prototype.slice.call(l.slice(0,d))),s=l.byteLength>d?l.slice(d).buffer:null}else{const l=e,c=l.indexOf(Ue.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");const d=c+1;n=l.substring(0,d),s=l.length>d?l.substring(d):null}const o=Ue.parse(n),a=JSON.parse(o[0]);if(a.type)throw new Error("Expected a handshake response from the server.");return[s,a]}}var V;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(V||(V={}));class Cd{constructor(){this.observers=[]}next(e){for(const n of this.observers)n.next(e)}error(e){for(const n of this.observers)n.error&&n.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new gd(this,e)}}class _d{constructor(e,n,s){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=n,this._bufferSize=s}async _send(e){const n=this._protocol.writeMessage(e);let s=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let o=()=>{},a=()=>{};xt(n)?this._bufferedByteCount+=n.byteLength:this._bufferedByteCount+=n.length,this._bufferedByteCount>=this._bufferSize&&(s=new Promise((i,l)=>{o=i,a=l})),this._messages.push(new kd(n,this._totalMessageCount,o,a))}try{this._reconnectInProgress||await this._connection.send(n)}catch{this._disconnected()}await s}_ack(e){let n=-1;for(let s=0;s<this._messages.length;s++){const o=this._messages[s];if(o._id<=e.sequenceId)n=s,xt(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}n!==-1&&(this._messages=this._messages.slice(n+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==V.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const n=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,n<=this._latestReceivedSequenceId?(n===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=n,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:V.Sequence,sequenceId:e}));const n=this._messages;for(const s of n)await this._connection.send(s._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const n of this._messages)n._rejector(e)}_isInvocationMessage(e){switch(e.type){case V.Invocation:case V.StreamItem:case V.Completion:case V.StreamInvocation:case V.CancelInvocation:return!0;case V.Close:case V.Sequence:case V.Ping:case V.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:V.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class kd{constructor(e,n,s,o){this._message=e,this._id=n,this._resolver=s,this._rejector=o}}const Dd=30*1e3,Id=15*1e3,Td=1e5;var ae;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(ae||(ae={}));class on{static create(e,n,s,o,a,i,l){return new on(e,n,s,o,a,i,l)}constructor(e,n,s,o,a,i,l){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(k.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},xe.isRequired(e,"connection"),xe.isRequired(n,"logger"),xe.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=a??Dd,this.keepAliveIntervalInMilliseconds=i??Id,this._statefulReconnectBufferSize=l??Td,this._logger=n,this._protocol=s,this.connection=e,this._reconnectPolicy=o,this._handshakeProtocol=new jd,this.connection.onreceive=c=>this._processIncomingData(c),this.connection.onclose=c=>this._connectionClosed(c),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=ae.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:V.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==ae.Disconnected&&this._connectionState!==ae.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==ae.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=ae.Connecting,this._logger.log(k.Debug,"Starting HubConnection.");try{await this._startInternal(),ie.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=ae.Connected,this._connectionStarted=!0,this._logger.log(k.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=ae.Disconnected,this._logger.log(k.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((n,s)=>{this._handshakeResolver=n,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{let n=this._protocol.version;this.connection.features.reconnect||(n=1);const s={protocol:this._protocol.name,version:n};if(this._logger.log(k.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(s)),this._logger.log(k.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new _d(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(n){throw this._logger.log(k.Debug,`Hub handshake failed with error '${n}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(n),n}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===ae.Disconnected)return this._logger.log(k.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===ae.Disconnecting)return this._logger.log(k.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const n=this._connectionState;return this._connectionState=ae.Disconnecting,this._logger.log(k.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(k.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(n===ae.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Xe("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...n){const[s,o]=this._replaceStreamingParams(n),a=this._createStreamInvocation(e,n,o);let i;const l=new Cd;return l.cancelCallback=()=>{const c=this._createCancelInvocation(a.invocationId);return delete this._callbacks[a.invocationId],i.then(()=>this._sendWithProtocol(c))},this._callbacks[a.invocationId]=(c,d)=>{if(d){l.error(d);return}else c&&(c.type===V.Completion?c.error?l.error(new Error(c.error)):l.complete():l.next(c.item))},i=this._sendWithProtocol(a).catch(c=>{l.error(c),delete this._callbacks[a.invocationId]}),this._launchStreams(s,i),l}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...n){const[s,o]=this._replaceStreamingParams(n),a=this._sendWithProtocol(this._createInvocation(e,n,!0,o));return this._launchStreams(s,a),a}invoke(e,...n){const[s,o]=this._replaceStreamingParams(n),a=this._createInvocation(e,n,!1,o);return new Promise((l,c)=>{this._callbacks[a.invocationId]=(p,v)=>{if(v){c(v);return}else p&&(p.type===V.Completion?p.error?c(new Error(p.error)):l(p.result):c(new Error(`Unexpected message type: ${p.type}`)))};const d=this._sendWithProtocol(a).catch(p=>{c(p),delete this._callbacks[a.invocationId]});this._launchStreams(s,d)})}on(e,n){!e||!n||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(n)===-1&&this._methods[e].push(n))}off(e,n){if(!e)return;e=e.toLowerCase();const s=this._methods[e];if(s)if(n){const o=s.indexOf(n);o!==-1&&(s.splice(o,1),s.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const n=this._protocol.parseMessages(e,this._logger);for(const s of n)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(s)))switch(s.type){case V.Invocation:this._invokeClientMethod(s).catch(o=>{this._logger.log(k.Error,`Invoke client method threw error: ${Ar(o)}`)});break;case V.StreamItem:case V.Completion:{const o=this._callbacks[s.invocationId];if(o){s.type===V.Completion&&delete this._callbacks[s.invocationId];try{o(s)}catch(a){this._logger.log(k.Error,`Stream callback threw error: ${Ar(a)}`)}}break}case V.Ping:break;case V.Close:{this._logger.log(k.Information,"Close message received from server.");const o=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case V.Ack:this._messageBuffer&&this._messageBuffer._ack(s);break;case V.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(s);break;default:this._logger.log(k.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let n,s;try{[s,n]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(o){const a="Error parsing handshake response: "+o;this._logger.log(k.Error,a);const i=new Error(a);throw this._handshakeRejecter(i),i}if(n.error){const o="Server returned handshake error: "+n.error;this._logger.log(k.Error,o);const a=new Error(o);throw this._handshakeRejecter(a),a}else this._logger.log(k.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===ae.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const n=e.target.toLowerCase(),s=this._methods[n];if(!s){this._logger.log(k.Warning,`No client method with the name '${n}' found.`),e.invocationId&&(this._logger.log(k.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const o=s.slice(),a=!!e.invocationId;let i,l,c;for(const d of o)try{const p=i;i=await d.apply(this,e.arguments),a&&i&&p&&(this._logger.log(k.Error,`Multiple results provided for '${n}'. Sending error to server.`),c=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),l=void 0}catch(p){l=p,this._logger.log(k.Error,`A callback for the method '${n}' threw error '${p}'.`)}c?await this._sendWithProtocol(c):a?(l?c=this._createCompletionMessage(e.invocationId,`${l}`,null):i!==void 0?c=this._createCompletionMessage(e.invocationId,null,i):(this._logger.log(k.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),c=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(c)):i&&this._logger.log(k.Error,`Result given for '${n}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(k.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Xe("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===ae.Disconnecting?this._completeClose(e):this._connectionState===ae.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===ae.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=ae.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),ie.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(n=>n.apply(this,[e]))}catch(n){this._logger.log(k.Error,`An onclose callback called with error '${e}' threw error '${n}'.`)}}}async _reconnect(e){const n=Date.now();let s=0,o=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),a=this._getNextRetryDelay(s++,0,o);if(a===null){this._logger.log(k.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=ae.Reconnecting,e?this._logger.log(k.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(k.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(k.Error,`An onreconnecting callback called with error '${e}' threw error '${i}'.`)}if(this._connectionState!==ae.Reconnecting){this._logger.log(k.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;a!==null;){if(this._logger.log(k.Information,`Reconnect attempt number ${s} will start in ${a} ms.`),await new Promise(i=>{this._reconnectDelayHandle=setTimeout(i,a)}),this._reconnectDelayHandle=void 0,this._connectionState!==ae.Reconnecting){this._logger.log(k.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=ae.Connected,this._logger.log(k.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(i=>i.apply(this,[this.connection.connectionId]))}catch(i){this._logger.log(k.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${i}'.`)}return}catch(i){if(this._logger.log(k.Information,`Reconnect attempt failed because of error '${i}'.`),this._connectionState!==ae.Reconnecting){this._logger.log(k.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===ae.Disconnecting&&this._completeClose();return}o=i instanceof Error?i:new Error(i.toString()),a=this._getNextRetryDelay(s++,Date.now()-n,o)}}this._logger.log(k.Information,`Reconnect retries have been exhausted after ${Date.now()-n} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,n,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:n,previousRetryCount:e,retryReason:s})}catch(o){return this._logger.log(k.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${n}) threw error '${o}'.`),null}}_cancelCallbacksWithError(e){const n=this._callbacks;this._callbacks={},Object.keys(n).forEach(s=>{const o=n[s];try{o(null,e)}catch(a){this._logger.log(k.Error,`Stream 'error' callback called with '${e}' threw error: ${Ar(a)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,n,s,o){if(s)return o.length!==0?{arguments:n,streamIds:o,target:e,type:V.Invocation}:{arguments:n,target:e,type:V.Invocation};{const a=this._invocationId;return this._invocationId++,o.length!==0?{arguments:n,invocationId:a.toString(),streamIds:o,target:e,type:V.Invocation}:{arguments:n,invocationId:a.toString(),target:e,type:V.Invocation}}}_launchStreams(e,n){if(e.length!==0){n||(n=Promise.resolve());for(const s in e)e[s].subscribe({complete:()=>{n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:o=>{let a;o instanceof Error?a=o.message:o&&o.toString?a=o.toString():a="Unknown error",n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,a)))},next:o=>{n=n.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,o)))}})}}_replaceStreamingParams(e){const n=[],s=[];for(let o=0;o<e.length;o++){const a=e[o];if(this._isObservable(a)){const i=this._invocationId;this._invocationId++,n[i]=a,s.push(i.toString()),e.splice(o,1)}}return[n,s]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,n,s){const o=this._invocationId;return this._invocationId++,s.length!==0?{arguments:n,invocationId:o.toString(),streamIds:s,target:e,type:V.StreamInvocation}:{arguments:n,invocationId:o.toString(),target:e,type:V.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:V.CancelInvocation}}_createStreamItemMessage(e,n){return{invocationId:e,item:n,type:V.StreamItem}}_createCompletionMessage(e,n,s){return n?{error:n,invocationId:e,type:V.Completion}:{invocationId:e,result:s,type:V.Completion}}_createCloseMessage(){return{type:V.Close}}}const Pd=[0,2e3,1e4,3e4,null];class Gn{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Pd}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class gt{}gt.Authorization="Authorization";gt.Cookie="Cookie";class Ad extends pr{constructor(e,n){super(),this._innerClient=e,this._accessTokenFactory=n}async send(e){let n=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(n=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const s=await this._innerClient.send(e);return n&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):s}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[gt.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[gt.Authorization]&&delete e.headers[gt.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var pe;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(pe||(pe={}));var Pe;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(Pe||(Pe={}));let Rd=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class qn{get pollAborted(){return this._pollAbort.aborted}constructor(e,n,s){this._httpClient=e,this._logger=n,this._pollAbort=new Rd,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,n){if(xe.isRequired(e,"url"),xe.isRequired(n,"transferFormat"),xe.isIn(n,Pe,"transferFormat"),this._url=e,this._logger.log(k.Trace,"(LongPolling transport) Connecting."),n===Pe.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,o]=St(),a={[s]:o,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:a,timeout:1e5,withCredentials:this._options.withCredentials};n===Pe.Binary&&(i.responseType="arraybuffer");const l=`${e}&_=${Date.now()}`;this._logger.log(k.Trace,`(LongPolling transport) polling: ${l}.`);const c=await this._httpClient.get(l,i);c.statusCode!==200?(this._logger.log(k.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new ht(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(e,n){try{for(;this._running;)try{const s=`${e}&_=${Date.now()}`;this._logger.log(k.Trace,`(LongPolling transport) polling: ${s}.`);const o=await this._httpClient.get(s,n);o.statusCode===204?(this._logger.log(k.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):o.statusCode!==200?(this._logger.log(k.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new ht(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(k.Trace,`(LongPolling transport) data received. ${Ot(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(k.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof sn?this._logger.log(k.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(k.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(k.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Es(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(k.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(k.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[n,s]=St();e[n]=s;const o={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let a;try{await this._httpClient.delete(this._url,o)}catch(i){a=i}a?a instanceof ht&&(a.statusCode===404?this._logger.log(k.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(k.Trace,`(LongPolling transport) Error sending a DELETE request: ${a}`)):this._logger.log(k.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(k.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(k.Trace,e),this.onclose(this._closeError)}}}class Ed{constructor(e,n,s,o){this._httpClient=e,this._accessToken=n,this._logger=s,this._options=o,this.onreceive=null,this.onclose=null}async connect(e,n){return xe.isRequired(e,"url"),xe.isRequired(n,"transferFormat"),xe.isIn(n,Pe,"transferFormat"),this._logger.log(k.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,o)=>{let a=!1;if(n!==Pe.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let i;if(ie.isBrowser||ie.isWebWorker)i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const l=this._httpClient.getCookieString(e),c={};c.Cookie=l;const[d,p]=St();c[d]=p,i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...c,...this._options.headers}})}try{i.onmessage=l=>{if(this.onreceive)try{this._logger.log(k.Trace,`(SSE transport) data received. ${Ot(l.data,this._options.logMessageContent)}.`),this.onreceive(l.data)}catch(c){this._close(c);return}},i.onerror=l=>{a?this._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},i.onopen=()=>{this._logger.log(k.Information,`SSE connected to ${this._url}`),this._eventSource=i,a=!0,s()}}catch(l){o(l);return}})}async send(e){return this._eventSource?Es(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class Md{constructor(e,n,s,o,a,i){this._logger=s,this._accessTokenFactory=n,this._logMessageContent=o,this._webSocketConstructor=a,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=i}async connect(e,n){xe.isRequired(e,"url"),xe.isRequired(n,"transferFormat"),xe.isIn(n,Pe,"transferFormat"),this._logger.log(k.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((o,a)=>{e=e.replace(/^http/,"ws");let i;const l=this._httpClient.getCookieString(e);let c=!1;if(ie.isNode||ie.isReactNative){const d={},[p,v]=St();d[p]=v,s&&(d[gt.Authorization]=`Bearer ${s}`),l&&(d[gt.Cookie]=l),i=new this._webSocketConstructor(e,void 0,{headers:{...d,...this._headers}})}else s&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);i||(i=new this._webSocketConstructor(e)),n===Pe.Binary&&(i.binaryType="arraybuffer"),i.onopen=d=>{this._logger.log(k.Information,`WebSocket connected to ${e}.`),this._webSocket=i,c=!0,o()},i.onerror=d=>{let p=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?p=d.error:p="There was an error with the transport",this._logger.log(k.Information,`(WebSockets transport) ${p}.`)},i.onmessage=d=>{if(this._logger.log(k.Trace,`(WebSockets transport) data received. ${Ot(d.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(d.data)}catch(p){this._close(p);return}},i.onclose=d=>{if(c)this._close(d);else{let p=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?p=d.error:p="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",a(new Error(p))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(k.Trace,`(WebSockets transport) sending data. ${Ot(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(k.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const Yn=100;class $d{constructor(e,n={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,xe.isRequired(e,"url"),this._logger=hd(n.logger),this.baseUrl=this._resolveUrl(e),n=n||{},n.logMessageContent=n.logMessageContent===void 0?!1:n.logMessageContent,typeof n.withCredentials=="boolean"||n.withCredentials===void 0)n.withCredentials=n.withCredentials===void 0?!0:n.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");n.timeout=n.timeout===void 0?100*1e3:n.timeout;let s=null,o=null;if(ie.isNode&&typeof require<"u"){const a=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=a("ws"),o=a("eventsource")}!ie.isNode&&typeof WebSocket<"u"&&!n.WebSocket?n.WebSocket=WebSocket:ie.isNode&&!n.WebSocket&&s&&(n.WebSocket=s),!ie.isNode&&typeof EventSource<"u"&&!n.EventSource?n.EventSource=EventSource:ie.isNode&&!n.EventSource&&typeof o<"u"&&(n.EventSource=o),this._httpClient=new Ad(n.httpClient||new Sd(this._logger),n.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=n,this.onreceive=null,this.onclose=null}async start(e){if(e=e||Pe.Binary,xe.isIn(e,Pe,"transferFormat"),this._logger.log(k.Debug,`Starting connection with transfer format '${Pe[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const n="Failed to start the HttpConnection before stop() was called.";return this._logger.log(k.Error,n),await this._stopPromise,Promise.reject(new Xe(n))}else if(this._connectionState!=="Connected"){const n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(k.Error,n),Promise.reject(new Xe(n))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new an(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(k.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(k.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(n=>{this._stopPromiseResolver=n}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(n){this._logger.log(k.Error,`HttpConnection.transport.stop() threw error '${n}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(k.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let n=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===pe.WebSockets)this.transport=this._constructTransport(pe.WebSockets),await this._startTransport(n,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,o=0;do{if(s=await this._getNegotiationResponse(n),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Xe("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(n=s.url),s.accessToken){const a=s.accessToken;this._accessTokenFactory=()=>a,this._httpClient._accessToken=a,this._httpClient._accessTokenFactory=void 0}o++}while(s.url&&o<Yn);if(o===Yn&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(n,this._options.transport,s,e)}this.transport instanceof qn&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(k.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(k.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(e){const n={},[s,o]=St();n[s]=o;const a=this._resolveNegotiateUrl(e);this._logger.log(k.Debug,`Sending negotiation request: ${a}.`);try{const i=await this._httpClient.post(a,{content:"",headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(i.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${i.statusCode}'`));const l=JSON.parse(i.content);return(!l.negotiateVersion||l.negotiateVersion<1)&&(l.connectionToken=l.connectionId),l.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Hn("Client didn't negotiate Stateful Reconnect but the server did.")):l}catch(i){let l="Failed to complete negotiation with the server: "+i;return i instanceof ht&&i.statusCode===404&&(l=l+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(k.Error,l),Promise.reject(new Hn(l))}}_createConnectUrl(e,n){return n?e+(e.indexOf("?")===-1?"?":"&")+`id=${n}`:e}async _createTransport(e,n,s,o){let a=this._createConnectUrl(e,s.connectionToken);if(this._isITransport(n)){this._logger.log(k.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,await this._startTransport(a,o),this.connectionId=s.connectionId;return}const i=[],l=s.availableTransports||[];let c=s;for(const d of l){const p=this._resolveTransportOrError(d,n,o,(c==null?void 0:c.useStatefulReconnect)===!0);if(p instanceof Error)i.push(`${d.transport} failed:`),i.push(p);else if(this._isITransport(p)){if(this.transport=p,!c){try{c=await this._getNegotiationResponse(e)}catch(v){return Promise.reject(v)}a=this._createConnectUrl(e,c.connectionToken)}try{await this._startTransport(a,o),this.connectionId=c.connectionId;return}catch(v){if(this._logger.log(k.Error,`Failed to start the transport '${d.transport}': ${v}`),c=void 0,i.push(new cd(`${d.transport} failed: ${v}`,pe[d.transport])),this._connectionState!=="Connecting"){const h="Failed to select transport before stop() was called.";return this._logger.log(k.Debug,h),Promise.reject(new Xe(h))}}}}return i.length>0?Promise.reject(new dd(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case pe.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Md(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case pe.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Ed(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case pe.LongPolling:return new qn(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,n){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async s=>{let o=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,n),await this.features.resend()}catch{o=!0}else{this._stopConnection(s);return}o&&this._stopConnection(s)}:this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(e,n)}_resolveTransportOrError(e,n,s,o){const a=pe[e.transport];if(a==null)return this._logger.log(k.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(Nd(n,a))if(e.transferFormats.map(l=>Pe[l]).indexOf(s)>=0){if(a===pe.WebSockets&&!this._options.WebSocket||a===pe.ServerSentEvents&&!this._options.EventSource)return this._logger.log(k.Debug,`Skipping transport '${pe[a]}' because it is not supported in your environment.'`),new id(`'${pe[a]}' is not supported in your environment.`,a);this._logger.log(k.Debug,`Selecting transport '${pe[a]}'.`);try{return this.features.reconnect=a===pe.WebSockets?o:void 0,this._constructTransport(a)}catch(l){return l}}else return this._logger.log(k.Debug,`Skipping transport '${pe[a]}' because it does not support the requested transfer format '${Pe[s]}'.`),new Error(`'${pe[a]}' does not support ${Pe[s]}.`);else return this._logger.log(k.Debug,`Skipping transport '${pe[a]}' because it was disabled by the client.`),new ld(`'${pe[a]}' is disabled by the client.`,a)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(k.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(k.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(k.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(k.Error,`Connection disconnected with error '${e}'.`):this._logger.log(k.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(n=>{this._logger.log(k.Error,`TransportSendQueue.stop() threw error '${n}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(n){this._logger.log(k.Error,`HttpConnection.onclose(${e}) threw error '${n}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!ie.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const n=window.document.createElement("a");return n.href=e,this._logger.log(k.Information,`Normalizing '${e}' to '${n.href}'.`),n.href}_resolveNegotiateUrl(e){const n=new URL(e);n.pathname.endsWith("/")?n.pathname+="negotiate":n.pathname+="/negotiate";const s=new URLSearchParams(n.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this._negotiateVersion.toString()),s.has("useStatefulReconnect")?s.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&s.append("useStatefulReconnect","true"),n.search=s.toString(),n.toString()}}function Nd(r,e){return!r||(e&r)!==0}class an{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Qt,this._transportResult=new Qt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Qt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Qt;const e=this._transportResult;this._transportResult=void 0;const n=typeof this._buffer[0]=="string"?this._buffer.join(""):an._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),e.resolve()}catch(s){e.reject(s)}}}static _concatBuffers(e){const n=e.map(a=>a.byteLength).reduce((a,i)=>a+i),s=new Uint8Array(n);let o=0;for(const a of e)s.set(new Uint8Array(a),o),o+=a.byteLength;return s.buffer}}class Qt{constructor(){this.promise=new Promise((e,n)=>[this._resolver,this._rejecter]=[e,n])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const Ld="json";class Od{constructor(){this.name=Ld,this.version=2,this.transferFormat=Pe.Text}parseMessages(e,n){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];n===null&&(n=Lt.instance);const s=Ue.parse(e),o=[];for(const a of s){const i=JSON.parse(a);if(typeof i.type!="number")throw new Error("Invalid payload.");switch(i.type){case V.Invocation:this._isInvocationMessage(i);break;case V.StreamItem:this._isStreamItemMessage(i);break;case V.Completion:this._isCompletionMessage(i);break;case V.Ping:break;case V.Close:break;case V.Ack:this._isAckMessage(i);break;case V.Sequence:this._isSequenceMessage(i);break;default:n.log(k.Information,"Unknown message type '"+i.type+"' ignored.");continue}o.push(i)}return o}writeMessage(e){return Ue.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,n){if(typeof e!="string"||e==="")throw new Error(n)}}const Wd={trace:k.Trace,debug:k.Debug,info:k.Information,information:k.Information,warn:k.Warning,warning:k.Warning,error:k.Error,critical:k.Critical,none:k.None};function Bd(r){const e=Wd[r.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${r}`)}class Fd{configureLogging(e){if(xe.isRequired(e,"logging"),zd(e))this.logger=e;else if(typeof e=="string"){const n=Bd(e);this.logger=new cr(n)}else this.logger=new cr(e);return this}withUrl(e,n){return xe.isRequired(e,"url"),xe.isNotEmpty(e,"url"),this.url=e,typeof n=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...n}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:n},this}withHubProtocol(e){return xe.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Gn(e):this.reconnectPolicy=e:this.reconnectPolicy=new Gn,this}withServerTimeout(e){return xe.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return xe.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e==null?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const n=new $d(this.url,e);return on.create(n,this.logger||Lt.instance,this.protocol||new Od,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function zd(r){return r.log!==void 0}const Ud=()=>{const{user:r}=He(),[e,n]=u.useState(null),[s,o]=u.useState(!1),[a,i]=u.useState([]),[l,c]=u.useState([]),[d,p]=u.useState(-1),[v,h]=u.useState(0),y=3;u.useEffect(()=>{const g=[t.jsx(Zt,{children:t.jsx("pre",{style:{color:"#00ff00"},children:`  ________  ___  _________        ________  ___  ___  ________     
|\\   ____\\|\\  \\|\\___   ___\\     |\\   ____\\|\\  \\|\\  \\|\\   ___ \\    
\\ \\  \\___|\\  \\|___ \\  \\_|     \\ \\  \\___|\\  \\\\  \\ \\  \\_|\\ \\   
 \\ \\  \\  __\\ \\  \\   \\ \\  \\       \\ \\  \\  __\\ \\  \\\\  \\ \\  \\ \\\\ \\  
  \\ \\  \\|\\  \\ \\  \\   \\ \\  \\       \\ \\  \\|\\  \\ \\  \\\\  \\ \\  \\_\\\\ \\ 
   \\ \\_______\\ \\__\\   \\ \\__\\       \\ \\_______\\ \\_______\\ \\_______\\
    \\|_______|\\|__|    \\|__|        \\|_______|\\|_______|\\|_______|`})},"logo"),t.jsxs(Zt,{children:[`Welcome ${(r==null?void 0:r.userName)||"Admin"} to the GitGud Drivers Admin Console
`,"Type 'help' for available commands"]},"welcome"),t.jsx(Zt,{children:t.jsx("span",{style:{color:"#888"},children:"Initializing terminal connection..."})},"status")];i(g)},[r]);const x=u.useCallback((g,S,f)=>{const C=new Date().toLocaleTimeString();let D;f?D=t.jsx("span",{style:{color:f},children:S}):D=S,i(E=>[...E,t.jsxs(Zt,{children:[t.jsxs("span",{style:{color:"#666"},children:["[",C,"]"]})," ",D]},`${g}-${Date.now()}`)])},[]);u.useEffect(()=>{const g=async()=>{if(v>=y){x("error","Maximum connection attempts reached. Please refresh the page.","red");return}const S=new Fd().withUrl("http://localhost:5041/terminalHub",{skipNegotiation:!1,transport:pe.WebSockets|pe.LongPolling,withCredentials:!0}).configureLogging(k.Debug).withAutomaticReconnect([0,2e3,5e3,1e4,2e4]).build();try{S.onreconnecting(f=>{x("system","Connection lost. Attempting to reconnect...","yellow")}),S.onreconnected(f=>{x("system","Connection restored!","green")}),S.onclose(f=>{x("system","Connection closed. Please refresh the page.","red")}),S.on("ReceiveOutput",f=>{o(!1),x("output",f)}),S.on("ReceiveError",f=>{o(!1),x("error",f,"red")}),S.on("SystemAlert",f=>{x("alert",`🚨 ALERT: ${f}`,"orange")}),S.on("SystemUpdate",f=>{x("update",`📢 UPDATE: ${f}`,"cyan")}),await S.start(),x("system","Terminal connected successfully!","green"),n(S),h(0)}catch(f){const C=f instanceof Error?f.message:"Unknown error";x("error",`Connection error: ${C}`,"red");const D=v+1;if(D>=y){x("error","Maximum connection attempts reached. Please refresh the page.","red");return}h(D),setTimeout(g,3e3)}};return v<y&&g(),()=>{e&&e.stop().catch(S=>{})}},[v,x]);const b=async g=>{if(!e){x("error","Terminal is not connected","red");return}const S=g.trim();if(S){if(c(f=>[...f,S]),p(-1),x("input",`$ ${S}`,"#00ff00"),S.toLowerCase()==="clear"){i([]);return}try{o(!0),await e.invoke("ExecuteCommand",S)}catch{o(!1),x("error","Failed to execute command. Please try again.","red")}}},m=u.useCallback(g=>{g.key==="ArrowUp"?(g.preventDefault(),p(S=>{const f=S+1;return f<l.length?(l[l.length-1-f],f):S})):g.key==="ArrowDown"&&(g.preventDefault(),p(S=>{const f=S-1;return f>=-1?(f===-1||l[l.length-1-f],f):S}))},[l]);return u.useEffect(()=>(window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)),[m]),t.jsx(_,{sx:{p:2},children:t.jsxs(ye,{elevation:3,sx:{bgcolor:"#1a1a1a",borderRadius:1,overflow:"hidden",height:"500px",position:"relative"},children:[t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1,bgcolor:"#2d2d2d",p:1,borderBottom:"1px solid #333"},children:[t.jsx(as,{sx:{color:"#fff"}}),t.jsx(w,{variant:"h6",sx:{color:"#fff",flex:1},children:"Admin Console"}),s&&t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Ke,{size:20,sx:{color:"#00ff00"}}),t.jsx(w,{variant:"caption",sx:{color:"#00ff00"},children:"Executing..."})]}),!(e!=null&&e.state)&&t.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsxs(w,{variant:"caption",sx:{color:"#ff4444"},children:["Disconnected ",v>0?`(Attempt ${v}/${y})`:""]}),v>0&&t.jsx(Ke,{size:16,sx:{color:"#ff4444"}})]})]}),t.jsx("div",{style:{height:"calc(100% - 48px)",background:"#1a1a1a",overflowY:"auto",display:"flex",flexDirection:"column-reverse"},ref:g=>{g&&(g.scrollTop=g.scrollHeight)},children:t.jsx(ad,{name:"Admin Console",colorMode:lr.Dark,prompt:"$",onInput:b,children:a})})]})})},Hd=({profileData:r,onSave:e=s=>{},onUpdate:n=s=>{}})=>{const s=r||{firstName:"",lastName:"",phone:"",address:"",gender:"",nationality:"",preferredPronouns:"",dateOfBirth:"",profilePicture:""},[o,a]=u.useState(s),[i,l]=u.useState("");u.useEffect(()=>{const h=localStorage.getItem("userProfile");if(h){const y=JSON.parse(h);a(y),typeof y.profilePicture=="string"&&l(y.profilePicture)}},[]),u.useEffect(()=>{localStorage.setItem("userProfile",JSON.stringify(o))},[o]);const c=h=>{const{name:y,value:x}=h.target;a({...o,[y]:x})},d=h=>{const y=h.target.files?h.target.files[0]:null;if(y){const x=URL.createObjectURL(y);l(x),a({...o,profilePicture:y})}},p=()=>{e(o),localStorage.setItem("userProfile",JSON.stringify(o))},v=()=>{n(o),localStorage.setItem("userProfile",JSON.stringify(o))};return t.jsx(ft,{maxWidth:"xs",children:t.jsxs(_,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(jt,{sx:{m:1,bgcolor:"primary.light"},children:t.jsx(Lo,{})}),t.jsx(w,{variant:"h5",children:"User Profile"}),t.jsxs(_,{sx:{mt:3},children:[t.jsxs(G,{container:!0,spacing:2,children:[t.jsx(G,{item:!0,xs:12,sm:6,children:t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,label:"First Name",name:"firstName",value:o.firstName,onChange:c})}),t.jsx(G,{item:!0,xs:12,sm:6,children:t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,label:"Last Name",name:"lastName",value:o.lastName,onChange:c})})]}),t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,label:"Phone Number",name:"phone",value:o.phone,onChange:c}),t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,label:"Address",name:"address",value:o.address,onChange:c}),t.jsxs(Y,{select:!0,margin:"normal",fullWidth:!0,label:"Gender",name:"gender",value:o.gender,onChange:c,children:[t.jsx(O,{value:"Male",children:"Male"}),t.jsx(O,{value:"Female",children:"Female"}),t.jsx(O,{value:"Non-Binary",children:"Non-Binary"}),t.jsx(O,{value:"Other",children:"Other"})]}),t.jsx(Y,{margin:"normal",required:!0,fullWidth:!0,label:"Nationality",name:"nationality",value:o.nationality,onChange:c}),t.jsx(Y,{margin:"normal",fullWidth:!0,label:"Preferred Pronouns",name:"preferredPronouns",value:o.preferredPronouns,onChange:c}),t.jsx(Y,{margin:"normal",fullWidth:!0,label:"Date of Birth",name:"dateOfBirth",type:"date",InputLabelProps:{shrink:!0},value:o.dateOfBirth,onChange:c}),i&&t.jsx(_,{component:"img",src:i,alt:"Profile Preview",sx:{width:"100%",height:"auto",maxHeight:"200px",mt:2,mb:2}}),t.jsxs(q,{variant:"contained",component:"label",fullWidth:!0,sx:{mt:2,mb:2},children:["Upload Profile Picture",t.jsx("input",{type:"file",hidden:!0,name:"profilePicture",accept:"image/*",onChange:d})]}),t.jsx(q,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:p,children:"Save"}),t.jsx(q,{fullWidth:!0,variant:"outlined",sx:{mt:1,mb:2},onClick:v,children:"Update Profile"})]})]})})},Vd={MAIN:t.jsx(_,{children:t.jsx(w,{variant:"h6",children:"Dashboard Home"})}),CHANGE_PASSWORD:t.jsx(Ds,{}),MANAGE_DRIVERS:t.jsx(sd,{}),MANAGE_SPONSORS:t.jsx(td,{}),MANAGE_ADMINS:t.jsx(nd,{}),ADMIN_REPORTS:t.jsx(ed,{}),ADMIN_AUDIT_REPORTS:t.jsx(od,{}),ADMIN_CONSOLE:t.jsx(Ud,{}),DRIVER_APPLICATION:t.jsx(Wc,{}),DRIVER_POINTS:t.jsx(Uc,{}),DRIVER_ACTIVITY:t.jsx(Hc,{}),DRIVER_POINTS_HISTORY:t.jsx(Gc,{}),PROFILE:t.jsx(Hd,{}),APPLICATION_MANAGER:t.jsx(Fc,{}),SPONSOR_REPORTS:t.jsx(Qc,{}),SPONSOR_AUDIT_REPORTS:t.jsx(w,{children:"Audit Reports"}),SPONSOR_DRIVERS:t.jsx(Vc,{})};function Gd(){const{currentView:r}=Ss();return u.useEffect(()=>{},[r]),t.jsx(_,{sx:{width:"100%"},children:Vd[r]||t.jsx(w,{children:"Select an option to view content"})})}const qd=()=>{const{user:r,viewRole:e,setViewRole:n}=He(),s=e||(r==null?void 0:r.userType),{announce:o}=Pc(),a=l=>{const c=l.target.value;n(c),o(`View changed to ${c}`)},i=()=>{n(null),o("View reset back to original role")};return t.jsxs(_,{sx:{display:"flex",width:"100%",minHeight:"100vh"},children:[t.jsx(ur,{}),t.jsx("a",{href:"#dashboard-main",style:{position:"absolute",left:"-9999px",zIndex:999,padding:"1rem",background:"#fff",textDecoration:"none"},onFocus:l=>{l.currentTarget.style.left="1rem"},onBlur:l=>{l.currentTarget.style.left="-9999px"},children:"Skip to dashboard content"}),t.jsxs(_,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",ml:"15px"},children:[t.jsx(_,{sx:{p:2},children:t.jsxs(Ne,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(w,{variant:"h6",component:"h1",tabIndex:0,"aria-label":`Dashboard - Current role: ${s}`,children:"Dashboard"}),r&&(r.userType==="Admin"||r.userType==="Sponsor")&&t.jsxs(ke,{value:e||"",onChange:a,displayEmpty:!0,sx:{minWidth:180},"aria-label":"Select role to view as",renderValue:()=>"Select a role to view",children:[t.jsx(O,{disabled:!0,value:"",children:t.jsx("em",{children:"Select a role to view"})}),r.userType==="Admin"&&[t.jsx(O,{value:"Driver",children:"Driver"},"Driver"),t.jsx(O,{value:"Sponsor",children:"Sponsor"},"Sponsor"),t.jsx(O,{value:"Guest",children:"Guest"},"Guest")],r.userType==="Sponsor"&&t.jsx(O,{value:"Driver",children:"Driver"},"Driver")]}),e&&t.jsx(q,{onClick:i,"aria-label":"Exited view as mode",children:'Exit "View As"'})]})}),t.jsx(Gd,{})]})]})},Jn=({title:r,value:e})=>t.jsxs(_,{sx:{mb:1},children:[t.jsxs(w,{variant:"body1",component:"span",fontWeight:"bold",children:[r,":"]}),t.jsx(w,{variant:"body1",component:"span",sx:{ml:1},children:e})]}),Xn="productCatalog",Yd=10*60*1e3,Jd=()=>{const[r,e]=u.useState([]),[n,s]=u.useState(!0),[o,a]=u.useState(null),[i,l]=u.useState({}),[c,d]=u.useState(!1),[p,v]=u.useState([]),[h,y]=u.useState(""),[x,b]=u.useState(""),[m,g]=u.useState(!1),S=yt();u.useEffect(()=>{f()},[]),u.useEffect(()=>{const j=localStorage.getItem(Xn);if(j){const{listings:$,timestamp:W}=JSON.parse(j);if(Date.now()-W<Yd){e($),s(!1);return}}C()},[]);const f=async()=>{try{const j=await U.get("/api/driver/my-sponsors");v(j.data),j.data.length>0&&y(j.data[0].sponsorId)}catch{a("Failed to load sponsor points data")}},C=async()=>{var j;try{const W=(await U.get("/api/catalog/products")).data.map(te=>({id:te.productID,productId:te.productID,name:te.name,price:te.price,imageUrl:te.imageUrl,pointCost:D(te.price)}));e(W),localStorage.setItem(Xn,JSON.stringify({listings:W,timestamp:Date.now()}))}catch($){a(((j=$.response)==null?void 0:j.data)||"Failed to load products.")}finally{s(!1)}},D=j=>{const $=p.find(te=>te.sponsorId===h);if(!$)return 0;const W=parseFloat(j.split(" ")[0]);return Math.ceil(W/$.pointDollarValue)},E=j=>{typeof h=="number"&&l($=>({...$,[h]:[...$[h]||[],{...j,productId:j.id}]}))},A=()=>d(!0),B=()=>d(!1),T=()=>{l(j=>({...j,[h]:[]}))},M=async()=>{const j=L();S("/order",{state:{cartItems:j,sponsorId:h,points:R==null?void 0:R.totalPoints,pointValue:R==null?void 0:R.pointDollarValue}}),B()};if(n)return t.jsx(Ke,{});if(o)return t.jsx(Ae,{severity:"error",children:o});const R=p.find(j=>j.sponsorId===h),L=()=>i[h]||[];return t.jsxs(t.Fragment,{children:[t.jsxs(ft,{children:[t.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"Product Catalog"}),t.jsxs(Le,{fullWidth:!0,sx:{mb:4},children:[t.jsx(Oe,{children:"Select Sponsor"}),t.jsx(ke,{value:h,label:"Select Sponsor",onChange:j=>y(j.target.value),children:p.map(j=>t.jsxs(O,{value:j.sponsorId,children:[j.sponsorName," - ",j.totalPoints.toLocaleString()," points available"]},j.sponsorId))})]}),R&&t.jsxs(Ae,{severity:"info",sx:{mb:2},children:["You have ",R.totalPoints.toLocaleString()," points available with ",R.sponsorName,". Point Value: $",R.pointDollarValue.toFixed(2)," per point"]}),t.jsx(_,{sx:{display:"flex",flexWrap:"wrap",gap:2,justifyContent:"flex-start"},children:r.map((j,$)=>t.jsxs(Ce,{sx:{width:"calc(33.333% - 16px)",maxWidth:"calc(33.333% - 16px)",marginBottom:2},children:[t.jsx(Ii,{component:"img",height:"200",image:j.imageUrl,alt:`Image of ${j.name}`,sx:{objectFit:"cover"}}),t.jsxs(_e,{children:[t.jsx(w,{variant:"h6",component:"p",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:j.name}),t.jsx(Jn,{title:"Price",value:j.price}),t.jsx(Jn,{title:"Point Cost",value:D(j.price).toLocaleString()}),t.jsx(q,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{const W=D(j.price);if(!R){b("Please select a sponsor first"),g(!0);return}if(W>R.totalPoints){b(`Not enough points! You need ${W} points but have ${R.totalPoints}`),g(!0);return}E(j),b("Item added to cart"),g(!0)},sx:{mt:2},children:"Add to Cart"})]})]},$))}),t.jsx(rn,{open:m,autoHideDuration:3e3,onClose:()=>g(!1),message:x}),t.jsx(_,{sx:{position:"fixed",top:80,right:16,display:"flex",flexDirection:"column",gap:2},children:t.jsxs(q,{variant:"contained",color:"secondary",onClick:A,children:["View Cart (",L().length,")"]})})]}),t.jsxs(Ur,{open:c,onClose:B,children:[t.jsx(tn,{children:"Your Cart"}),t.jsx(Qr,{children:L().length>0?t.jsx(Er,{children:L().map((j,$)=>t.jsx(Mr,{children:t.jsx(or,{primary:j.name,secondary:`Points: ${D(j.price).toLocaleString()}`})},$))}):t.jsx(w,{variant:"body1",children:"Your cart is empty."})}),t.jsxs(en,{children:[t.jsx(q,{onClick:T,color:"error",children:"Clear Cart"}),t.jsx(q,{onClick:M,color:"primary",variant:"contained",disabled:L().length===0,children:"Proceed to Checkout"})]})]})]})},Xd=({text:r,href:e})=>t.jsx("a",{href:e,className:"inline-block border border-blue-500 rounded px-1 text-blue-600 hover:bg-blue-50",style:{display:"inline-block",border:"1px solid #3b82f6",borderRadius:"4px",padding:"0 4px",color:"#2563eb",textDecoration:"none"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="#eff6ff"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="transparent"},children:r}),Kd=(r,e)=>{if(!e||e.length===0)return r;let n=r;return e.forEach(o=>{n=n.replace(o.text,`__LINK_${o.text}__`)}),n.split(/__LINK_|__/).map((o,a)=>{const i=e.find(l=>l.text===o);return i?t.jsx(Xd,{text:i.text,href:i.href},a):t.jsx("span",{children:o},a)})},Zd=({question:r,answer:e,links:n})=>t.jsxs(za,{children:[t.jsx(Za,{expandIcon:t.jsx(os,{}),"aria-controls":"panel-content",id:"panel-header",children:t.jsx(w,{children:r})}),t.jsx(Ga,{children:t.jsx(w,{component:"div",children:Kd(e,n)})})]}),Qd=()=>{const r=[{question:"How do I create an account?",answer:"To create an account, click on the 'Sign Up' Button, and from there you will become a guest.",links:[{text:"Sign Up",href:"/register"}]},{question:"How can I become a driver?",answer:"To become a driver, you need to apply with one of the sponsors associated with our program. Once they have accepted your application, you will automatically become a driver."},{question:"What are the password requirements?",answer:"To create a password, it must have a number, a lowercase letter, an uppercase letter, be at least 8 characters long and no characters can be repeated."},{question:"How can I reset my password?",answer:"If you've forgotten your password, click on the 'Forgot Password' link on the login page.",links:[{text:"Forgot Password",href:"/reset-password"},{text:"login page",href:"/login"}]},{question:"How do I earn points?",answer:"To earn points, first you must be associated with at least one sponsor. From there, simply follow instructions from your sponsor to earn points."},{question:"How do I apply to a sponsor?",answer:"To apply to be a sponsor, simply reach out to us and we will create an account for you if you meet our requirements."},{question:"What can I spend my points on?",answer:"You can exchange your points for a variety of items from your sponsors catalog. Each of our sponsors has a unique selection of items.",links:[{text:"sponsors catalog",href:"/catalog"}]}];return t.jsxs("div",{children:[t.jsx(w,{variant:"h4",gutterBottom:!0,children:"Frequently Asked Questions"}),r.map((e,n)=>t.jsx(Zd,{question:e.question,answer:e.answer,links:e.links},n))]})},eu=()=>{const[r,e]=u.useState(""),[n,s]=u.useState(""),[o,a]=u.useState(""),[i,l]=u.useState(!1),[c,d]=u.useState(""),p=async h=>{if(h.preventDefault(),!r||!n||!o){d("Please fill in all fields");return}if(!/\S+@\S+\.\S+/.test(n)){d("Please enter a valid email address");return}try{await U.post("/api/user/feedback",{Name:r,Email:n,Description:o,SubmissionDate:new Date().toISOString()}),l(!0),e(""),s(""),a(""),d("")}catch{d("An error occurred while submitting your feedback. Please try again later.")}},v=(h,y)=>{y!=="clickaway"&&l(!1)};return t.jsxs(_,{component:"form",onSubmit:p,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[t.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"Provide Feedback"}),t.jsx(Y,{label:"Your Name",fullWidth:!0,margin:"normal",value:r,onChange:h=>e(h.target.value),required:!0}),t.jsx(Y,{label:"Your Email",type:"email",fullWidth:!0,margin:"normal",value:n,onChange:h=>s(h.target.value),required:!0}),t.jsx(Y,{label:"Your Feedback",fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:o,onChange:h=>a(h.target.value),required:!0}),t.jsx(q,{type:"submit",variant:"contained",size:"large",fullWidth:!0,sx:{mt:3,mb:2},children:"Submit Feedback"}),c&&t.jsx(w,{color:"error",sx:{mt:2},children:c}),t.jsx(rn,{open:i,autoHideDuration:6e3,onClose:v,children:t.jsx(Ae,{onClose:v,severity:"success",sx:{width:"100%"},children:"Thank you for your feedback!"})})]})},tu=()=>{const[r,e]=u.useState(!1),[n,s]=u.useState(null),[o,a]=u.useState(!1),i=()=>{e(!1),y("/catalog")},c=Hr().state,{cartItems:d,sponsorId:p,points:v,pointValue:h}=c||{},y=yt(),x=()=>(d==null?void 0:d.reduce((m,g)=>{const S=parseFloat(g.price.split(" ")[0]);return m+Math.ceil(S/h)},0))||0,b=async()=>{var m,g;if(!o){a(!0),s(null);try{const S=d.map(f=>{const C=Math.ceil(parseFloat(f.price.split(" ")[0])/h);return U.post("/api/driver/purchase",{SponsorID:p,ProductID:f.productID||f.productId,PointsSpent:C,ProductName:f.name})});await Promise.all(S),e(!0)}catch(S){const f=((g=(m=S.response)==null?void 0:m.data)==null?void 0:g.message)||"Failed to complete order";s(f)}finally{a(!1)}}};return t.jsxs(ft,{maxWidth:"md",children:[t.jsx(q,{variant:"outlined",onClick:()=>y("/catalog"),sx:{mb:2},children:"Back"}),t.jsx(w,{variant:"h4",align:"center",gutterBottom:!0,children:"Secure Checkout"}),n&&t.jsx(w,{color:"error",sx:{mb:2},children:n}),t.jsxs(G,{container:!0,spacing:4,children:[t.jsx(G,{item:!0,xs:12,sm:7,children:t.jsxs(_,{children:[t.jsx(w,{variant:"h6",children:"1. Delivery Address"}),t.jsx(w,{variant:"body2",children:"All fields marked with * are required"}),t.jsxs(G,{container:!0,spacing:2,mt:2,children:[t.jsx(G,{item:!0,xs:12,children:t.jsx(Y,{label:"Email address *",fullWidth:!0,variant:"outlined"})}),t.jsx(G,{item:!0,xs:6,children:t.jsx(Y,{label:"First name *",fullWidth:!0,variant:"outlined"})}),t.jsx(G,{item:!0,xs:6,children:t.jsx(Y,{label:"Last name *",fullWidth:!0,variant:"outlined"})}),t.jsx(G,{item:!0,xs:12,children:t.jsx(Y,{label:"Address *",fullWidth:!0,variant:"outlined"})}),t.jsx(G,{item:!0,xs:6,children:t.jsx(Y,{label:"City *",fullWidth:!0,variant:"outlined"})}),t.jsx(G,{item:!0,xs:6,children:t.jsx(Y,{label:"ZIP code *",fullWidth:!0,variant:"outlined"})}),t.jsx(G,{item:!0,xs:12,children:t.jsx(Y,{label:"Country *",fullWidth:!0,variant:"outlined",defaultValue:"United States"})})]})]})}),t.jsx(G,{item:!0,xs:12,sm:5,children:t.jsxs(_,{children:[t.jsx(w,{variant:"h6",children:"Order Summary"}),t.jsx(G,{container:!0,spacing:2,mt:2,alignItems:"center",children:d&&d.map((m,g)=>t.jsxs(G,{container:!0,children:[t.jsx(G,{item:!0,xs:8,children:t.jsx(w,{variant:"subtitle1",children:m.name})}),t.jsx(G,{item:!0,xs:4,textAlign:"right",children:t.jsxs(w,{children:[Math.ceil(parseFloat(m.price.split(" ")[0])/h)," points"]})})]},g))}),t.jsxs(_,{mt:2,textAlign:"right",children:[t.jsxs(w,{variant:"h6",children:["Total: ",x()," points"]}),t.jsxs(w,{variant:"h6",children:["Current Points: ",v]}),t.jsx(q,{variant:"contained",color:"primary",fullWidth:!0,onClick:b,disabled:o||x()>v,sx:{mt:2},children:o?"Processing...":"Complete Order"})]})]})})]}),t.jsxs(Ur,{open:r,onClose:i,children:[t.jsx(tn,{children:"Order Complete"}),t.jsx(Qr,{children:t.jsxs(w,{children:["Your order has been successfully completed! Remaining points: ",v-x()]})}),t.jsx(en,{children:t.jsx(q,{onClick:i,color:"primary",children:"Close"})})]})]})},ru=({title:r,buttons:e})=>t.jsxs(_,{sx:{mt:3},children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:r}),e.map((n,s)=>t.jsx(q,{component:mt,to:n.path,variant:"contained",sx:{m:1},children:n.label},s))]}),nu=()=>{const{notifySettings:r,updateNotifySetting:e,user:n}=He(),[s,o]=u.useState(!1),{fontSize:a,setFontSize:i,accessibilityProfile:l,setAccessibilityProfile:c}=jc(),d=()=>{o(h=>!h)},p=(h,y)=>{typeof y=="number"&&i(y)},v=h=>{const y=h.target.value;c(y)};return t.jsxs(_,{sx:{width:"100%",maxWidth:600,margin:"auto"},children:[t.jsx(w,{variant:"h4",component:"h2",gutterBottom:!0,children:"Settings"}),t.jsx(w,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mt:3},children:"Account Settings"}),t.jsx(ru,{title:"",buttons:[{label:"Update Email",path:"/update-email"},{label:"Change Password",path:"/change-password"},{label:"View Profile",path:"/profile"}]}),t.jsx(w,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mt:3},children:"Notification Settings"}),t.jsx(q,{variant:"outlined",onClick:d,children:s?"Hide Preferences":"Change Preferences"}),t.jsx($t,{in:s,timeout:"auto",unmountOnExit:!0,children:t.jsx(Ce,{variant:"outlined",sx:{mt:2},children:t.jsx(_e,{children:t.jsx(de,{container:!0,spacing:2,children:Object.keys(r).map(h=>(h==="applicationApproved"||h==="orderIssue")&&(n==null?void 0:n.userType)!=="Driver"?null:t.jsx(de,{size:{xs:12,sm:6,md:4},children:t.jsx(Kr,{title:h==="systemDrop"||h==="applicationApproved"?"This setting cannot be disabled.":"",placement:"top",children:t.jsxs(t.Fragment,{children:[t.jsx(Jl,{checked:r[h],onChange:()=>e(h,!r[h]),disabled:h==="systemDrop"||h==="applicationApproved",color:"primary"}),t.jsx(w,{variant:"body2",children:h.replace(/([A-Z])/g," $1").replace(/^./,y=>y.toUpperCase())})]})})},h))})})})}),t.jsx(w,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mt:3},children:"Accessibility"}),t.jsx(Ce,{variant:"outlined",sx:{mt:2},children:t.jsxs(_e,{children:[t.jsx(w,{variant:"body1",gutterBottom:!0,children:"Font Size"}),t.jsx(El,{value:a,min:12,max:20,step:1,valueLabelDisplay:"auto",onChange:p,sx:{width:"100%"}}),t.jsx(w,{variant:"body1",gutterBottom:!0,sx:{mt:3},children:"Color Palette"}),t.jsxs(Le,{fullWidth:!0,children:[t.jsx(Oe,{id:"accessibility-profile-select-label",children:"Accessibility Profile"}),t.jsx(ke,{labelId:"accessibility-profile-select-label",value:l,onChange:v,children:["default","highContrast","RGColorblind","BYColorblind","monochrome"].map(h=>t.jsx(O,{value:h,children:h.replace(/([A-Z])/g," $1").replace(/^./,y=>y.toUpperCase())},h))})]})]})})]})},su=()=>{const{isAuthenticated:r}=He();return r?t.jsxs(_,{sx:{display:"flex"},children:[t.jsx(Ic,{}),t.jsx(_,{sx:{flexGrow:1},children:t.jsx(po,{})})]}):t.jsx(Rr,{to:"/",replace:!0})},ou=()=>{const{isAuthenticated:r}=He();return r?t.jsx(Rr,{to:"/dashboard",replace:!0}):t.jsx(Rr,{to:"/home",replace:!0})},au=()=>t.jsx(hc,{children:t.jsxs(gc,{children:[t.jsxs(Tc,{children:[" ",t.jsxs(Cc,{children:[t.jsx("a",{href:"#main-content",style:{position:"absolute",left:"-9999px",zIndex:999,padding:"1rem",background:"#fff",textDecoration:"none"},onFocus:r=>{r.currentTarget.style.left="1rem"},onBlur:r=>{r.currentTarget.style.left="-9999px"},children:"Skip to main content"}),t.jsx(yc,{}),t.jsx(Yr,{}),t.jsx(_,{sx:{mt:1,width:"100%"},children:t.jsxs(uo,{children:[t.jsx($e,{path:"/",element:t.jsx(ou,{})}),t.jsx($e,{path:"/about",element:t.jsx(Rc,{})}),t.jsx($e,{path:"/login",element:t.jsx(Ec,{})}),t.jsx($e,{path:"/register",element:t.jsx(Oc,{})}),t.jsx($e,{path:"/home",element:t.jsx(Ac,{})}),t.jsx($e,{path:"/faq",element:t.jsx(Qd,{})}),t.jsx($e,{path:"/feedback",element:t.jsx(eu,{})}),t.jsxs($e,{element:t.jsx(su,{}),children:[t.jsx($e,{path:"/dashboard",element:t.jsx(qd,{})}),t.jsx($e,{path:"/catalog",element:t.jsx(Jd,{})}),t.jsx($e,{path:"/change-password",element:t.jsx(Ds,{})}),t.jsx($e,{path:"/settings",element:t.jsx(nu,{})}),t.jsx($e,{path:"/order",element:t.jsx(tu,{})}),t.jsx($e,{path:"/profile",element:t.jsx(_c,{})})]})]})})]})]})," "]})});Nr.createRoot(document.getElementById("root")).render(t.jsx(ho,{children:t.jsx(au,{})}));
