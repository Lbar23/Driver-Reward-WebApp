import{j as e,r as a,aF as A,aG as ge,aH as xe,aI as nr,aJ as zr,a0 as He,aK as Pe,aL as Fr,aM as Br,aN as Vr,aO as _,aP as Ur,aQ as Ee,aR as Gr,aS as Hr}from"./vendor-D_6tR-1z.js";import{B as _r,b as qr,I as oe,L as Me,a as Oe,c as _e,d as qe,e as we,E as Yr,f as ir,C as Zr,D as Jr,A as ye,S as Ye,g as Se,P as Ze,h as Re,H as be,T as lr,i as K,j as X,k as Qr,l as p,m as M,n as cr,o as Kr,p as F,q as We,N as Xr,r as se,s as dr,u as et,t as Ne,v as x,M as ur,w as I,x as rt,y as tt,z as hr,F as $e,G as st,J as ot,K as pr,O as P,Q as Ce,R as Je,U as at,V as nt,W as it,X as lt,Y as ct,Z as dt,_ as xr,$ as V,a0 as ut,a1 as Ae,a2 as ht,a3 as pt,a4 as Qe,a5 as Ke,a6 as xt,a7 as mt,a8 as gt,a9 as mr,aa as fe,ab as T,ac as re,ad as N,ae as R,af as Le,ag as ae,ah as De,ai as ke,aj as gr,ak as je,al as jr,am as ze,an as br,ao as fr,ap as Q,aq as Z,ar as J,as as B,at as ee,au as ie,av as le,aw as ce,ax as O,ay as m,az as de,aA as Fe,aB as vr,aC as jt,aD as Xe,aE as bt,aF as ft,aG as yr,aH as Sr,aI as er,aJ as Ie,aK as Be,aL as Ve,aM as vt,aN as yt,aO as St,aP as Ct,aQ as wt,aR as It,aS as Cr,aT as wr,aU as Ir,aV as Dr,aW as kr,aX as Dt,aY as kt,aZ as Pt}from"./mui-Br3dmtUo.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();function Ue({showBadge:r=!1,...s}){return e.jsx(_r,{color:"error",variant:"dot",invisible:!r,sx:{[`& .${qr.badge}`]:{right:2,top:2}},children:e.jsx(oe,{size:"small",...s})})}const Pr=a.createContext(void 0),Rt=({children:r})=>{const[s,o]=a.useState(()=>sessionStorage.getItem("isAuthenticated")==="true"),[u,n]=a.useState(()=>{const t=sessionStorage.getItem("user");return t?JSON.parse(t):null}),[i,c]=a.useState(()=>sessionStorage.getItem("viewRole")||null),[d,l]=a.useState(!s),b=a.useCallback(t=>{c(t),t?sessionStorage.setItem("viewRole",t):sessionStorage.removeItem("viewRole")},[]);a.useEffect(()=>{s?l(!1):f()},[]);const f=async()=>{l(!0);try{const t=await A.get("/api/user/currentuser",{withCredentials:!0});n(t.data),o(!0),sessionStorage.setItem("user",JSON.stringify(t.data)),sessionStorage.setItem("isAuthenticated","true")}catch{n(null),o(!1),sessionStorage.removeItem("user"),sessionStorage.removeItem("isAuthenticated")}finally{l(!1)}},v=async()=>{try{await A.post("/api/user/logout",{},{withCredentials:!0}),n(null),o(!1),b(null),sessionStorage.clear()}catch(t){console.error("Logout failed:",t)}};return e.jsx(Pr.Provider,{value:{user:u,isAuthenticated:s,isLoading:d,viewRole:i,setViewRole:b,checkAuth:f,logout:v},children:r})},ne=()=>{const r=a.useContext(Pr);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},Rr=a.createContext(void 0),Ar=()=>{const r=a.useContext(Rr);if(!r)throw new Error("useView must be used within a ViewProvider");return r},At=({children:r})=>{const[s,o]=a.useState("MAIN");return e.jsx(Rr.Provider,{value:{currentView:s,setCurrentView:o},children:r})},rr={base:[{text:"Dashboard",icon:e.jsx(Jr,{}),view:"MAIN"}],Guest:[{text:"Applications",icon:e.jsx(ye,{}),view:"DRIVER_APPLICATION"}],Driver:[{text:"Applications",icon:e.jsx(ye,{}),view:"DRIVER_APPLICATION"},{text:"Product Catalog",icon:e.jsx(Ye,{}),path:"/catalog"},{text:"Register With Sponsors",icon:e.jsx(ye,{}),view:"DRIVER_REGISTRATION"},{text:"Points",icon:e.jsx(Se,{}),view:"DRIVER_POINTS"},{text:"Activity",icon:e.jsx(Se,{}),view:"DRIVER_ACTIVITY"},{text:"Profile",icon:e.jsx(Se,{}),view:"PROFILE"}],Admin:[{text:"Manage Users",icon:e.jsx(Ze,{}),nestedItems:[{text:"Drivers",icon:e.jsx(Re,{}),view:"MANAGE_DRIVERS"},{text:"Sponsors",icon:e.jsx(Re,{}),view:"MANAGE_SPONSORS"},{text:"Admins",icon:e.jsx(Re,{}),view:"MANAGE_ADMINS"}]},{text:"Reports Views",icon:e.jsx(be,{}),nestedItems:[{text:"General",icon:e.jsx(be,{}),view:"ADMIN_REPORTS"},{text:"Audits",icon:e.jsx(be,{}),view:"ADMIN_AUDIT_REPORTS"}]},{text:"Console",icon:e.jsx(lr,{}),view:"ADMIN_CONSOLE"}],Sponsor:[{text:"Manage Drivers",icon:e.jsx(Ze,{}),view:"SPONSOR_DRIVERS"},{text:"Approve/Reject Applications",icon:e.jsx(ye,{}),view:"APPLICATION_MANAGER"},{text:"Product Catalog",icon:e.jsx(Ye,{}),path:"/catalog"},{text:"Reports Views",icon:e.jsx(be,{}),nestedItems:[{text:"General",icon:e.jsx(Se,{}),view:"SPONSOR_REPORTS"},{text:"Audits",icon:e.jsx(be,{}),view:"SPONSOR_AUDIT_REPORTS"}]}]};function Tr(){const{setCurrentView:r}=Ar(),{user:s,viewRole:o}=ne(),u=ge(),n=o||(s==null?void 0:s.userType)||"Guest",[i,c]=a.useState({}),d=[...rr.base,...rr[n]||[]],l=f=>{c(v=>({...v,[f]:!v[f]}))},b=(f,v)=>{v?u(v):f&&r(f)};return e.jsx(Me,{dense:!0,children:d.map((f,v)=>e.jsxs(a.Fragment,{children:[e.jsx(Oe,{disablePadding:!0,children:e.jsxs(_e,{onClick:()=>f.nestedItems?l(f.text):b(f.view,f.path),children:[e.jsx(qe,{children:f.icon}),e.jsx(we,{primary:f.text}),f.nestedItems?i[f.text]?e.jsx(Yr,{}):e.jsx(ir,{}):null]})}),f.nestedItems&&e.jsx(Zr,{in:i[f.text],timeout:"auto",unmountOnExit:!0,children:e.jsx(Me,{component:"div",disablePadding:!0,children:f.nestedItems.map((t,g)=>e.jsx(Oe,{disablePadding:!0,children:e.jsxs(_e,{onClick:()=>b(t.view,t.path),children:[e.jsx(qe,{children:t.icon}),e.jsx(we,{primary:t.text})]})},g))})})]},v))})}function Tt(){return e.jsx(K,{variant:"outlined",sx:{m:1.5,p:1.5},children:e.jsxs(X,{children:[e.jsx(Qr,{fontSize:"small"}),e.jsx(p,{gutterBottom:!0,sx:{fontWeight:600},children:"Something"}),e.jsx(p,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"Earn points by driving safe!"}),e.jsx(M,{variant:"contained",size:"small",fullWidth:!0,children:"Make the pledge"})]})})}function Et({open:r,toggleDrawer:s}){const{user:o,viewRole:u,logout:n}=ne(),i=u?{userName:`Viewing as ${u}`,email:`${u.toLowerCase()}@example.com`,userType:u}:o;return e.jsx(cr,{anchor:"right",open:r,onClose:s(!1),sx:{zIndex:c=>c.zIndex.drawer+1,[`& .${Kr.paper}`]:{backgroundImage:"none",backgroundColor:"background.paper"}},children:e.jsxs(F,{sx:{maxWidth:"70dvw",height:"100%"},children:[e.jsxs(F,{direction:"row",sx:{p:2,pb:0,gap:1},children:[i?e.jsxs(F,{direction:"row",sx:{gap:1,alignItems:"center",flexGrow:1,p:1},children:[e.jsx(We,{alt:i.userName,src:"/static/images/avatar/7.jpg",sx:{width:24,height:24}}),e.jsx(p,{component:"p",variant:"h6",children:i.userName})]}):e.jsx(p,{variant:"body2",sx:{flexGrow:1,p:1},children:"Please log in to access more features."}),e.jsx(Ue,{showBadge:!0,children:e.jsx(Xr,{})})]}),e.jsx(se,{}),e.jsxs(F,{sx:{flexGrow:1},children:[e.jsx(Tr,{}),e.jsx(se,{})]}),e.jsx(Tt,{}),i&&e.jsx(F,{sx:{p:2},children:e.jsx(M,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(dr,{}),onClick:n,children:"Logout"})})]})})}function Mt(r){const{mode:s,systemMode:o,setMode:u}=et(),n=Ne(),[i,c]=a.useState(null),d=!!i,l=g=>{c(g.currentTarget)},b=()=>{c(null)},f=g=>()=>{u(g),b()};if(!s)return e.jsx(x,{"data-screenshot":"toggle-mode",sx:{verticalAlign:"bottom",display:"inline-flex",width:"2.25rem",height:"2.25rem",borderRadius:n.shape.borderRadius,border:"1px solid",borderColor:n.palette.divider}});const t=(o||s)==="light"?e.jsx(rt,{}):e.jsx(tt,{});return e.jsxs(a.Fragment,{children:[e.jsx(oe,{"data-screenshot":"toggle-mode",onClick:l,disableRipple:!0,size:"small","aria-controls":d?"color-scheme-menu":void 0,"aria-haspopup":"true","aria-expanded":d?"true":void 0,...r,children:t}),e.jsxs(ur,{anchorEl:i,id:"color-scheme-menu",open:d,onClose:b,onClick:b,PaperProps:{variant:"outlined",sx:{my:"4px"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(I,{selected:s==="system",onClick:f("system"),children:"System"}),e.jsx(I,{selected:s==="light",onClick:f("light"),children:"Light"}),e.jsx(I,{selected:s==="dark",onClick:f("dark"),children:"Dark"})]})]})}function Ot(){const[r,s]=a.useState(!1);ne();const o=u=>()=>{s(u)};return e.jsx(hr,{position:"fixed",sx:{zIndex:u=>u.zIndex.drawer+1,boxShadow:0,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",maxWidth:"100vw",overflow:"hidden"},children:e.jsxs($e,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:1,maxWidth:"100%",overflow:"hidden"},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1,flexShrink:0},children:[e.jsx(Lt,{}),e.jsx(p,{variant:"h5",component:"a",href:"/",sx:{color:"text.primary",textDecoration:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"GitGud Drivers"})]}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:{xs:1,md:2},flexWrap:"wrap",justifyContent:"flex-end",width:{xs:"100%",md:"auto"}},children:[e.jsx(p,{component:xe,to:"/about",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"About"}),e.jsx(p,{component:xe,to:"/faq",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"FAQ"}),e.jsx(Mt,{}),e.jsxs(x,{sx:{display:{xs:"block",md:"none"}},children:[e.jsx(Ue,{"aria-label":"menu",onClick:o(!0),children:e.jsx(st,{})}),e.jsx(Et,{open:r,toggleDrawer:o})]})]})]})})}function Lt(){return e.jsx(x,{sx:{width:"1.5rem",height:"1.5rem",bgcolor:"black",borderRadius:"999px",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(135deg, hsl(210, 98%, 60%) 0%, hsl(210, 100%, 35%) 100%)",color:"hsla(210, 100%, 95%, 0.9)",border:"1px solid",borderColor:"hsl(210, 100%, 55%)",boxShadow:"inset 0 2px 5px rgba(255, 255, 255, 0.3)"},children:e.jsx(ot,{color:"inherit",sx:{fontSize:"1rem"}})})}const q=pr();[...q.shadows];const w={50:"hsl(210, 100%, 95%)",100:"hsl(210, 100%, 92%)",200:"hsl(210, 100%, 80%)",300:"hsl(210, 100%, 65%)",400:"hsl(210, 98%, 48%)",500:"hsl(210, 98%, 42%)",600:"hsl(210, 98%, 55%)",700:"hsl(210, 100%, 35%)",800:"hsl(210, 100%, 16%)",900:"hsl(210, 100%, 21%)"},j={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},G={50:"hsl(120, 80%, 98%)",100:"hsl(120, 75%, 94%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",600:"hsl(120, 70%, 25%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},Y={50:"hsl(45, 100%, 97%)",100:"hsl(45, 92%, 90%)",200:"hsl(45, 94%, 80%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",600:"hsl(45, 91%, 25%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},H={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",600:"hsl(0, 91%, 25%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},Wt={light:{palette:{primary:{light:w[200],main:w[400],dark:w[700],contrastText:w[50]},info:{light:w[100],main:w[300],dark:w[600],contrastText:j[50]},warning:{light:Y[300],main:Y[400],dark:Y[800]},error:{light:H[300],main:H[400],dark:H[800]},success:{light:G[300],main:G[400],dark:G[800]},grey:{...j},divider:P(j[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:j[800],secondary:j[600],warning:Y[400]},action:{hover:P(j[200],.2),selected:`${P(j[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:w[50],light:w[300],main:w[400],dark:w[700]},info:{contrastText:w[300],light:w[500],main:w[700],dark:w[900]},warning:{light:Y[400],main:Y[500],dark:Y[700]},error:{light:H[400],main:H[500],dark:H[700]},success:{light:G[400],main:G[500],dark:G[700]},grey:{...j},divider:P(j[700],.6),background:{default:j[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:j[400]},action:{hover:P(j[600],.2),selected:P(j[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}};['"Inter", "sans-serif"'].join(","),q.typography.pxToRem(48),q.typography.pxToRem(36),q.typography.pxToRem(30),q.typography.pxToRem(24),q.typography.pxToRem(20),q.typography.pxToRem(18),q.typography.pxToRem(18),q.typography.pxToRem(14),q.typography.pxToRem(14),q.typography.pxToRem(14),q.typography.pxToRem(12);const Nt={borderRadius:8},$t=["none","var(--template-palette-baseShadow)",...q.shadows.slice(2)],zt=$t,Ft={MuiButtonBase:{defaultProps:{disableTouchRipple:!0,disableRipple:!0},styleOverrides:{root:({theme:r})=>({boxSizing:"border-box",transition:"all 100ms ease-in","&:focus-visible":{outline:`3px solid ${P(r.palette.primary.main,.5)}`,outlineOffset:"2px"}})}},MuiButton:{styleOverrides:{root:({theme:r})=>({boxShadow:"none",borderRadius:r.shape.borderRadius,textTransform:"none",variants:[{props:{size:"small"},style:{height:"2.25rem",padding:"8px 12px"}},{props:{size:"medium"},style:{height:"2.5rem"}},{props:{color:"primary",variant:"contained"},style:{color:"white",backgroundColor:j[900],backgroundImage:`linear-gradient(to bottom, ${j[700]}, ${j[800]})`,boxShadow:`inset 0 1px 0 ${j[600]}, inset 0 -1px 0 1px hsl(220, 0%, 0%)`,border:`1px solid ${j[700]}`,"&:hover":{backgroundImage:"none",backgroundColor:j[700],boxShadow:"none"},"&:active":{backgroundColor:j[800]},...r.applyStyles("dark",{color:"black",backgroundColor:j[50],backgroundImage:`linear-gradient(to bottom, ${j[100]}, ${j[50]})`,boxShadow:"inset 0 -1px 0  hsl(220, 30%, 80%)",border:`1px solid ${j[50]}`,"&:hover":{backgroundImage:"none",backgroundColor:j[300],boxShadow:"none"},"&:active":{backgroundColor:j[400]}})}},{props:{color:"secondary",variant:"contained"},style:{color:"white",backgroundColor:w[300],backgroundImage:`linear-gradient(to bottom, ${P(w[400],.8)}, ${w[500]})`,boxShadow:`inset 0 2px 0 ${P(w[200],.2)}, inset 0 -2px 0 ${P(w[700],.4)}`,border:`1px solid ${w[500]}`,"&:hover":{backgroundColor:w[700],boxShadow:"none"},"&:active":{backgroundColor:w[700],backgroundImage:"none"}}},{props:{variant:"outlined"},style:{color:r.palette.text.primary,border:"1px solid",borderColor:j[200],backgroundColor:P(j[50],.3),"&:hover":{backgroundColor:j[100],borderColor:j[300]},"&:active":{backgroundColor:j[200]},...r.applyStyles("dark",{backgroundColor:j[800],borderColor:j[700],"&:hover":{backgroundColor:j[900],borderColor:j[600]},"&:active":{backgroundColor:j[900]}})}},{props:{color:"secondary",variant:"outlined"},style:{color:w[700],border:"1px solid",borderColor:w[200],backgroundColor:w[50],"&:hover":{backgroundColor:w[100],borderColor:w[400]},"&:active":{backgroundColor:P(w[200],.7)},...r.applyStyles("dark",{color:w[50],border:"1px solid",borderColor:w[900],backgroundColor:P(w[900],.3),"&:hover":{borderColor:w[700],backgroundColor:P(w[900],.6)},"&:active":{backgroundColor:P(w[900],.5)}})}},{props:{variant:"text"},style:{color:j[600],"&:hover":{backgroundColor:j[100]},"&:active":{backgroundColor:j[200]},...r.applyStyles("dark",{color:j[50],"&:hover":{backgroundColor:j[700]},"&:active":{backgroundColor:P(j[700],.7)}})}},{props:{color:"secondary",variant:"text"},style:{color:w[700],"&:hover":{backgroundColor:P(w[100],.5)},"&:active":{backgroundColor:P(w[200],.7)},...r.applyStyles("dark",{color:w[100],"&:hover":{backgroundColor:P(w[900],.5)},"&:active":{backgroundColor:P(w[900],.3)}})}}]})}},MuiIconButton:{styleOverrides:{root:({theme:r})=>({boxShadow:"none",borderRadius:r.shape.borderRadius,textTransform:"none",fontWeight:r.typography.fontWeightMedium,letterSpacing:0,color:r.palette.text.primary,border:"1px solid ",borderColor:j[200],backgroundColor:P(j[50],.3),"&:hover":{backgroundColor:j[100],borderColor:j[300]},"&:active":{backgroundColor:j[200]},...r.applyStyles("dark",{backgroundColor:j[800],borderColor:j[700],"&:hover":{backgroundColor:j[900],borderColor:j[600]},"&:active":{backgroundColor:j[900]}}),variants:[{props:{size:"small"},style:{width:"2.25rem",height:"2.25rem",padding:"0.25rem",[`& .${Ce.root}`]:{fontSize:"1rem"}}},{props:{size:"medium"},style:{width:"2.5rem",height:"2.5rem"}}]})}},MuiToggleButtonGroup:{styleOverrides:{root:({theme:r})=>({borderRadius:"10px",boxShadow:`0 4px 16px ${P(j[400],.2)}`,[`& .${Je.selected}`]:{color:w[500]},...r.applyStyles("dark",{[`& .${Je.selected}`]:{color:"#fff"},boxShadow:`0 4px 16px ${P(w[700],.5)}`})})}},MuiToggleButton:{styleOverrides:{root:({theme:r})=>({padding:"12px 16px",textTransform:"none",borderRadius:"10px",fontWeight:500,...r.applyStyles("dark",{color:j[400],boxShadow:"0 4px 16px rgba(0, 0, 0, 0.5)",[`&.${at.selected}`]:{color:w[300]}})})}},MuiCheckbox:{defaultProps:{disableRipple:!0,icon:e.jsx(nt,{sx:{color:"hsla(210, 0%, 0%, 0.0)"}}),checkedIcon:e.jsx(it,{sx:{height:14,width:14}}),indeterminateIcon:e.jsx(lt,{sx:{height:14,width:14}})},styleOverrides:{root:({theme:r})=>({margin:10,height:16,width:16,borderRadius:5,border:"1px solid ",borderColor:P(j[300],.8),boxShadow:"0 0 0 1.5px hsla(210, 0%, 0%, 0.04) inset",backgroundColor:P(j[100],.4),transition:"border-color, background-color, 120ms ease-in","&:hover":{borderColor:w[300]},"&.Mui-focusVisible":{outline:`3px solid ${P(w[500],.5)}`,outlineOffset:"2px",borderColor:w[400]},"&.Mui-checked":{color:"white",backgroundColor:w[500],borderColor:w[500],boxShadow:"none","&:hover":{backgroundColor:w[600]}},...r.applyStyles("dark",{borderColor:P(j[700],.8),boxShadow:"0 0 0 1.5px hsl(210, 0%, 0%) inset",backgroundColor:P(j[900],.8),"&:hover":{borderColor:w[300]},"&.Mui-focusVisible":{borderColor:w[400],outline:`3px solid ${P(w[500],.5)}`,outlineOffset:"2px"}})})}},MuiInputBase:{styleOverrides:{root:{border:"none"},input:{"&::placeholder":{opacity:.7,color:j[500]}}}},MuiOutlinedInput:{styleOverrides:{input:{padding:0},root:({theme:r})=>({padding:"8px 12px",color:r.palette.text.primary,borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,backgroundColor:r.palette.background.default,transition:"border 120ms ease-in","&:hover":{borderColor:j[400]},[`&.${ct.focused}`]:{outline:`3px solid ${P(w[500],.5)}`,borderColor:w[400]},...r.applyStyles("dark",{"&:hover":{borderColor:j[500]}}),variants:[{props:{size:"small"},style:{height:"2.25rem"}},{props:{size:"medium"},style:{height:"2.5rem"}}]}),notchedOutline:{border:"none"}}},MuiInputAdornment:{styleOverrides:{root:({theme:r})=>({color:r.palette.grey[500],...r.applyStyles("dark",{color:r.palette.grey[400]})})}},MuiFormLabel:{styleOverrides:{root:({theme:r})=>({typography:r.typography.caption,marginBottom:8})}}},Bt={MuiList:{styleOverrides:{root:{padding:"8px",display:"flex",flexDirection:"column",gap:0}}},MuiListItem:{styleOverrides:{root:({theme:r})=>({[`& .${Ce.root}`]:{width:"1rem",height:"1rem",color:r.palette.text.secondary},[`& .${dt.root}`]:{fontWeight:500},[`& .${xr.root}`]:{display:"flex",gap:8,padding:"2px 8px",borderRadius:r.shape.borderRadius,opacity:.7,"&.Mui-selected":{opacity:1,backgroundColor:P(r.palette.action.selected,.3),[`& .${Ce.root}`]:{color:r.palette.text.primary},"&:focus-visible":{backgroundColor:P(r.palette.action.selected,.3)},"&:hover":{backgroundColor:P(r.palette.action.selected,.5)}},"&:focus-visible":{backgroundColor:"transparent"}}})}},MuiListItemText:{styleOverrides:{primary:({theme:r})=>({fontSize:r.typography.body2.fontSize,fontWeight:500,lineHeight:r.typography.body2.lineHeight}),secondary:({theme:r})=>({fontSize:r.typography.caption.fontSize,lineHeight:r.typography.caption.lineHeight})}},MuiListSubheader:{styleOverrides:{root:({theme:r})=>({backgroundColor:"transparent",padding:"4px 8px",fontSize:r.typography.caption.fontSize,fontWeight:500,lineHeight:r.typography.caption.lineHeight})}},MuiListItemIcon:{styleOverrides:{root:{minWidth:0}}},MuiChip:{defaultProps:{size:"small"},styleOverrides:{root:({theme:r})=>({border:"1px solid",borderRadius:"999px",[`& .${V.label}`]:{fontWeight:600},variants:[{props:{color:"default"},style:{borderColor:j[200],backgroundColor:j[100],[`& .${V.label}`]:{color:j[500]},[`& .${V.icon}`]:{color:j[500]},...r.applyStyles("dark",{borderColor:j[700],backgroundColor:j[800],[`& .${V.label}`]:{color:j[300]},[`& .${V.icon}`]:{color:j[300]}})}},{props:{color:"success"},style:{borderColor:G[200],backgroundColor:G[50],[`& .${V.label}`]:{color:G[500]},[`& .${V.icon}`]:{color:G[500]},...r.applyStyles("dark",{borderColor:G[800],backgroundColor:G[900],[`& .${V.label}`]:{color:G[300]},[`& .${V.icon}`]:{color:G[300]}})}},{props:{color:"error"},style:{borderColor:H[100],backgroundColor:H[50],[`& .${V.label}`]:{color:H[500]},[`& .${V.icon}`]:{color:H[500]},...r.applyStyles("dark",{borderColor:H[800],backgroundColor:H[900],[`& .${V.label}`]:{color:H[200]},[`& .${V.icon}`]:{color:H[300]}})}},{props:{size:"small"},style:{maxHeight:20,[`& .${V.label}`]:{fontSize:r.typography.caption.fontSize},[`& .${Ce.root}`]:{fontSize:r.typography.caption.fontSize}}},{props:{size:"medium"},style:{[`& .${V.label}`]:{fontSize:r.typography.caption.fontSize}}}]})}},MuiTablePagination:{styleOverrides:{actions:{display:"flex",gap:8,marginRight:6,[`& .${ut.root}`]:{minWidth:0,width:36,height:36}}}},MuiIcon:{defaultProps:{fontSize:"small"},styleOverrides:{root:{variants:[{props:{fontSize:"small"},style:{fontSize:"1rem"}}]}}}},Vt={MuiAlert:{styleOverrides:{root:({theme:r})=>({borderRadius:10,backgroundColor:Y[100],color:r.palette.text.primary,border:`1px solid ${P(Y[300],.5)}`,"& .MuiAlert-icon":{color:Y[500]},...r.applyStyles("dark",{backgroundColor:`${P(Y[900],.5)}`,border:`1px solid ${P(Y[800],.5)}`})})}},MuiDialog:{styleOverrides:{root:({theme:r})=>({"& .MuiDialog-paper":{borderRadius:"10px",border:"1px solid",borderColor:r.palette.divider}})}},MuiLinearProgress:{styleOverrides:{root:({theme:r})=>({height:8,borderRadius:8,backgroundColor:j[200],...r.applyStyles("dark",{backgroundColor:j[800]})})}}},Ut={MuiMenuItem:{styleOverrides:{root:({theme:r})=>({borderRadius:r.shape.borderRadius,padding:"6px 8px",[`&.${Ae.focusVisible}`]:{backgroundColor:"transparent"},[`&.${Ae.selected}`]:{[`&.${Ae.focusVisible}`]:{backgroundColor:P(r.palette.action.selected,.3)}}})}},MuiMenu:{styleOverrides:{list:{gap:"0px",[`&.${ht.root}`]:{margin:"0 -8px"}},paper:({theme:r})=>({marginTop:"4px",borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,backgroundImage:"none",background:"hsl(0, 0%, 100%)",boxShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px",[`& .${xr.root}`]:{"&.Mui-selected":{backgroundColor:P(r.palette.action.selected,.3)}},...r.applyStyles("dark",{background:j[900],boxShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"})})}},MuiSelect:{defaultProps:{IconComponent:a.forwardRef((r,s)=>e.jsx(pt,{fontSize:"small",...r,ref:s}))},styleOverrides:{root:({theme:r})=>({borderRadius:r.shape.borderRadius,border:"1px solid",borderColor:j[200],backgroundColor:r.palette.background.paper,boxShadow:"inset 0 1px 0 1px hsla(220, 0%, 100%, 0.6), inset 0 -1px 0 1px hsla(220, 35%, 90%, 0.5)","&:hover":{borderColor:j[300],backgroundColor:r.palette.background.paper,boxShadow:"none"},[`&.${Qe.focused}`]:{outlineOffset:0,borderColor:j[400]},"&:before, &:after":{display:"none"},...r.applyStyles("dark",{borderRadius:r.shape.borderRadius,borderColor:j[700],backgroundColor:r.palette.background.paper,boxShadow:`inset 0 1px 0 1px ${P(j[700],.15)}, inset 0 -1px 0 1px hsla(220, 0%, 0%, 0.7)`,"&:hover":{borderColor:P(j[700],.7),backgroundColor:r.palette.background.paper,boxShadow:"none"},[`&.${Qe.focused}`]:{outlineOffset:0,borderColor:j[900]},"&:before, &:after":{display:"none"}})}),select:({theme:r})=>({display:"flex",alignItems:"center",...r.applyStyles("dark",{display:"flex",alignItems:"center","&:focus-visible":{backgroundColor:j[900]}})})}},MuiLink:{defaultProps:{underline:"none"},styleOverrides:{root:({theme:r})=>({color:r.palette.text.primary,fontWeight:500,position:"relative",textDecoration:"none",width:"fit-content","&::before":{content:'""',position:"absolute",width:"100%",height:"1px",bottom:0,left:0,backgroundColor:r.palette.text.secondary,opacity:.3,transition:"width 0.3s ease, opacity 0.3s ease"},"&:hover::before":{width:0},"&:focus-visible":{outline:`3px solid ${P(w[500],.5)}`,outlineOffset:"4px",borderRadius:"2px"}})}},MuiDrawer:{styleOverrides:{paper:({theme:r})=>({backgroundColor:r.palette.background.default})}},MuiPaginationItem:{styleOverrides:{root:({theme:r})=>({"&.Mui-selected":{color:"white",backgroundColor:r.palette.grey[900]},...r.applyStyles("dark",{"&.Mui-selected":{color:"black",backgroundColor:r.palette.grey[50]}})})}},MuiTabs:{styleOverrides:{root:{minHeight:"fit-content"},indicator:({theme:r})=>({backgroundColor:r.palette.grey[800],...r.applyStyles("dark",{backgroundColor:r.palette.grey[200]})})}},MuiTab:{styleOverrides:{root:({theme:r})=>({padding:"6px 8px",marginBottom:"8px",textTransform:"none",minWidth:"fit-content",minHeight:"fit-content",color:r.palette.text.secondary,borderRadius:r.shape.borderRadius,border:"1px solid",borderColor:"transparent",":hover":{color:r.palette.text.primary,backgroundColor:j[100],borderColor:j[200]},[`&.${Ke.selected}`]:{color:j[900]},...r.applyStyles("dark",{":hover":{color:r.palette.text.primary,backgroundColor:j[800],borderColor:j[700]},[`&.${Ke.selected}`]:{color:"#fff"}})})}},MuiStepConnector:{styleOverrides:{line:({theme:r})=>({borderTop:"1px solid",borderColor:r.palette.divider,flex:1,borderRadius:"99px"})}},MuiStepIcon:{styleOverrides:{root:({theme:r})=>({color:"transparent",border:`1px solid ${j[400]}`,width:12,height:12,borderRadius:"50%","& text":{display:"none"},"&.Mui-active":{border:"none",color:r.palette.primary.main},"&.Mui-completed":{border:"none",color:r.palette.success.main},...r.applyStyles("dark",{border:`1px solid ${j[700]}`,"&.Mui-active":{border:"none",color:r.palette.primary.light},"&.Mui-completed":{border:"none",color:r.palette.success.light}}),variants:[{props:{completed:!0},style:{width:12,height:12}}]})}},MuiStepLabel:{styleOverrides:{label:({theme:r})=>({"&.Mui-completed":{opacity:.6,...r.applyStyles("dark",{opacity:.5})}})}}},Gt={MuiAccordion:{defaultProps:{elevation:0,disableGutters:!0},styleOverrides:{root:({theme:r})=>({padding:4,overflow:"clip",backgroundColor:r.palette.background.default,border:"1px solid",borderColor:r.palette.divider,":before":{backgroundColor:"transparent"},"&:not(:last-of-type)":{borderBottom:"none"},"&:first-of-type":{borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:r.shape.borderRadius,borderBottomRightRadius:r.shape.borderRadius}})}},MuiAccordionSummary:{styleOverrides:{root:({theme:r})=>({border:"none",borderRadius:8,"&:hover":{backgroundColor:j[50]},"&:focus-visible":{backgroundColor:"transparent"},...r.applyStyles("dark",{"&:hover":{backgroundColor:j[800]}})})}},MuiAccordionDetails:{styleOverrides:{root:{mb:20,border:"none"}}},MuiPaper:{defaultProps:{elevation:0}},MuiCard:{styleOverrides:{root:({theme:r})=>({padding:16,gap:16,transition:"all 100ms ease",backgroundColor:j[50],borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,boxShadow:"none",...r.applyStyles("dark",{backgroundColor:j[800]}),variants:[{props:{variant:"outlined"},style:{border:`1px solid ${r.palette.divider}`,boxShadow:"none",background:"hsl(0, 0%, 100%)",...r.applyStyles("dark",{background:P(j[900],.4)})}}]})}},MuiCardContent:{styleOverrides:{root:{padding:0,"&:last-child":{paddingBottom:0}}}},MuiCardHeader:{styleOverrides:{root:{padding:0}}},MuiCardActions:{styleOverrides:{root:{padding:0}}}};function Ht({children:r,disableCustomTheme:s,themeComponents:o}){const u=a.useMemo(()=>s?{}:pr({cssVariables:{colorSchemeSelector:"data-mui-color-scheme",cssVarPrefix:"template"},colorSchemes:Wt,shadows:zt,shape:Nt,components:{...Ft,...Bt,...Vt,...Ut,...Gt,...o}}),[s,o]);return s?e.jsx(a.Fragment,{children:r}):e.jsx(xt,{theme:u,disableTransitionOnChange:!0,children:r})}const _t=mt(I)({margin:"2px"}),Te=a.forwardRef(({to:r,children:s,onClick:o},u)=>e.jsx(I,{component:xe,to:r,ref:u,onClick:o,children:s}));function qt(){const[r,s]=a.useState(null),{logout:o}=ne(),u=!!r,n=d=>{s(d.currentTarget)},i=()=>{s(null)},c=()=>{o(),i()};return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{"aria-label":"Open menu",onClick:n,sx:{borderColor:"transparent"},children:e.jsx(gt,{})}),e.jsxs(ur,{anchorEl:r,id:"menu",open:u,onClose:i,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiList-root":{padding:"4px"},"& .MuiPaper-root":{padding:0}},children:[e.jsx(Te,{to:"/profile",onClick:i,children:"Profile"}),e.jsx(se,{}),e.jsx(Te,{to:"/settings",onClick:i,children:"Settings"}),e.jsx(Te,{to:"/feedback",onClick:i,children:"Feedback"}),e.jsx(se,{}),e.jsxs(_t,{onClick:c,children:[e.jsx(dr,{fontSize:"small"}),e.jsx(we,{children:"Logout"})]})]})]})}const tr=240;function Yt(){const{user:r,viewRole:s}=ne(),o=s?{userName:`Viewing as ${s}`,email:`${s.toLowerCase()}@example.com`,userType:s}:r;return e.jsxs(x,{sx:{display:"flex"},children:[e.jsx(mr,{}),e.jsx(hr,{position:"fixed",sx:{zIndex:u=>u.zIndex.drawer+1}}),e.jsxs(cr,{variant:"permanent",sx:{display:{xs:"none",md:"block"},width:tr,flexShrink:0,"& .MuiDrawer-paper":{width:tr,boxSizing:"border-box"}},children:[e.jsx($e,{}),e.jsx(x,{sx:{overflow:"auto"},children:o&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",p:2},children:[e.jsx(We,{alt:o.userName,src:"/static/images/avatar/7.jpg",sx:{width:36,height:36}}),e.jsxs(x,{sx:{ml:2},children:[e.jsx(p,{variant:"body2",sx:{fontWeight:500,lineHeight:"16px"},children:o.userName}),e.jsx(p,{variant:"caption",sx:{color:"text.secondary"},children:o.email})]}),e.jsx(qt,{})]}),e.jsx(se,{}),e.jsx(Tr,{})]})})]})]})}const Zt=()=>{const r=ge();return e.jsxs(fe,{maxWidth:"lg",component:"main",role:"main","aria-label":"Git Gud Drivers Homepage",children:[e.jsxs(x,{component:"section","aria-labelledby":"hero-title",sx:{textAlign:"center",py:8,backgroundColor:"background.paper",borderRadius:2,mb:4},children:[e.jsx(p,{variant:"h2",component:"h1",gutterBottom:!0,id:"hero-title",children:"Git Gud Drivers"}),e.jsx(p,{variant:"h5",color:"text.secondary",paragraph:!0,component:"p",children:"A rewards program for professional drivers committed to excellence"}),e.jsxs(x,{role:"navigation","aria-label":"Account access",children:[e.jsx(M,{variant:"contained",size:"large",onClick:()=>r("/register"),sx:{mr:2,minHeight:"44px",minWidth:"88px"},"aria-label":"Sign up for Git Gud Drivers",children:"Sign Up"}),e.jsx(M,{variant:"outlined",size:"large",onClick:()=>r("/login"),sx:{minHeight:"44px",minWidth:"88px"},"aria-label":"Sign in to your account",children:"Sign In"})]})]}),e.jsx(T,{container:!0,spacing:4,sx:{mb:6},justifyContent:"center",alignItems:"center",component:"section","aria-labelledby":"how-it-works-title",children:e.jsxs(T,{item:!0,xs:12,md:4,component:"article",role:"article",children:[e.jsx(p,{variant:"h5",gutterBottom:!0,component:"h2",id:"how-it-works-title",children:"How It Works"}),e.jsxs(x,{component:"ol",sx:{listStyleType:"decimal",pl:3,mb:2},"aria-label":"Steps to join Git Gud Drivers",children:[e.jsx("li",{children:"Apply as a driver"}),e.jsx("li",{children:"Get approved by a sponsor"}),e.jsx("li",{children:"Start earning points"}),e.jsx("li",{children:"Redeem rewards"})]}),e.jsx(p,{variant:"h6",gutterBottom:!0,component:"p",sx:{mt:2},children:"We hope to see you soon!"})]})})]})},pe=({title:r,value:s})=>e.jsxs(x,{sx:{mb:1},children:[e.jsxs(p,{variant:"body1",component:"span",fontWeight:"bold",children:[r,":"]}),e.jsx(p,{variant:"body1",component:"span",sx:{ml:1},children:s})]}),Jt=()=>{const[r,s]=a.useState(null),[o,u]=a.useState(null),[n,i]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const d=await A.get("/api/admin/about",{withCredentials:!0});console.log("API Response:",d.data),s(d.data)}catch(d){u(d.message)}finally{i(!1)}})()},[]),n?e.jsx(re,{}):o?e.jsxs(p,{color:"error",children:["Error: ",o]}):r?e.jsxs(x,{sx:{maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(p,{variant:"h4",gutterBottom:!0,children:"About Information"}),e.jsxs(x,{sx:{p:2,mb:2,border:1,borderColor:"divider",borderRadius:2},children:[e.jsx(pe,{title:"Team",value:r.team}),e.jsx(pe,{title:"Version",value:r.version.toString()}),e.jsx(pe,{title:"Release Date",value:new Date(r.release).toLocaleDateString()}),e.jsx(pe,{title:"Product",value:r.product}),e.jsx(pe,{title:"Description",value:r.description})]})]}):e.jsx(p,{children:"No information available."})},Qt=()=>{const r=ge(),s=nr(),{checkAuth:o}=ne(),u=new URLSearchParams(s.search),n=u.get("step")==="2fa"?"2fa":"login",i=u.get("userId"),[c,d]=a.useState(n),[l,b]=a.useState(i||null),[f,v]=a.useState(!1),[t,g]=a.useState(""),[y,D]=a.useState(""),[h,S]=a.useState(""),[C,E]=a.useState(null);a.useEffect(()=>{n==="2fa"&&i&&(d("2fa"),b(i))},[n,i]);const L=async $=>{var z,te;$.preventDefault(),v(!0),E(null);try{const U=await A.post("/api/user/login",{username:t,password:y});U.data.requiresTwoFactor?(d("2fa"),b(U.data.userId.toString()),r(`/login?step=2fa&userId=${U.data.userId}`,{replace:!0})):U.data.succeeded?(await o(),r("/dashboard")):E(U.data.message||"Login failed. Please try again.")}catch(U){E(((te=(z=U.response)==null?void 0:z.data)==null?void 0:te.message)||"Login failed. Please try again.")}finally{v(!1)}},he=async $=>{var z,te;$.preventDefault(),v(!0);try{const U=await A.post("/api/user/verify-2fa",{userId:String(l),code:h},{withCredentials:!0});U.data.succeeded?(await o(),r("/dashboard")):E(U.data.message||"Invalid 2FA code. Please try again.")}catch(U){E(((te=(z=U.response)==null?void 0:z.data)==null?void 0:te.message)||"2FA verification failed. Please try again.")}finally{v(!1)}};return e.jsxs(x,{component:"form",onSubmit:c==="login"?L:he,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:c==="login"?"Login":"2FA Verification"}),C&&e.jsx(N,{severity:"error",sx:{mb:2},children:C}),c==="login"?e.jsxs(e.Fragment,{children:[e.jsx(R,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"username",value:t,onChange:$=>g($.target.value),required:!0}),e.jsx(R,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"current-password",value:y,onChange:$=>D($.target.value),required:!0})]}):e.jsx(R,{label:"2FA Code",variant:"outlined",margin:"normal",fullWidth:!0,value:h,onChange:$=>S($.target.value),required:!0}),e.jsx(M,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:f,children:f?e.jsx(re,{size:24}):c==="login"?"Log In":"Verify 2FA"}),c==="login"&&e.jsxs(x,{sx:{textAlign:"center",mt:2},children:[e.jsx(Le,{component:xe,to:"/register",variant:"body2",sx:{display:"block",mb:1},children:"Don't have an account? Sign Up"}),e.jsx(Le,{component:xe,to:"/reset-password",variant:"body2",children:"Forgot Password? Click here to Reset it"})]})]})},Kt=r=>{const[s,o]=a.useState(0);return a.useEffect(()=>{o((n=>{let i=0;return n.length>=8&&(i+=1),/[A-Z]/.test(n)&&(i+=1),/[0-9]/.test(n)&&(i+=1),/[^A-Za-z0-9]/.test(n)&&(i+=1),i/4*100})(r))},[r]),s},Xt=r=>r.length<8?"Password must be at least 8 characters long.":/[A-Z]/.test(r)?/[0-9]/.test(r)?/[^A-Za-z0-9]/.test(r)?null:"Password must contain at least one special character.":"Password must contain at least one number.":"Password must contain at least one uppercase letter.",es=()=>{const[r,s]=a.useState(""),[o,u]=a.useState(""),[n,i]=a.useState(""),[c,d]=a.useState(!1),[l,b]=a.useState(!1),[f,v]=a.useState(null),[t,g]=a.useState(null),y=Kt(n),D=ge(),h=async C=>{var L,he;C.preventDefault(),v(null),g(null);const E=Xt(n);if(E){g(E);return}b(!0);try{const $=await A.post("/api/user/register",{username:r,email:o,password:n,enable2FA:c}),z=await A.post("/api/user/login",{username:r,password:n});$.data.requiresTwoFactor?D(`/login?step=2fa&userId=${$.data.userId}`):D("/dashboard")}catch($){v(((he=(L=$.response)==null?void 0:L.data)==null?void 0:he.message)||"Registration failed. Please try again.")}finally{b(!1)}},S=C=>C<33?"error":C<66?"warning":"success";return e.jsxs(x,{component:"form",onSubmit:h,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create Account"}),f&&e.jsx(N,{severity:"error",children:f}),t&&e.jsx(N,{severity:"warning",children:t}),e.jsx(R,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,value:r,onChange:C=>s(C.target.value),required:!0}),e.jsx(R,{label:"Email",type:"email",variant:"outlined",margin:"normal",fullWidth:!0,value:o,onChange:C=>u(C.target.value),required:!0}),e.jsx(R,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,value:n,onChange:C=>i(C.target.value),required:!0}),e.jsxs(x,{sx:{width:"100%",mt:1},children:[e.jsx(ae,{variant:"determinate",value:y,color:S(y)}),e.jsxs(p,{variant:"body2",sx:{mt:1},children:["Password strength: ",y<33?"Weak":y<66?"Medium":"Strong"]})]}),e.jsx(De,{control:e.jsx(ke,{checked:c,onChange:C=>d(C.target.checked),color:"primary"}),label:"Enable Two-Factor Authentication (2FA)"}),e.jsx(M,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:l,children:l?e.jsx(re,{size:24}):"Register"}),e.jsx(Le,{component:xe,to:"/login",variant:"body2",children:"Already have an account? Sign in"})]})},rs=()=>{const[r,s]=a.useState([]),[o,u]=a.useState([]),[n,i]=a.useState(""),[c,d]=a.useState(!0),[l,b]=a.useState(null),[f,v]=a.useState(null),[t,g]=a.useState(!1);a.useEffect(()=>{y()},[]);const y=async()=>{var C;try{const E=await A.get("/api/driver/available-sponsors",{withCredentials:!0});s(Array.isArray(E.data)?E.data:[]),b(null)}catch(E){if(A.isAxiosError(E)){const L=((C=E.response)==null?void 0:C.data)||"Failed to load sponsors. Please try again later.";b(typeof L=="string"?L:"An error occurred.")}else b("Failed to load sponsors. Please try again later.");s([])}finally{d(!1)}},D=C=>{u(E=>E.includes(C)?E.filter(L=>L!==C):[...E,C])},h=async()=>{var C;if(o.length===0){b("Please select at least one sponsor");return}if(!n.trim()){b("Please provide a reason for your application");return}g(!0),b(null),v(null);try{const E={sponsorIds:o,reason:n},L=await A.post("/api/driver/apply",E,{withCredentials:!0,headers:{"Content-Type":"application/json"}});v(L.data.message||"Application submitted successfully!"),u([]),i("")}catch(E){if(A.isAxiosError(E)){const L=((C=E.response)==null?void 0:C.data)||"Failed to submit application. Please try again.";b(typeof L=="string"?L:"Submission failed.")}else b("Failed to submit application. Please try again.")}finally{g(!1)}},S=a.useMemo(()=>r.map(C=>e.jsxs(x,{sx:{mb:2},children:[e.jsx(De,{control:e.jsx(ke,{checked:o.includes(C.sponsorID),onChange:()=>D(C.sponsorID),color:"primary"}),label:e.jsxs(F,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(gr,{color:"action"}),e.jsx(p,{children:C.companyName}),e.jsx(je,{icon:e.jsx(jr,{}),label:`$${C.pointDollarValue.toFixed(2)} per point`,size:"small",color:"primary",variant:"outlined"})]})}),e.jsx(se,{sx:{ml:7,my:1}})]},C.sponsorID)),[r,o]);return c?e.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(re,{})}):e.jsxs(x,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(p,{variant:"h5",component:"h1",gutterBottom:!0,children:"Driver Application"}),e.jsx(K,{sx:{mb:2,bgcolor:"background.paper"},children:e.jsxs(X,{children:[e.jsxs(F,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e.jsx(p,{variant:"subtitle1",children:"Available Reward Programs"}),e.jsx(ze,{title:"Select multiple sponsors to join their reward programs",children:e.jsx(oe,{size:"small",children:e.jsx(br,{color:"action",fontSize:"small"})})})]}),l&&e.jsx(N,{severity:"error",sx:{mb:2},children:l}),f&&e.jsx(N,{severity:"success",sx:{mb:2},children:f}),e.jsx(fr,{children:r.length===0?e.jsx(p,{color:"text.secondary",children:"No available sponsors found."}):S}),e.jsx(R,{label:"Reason for Application",multiline:!0,rows:4,value:n,onChange:C=>i(C.target.value),fullWidth:!0,margin:"normal",variant:"outlined"}),e.jsx(M,{variant:"contained",color:"primary",onClick:h,disabled:o.length===0||!n.trim()||t,sx:{mt:2},children:t?e.jsx(re,{size:24,color:"inherit"}):`Submit Application (${o.length} Sponsor${o.length!==1?"s":""})`})]})})]})},ts={0:"Submitted",1:"Approved",2:"Rejected"},ss=()=>{const[r,s]=a.useState([]),[o,u]=a.useState(!0),[n,i]=a.useState(null),c=async()=>{var t;try{const g=await A.get("/api/sponsor/applications");s(g.data)}catch(g){i(((t=g.response)==null?void 0:t.data)||"Failed to load applications.")}finally{u(!1)}};a.useEffect(()=>{c()},[]);const d=async(t,g)=>{var y;try{await A.post(`/api/sponsor/applications/${t}/process?action=${g}`),s(D=>D.map(h=>h.applicationID===t?{...h,status:g==="approve"?1:2}:h))}catch(D){i(((y=D.response)==null?void 0:y.data)||`Failed to ${g} application.`)}};if(o)return e.jsx(re,{});if(n)return e.jsx(N,{severity:"error",children:n});const l=r.filter(t=>t.status===0),b=r.filter(t=>t.status===1),f=r.filter(t=>t.status===2),v=(t,g)=>t.length>0?t.map(y=>e.jsx(Q,{size:{xs:12,sm:6,md:4},children:e.jsx(K,{children:e.jsxs(X,{children:[e.jsxs(p,{variant:"subtitle1",children:["Application ID: ",y.applicationID]}),e.jsxs(p,{children:["User ID: ",y.userID]}),e.jsxs(p,{children:["Apply Date: ",y.applyDate]}),e.jsxs(p,{children:["Status: ",ts[y.status]]}),y.status===0&&e.jsxs(e.Fragment,{children:[e.jsx(M,{color:"primary",variant:"contained",onClick:()=>d(y.applicationID,"approve"),children:"Approve"}),e.jsx(M,{color:"secondary",variant:"contained",onClick:()=>d(y.applicationID,"reject"),sx:{ml:1},children:"Reject"})]})]})})},y.applicationID)):e.jsx(p,{variant:"body2",color:"textSecondary",sx:{mt:2},children:g});return e.jsxs(fe,{children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:"Driver Applications"}),e.jsxs(x,{children:[e.jsx(p,{variant:"h6",children:"Submitted Applications"}),e.jsx(se,{sx:{mb:2}}),e.jsx(Q,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:v(l,"No pending applications")})]}),e.jsxs(x,{sx:{mt:4},children:[e.jsx(p,{variant:"h6",children:"Approved Applications"}),e.jsx(se,{sx:{mb:2}}),e.jsx(Q,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:v(b,"No approved applications")})]}),e.jsxs(x,{sx:{mt:4},children:[e.jsx(p,{variant:"h6",children:"Rejected Applications"}),e.jsx(se,{sx:{mb:2}}),e.jsx(Q,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:v(f,"No rejected applications")})]})]})},os=(r="Driver")=>{switch(r){case"Admin":return[{check:s=>s.length>=20,message:"At least 20 characters long"},{check:s=>/[0-9]/.test(s),message:"Contains at least one digit"},{check:s=>/[a-z]/.test(s),message:"Contains at least one lowercase letter"},{check:s=>/[A-Z]/.test(s),message:"Contains at least one uppercase letter"},{check:s=>/[^A-Za-z0-9]/.test(s),message:"Contains at least three symbols"},{check:s=>new Set(s).size>=3,message:"Contains at least 3 unique characters"},{check:s=>/^(?=.*[!@#$%^&*])(?=.*[0-9])(?=.*[A-Z]).*$/.test(s),message:"Combination of numbers, symbols, and uppercase"}];case"Driver":return[{check:s=>s.length>=8,message:"At least 8 characters long"},{check:s=>/[0-9]/.test(s),message:"Contains at least one digit"},{check:s=>/[a-z]/.test(s),message:"Contains at least one lowercase letter"},{check:s=>/[A-Z]/.test(s),message:"Contains at least one uppercase letter"},{check:s=>/[^A-Za-z0-9]/.test(s),message:"Contains at least one special character"},{check:s=>new Set(s).size>=1,message:"Contains at least 1 unique character"}];default:return[{check:s=>s.length>=6,message:"At least 6 characters long"},{check:s=>/[0-9]/.test(s),message:"Contains at least one digit"},{check:s=>/[a-zA-Z]/.test(s),message:"Contains at least one letter"},{check:s=>new Set(s).size>=1,message:"Contains at least 1 unique character"}]}},Er=()=>{const[r,s]=a.useState(""),[o,u]=a.useState(""),[n,i]=a.useState(""),[c,d]=a.useState(""),[l,b]=a.useState(!1),[f,v]=a.useState(!1),[t,g]=a.useState("Driver");a.useEffect(()=>{(async()=>{try{const C=await A.get("/api/user/currentuser");g(C.data.userType)}catch(C){console.error("Error fetching user role:",C)}})()},[]);const y=os(t),D=S=>y.every(C=>C.check(S)),h=async S=>{var C,E;if(S.preventDefault(),d(""),b(!1),v(!0),o!==n){d("New passwords do not match"),v(!1);return}if(!D(o)){d("New password does not meet all requirements"),v(!1);return}try{const L=await A.post("/api/user/change-password",{currentPassword:r,newPassword:o});b(!0),s(""),u(""),i("")}catch(L){A.isAxiosError(L)?d(((E=(C=L.response)==null?void 0:C.data)==null?void 0:E.message)||"Failed to change password"):d("An unexpected error occurred")}finally{v(!1)}};return e.jsxs(x,{sx:{width:"100%",maxWidth:400,margin:"auto",mt:4},children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:"Change Password"}),c&&e.jsx(N,{severity:"error",sx:{mt:2,mb:2},children:c}),l&&e.jsx(N,{severity:"success",sx:{mt:2,mb:2},children:"Password changed successfully!"}),e.jsxs(x,{component:"form",onSubmit:h,noValidate:!0,sx:{mt:1},children:[e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,name:"currentPassword",label:"Current Password",type:"password",id:"currentPassword",autoComplete:"current-password",value:r,onChange:S=>s(S.target.value)}),e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New Password",type:"password",id:"newPassword",autoComplete:"new-password",value:o,onChange:S=>u(S.target.value)}),e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:n,onChange:S=>i(S.target.value)}),e.jsxs(x,{sx:{mt:4},children:[e.jsxs(p,{variant:"h6",children:["Password Requirements for ",t,":"]}),y.map((S,C)=>e.jsxs(x,{sx:{display:"flex",alignItems:"center",mt:1},children:[e.jsx(x,{sx:{flexGrow:1,mr:1},children:e.jsx(ae,{variant:"determinate",value:S.check(o)?100:0,color:S.check(o)?"success":"error"})}),e.jsx(x,{sx:{minWidth:200},children:e.jsx(p,{variant:"body2",color:"text.secondary",children:S.message})})]},C))]}),e.jsx(M,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:f,children:f?e.jsx(re,{size:24}):"Change Password"})]})]})},as=()=>{const[r,s]=a.useState([]),[o,u]=a.useState(null),[n,i]=a.useState(""),[c,d]=a.useState(!0),[l,b]=a.useState("");a.useEffect(()=>{f()},[]),a.useEffect(()=>{n&&v(n)},[n]);const f=async()=>{try{d(!0);const h=await A.get("/api/driver/my-sponsors");s(h.data),h.data.length>0&&!n&&i(h.data[0].sponsorId),b("")}catch(h){b("Failed to load sponsor points data"),console.error("Error fetching sponsor points:",h)}finally{d(!1)}},v=async h=>{try{const S=await A.get(`/api/driver/sponsor-points/${h}`);u(S.data)}catch(S){console.error("Error fetching sponsor details:",S)}},t=h=>{i(h.target.value)};if(c)return e.jsx(x,{sx:{width:"100%",mt:2},children:e.jsx(ae,{})});if(l)return e.jsx(p,{color:"error",sx:{mt:2},children:l});if(r.length===0)return e.jsx(p,{sx:{mt:2},children:"You are not currently registered with any sponsors."});const g=r.find(h=>h.sponsorId===n),y=r.map(h=>({id:h.sponsorId,value:h.totalPoints,label:h.sponsorName})),D=(o==null?void 0:o.pointsHistory.map(h=>({date:new Date(h.date).toLocaleDateString(),points:h.points,reason:h.reason})).reverse())||[];return e.jsxs(x,{sx:{width:"100%",mb:2,mt:2},children:[e.jsxs(Z,{fullWidth:!0,sx:{mb:2},children:[e.jsx(J,{children:"Select Sponsor"}),e.jsx(B,{value:n,label:"Select Sponsor",onChange:t,children:r.map(h=>e.jsx(I,{value:h.sponsorId,children:h.sponsorName},h.sponsorId))})]}),e.jsxs(T,{container:!0,spacing:3,children:[e.jsx(T,{item:!0,xs:12,children:e.jsx(ee,{children:e.jsx(ie,{children:e.jsxs(le,{"aria-label":"sponsor points details",children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Sponsor"}),e.jsx(m,{align:"right",children:"Total Points"}),e.jsx(m,{align:"right",children:"Point Value ($)"}),e.jsx(m,{align:"right",children:"Total Value ($)"})]})}),e.jsx(de,{children:g&&e.jsxs(O,{children:[e.jsx(m,{children:g.sponsorName}),e.jsx(m,{align:"right",children:g.totalPoints.toLocaleString()}),e.jsxs(m,{align:"right",children:["$",g.pointDollarValue.toFixed(2)]}),e.jsxs(m,{align:"right",children:["$",(g.totalPoints*g.pointDollarValue).toFixed(2)]})]})})]})})})}),e.jsx(T,{item:!0,xs:12,md:6,children:e.jsxs(ee,{sx:{p:2},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,children:"Points Distribution Across Sponsors"}),e.jsx(x,{sx:{width:"100%",height:300},children:e.jsx(Fe,{series:[{data:y,highlightScope:{faded:"global",highlighted:"item"},faded:{innerRadius:30,additionalRadius:-30}}],height:300})})]})}),e.jsx(T,{item:!0,xs:12,md:6,children:e.jsxs(ee,{sx:{p:2},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,children:"Recent Points History"}),D.length>0?e.jsx(x,{sx:{width:"100%",height:300},children:e.jsx(vr,{xAxis:[{scaleType:"band",data:D.map(h=>h.date),label:"Date"}],series:[{data:D.map(h=>h.points),label:"Points"}],height:300,tooltip:{trigger:"item"}})}):e.jsx(p,{children:"No history data available"})]})})]})]})},ns=()=>{const[r,s]=a.useState(null),[o,u]=a.useState(!0),[n,i]=a.useState("");return a.useEffect(()=>{(async()=>{try{u(!0);const d=await A.get("/api/driver/activity");s(d.data)}catch(d){i("Failed to load driver activity"),console.error("Error fetching activity:",d)}finally{u(!1)}})()},[]),o?e.jsx(ae,{}):n?e.jsx(p,{color:"error",children:n}):r?e.jsxs(x,{sx:{p:3},children:[r.pointValue&&e.jsx(K,{sx:{mb:4},children:e.jsxs(X,{children:[e.jsxs(p,{variant:"h6",gutterBottom:!0,children:["Points Value - ",r.pointValue.sponsorName||"Unknown Sponsor"]}),e.jsxs(p,{children:["Current Balance: ",r.pointValue.totalPoints.toLocaleString()," points"]}),e.jsxs(p,{children:["Point Value: $",r.pointValue.pointValue.toFixed(2)," each"]}),e.jsxs(p,{variant:"h5",sx:{mt:2},children:["Total Value: $",r.pointValue.totalValue.toFixed(2)]})]})}),e.jsx(p,{variant:"h6",gutterBottom:!0,children:"Activity History"}),e.jsx(ie,{component:ee,children:e.jsxs(le,{children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Type"}),e.jsx(m,{children:"Points"}),e.jsx(m,{children:"Details"}),e.jsx(m,{children:"Status"})]})}),e.jsx(de,{children:r.transactions&&r.transactions.length>0?r.transactions.map((c,d)=>e.jsxs(O,{children:[e.jsx(m,{children:c.date?new Date(c.date).toLocaleDateString():"N/A"}),e.jsx(m,{children:c.type}),e.jsxs(m,{sx:{color:c.points>0?"success.main":"error.main"},children:[c.points>0?"+":"",c.points]}),e.jsx(m,{children:c.reason}),e.jsx(m,{children:c.status&&e.jsx(je,{label:c.status,color:c.status==="Ordered"?"success":c.status==="Cancelled"?"error":"default",size:"small"})})]},d)):e.jsx(O,{children:e.jsx(m,{colSpan:5,align:"center",children:"No transactions available"})})})]})})]}):null};function sr({icon:r,title:s,value:o,description:u}){return e.jsx(K,{sx:{height:"100%"},children:e.jsxs(X,{children:[e.jsx(r,{sx:{color:"primary.main",mb:1}}),e.jsx(p,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600",mb:1},children:s}),e.jsx(p,{variant:"h4",sx:{mb:1},children:o}),e.jsx(p,{sx:{color:"text.secondary",mb:1},children:u})]})})}function is(){const r=Ne(),s=jt(r.breakpoints.down("sm")),[o,u]=a.useState([]),[n,i]=a.useState(!0),[c,d]=a.useState(null);if(a.useEffect(()=>{(async()=>{try{const g=await fetch("/api/sponsor/drivers",{credentials:"include"});if(!g.ok)throw new Error("Failed to fetch drivers");const y=await g.json();u(y)}catch(g){d(g instanceof Error?g.message:"An error occurred while fetching drivers")}finally{i(!1)}})()},[]),n)return e.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(re,{})});if(c)return e.jsx(N,{severity:"error",sx:{mb:2},children:c});const l=o.reduce((t,g)=>t+g.totalPoints,0),b=o.map(t=>({id:t.userID,value:t.totalPoints,label:t.email})),f=[...o].sort((t,g)=>g.totalPoints-t.totalPoints),v=Math.max(...o.map(t=>t.totalPoints));return e.jsxs(x,{sx:{width:"100%"},children:[e.jsx(p,{component:"h2",variant:"h6",sx:{mb:2},children:"Sponsored Drivers Overview"}),e.jsxs(Q,{container:!0,spacing:2,columns:12,children:[e.jsx(Q,{size:{xs:12,lg:9},children:e.jsx(K,{sx:{height:"100%"},children:e.jsx(X,{children:o.length===0?e.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsx(p,{color:"text.secondary",children:"No drivers found under your sponsorship."})}):e.jsx(ie,{children:e.jsxs(le,{sx:{minWidth:650},children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Driver ID"}),e.jsx(m,{children:"Email"}),e.jsx(m,{align:"right",children:"Total Points"}),e.jsx(m,{align:"right",children:"Progress"})]})}),e.jsx(de,{children:o.map(t=>e.jsxs(O,{children:[e.jsx(m,{component:"th",scope:"row",children:t.userID}),e.jsx(m,{children:t.email}),e.jsx(m,{align:"right",children:t.totalPoints.toLocaleString()}),e.jsx(m,{align:"right",sx:{width:"30%"},children:e.jsxs(x,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(x,{sx:{width:"100%",mr:1},children:e.jsx(ae,{variant:"determinate",value:t.totalPoints/v*100})}),e.jsxs(p,{variant:"body2",color:"text.secondary",children:[Math.round(t.totalPoints/v*100),"%"]})]})})]},t.userID))})]})})})})}),e.jsx(Q,{size:{xs:12,lg:3},children:e.jsxs(F,{gap:2,direction:{xs:"column",sm:"row",lg:"column"},children:[e.jsx(sr,{icon:Xe,title:"Active Drivers",value:o.length.toString(),description:"Currently sponsored drivers"}),e.jsx(sr,{icon:bt,title:"Total Points",value:l.toLocaleString(),description:"Accumulated driver points"})]})}),o.length>0&&e.jsx(Q,{size:12,children:e.jsx(K,{sx:{mt:2},children:e.jsxs(X,{children:[e.jsx(p,{variant:"h6",gutterBottom:!0,children:"Points Distribution"}),e.jsx(x,{sx:{height:400},children:e.jsx(Fe,{series:[{data:b,highlightScope:{faded:"global",highlighted:"item"}}],height:350})})]})})}),o.length>0&&e.jsx(Q,{size:12,children:e.jsx(K,{sx:{mt:2},children:e.jsxs(X,{children:[e.jsx(p,{variant:"h6",gutterBottom:!0,children:"Driver Leaderboard"}),e.jsx(ie,{children:e.jsxs(le,{children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Rank"}),e.jsx(m,{children:"Driver"}),e.jsx(m,{align:"right",children:"Points"}),e.jsx(m,{align:"right",children:"Progress"})]})}),e.jsx(de,{children:f.map((t,g)=>e.jsxs(O,{children:[e.jsx(m,{children:g+1}),e.jsx(m,{children:t.email}),e.jsx(m,{align:"right",children:t.totalPoints.toLocaleString()}),e.jsx(m,{align:"right",sx:{width:"30%"},children:e.jsxs(x,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(x,{sx:{width:"100%",mr:1},children:e.jsx(ae,{variant:"determinate",value:t.totalPoints/v*100})}),e.jsxs(p,{variant:"body2",color:"text.secondary",children:[Math.round(t.totalPoints/v*100),"%"]})]})})]},t.userID))})]})})]})})})]}),e.jsx(p,{component:"h2",variant:"h6",sx:{mb:2,mt:4},children:"Driver Management"}),e.jsx(Q,{container:!0,spacing:2,columns:12,children:e.jsx(Q,{size:{xs:12,sm:6,lg:4},children:e.jsx(K,{sx:{height:"100%"},children:e.jsxs(X,{children:[e.jsx(Xe,{sx:{color:"primary.main",mb:1}}),e.jsx(p,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600"},children:"Manage Drivers"}),e.jsx(p,{sx:{color:"text.secondary",mb:2},children:"Add or remove drivers from your sponsorship."}),e.jsx(M,{variant:"contained",size:"small",color:"primary",endIcon:e.jsx(ft,{}),fullWidth:s,children:"Manage Drivers"})]})})})})]})}const ls=()=>{const[r,s]=a.useState([]),[o,u]=a.useState([]),[n,i]=a.useState(!0),[c,d]=a.useState(null),[l,b]=a.useState(null),[f,v]=a.useState(!1);a.useEffect(()=>{t()},[]);const t=async()=>{var D,h;try{const S=await A.get("/api/driver/available-sponsors",{withCredentials:!0});s(Array.isArray(S.data)?S.data:[]),console.log("Sponsors response:",S.data)}catch(S){if(A.isAxiosError(S)){const C=((D=S.response)==null?void 0:D.data)||"Error loading sponsors. Please try again later.";d(typeof C=="string"?C:"An error occurred."),console.error("Axios error:",(h=S.response)==null?void 0:h.data)}else d("Error loading sponsors. Please try again later."),console.error("Error:",S);s([])}finally{i(!1)}},g=D=>{u(h=>h.includes(D)?h.filter(S=>S!==D):[...h,D])},y=async()=>{var D,h;if(o.length===0){d("Please select at least one sponsor");return}v(!0),d(null),b(null);try{const S=await A.post("/api/driver/register-sponsors",o,{withCredentials:!0,headers:{"Content-Type":"application/json"}});b(S.data||"Successfully registered with selected sponsors!"),u([]),t()}catch(S){if(A.isAxiosError(S)){const C=((D=S.response)==null?void 0:D.data)||"Failed to register with sponsors. Please try again.";d(typeof C=="string"?C:"Registration failed."),console.error("Axios error:",(h=S.response)==null?void 0:h.data)}else d("Failed to register with sponsors. Please try again."),console.error("Error:",S)}finally{v(!1)}};return n?e.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(re,{})}):e.jsxs(x,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(p,{variant:"h5",component:"h1",gutterBottom:!0,children:"Select Sponsors"}),e.jsx(K,{sx:{mb:2,bgcolor:"background.paper"},children:e.jsxs(X,{children:[e.jsxs(F,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e.jsx(p,{variant:"subtitle1",children:"Available Reward Programs"}),e.jsx(ze,{title:"Select multiple sponsors to join their reward programs",children:e.jsx(br,{color:"action",fontSize:"small"})})]}),c&&e.jsx(N,{severity:"error",sx:{mb:2},children:c}),l&&e.jsx(N,{severity:"success",sx:{mb:2},children:l}),e.jsx(fr,{children:r.length===0?e.jsx(p,{color:"text.secondary",children:"No available sponsors found."}):r.map(D=>e.jsxs(x,{sx:{mb:2},children:[e.jsx(De,{control:e.jsx(ke,{checked:o.includes(D.sponsorID),onChange:()=>g(D.sponsorID),color:"primary"}),label:e.jsxs(F,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(gr,{color:"action"}),e.jsx(p,{children:D.companyName}),e.jsx(je,{icon:e.jsx(jr,{}),label:`$${D.pointDollarValue} per point`,size:"small",color:"primary",variant:"outlined"})]})}),e.jsx(se,{sx:{ml:7,my:1}})]},D.sponsorID))}),e.jsx(M,{variant:"contained",color:"primary",onClick:y,disabled:o.length===0||f,sx:{mt:2},children:f?e.jsx(re,{size:24,color:"inherit"}):`Register with ${o.length} Sponsor${o.length!==1?"s":""}`})]})})]})},cs=()=>{const{driverId:r}=zr(),[s,o]=a.useState([]),[u,n]=a.useState(!0),[i,c]=a.useState("");return a.useEffect(()=>{(async()=>{try{n(!0);const l=await A.get("/api/driver/transactions");o(l.data),c("")}catch(l){c("Failed to load transaction data"),console.error("Error fetching transactions:",l)}finally{n(!1)}})()},[r]),u?e.jsx(x,{sx:{width:"100%",mt:2},children:e.jsx(ae,{})}):i?e.jsx(p,{color:"error",sx:{mt:2},children:i}):e.jsx(ee,{sx:{width:"100%",mb:2,mt:2},children:e.jsx(ie,{children:e.jsxs(le,{"aria-label":"driver transactions table",children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Points Changed"}),e.jsx(m,{children:"Reason"})]})}),e.jsx(de,{children:s.map(d=>e.jsxs(O,{children:[e.jsx(m,{children:new Date(d.transactionDate).toLocaleDateString()}),e.jsx(m,{children:d.pointsChanged}),e.jsx(m,{children:d.reason})]},d.transactionId))})]})})})},Mr=({dateRange:r,setDateRange:s})=>{const[o,u]=r,[n,i]=a.useState(!1),c=d=>{const l=new Date,b=new Date;b.setDate(l.getDate()-d),s([b,l])};return e.jsx(yr,{dateAdapter:Sr,children:e.jsxs(F,{direction:"column",spacing:2,alignItems:"flex-start",sx:{mb:2},children:[e.jsx(De,{control:e.jsx(ke,{checked:n,onChange:()=>i(!n)}),label:"Custom Date Range"}),n?e.jsxs(F,{direction:"row",spacing:2,alignItems:"center",children:[e.jsxs(x,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(er,{fontSize:"small"}),e.jsx(Ie,{label:"Start",value:o,onChange:d=>s([d,u]),disableFuture:!0})]}),e.jsxs(x,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(er,{fontSize:"small"}),e.jsx(Ie,{label:"End",value:u,onChange:d=>s([o,d]),disableFuture:!0})]})]}):e.jsxs(F,{direction:"row",spacing:1,children:[e.jsx(M,{variant:"outlined",size:"small",onClick:()=>c(7),children:"Last 7 Days"}),e.jsx(M,{variant:"outlined",size:"small",onClick:()=>c(30),children:"Last 30 Days"}),e.jsx(M,{variant:"outlined",size:"small",onClick:()=>c(365),children:"Last Year"})]})]})})};function Or({reportType:r,viewType:s,selectedSponsor:o,selectedDriver:u,dateRange:n}){const i=Ne(),[c,d]=a.useState([]),[l,b]=a.useState([]);a.useEffect(()=>{const g=(()=>{switch(r){case"salesBySponsor":return s==="detailed"?[{date:"Date 1",driver1:100,driver2:150,driver3:200},{date:"Date 2",driver1:120,driver2:140,driver3:210},{date:"Date 3",driver1:130,driver2:160,driver3:220}]:[{sponsor:"Sponsor A",totalPoints:450},{sponsor:"Sponsor B",totalPoints:470},{sponsor:"Sponsor C",totalPoints:510}];case"salesByDriver":return s==="detailed"?[{date:"Date 1",driver1:50,driver2:75,driver3:90},{date:"Date 2",driver1:60,driver2:80,driver3:95},{date:"Date 3",driver1:70,driver2:85,driver3:100}]:[{driver:"Driver 1",totalPoints:250},{driver:"Driver 2",totalPoints:240},{driver:"Driver 3",totalPoints:260}];case"invoice":return[{driver:"Driver 1",redeemedPoints:120,fee:10},{driver:"Driver 2",redeemedPoints:150,fee:15},{driver:"Driver 3",redeemedPoints:180,fee:20}];case"driverPoints":return s==="detailed"?[{date:"Date 1",pointEarned:50,pointRedeemed:20},{date:"Date 2",pointEarned:70,pointRedeemed:30},{date:"Date 3",pointEarned:60,pointRedeemed:25}]:[{driver:"Driver 1",totalPoints:150},{driver:"Driver 2",totalPoints:170},{driver:"Driver 3",totalPoints:140}];default:return[]}})();d(g),b(g.map(y=>y.date||y.sponsor||y.driver))},[r,s,o,u,n]);const f=()=>e.jsx(vr,{xAxis:[{data:l,scaleType:"band"}],series:s==="detailed"&&(r==="salesBySponsor"||r==="salesByDriver")?[{data:c.map(t=>t.driver1||0),label:"Driver 1",stack:"drivers",color:i.palette.primary.light},{data:c.map(t=>t.driver2||0),label:"Driver 2",stack:"drivers",color:i.palette.primary.main},{data:c.map(t=>t.driver3||0),label:"Driver 3",stack:"drivers",color:i.palette.primary.dark}]:s==="detailed"&&r==="driverPoints"?[{data:c.map(t=>t.pointEarned||0),label:"Points Earned",color:i.palette.success.main},{data:c.map(t=>t.pointRedeemed||0),label:"Points Redeemed",color:i.palette.error.main}]:[{data:c.map(t=>t.totalPoints),label:r==="salesBySponsor"?"Total Sales by Sponsor":"Total Sales by Driver",color:i.palette.primary.main}],height:300,grid:{horizontal:!0}}),v=()=>e.jsx(Fe,{series:[{data:c.map(t=>({id:t.driver,value:t.redeemedPoints,label:t.driver,color:i.palette.primary.main}))}],height:300});return e.jsx("div",{children:r==="invoice"?v():f()})}function ds(){const[r,s]=a.useState("driverPoints"),[o,u]=a.useState("summary"),[n,i]=a.useState("all"),[c,d]=a.useState([null,null]);return e.jsxs(x,{children:[e.jsx(p,{variant:"h5",sx:{mb:2},"aria-label":"Sponsor Reports Dashboard",children:"Sponsor Reports Dashboard"}),e.jsxs(F,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"report-type-label",children:"Report Type"}),e.jsx(B,{labelId:"report-type-label",value:r,onChange:l=>s(l.target.value),label:"Report Type","aria-label":"Select Report Type for Sponsor",children:e.jsx(I,{value:"driverPoints",children:"Driver Points Tracking"})})]}),e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"view-type-label",children:"View Type"}),e.jsxs(B,{labelId:"view-type-label",value:o,onChange:l=>u(l.target.value),label:"View Type","aria-label":"Select View Type for Sponsor",children:[e.jsx(I,{value:"summary",children:"Summary"}),e.jsx(I,{value:"detailed",children:"Detailed"})]})]}),e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"select-driver-label",children:"Select Driver"}),e.jsxs(B,{labelId:"select-driver-label",value:n,onChange:l=>i(l.target.value),label:"Select Driver","aria-label":"Select Driver for Driver Points Tracking",children:[e.jsx(I,{value:"all",children:"All Drivers"}),e.jsx(I,{value:1,children:"Driver 1"}),e.jsx(I,{value:2,children:"Driver 2"})]})]})]}),e.jsx(Mr,{dateRange:c,setDateRange:d}),e.jsx(x,{sx:{mt:4},children:e.jsx(Or,{reportType:r,viewType:o,selectedDriver:n,dateRange:c,"aria-label":"Sponsor Report Chart"})})]})}function us(){const[r,s]=a.useState("salesBySponsor"),[o,u]=a.useState("summary"),[n,i]=a.useState([null,null]),[c,d]=a.useState("all"),[l,b]=a.useState("all"),f=r==="salesByDriver"&&c!=="all";return e.jsxs(x,{children:[e.jsx(p,{variant:"h5",sx:{mb:2},"aria-label":"Admin Reports Dashboard",children:"Admin Reports Dashboard"}),e.jsxs(F,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"report-type-label",children:"Report Type"}),e.jsxs(B,{labelId:"report-type-label",value:r,onChange:v=>s(v.target.value),label:"Report Type","aria-label":"Select Report Type",children:[e.jsx(I,{value:"salesBySponsor",children:"Sales by Sponsor"}),e.jsx(I,{value:"salesByDriver",children:"Sales by Driver"}),e.jsx(I,{value:"invoice",children:"Invoice Report"})]})]}),e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"view-type-label",children:"View Type"}),e.jsxs(B,{labelId:"view-type-label",value:o,onChange:v=>u(v.target.value),label:"View Type","aria-label":"Select View Type",children:[e.jsx(I,{value:"summary",children:"Summary"}),e.jsx(I,{value:"detailed",children:"Detailed"})]})]}),(r==="salesBySponsor"||r==="invoice")&&e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"select-sponsor-label",children:"Select Sponsor"}),e.jsxs(B,{labelId:"select-sponsor-label",value:c,onChange:v=>d(v.target.value),label:"Select Sponsor","aria-label":"Select Sponsor",children:[e.jsx(I,{value:"all",children:"All Sponsors"}),e.jsx(I,{value:101,children:"Sponsor A"}),e.jsx(I,{value:102,children:"Sponsor B"})]})]}),r==="salesByDriver"&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"select-sponsor-label",children:"Select Sponsor"}),e.jsxs(B,{labelId:"select-sponsor-label",value:c,onChange:v=>d(v.target.value),label:"Select Sponsor","aria-label":"Select Sponsor for Sales by Driver",children:[e.jsx(I,{value:"all",children:"All Sponsors"}),e.jsx(I,{value:101,children:"Sponsor A"}),e.jsx(I,{value:102,children:"Sponsor B"})]})]}),f&&e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(J,{id:"select-driver-label",children:"Select Driver"}),e.jsxs(B,{labelId:"select-driver-label",value:l,onChange:v=>b(v.target.value),label:"Select Driver","aria-label":"Select Driver for Individual Sponsor",children:[e.jsx(I,{value:"all",children:"All Drivers"}),e.jsx(I,{value:1,children:"Driver 1"}),e.jsx(I,{value:2,children:"Driver 2"})]})]})]})]}),e.jsx(Mr,{dateRange:n,setDateRange:i}),e.jsx(x,{sx:{mt:4},children:e.jsx(Or,{reportType:r,viewType:o,selectedSponsor:c,selectedDriver:l,dateRange:n,"aria-label":"Admin Report Chart"})})]})}const hs=()=>{const[r,s]=a.useState([]),[o,u]=a.useState(!0),[n,i]=a.useState(""),[c,d]=a.useState("");a.useEffect(()=>{l()},[]);const l=async()=>{try{u(!0);const t=await A.get("/api/admin/drivers/details");s(t.data),i("")}catch(t){i("Failed to load driver data"),console.error("Error fetching drivers:",t)}finally{u(!1)}},b=async(t,g)=>{try{await A.post("/api/user/change-user-type",{userId:t,newUserType:g}),await l()}catch(y){i(y.message)}},f=async t=>{try{await A.delete(`/api/user/delete-user/${t}`),await l()}catch(g){i(g.message)}},v=Array.isArray(r)?r.filter(t=>t.name.toLowerCase().includes(c.toLowerCase())||t.email.toLowerCase().includes(c.toLowerCase())||t.sponsorRelationships.some(g=>g.sponsorName.toLowerCase().includes(c.toLowerCase()))):[];return o?e.jsx(x,{sx:{width:"100%",mt:2},children:e.jsx(ae,{})}):n?e.jsx(N,{severity:"error",sx:{mt:2},children:n}):e.jsxs(x,{sx:{width:"100%",p:3},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,children:"Driver-Sponsor Associations"}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(R,{fullWidth:!0,variant:"outlined",placeholder:"Search by driver name, email, or sponsor...",value:c,onChange:t=>d(t.target.value)}),e.jsx(oe,{sx:{ml:-4},children:e.jsx(Be,{})})]}),e.jsx(ie,{component:ee,children:e.jsxs(le,{children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Driver Name"}),e.jsx(m,{children:"Email"}),e.jsx(m,{children:"Sponsors"}),e.jsx(m,{align:"center",children:"Total Sponsors"}),e.jsx(m,{children:"Points Distribution"}),e.jsx(m,{children:"User Type"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(de,{children:v.map(t=>e.jsxs(O,{children:[e.jsx(m,{children:t.name}),e.jsx(m,{children:t.email}),e.jsx(m,{children:e.jsx(x,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:t.sponsorRelationships.map(g=>e.jsx(je,{label:g.sponsorName,size:"small",color:"primary"},g.sponsorId))})}),e.jsx(m,{align:"center",children:t.sponsorRelationships.length}),e.jsx(m,{children:e.jsx(x,{sx:{display:"flex",alignItems:"center",gap:1},children:t.sponsorRelationships.map(g=>e.jsx(ze,{title:`${g.sponsorName}: ${g.points} points`,children:e.jsx(x,{sx:{display:"flex",alignItems:"center"},children:e.jsx(p,{variant:"body2",children:g.points})})},g.sponsorId))})}),e.jsx(m,{children:e.jsxs(B,{size:"small",value:t.userType||"",onChange:g=>b(t.userId.toString(),g.target.value),children:[e.jsx(I,{value:"driver",children:"Driver"}),e.jsx(I,{value:"sponsor",children:"Sponsor"}),e.jsx(I,{value:"admin",children:"Admin"})]})}),e.jsx(m,{children:e.jsx(oe,{onClick:()=>f(t.userId.toString()),color:"error",size:"small",children:e.jsx(Ve,{})})})]},t.userId))})]})})]})};var Lr=(r=>(r.User="User",r.Point="Point",r.Purchase="Purchase",r.Application="Application",r.Product="Product",r.System="System",r))(Lr||{});const ps=()=>{const[r,s]=a.useState([]),[o,u]=a.useState(0),[n,i]=a.useState(!1),[c,d]=a.useState(null),[l,b]=a.useState({page:0,pageSize:10}),f=async()=>{try{i(!0),d(null);const h=new URLSearchParams;l.userID&&h.append("userId",l.userID.toString()),l.category&&h.append("category",l.category),l.startDate&&h.append("startDate",l.startDate.toISOString()),l.endDate&&h.append("endDate",l.endDate.toISOString()),h.append("page",(l.page+1).toString()),h.append("pageSize",l.pageSize.toString());const S=await A.get(`/api/admin/audit-logs?${h.toString()}`);s(S.data.logs),u(S.data.totalCount)}catch(h){d("Failed to fetch audit logs"),console.error("Error fetching audit logs:",h)}finally{i(!1)}},v=async()=>{try{const h=new URLSearchParams;l.startDate&&h.append("startDate",l.startDate.toISOString()),l.endDate&&h.append("endDate",l.endDate.toISOString()),l.category&&h.append("category",l.category);const S=await A.get(`/api/admin/audit-logs/export?${h.toString()}`,{responseType:"blob"}),C=window.URL.createObjectURL(new Blob([S.data])),E=document.createElement("a");E.href=C,E.setAttribute("download",`audit_logs_${He(new Date,"yyyyMMdd")}.csv`),document.body.appendChild(E),E.click(),E.remove()}catch(h){d("Failed to export audit logs"),console.error("Error exporting audit logs:",h)}};a.useEffect(()=>{f()},[l]);const t=(h,S)=>{b(C=>({...C,page:S}))},g=h=>{b(S=>({...S,pageSize:parseInt(h.target.value,10),page:0}))},y=h=>{const S=h.target.value;b(C=>({...C,category:S||void 0,page:0}))},D=h=>({User:"primary",Point:"success",Purchase:"info",Application:"warning",Product:"secondary",System:"error"})[h]||"default";return e.jsx(yr,{dateAdapter:Sr,children:e.jsx(x,{sx:{p:3},children:e.jsxs(T,{container:!0,spacing:3,children:[e.jsxs(T,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{variant:"h4",children:"Audit Log Dashboard"}),e.jsx(M,{variant:"contained",startIcon:e.jsx(vt,{}),onClick:v,disabled:n,children:"Export CSV"})]}),c&&e.jsx(T,{item:!0,xs:12,children:e.jsx(N,{severity:"error",children:c})}),e.jsx(T,{item:!0,xs:12,children:e.jsx(ee,{sx:{p:2,mb:2},children:e.jsxs(T,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(T,{item:!0,xs:12,sm:6,md:2,children:e.jsx(R,{fullWidth:!0,label:"User ID",type:"number",value:l.userID||"",onChange:h=>b(S=>({...S,userID:h.target.value?parseInt(h.target.value):void 0,page:0}))})}),e.jsx(T,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(Z,{fullWidth:!0,children:[e.jsx(J,{children:"Category"}),e.jsxs(B,{value:l.category||"",label:"Category",onChange:y,children:[e.jsx(I,{value:"",children:"All"}),Object.values(Lr).map(h=>e.jsx(I,{value:h,children:h},h))]})]})}),e.jsx(T,{item:!0,xs:12,sm:6,md:2,children:e.jsx(Ie,{label:"Start Date",value:l.startDate,onChange:h=>b(S=>({...S,startDate:h||void 0,page:0})),slotProps:{textField:{fullWidth:!0}}})}),e.jsx(T,{item:!0,xs:12,sm:6,md:2,children:e.jsx(Ie,{label:"End Date",value:l.endDate,onChange:h=>b(S=>({...S,endDate:h||void 0,page:0})),slotProps:{textField:{fullWidth:!0}}})}),e.jsx(T,{item:!0,xs:12,sm:6,md:1,children:e.jsx(oe,{onClick:()=>f(),disabled:n,children:e.jsx(yt,{})})})]})})}),e.jsx(T,{item:!0,xs:12,children:e.jsxs(ee,{children:[e.jsx(ie,{children:e.jsxs(le,{children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Log ID"}),e.jsx(m,{children:"Timestamp"}),e.jsx(m,{children:"User"}),e.jsx(m,{children:"Category"}),e.jsx(m,{children:"Description"})]})}),e.jsx(de,{children:n?e.jsx(O,{children:e.jsx(m,{colSpan:5,align:"center",children:"Loading..."})}):r.length===0?e.jsx(O,{children:e.jsx(m,{colSpan:5,align:"center",children:"No audit logs found"})}):r.map(h=>e.jsxs(O,{children:[e.jsx(m,{children:h.logID}),e.jsx(m,{children:He(new Date(h.timestamp),"MMM dd, yyyy HH:mm:ss")}),e.jsx(m,{children:h.userName||h.userID||"N/A"}),e.jsx(m,{children:e.jsx(je,{label:h.category,size:"small",color:D(h.category)})}),e.jsx(m,{children:h.description})]},h.logID))})]})}),e.jsx(St,{component:"div",count:o,page:l.page,onPageChange:t,rowsPerPage:l.pageSize,onRowsPerPageChange:g,rowsPerPageOptions:[5,10,25,50]})]})})]})})})},me={Driver:0,Sponsor:1,Admin:2},xs=({open:r,onClose:s})=>{const[o,u]=a.useState({Username:"",Email:"",Password:"",UserType:me.Admin,CompanyName:"",SponsorType:"",PointDollarValue:.01,SponsorID:""}),n=c=>{const{name:d,value:l}=c.target;u(d==="UserType"?b=>({...b,[d]:me[l]}):b=>({...b,[d]:d==="SponsorID"?l===""?"":parseInt(l):l}))},i=async c=>{var l,b;c.preventDefault();const d={...o,CompanyName:o.CompanyName||null,SponsorType:o.SponsorType||null,PointDollarValue:o.PointDollarValue||null,SponsorID:o.SponsorID===""?null:parseInt(o.SponsorID)};try{const f=await A.post("/api/admin/create-user",d,{headers:{"Content-Type":"application/json"}});alert("User created successfully"),s(),u({Username:"",Email:"",Password:"",UserType:"Admin",CompanyName:"",SponsorType:"",PointDollarValue:.01,SponsorID:""})}catch(f){console.error("Error creating user:",f);const v=((b=(l=f.response)==null?void 0:l.data)==null?void 0:b.details)||"Failed to create user";alert(v)}};return e.jsx(Ct,{open:r,onClose:s,"aria-labelledby":"create-user-modal-title","aria-describedby":"create-user-modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsxs(x,{sx:{backgroundColor:"white",padding:4,borderRadius:2,width:"100%",maxWidth:400},children:[e.jsx(p,{id:"create-user-modal-title",variant:"h6",component:"h2",children:"Create New User"}),e.jsxs("form",{onSubmit:i,children:[e.jsx(x,{sx:{mb:2},children:e.jsx(R,{label:"Username",name:"Username",value:o.Username,onChange:n,required:!0,fullWidth:!0})}),e.jsx(x,{sx:{mb:2},children:e.jsx(R,{label:"Email",name:"Email",type:"email",value:o.Email,onChange:n,required:!0,fullWidth:!0})}),e.jsx(x,{sx:{mb:2},children:e.jsx(R,{label:"Password",name:"Password",type:"password",value:o.Password,onChange:n,required:!0,fullWidth:!0})}),e.jsx(x,{sx:{mb:2},children:e.jsxs(Z,{fullWidth:!0,children:[e.jsx(J,{id:"user-type-label",children:"User Type"}),e.jsxs(B,{labelId:"user-type-label",name:"UserType",value:Object.keys(me).find(c=>me[c]===o.UserType),onChange:n,required:!0,children:[e.jsx(I,{value:"Admin",children:"Admin"}),e.jsx(I,{value:"Sponsor",children:"Sponsor"}),e.jsx(I,{value:"Driver",children:"Driver"})]})]})}),o.UserType===me.Sponsor&&e.jsxs(e.Fragment,{children:[e.jsx(x,{sx:{mb:2},children:e.jsx(R,{label:"Company Name",name:"CompanyName",value:o.CompanyName,onChange:n,required:!0,fullWidth:!0})}),e.jsx(x,{sx:{mb:2},children:e.jsx(R,{label:"Sponsor Type",name:"SponsorType",value:o.SponsorType,onChange:n,required:!0,fullWidth:!0})}),e.jsx(x,{sx:{mb:2},children:e.jsx(R,{label:"Point Dollar Value",name:"PointDollarValue",type:"number",step:"0.01",value:o.PointDollarValue,onChange:n,required:!0,fullWidth:!0})})]}),o.UserType===me.Driver&&e.jsx(x,{sx:{mb:2},children:e.jsx(R,{label:"Sponsor ID",name:"SponsorID",type:"number",value:o.SponsorID,onChange:n,required:!0,fullWidth:!0})}),e.jsx(M,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Create User"})]})]})})},ms=()=>{const[r,s]=a.useState([]),[o,u]=a.useState(!0),[n,i]=a.useState(""),[c,d]=a.useState(""),[l,b]=a.useState(!1);a.useEffect(()=>{f()},[]);const f=async()=>{try{u(!0);const y=await A.get("/api/admin/admins/details");s(y.data),i("")}catch(y){i("Failed to load admin data"),console.error("Error fetching admins:",y)}finally{u(!1)}},v=async(y,D)=>{try{await A.post("/api/user/change-user-type",{userId:y,newUserType:D}),await f()}catch(h){i(h.message)}},t=async y=>{try{await A.delete(`/api/user/remove-user/${y}`),await f()}catch(D){i(D.message)}},g=r.filter(y=>y.name.toLowerCase().includes(c.toLowerCase())||y.email.toLowerCase().includes(c.toLowerCase()));return o?e.jsx(x,{sx:{width:"100%",mt:2},children:e.jsx(ae,{})}):n?e.jsx(N,{severity:"error",sx:{mt:2},children:n}):e.jsxs(x,{sx:{width:"100%",p:3},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,children:"Manage Administrators"}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(R,{fullWidth:!0,variant:"outlined",placeholder:"Search admins by name or email...",value:c,onChange:y=>d(y.target.value),InputProps:{endAdornment:e.jsx(oe,{children:e.jsx(Be,{})})}}),e.jsx(M,{variant:"contained",color:"primary",onClick:()=>b(!0),sx:{ml:2},children:"Create User"})]}),l&&e.jsx(xs,{open:l,onClose:()=>b(!1)}),e.jsx(ie,{component:ee,children:e.jsxs(le,{children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Email"}),e.jsx(m,{children:"Created At"}),e.jsx(m,{children:"Last Login"}),e.jsx(m,{children:"User Type"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(de,{children:g.map(y=>e.jsxs(O,{children:[e.jsx(m,{children:y.name}),e.jsx(m,{children:y.email}),e.jsx(m,{children:new Date(y.createdAt).toLocaleDateString()}),e.jsx(m,{children:new Date(y.lastLogin).toLocaleDateString()}),e.jsx(m,{children:e.jsxs(B,{size:"small",value:y.userType||"admin",onChange:D=>v(y.userId.toString(),D.target.value),children:[e.jsx(I,{value:"admin",children:"Admin"}),e.jsx(I,{value:"sponsor",children:"Sponsor"}),e.jsx(I,{value:"driver",children:"Driver"})]})}),e.jsx(m,{children:e.jsx(oe,{onClick:()=>t(y.userId.toString()),color:"error",size:"small",children:e.jsx(Ve,{})})})]},y.userId))})]})})]})},gs=()=>{const[r,s]=a.useState([]),[o,u]=a.useState(!0),[n,i]=a.useState(""),[c,d]=a.useState("");a.useEffect(()=>{l()},[]);const l=async()=>{try{u(!0);const t=await A.get("/api/admin/sponsors/details");s(t.data),i("")}catch(t){i("Failed to load sponsor data"),console.error("Error fetching sponsors:",t)}finally{u(!1)}},b=async(t,g)=>{try{await A.post("/api/user/change-user-type",{userId:t,newUserType:g}),await l()}catch(y){i(y.message)}},f=async t=>{try{await A.delete(`/api/user/remove-user/${t}`),await l()}catch(g){i(g.message)}},v=r.filter(t=>t.name.toLowerCase().includes(c.toLowerCase())||t.email.toLowerCase().includes(c.toLowerCase())||t.companyName.toLowerCase().includes(c.toLowerCase()));return o?e.jsx(x,{sx:{width:"100%",mt:2},children:e.jsx(ae,{})}):n?e.jsx(N,{severity:"error",sx:{mt:2},children:n}):e.jsxs(x,{sx:{width:"100%",p:3},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,children:"Manage Sponsors"}),e.jsx(x,{sx:{display:"flex",alignItems:"center",mb:3},children:e.jsx(R,{fullWidth:!0,variant:"outlined",placeholder:"Search sponsors by name, email, or company...",value:c,onChange:t=>d(t.target.value),InputProps:{endAdornment:e.jsx(oe,{children:e.jsx(Be,{})})}})}),e.jsx(ie,{component:ee,children:e.jsxs(le,{children:[e.jsx(ce,{children:e.jsxs(O,{children:[e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Email"}),e.jsx(m,{children:"Company"}),e.jsx(m,{children:"Sponsor Type"}),e.jsx(m,{children:"Point Value ($)"}),e.jsx(m,{children:"User Type"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(de,{children:v.map(t=>e.jsxs(O,{children:[e.jsx(m,{children:t.name}),e.jsx(m,{children:t.email}),e.jsx(m,{children:t.companyName}),e.jsx(m,{children:e.jsx(je,{label:t.sponsorType,color:"primary",size:"small"})}),e.jsxs(m,{children:["$",t.pointDollarValue.toFixed(2)]}),e.jsx(m,{children:e.jsxs(B,{size:"small",value:t.userType||"sponsor",onChange:g=>b(t.userId.toString(),g.target.value),children:[e.jsx(I,{value:"sponsor",children:"Sponsor"}),e.jsx(I,{value:"admin",children:"Admin"}),e.jsx(I,{value:"driver",children:"Driver"})]})}),e.jsx(m,{children:e.jsx(oe,{onClick:()=>f(t.userId.toString()),color:"error",size:"small",children:e.jsx(Ve,{})})})]},t.userId))})]})})]})},js=({profileData:r,onSave:s=u=>console.log("Default save function",u),onUpdate:o=u=>console.log("Default update function",u)})=>{const u=r||{firstName:"",lastName:"",phone:"",address:"",gender:"",nationality:"",preferredPronouns:"",dateOfBirth:"",profilePicture:""},[n,i]=a.useState(u),[c,d]=a.useState("");a.useEffect(()=>{const t=localStorage.getItem("userProfile");if(t){const g=JSON.parse(t);i(g),typeof g.profilePicture=="string"&&d(g.profilePicture)}},[]),a.useEffect(()=>{localStorage.setItem("userProfile",JSON.stringify(n))},[n]);const l=t=>{const{name:g,value:y}=t.target;i({...n,[g]:y})},b=t=>{const g=t.target.files?t.target.files[0]:null;if(g){const y=URL.createObjectURL(g);d(y),i({...n,profilePicture:g})}},f=()=>{s(n),localStorage.setItem("userProfile",JSON.stringify(n))},v=()=>{o(n),localStorage.setItem("userProfile",JSON.stringify(n))};return e.jsx(fe,{maxWidth:"xs",children:e.jsxs(x,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(We,{sx:{m:1,bgcolor:"primary.light"},children:e.jsx(wt,{})}),e.jsx(p,{variant:"h5",children:"User Profile"}),e.jsxs(x,{sx:{mt:3},children:[e.jsxs(T,{container:!0,spacing:2,children:[e.jsx(T,{item:!0,xs:12,sm:6,children:e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,label:"First Name",name:"firstName",value:n.firstName,onChange:l})}),e.jsx(T,{item:!0,xs:12,sm:6,children:e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,label:"Last Name",name:"lastName",value:n.lastName,onChange:l})})]}),e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,label:"Phone Number",name:"phone",value:n.phone,onChange:l}),e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,label:"Address",name:"address",value:n.address,onChange:l}),e.jsxs(R,{select:!0,margin:"normal",fullWidth:!0,label:"Gender",name:"gender",value:n.gender,onChange:l,children:[e.jsx(I,{value:"Male",children:"Male"}),e.jsx(I,{value:"Female",children:"Female"}),e.jsx(I,{value:"Non-Binary",children:"Non-Binary"}),e.jsx(I,{value:"Other",children:"Other"})]}),e.jsx(R,{margin:"normal",required:!0,fullWidth:!0,label:"Nationality",name:"nationality",value:n.nationality,onChange:l}),e.jsx(R,{margin:"normal",fullWidth:!0,label:"Preferred Pronouns",name:"preferredPronouns",value:n.preferredPronouns,onChange:l}),e.jsx(R,{margin:"normal",fullWidth:!0,label:"Date of Birth",name:"dateOfBirth",type:"date",InputLabelProps:{shrink:!0},value:n.dateOfBirth,onChange:l}),c&&e.jsx(x,{component:"img",src:c,alt:"Profile Preview",sx:{width:"100%",height:"auto",maxHeight:"200px",mt:2,mb:2}}),e.jsxs(M,{variant:"contained",component:"label",fullWidth:!0,sx:{mt:2,mb:2},children:["Upload Profile Picture",e.jsx("input",{type:"file",hidden:!0,name:"profilePicture",accept:"image/*",onChange:b})]}),e.jsx(M,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:f,children:"Save"}),e.jsx(M,{fullWidth:!0,variant:"outlined",sx:{mt:1,mb:2},onClick:v,children:"Update Profile"})]})]})})},bs=()=>{const{user:r}=ne(),[s,o]=a.useState([e.jsxs(Pe,{children:["Welcome ",(r==null?void 0:r.userName)||"Admin"," to the GitGud Drivers Admin Console",`
`,"Type 'help' for available commands"]},"welcome")]),u=n=>{const[i,...c]=n.split(" ");let d="";switch(i){case"help":d=`Available commands:
  help - Show this help message
  status - Show system status
  users - List recent user activities
  clear - Clear console
  audit [date] - Show audit logs for date (YYYY-MM-DD)
  metrics - Show system metrics
  version - Show system version`;break;case"status":d=`System Status: Operational
Last backup: 2024-03-10
Active users: 42
Server load: Normal`;break;case"users":d=`Recent User Activities:
admin1@gitgud.com - Login - 2 mins ago
driver2@email.com - Updated profile - 5 mins ago
sponsor1@company.com - Approved application - 10 mins ago`;break;case"metrics":d=`System Metrics:
CPU Usage: 45%
Memory: 2.1GB/4GB
Active Sessions: 12
Response Time: 230ms`;break;case"audit":const l=c[0];!l||!/^\d{4}-\d{2}-\d{2}$/.test(l)?d="Error: Please provide a date in YYYY-MM-DD format":d=`Fetching audit logs for ${l}...
[${l} 09:15:23] User login - admin1@gitgud.com
[${l} 09:20:45] Configuration change - System settings updated
[${l} 10:30:12] New user registration - driver3@email.com`;break;case"version":d="GitGud Drivers v1.0.0";break;case"clear":o([]);return;default:d=`Unknown command: ${i}. Type 'help' for available commands.`}o(l=>[...l,e.jsx(Pe,{children:`$ ${n}`},`input-${Date.now()}`),e.jsx(Pe,{children:d},`output-${Date.now()}`)])};return e.jsx(x,{sx:{p:2},children:e.jsxs(ee,{elevation:3,sx:{bgcolor:"#1a1a1a",borderRadius:1,overflow:"hidden",height:"500px"},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1,bgcolor:"#2d2d2d",p:1,borderBottom:"1px solid #333"},children:[e.jsx(lr,{sx:{color:"#fff"}}),e.jsx(p,{variant:"h6",sx:{color:"#fff"},children:"Admin Console"})]}),e.jsx("div",{style:{height:"calc(100% - 48px)",background:"#1a1a1a"},children:e.jsx(Fr,{name:"Admin Console",colorMode:Br.Dark,prompt:"$",onInput:u,children:s})})]})})},fs={MAIN:e.jsx(x,{children:e.jsx(p,{variant:"h6",children:"Dashboard Home"})}),CHANGE_PASSWORD:e.jsx(Er,{}),MANAGE_DRIVERS:e.jsx(hs,{}),MANAGE_SPONSORS:e.jsx(gs,{}),MANAGE_ADMINS:e.jsx(ms,{}),ADMIN_REPORTS:e.jsx(us,{}),ADMIN_AUDIT_REPORTS:e.jsx(ps,{}),ADMIN_CONSOLE:e.jsx(bs,{}),DRIVER_APPLICATION:e.jsx(rs,{}),DRIVER_REGISTRATION:e.jsx(ls,{}),DRIVER_POINTS:e.jsx(as,{}),DRIVER_ACTIVITY:e.jsx(ns,{}),DRIVER_POINTS_HISTORY:e.jsx(cs,{}),PROFILE:e.jsx(js,{}),APPLICATION_MANAGER:e.jsx(ss,{}),SPONSOR_REPORTS:e.jsx(ds,{}),SPONSOR_AUDIT_REPORTS:e.jsx(p,{children:"Audit Reports"}),SPONSOR_DRIVERS:e.jsx(is,{})};function vs(){const{currentView:r}=Ar();return a.useEffect(()=>{console.log("Rendering MainGrid with current view:",r)},[r]),e.jsx(x,{sx:{width:"100%"},children:fs[r]||e.jsx(p,{children:"Select an option to view content"})})}const ys=()=>{const{user:r,viewRole:s,setViewRole:o}=ne();s||(r==null||r.userType);const u=i=>{o(i.target.value)},n=()=>{o(null)};return e.jsxs(x,{sx:{display:"flex",width:"100%",minHeight:"100vh"},children:[e.jsx(mr,{}),e.jsxs(x,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",ml:"15px"},children:[e.jsx(x,{sx:{p:2},children:e.jsxs(F,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(p,{variant:"h6",children:"Dashboard"}),r&&(r.userType==="Admin"||r.userType==="Sponsor")&&e.jsxs(B,{value:s||"",onChange:u,displayEmpty:!0,sx:{minWidth:180},renderValue:()=>"Select a role to view",children:[e.jsx(I,{disabled:!0,value:"",children:e.jsx("em",{children:"Select a role to view"})}),r.userType==="Admin"&&[e.jsx(I,{value:"Driver",children:"Driver"},"Driver"),e.jsx(I,{value:"Sponsor",children:"Sponsor"},"Sponsor"),e.jsx(I,{value:"Guest",children:"Guest"},"Guest")],r.userType==="Sponsor"&&e.jsx(I,{value:"Driver",children:"Driver"},"Driver")]}),s&&e.jsx(M,{onClick:n,children:'Exit "View As"'})]})}),e.jsx(vs,{})]})]})},or="productCatalog",Ss=10*60*1e3,Cs=()=>{const[r,s]=a.useState([]),[o,u]=a.useState(!0),[n,i]=a.useState(null),[c,d]=a.useState({}),[l,b]=a.useState(!1),[f,v]=a.useState([]),[t,g]=a.useState(""),[y,D]=a.useState(""),[h,S]=a.useState(!1),C=ge();a.useEffect(()=>{E()},[]),a.useEffect(()=>{const k=localStorage.getItem(or);if(k){const{listings:W,timestamp:ue}=JSON.parse(k);if(Date.now()-ue<Ss){s(W),u(!1);return}}L()},[]);const E=async()=>{try{const k=await A.get("/api/driver/my-sponsors");v(k.data),k.data.length>0&&g(k.data[0].sponsorId)}catch(k){i("Failed to load sponsor points data"),console.error("Error fetching sponsor points:",k)}},L=async()=>{var k;try{const ue=(await A.get("/api/catalog/products")).data.map(ve=>({...ve,pointCost:he(ve.price)}));s(ue),localStorage.setItem(or,JSON.stringify({listings:ue,timestamp:Date.now()}))}catch(W){i(((k=W.response)==null?void 0:k.data)||"Failed to load products.")}finally{u(!1)}},he=k=>{const W=f.find(ve=>ve.sponsorId===t);if(!W)return 0;const ue=parseFloat(k.split(" ")[0]);return Math.ceil(ue/W.pointDollarValue)},$=k=>{const W=f.find(ue=>ue.sponsorId===t);!W||!k.pointCost||(W.totalPoints<k.pointCost&&D(`Not enough points! You need ${k.pointCost} points but have ${W.totalPoints}`),S(!0))};if(o)return e.jsx(re,{});if(n)return e.jsx(N,{severity:"error",children:n});const z=f.find(k=>k.sponsorId===t),te=()=>c[t]||[],U=k=>{d(W=>({...W,[t]:[...W[t]||[],k]}))},Wr=()=>b(!0),Ge=()=>b(!1),Nr=()=>{d(k=>({...k,[t]:[]}))},$r=()=>{C("/order",{state:{cartItems:te(),sponsorId:t,points:z==null?void 0:z.totalPoints}}),Ge()};return e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:"Product Catalog"}),e.jsxs(Z,{fullWidth:!0,sx:{mb:4},children:[e.jsx(J,{children:"Select Sponsor"}),e.jsx(B,{value:t,label:"Select Sponsor",onChange:k=>g(k.target.value),children:f.map(k=>e.jsxs(I,{value:k.sponsorId,children:[k.sponsorName," - ",k.totalPoints.toLocaleString()," points available"]},k.sponsorId))})]}),z&&e.jsxs(N,{severity:"info",sx:{mb:2},children:["You have ",z.totalPoints.toLocaleString()," points available with ",z.sponsorName,". Point Value: $",z.pointDollarValue.toFixed(2)," per point"]}),e.jsx(x,{sx:{display:"flex",flexWrap:"wrap",gap:2,justifyContent:"flex-start"},children:r.map((k,W)=>e.jsxs(K,{sx:{width:"calc(33.333% - 16px)",maxWidth:"calc(33.333% - 16px)",marginBottom:2},children:[e.jsx(It,{component:"img",height:"200",image:k.imageUrl,alt:k.name,sx:{objectFit:"cover"}}),e.jsxs(X,{children:[e.jsx(p,{variant:"h6",component:"p",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k.name}),e.jsx(pe,{title:"Price",value:k.price}),e.jsx(pe,{title:"Point Cost",value:he(k.price).toLocaleString()}),e.jsx(M,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{$(k),!z||(k.pointCost||0)>z.totalPoints||U(k)},sx:{mt:2},children:"Add to Cart"})]})]},W))}),e.jsx(Cr,{open:h,autoHideDuration:3e3,onClose:()=>S(!1),message:y}),e.jsx(x,{sx:{position:"fixed",top:80,right:16,display:"flex",flexDirection:"column",gap:2},children:e.jsx(M,{variant:"contained",color:"secondary",onClick:Wr,children:"View Cart"})})]}),e.jsxs(wr,{open:l,onClose:Ge,children:[e.jsx(Ir,{children:"Your Cart"}),e.jsx(Dr,{children:te().length>0?e.jsx(Me,{children:te().map((k,W)=>e.jsx(Oe,{children:e.jsx(we,{primary:k.name,secondary:`Price: ${parseFloat(k.pointCost).toFixed(2)}`})},W))}):e.jsx(p,{variant:"body1",children:"Your cart is empty."})}),e.jsxs(kr,{children:[e.jsx(M,{onClick:Nr,color:"error",children:"Clear Cart"}),e.jsx(M,{onClick:$r,color:"primary",variant:"contained",disabled:te().length===0,children:"Proceed to Checkout"})]})]})]})},ws=({text:r,href:s})=>e.jsx("a",{href:s,className:"inline-block border border-blue-500 rounded px-1 text-blue-600 hover:bg-blue-50",style:{display:"inline-block",border:"1px solid #3b82f6",borderRadius:"4px",padding:"0 4px",color:"#2563eb",textDecoration:"none"},onMouseOver:o=>{o.currentTarget.style.backgroundColor="#eff6ff"},onMouseOut:o=>{o.currentTarget.style.backgroundColor="transparent"},children:r}),Is=(r,s)=>{if(!s||s.length===0)return r;let o=r;return s.forEach(n=>{o=o.replace(n.text,`__LINK_${n.text}__`)}),o.split(/__LINK_|__/).map((n,i)=>{const c=s.find(d=>d.text===n);return c?e.jsx(ws,{text:c.text,href:c.href},i):e.jsx("span",{children:n},i)})},Ds=({question:r,answer:s,links:o})=>e.jsxs(Dt,{children:[e.jsx(kt,{expandIcon:e.jsx(ir,{}),"aria-controls":"panel-content",id:"panel-header",children:e.jsx(p,{children:r})}),e.jsx(Pt,{children:e.jsx(p,{component:"div",children:Is(s,o)})})]}),ks=()=>{const r=[{question:"How do I create an account?",answer:"To create an account, click on the 'Sign Up' Button, and from there you will become a guest.",links:[{text:"Sign Up",href:"/register"}]},{question:"How can I become a driver?",answer:"To become a driver, you need to apply with one of the sponsors associated with our program. Once they have accepted your application, you will automatically become a driver."},{question:"What are the password requirements?",answer:"To create a password, it must have a number, a lowercase letter, an uppercase letter, be at least 8 characters long and no characters can be repeated."},{question:"How can I reset my password?",answer:"If you've forgotten your password, click on the 'Forgot Password' link on the login page.",links:[{text:"Forgot Password",href:"/reset-password"},{text:"login page",href:"/login"}]},{question:"How do I earn points?",answer:"To earn points, first you must be associated with at least one sponsor. From there, simply follow instructions from your sponsor to earn points."},{question:"How do I apply to a sponsor?",answer:"To apply to be a sponsor, simply reach out to us and we will create an account for you if you meet our requirements."},{question:"What can I spend my points on?",answer:"You can exchange your points for a variety of items from your sponsors catalog. Each of our sponsors has a unique selection of items.",links:[{text:"sponsors catalog",href:"/catalog"}]}];return e.jsxs("div",{children:[e.jsx(p,{variant:"h4",gutterBottom:!0,children:"Frequently Asked Questions"}),r.map((s,o)=>e.jsx(Ds,{question:s.question,answer:s.answer,links:s.links},o))]})},Ps=()=>{const[r,s]=a.useState(""),[o,u]=a.useState(""),[n,i]=a.useState(""),[c,d]=a.useState(!1),[l,b]=a.useState(""),f=async t=>{if(t.preventDefault(),!r||!o||!n){b("Please fill in all fields");return}if(!/\S+@\S+\.\S+/.test(o)){b("Please enter a valid email address");return}try{await A.post("/api/feedback",{Name:r,Email:o,Description:n,SubmissionDate:new Date().toISOString()}),console.log("Feedback submitted:",{name:r,email:o,message:n}),d(!0),s(""),u(""),i(""),b("")}catch(g){console.error("Error submitting feedback:",g),b("An error occurred while submitting your feedback. Please try again later.")}},v=(t,g)=>{g!=="clickaway"&&d(!1)};return e.jsxs(x,{component:"form",onSubmit:f,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:"Provide Feedback"}),e.jsx(R,{label:"Your Name",fullWidth:!0,margin:"normal",value:r,onChange:t=>s(t.target.value),required:!0}),e.jsx(R,{label:"Your Email",type:"email",fullWidth:!0,margin:"normal",value:o,onChange:t=>u(t.target.value),required:!0}),e.jsx(R,{label:"Your Feedback",fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:n,onChange:t=>i(t.target.value),required:!0}),e.jsx(M,{type:"submit",variant:"contained",size:"large",fullWidth:!0,sx:{mt:3,mb:2},children:"Submit Feedback"}),l&&e.jsx(p,{color:"error",sx:{mt:2},children:l}),e.jsx(Cr,{open:c,autoHideDuration:6e3,onClose:v,children:e.jsx(N,{onClose:v,severity:"success",sx:{width:"100%"},children:"Thank you for your feedback!"})})]})},Rs=()=>{const[r,s]=a.useState(!1),o=()=>{s(!0)},u=()=>{s(!1)},n=nr(),{cartItems:i,points:c}=n.state||{},d=ge();return e.jsxs(fe,{maxWidth:"md",children:[e.jsx(M,{variant:"outlined",onClick:()=>d("/catalog"),sx:{mb:2},children:"Back"}),e.jsx(p,{variant:"h4",align:"center",gutterBottom:!0,children:"Secure Checkout"}),e.jsxs(T,{container:!0,spacing:4,children:[e.jsx(T,{item:!0,xs:12,sm:7,children:e.jsxs(x,{children:[e.jsx(p,{variant:"h6",children:"1. Delivery Address"}),e.jsx(p,{variant:"body2",children:"All fields marked with * are required"}),e.jsxs(T,{container:!0,spacing:2,mt:2,children:[" ",e.jsx(T,{item:!0,xs:12,children:e.jsx(R,{label:"Email address *",fullWidth:!0,variant:"outlined"})}),e.jsx(T,{item:!0,xs:6,children:e.jsx(R,{label:"First name *",fullWidth:!0,variant:"outlined"})}),e.jsx(T,{item:!0,xs:6,children:e.jsx(R,{label:"Last name *",fullWidth:!0,variant:"outlined"})}),e.jsx(T,{item:!0,xs:12,children:e.jsx(R,{label:"Address *",fullWidth:!0,variant:"outlined"})}),e.jsx(T,{item:!0,xs:6,children:e.jsx(R,{label:"City *",fullWidth:!0,variant:"outlined"})}),e.jsx(T,{item:!0,xs:6,children:e.jsx(R,{label:"ZIP code *",fullWidth:!0,variant:"outlined"})}),e.jsx(T,{item:!0,xs:12,children:e.jsx(R,{label:"Country *",fullWidth:!0,variant:"outlined",defaultValue:"United States"})})]})]})}),e.jsx(T,{item:!0,xs:12,sm:5,children:e.jsxs(x,{children:[e.jsx(p,{variant:"h6",children:"Order Summary"}),e.jsx(T,{container:!0,spacing:2,mt:2,alignItems:"center",children:i&&i.map((l,b)=>e.jsxs(T,{container:!0,children:[e.jsx(T,{item:!0,xs:8,children:e.jsx(p,{variant:"subtitle1",children:l.name})}),e.jsx(T,{item:!0,xs:4,textAlign:"right",children:e.jsxs(p,{children:[l.pointCost," points"]})})]},b))}),e.jsxs(x,{mt:2,textAlign:"right",children:[e.jsxs(p,{variant:"h6",children:["Total: ",i.reduce((l,b)=>l+b.pointCost,0)]}),e.jsxs(p,{variant:"h6",children:["Current Points: ",c]}),e.jsx(M,{variant:"contained",color:"primary",fullWidth:!0,onClick:o,sx:{mt:2},children:"Complete Order"})]})]})})]}),e.jsxs(wr,{open:r,onClose:u,children:[e.jsx(Ir,{children:"Order Complete"}),e.jsxs(Dr,{children:[e.jsxs(p,{children:["Your order has been successfully completed! Remaining points: ",c-i.reduce((l,b)=>l+b.pointCost,0)]})," "]}),e.jsx(kr,{children:e.jsx(M,{onClick:u,color:"primary",children:"Close"})})]})]})},ar=({title:r,buttons:s})=>e.jsxs(x,{sx:{mt:3},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,children:r}),s.map((o,u)=>e.jsx(M,{component:xe,to:o.path,variant:"contained",sx:{m:1},children:o.label},u))]}),As=()=>e.jsxs(x,{sx:{width:"100%",maxWidth:600,margin:"auto",mt:4},children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:"Settings"}),e.jsx(ar,{title:"Account Settings",buttons:[{label:"Update Email",path:"/update-email"},{label:"Change Password",path:"/change-password"},{label:"View Profile",path:"/profile"}]}),e.jsx(ar,{title:"Notification Settings",buttons:[{label:"Manage Notifications",path:"/notifications"},{label:"Set Preferences",path:"/preferences"}]})]}),Ts=()=>{const{isAuthenticated:r}=ne();return r?e.jsxs(x,{sx:{display:"flex"},children:[e.jsx(Yt,{}),e.jsx(x,{sx:{flexGrow:1},children:e.jsx(Ur,{})})]}):e.jsx(Ee,{to:"/",replace:!0})},Es=()=>{const{isAuthenticated:r}=ne();return r?e.jsx(Ee,{to:"/dashboard",replace:!0}):e.jsx(Ee,{to:"/home",replace:!0})},Ms=()=>e.jsx(Rt,{children:e.jsx(At,{children:e.jsxs(Ht,{children:[e.jsx(Ot,{}),e.jsx($e,{}),e.jsx(x,{sx:{mt:1,width:"100%"},children:e.jsxs(Vr,{children:[e.jsx(_,{path:"/",element:e.jsx(Es,{})}),e.jsx(_,{path:"/about",element:e.jsx(Jt,{})}),e.jsx(_,{path:"/login",element:e.jsx(Qt,{})}),e.jsx(_,{path:"/register",element:e.jsx(es,{})}),e.jsx(_,{path:"/home",element:e.jsx(Zt,{})}),e.jsx(_,{path:"/faq",element:e.jsx(ks,{})}),e.jsx(_,{path:"/feedback",element:e.jsx(Ps,{})}),e.jsxs(_,{element:e.jsx(Ts,{}),children:[e.jsx(_,{path:"/dashboard",element:e.jsx(ys,{})}),e.jsx(_,{path:"/catalog",element:e.jsx(Cs,{})}),e.jsx(_,{path:"/change-password",element:e.jsx(Er,{})}),e.jsx(_,{path:"/settings",element:e.jsx(As,{})}),e.jsx(_,{path:"/order",element:e.jsx(Rs,{})})]})]})})]})})});Gr.createRoot(document.getElementById("root")).render(e.jsx(Hr,{children:e.jsx(Ms,{})}));
