import{j as e,r as s,h as Se,L as pe,i as Pt,l as Rt,m as At,n as Tt,o as U,O as Mt,N as Ae,p as Ot,B as Et}from"./vendor-react-D2RGqI7t.js";import{E as Lt,a as st,D as zt,A as be,S as Be,I as De,P as Fe,b as ke,H as me,T as ot,c as $t,N as Wt,L as at,d as Nt,e as Bt,M as Ft,f as Vt,C as Gt,g as Ht,R as Ut,U as _t,h as qt,G as Ve,W as Yt,i as Zt,j as Qt,B as Jt,k as Kt,l as Ge,m as Xt,n as er,o as tr,p as He,q as Ue}from"./mui-icons-CBiTGWnq.js";import{x as rr,y as sr,I as ae,L as Te,k as Me,z as _e,A as qe,D as fe,E as or,H as nt,J as ar,S as V,K as it,O as X,Q as nr,b as Ee,R as g,U as lt,V as P,W as dt,X as Le,Y as ct,Z as ve,_ as Ye,$ as ir,a0 as lr,a1 as W,a2 as dr,a3 as Pe,a4 as cr,a5 as Ze,a6 as Qe,a7 as ur,s as hr,a8 as ut,a9 as Ce,aa as re,ab as z,T as M,ac as Oe,ad as ne,ae as ze,af as $e,F as Z,ag as q,P as te,ah as ie,ai as le,aj as de,ak as E,al as v,am as ce,C as we,an as pr,ao as xr,ap as ht,aq as gr,ar as mr,as as jr}from"./mui-material-ouEbscr_.js";import{a as A}from"./vendor-axios-B_zfNCMU.js";import{C as G,a as H,b as br}from"./mui-card-CKpErXrO.js";import{T as n,t as vr}from"./mui-typography-CHldA4bj.js";import{a as T,b as pt}from"./mui-button-artrVjas.js";import{h as D,ab as fr,x as Je}from"./vendor-CO4f1an5.js";import{G as w,a as K}from"./mui-grid-BUpVi5B8.js";import{a as Q}from"./mui-input-C0mvlNGc.js";import{P as Ie,B as We}from"./mui-charts-DdD0_qQk.js";import{T as xt}from"./mui-tooltip-Ddlh4Dd5.js";import{L as gt,A as mt,D as ye}from"./mui-date-pickers-CjbuuK6K.js";import{a as jt,c as bt,b as vt,D as yr}from"./mui-dialog-R47-itni.js";import"./vendor-d3-znMxVUn0.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function h(i){if(i.ep)return;i.ep=!0;const d=o(i);fetch(i.href,d)}})();function Ne({showBadge:t=!1,...r}){return e.jsx(rr,{color:"error",variant:"dot",invisible:!t,sx:{[`& .${sr.badge}`]:{right:2,top:2}},children:e.jsx(ae,{size:"small",...r})})}const ft=s.createContext(void 0),Sr=({children:t})=>{const[r,o]=s.useState(()=>sessionStorage.getItem("isAuthenticated")==="true"),[h,i]=s.useState(()=>{const a=sessionStorage.getItem("user");return a?JSON.parse(a):null}),[d,l]=s.useState(()=>sessionStorage.getItem("viewRole")||null),[p,m]=s.useState(!r),j=s.useCallback(a=>{l(a),a?sessionStorage.setItem("viewRole",a):sessionStorage.removeItem("viewRole")},[]);s.useEffect(()=>{r?m(!1):x()},[]);const x=async()=>{m(!0);try{const a=await A.get("/api/user/currentuser",{withCredentials:!0});i(a.data),o(!0),sessionStorage.setItem("user",JSON.stringify(a.data)),sessionStorage.setItem("isAuthenticated","true")}catch{i(null),o(!1),sessionStorage.removeItem("user"),sessionStorage.removeItem("isAuthenticated")}finally{m(!1)}},b=async()=>{try{await A.post("/api/user/logout",{},{withCredentials:!0}),i(null),o(!1),j(null),sessionStorage.clear()}catch{}};return e.jsx(ft.Provider,{value:{user:h,isAuthenticated:r,isLoading:p,viewRole:d,setViewRole:j,checkAuth:x,logout:b},children:t})},se=()=>{const t=s.useContext(ft);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},yt=s.createContext(void 0),St=()=>{const t=s.useContext(yt);if(!t)throw new Error("useView must be used within a ViewProvider");return t},Cr=({children:t})=>{const[r,o]=s.useState("MAIN");return e.jsx(yt.Provider,{value:{currentView:r,setCurrentView:o},children:t})},Ke={base:[{text:"Dashboard",icon:e.jsx(zt,{}),view:"MAIN"}],Guest:[{text:"Applications",icon:e.jsx(be,{}),view:"DRIVER_APPLICATION"}],Driver:[{text:"Applications",icon:e.jsx(be,{}),view:"DRIVER_APPLICATION"},{text:"Product Catalog",icon:e.jsx(Be,{}),path:"/catalog"},{text:"Register With Sponsors",icon:e.jsx(be,{}),view:"DRIVER_REGISTRATION"},{text:"Points",icon:e.jsx(De,{}),view:"DRIVER_POINTS"},{text:"Activity",icon:e.jsx(De,{}),view:"DRIVER_ACTIVITY"}],Admin:[{text:"Manage Users",icon:e.jsx(Fe,{}),nestedItems:[{text:"Drivers",icon:e.jsx(ke,{}),view:"MANAGE_DRIVERS"},{text:"Sponsors",icon:e.jsx(ke,{}),view:"MANAGE_SPONSORS"},{text:"Admins",icon:e.jsx(ke,{}),view:"MANAGE_USERS"}]},{text:"Reports Views",icon:e.jsx(me,{}),nestedItems:[{text:"General",icon:e.jsx(me,{}),view:"ADMIN_REPORTS"},{text:"Audits",icon:e.jsx(me,{}),view:"ADMIN_AUDIT_REPORTS"}]},{text:"Console",icon:e.jsx(ot,{}),view:"ADMIN_CONSOLE"}],Sponsor:[{text:"Manage Drivers",icon:e.jsx(Fe,{}),view:"SPONSOR_DRIVERS"},{text:"Approve/Reject Applications",icon:e.jsx(be,{}),view:"APPLICATION_MANAGER"},{text:"Product Catalog",icon:e.jsx(Be,{}),path:"/catalog"},{text:"Reports Views",icon:e.jsx(me,{}),nestedItems:[{text:"General",icon:e.jsx(De,{}),view:"SPONSOR_REPORTS"},{text:"Audits",icon:e.jsx(me,{}),view:"SPONSOR_AUDIT_REPORTS"}]}]};function Ct(){const{setCurrentView:t}=St(),{user:r,viewRole:o}=se(),h=Se(),i=o||(r==null?void 0:r.userType)||"Guest",[d,l]=s.useState({}),p=[...Ke.base,...Ke[i]||[]],m=x=>{l(b=>({...b,[x]:!b[x]}))},j=(x,b)=>{b?h(b):x&&t(x)};return e.jsx(Te,{dense:!0,children:p.map((x,b)=>e.jsxs(s.Fragment,{children:[e.jsx(Me,{disablePadding:!0,children:e.jsxs(_e,{onClick:()=>x.nestedItems?m(x.text):j(x.view,x.path),children:[e.jsx(qe,{children:x.icon}),e.jsx(fe,{primary:x.text}),x.nestedItems?d[x.text]?e.jsx(Lt,{}):e.jsx(st,{}):null]})}),x.nestedItems&&e.jsx(or,{in:d[x.text],timeout:"auto",unmountOnExit:!0,children:e.jsx(Te,{component:"div",disablePadding:!0,children:x.nestedItems.map((a,f)=>e.jsx(Me,{disablePadding:!0,children:e.jsxs(_e,{onClick:()=>j(a.view,a.path),children:[e.jsx(qe,{children:a.icon}),e.jsx(fe,{primary:a.text})]})},f))})})]},b))})}function wr(){return e.jsx(G,{variant:"outlined",sx:{m:1.5,p:1.5},children:e.jsxs(H,{children:[e.jsx($t,{fontSize:"small"}),e.jsx(n,{gutterBottom:!0,sx:{fontWeight:600},children:"Something"}),e.jsx(n,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"Earn points by driving safe!"}),e.jsx(T,{variant:"contained",size:"small",fullWidth:!0,children:"Make the pledge"})]})})}function Ir({open:t,toggleDrawer:r}){const{user:o,viewRole:h,logout:i}=se(),d=h?{userName:`Viewing as ${h}`,email:`${h.toLowerCase()}@example.com`,userType:h}:o;return e.jsx(nt,{anchor:"right",open:t,onClose:r(!1),sx:{zIndex:l=>l.zIndex.drawer+1,[`& .${ar.paper}`]:{backgroundImage:"none",backgroundColor:"background.paper"}},children:e.jsxs(V,{sx:{maxWidth:"70dvw",height:"100%"},children:[e.jsxs(V,{direction:"row",sx:{p:2,pb:0,gap:1},children:[d?e.jsxs(V,{direction:"row",sx:{gap:1,alignItems:"center",flexGrow:1,p:1},children:[e.jsx(it,{alt:d.userName,src:"/static/images/avatar/7.jpg",sx:{width:24,height:24}}),e.jsx(n,{component:"p",variant:"h6",children:d.userName})]}):e.jsx(n,{variant:"body2",sx:{flexGrow:1,p:1},children:"Please log in to access more features."}),e.jsx(Ne,{showBadge:!0,children:e.jsx(Wt,{})})]}),e.jsx(X,{}),e.jsxs(V,{sx:{flexGrow:1},children:[e.jsx(Ct,{}),e.jsx(X,{})]}),e.jsx(wr,{}),d&&e.jsx(V,{sx:{p:2},children:e.jsx(T,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(at,{}),onClick:i,children:"Logout"})})]})})}function Dr(t){const{mode:r,systemMode:o,setMode:h}=nr(),i=Ee(),[d,l]=s.useState(null),p=!!d,m=f=>{l(f.currentTarget)},j=()=>{l(null)},x=f=>()=>{h(f),j()};if(!r)return e.jsx(g,{"data-screenshot":"toggle-mode",sx:{verticalAlign:"bottom",display:"inline-flex",width:"2.25rem",height:"2.25rem",borderRadius:i.shape.borderRadius,border:"1px solid",borderColor:i.palette.divider}});const a=(o||r)==="light"?e.jsx(Nt,{}):e.jsx(Bt,{});return e.jsxs(s.Fragment,{children:[e.jsx(ae,{"data-screenshot":"toggle-mode",onClick:m,disableRipple:!0,size:"small","aria-controls":p?"color-scheme-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,...t,children:a}),e.jsxs(lt,{anchorEl:d,id:"color-scheme-menu",open:p,onClose:j,onClick:j,PaperProps:{variant:"outlined",sx:{my:"4px"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(P,{selected:r==="system",onClick:x("system"),children:"System"}),e.jsx(P,{selected:r==="light",onClick:x("light"),children:"Light"}),e.jsx(P,{selected:r==="dark",onClick:x("dark"),children:"Dark"})]})]})}function kr(){const[t,r]=s.useState(!1);se();const o=h=>()=>{r(h)};return e.jsx(dt,{position:"fixed",sx:{zIndex:h=>h.zIndex.drawer+1,boxShadow:0,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",maxWidth:"100vw",overflow:"hidden"},children:e.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:1,maxWidth:"100%",overflow:"hidden"},children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:1,flexShrink:0},children:[e.jsx(Pr,{}),e.jsx(n,{variant:"h5",component:"a",href:"/",sx:{color:"text.primary",textDecoration:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"GitGud Drivers"})]}),e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:{xs:1,md:2},flexWrap:"wrap",justifyContent:"flex-end",width:{xs:"100%",md:"auto"}},children:[e.jsx(n,{component:pe,to:"/about",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"About"}),e.jsx(n,{component:pe,to:"/faq",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"FAQ"}),e.jsx(Dr,{}),e.jsxs(g,{sx:{display:{xs:"block",md:"none"}},children:[e.jsx(Ne,{"aria-label":"menu",onClick:o(!0),children:e.jsx(Ft,{})}),e.jsx(Ir,{open:t,toggleDrawer:o})]})]})]})})}function Pr(){return e.jsx(g,{sx:{width:"1.5rem",height:"1.5rem",bgcolor:"black",borderRadius:"999px",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(135deg, hsl(210, 98%, 60%) 0%, hsl(210, 100%, 35%) 100%)",color:"hsla(210, 100%, 95%, 0.9)",border:"1px solid",borderColor:"hsl(210, 100%, 55%)",boxShadow:"inset 0 2px 5px rgba(255, 255, 255, 0.3)"},children:e.jsx(Vt,{color:"inherit",sx:{fontSize:"1rem"}})})}const _=ct();[..._.shadows];const y={50:"hsl(210, 100%, 95%)",100:"hsl(210, 100%, 92%)",200:"hsl(210, 100%, 80%)",300:"hsl(210, 100%, 65%)",400:"hsl(210, 98%, 48%)",500:"hsl(210, 98%, 42%)",600:"hsl(210, 98%, 55%)",700:"hsl(210, 100%, 35%)",800:"hsl(210, 100%, 16%)",900:"hsl(210, 100%, 21%)"},u={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},B={50:"hsl(120, 80%, 98%)",100:"hsl(120, 75%, 94%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",600:"hsl(120, 70%, 25%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},Y={50:"hsl(45, 100%, 97%)",100:"hsl(45, 92%, 90%)",200:"hsl(45, 94%, 80%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",600:"hsl(45, 91%, 25%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},F={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",600:"hsl(0, 91%, 25%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},Rr={light:{palette:{primary:{light:y[200],main:y[400],dark:y[700],contrastText:y[50]},info:{light:y[100],main:y[300],dark:y[600],contrastText:u[50]},warning:{light:Y[300],main:Y[400],dark:Y[800]},error:{light:F[300],main:F[400],dark:F[800]},success:{light:B[300],main:B[400],dark:B[800]},grey:{...u},divider:D(u[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:u[800],secondary:u[600],warning:Y[400]},action:{hover:D(u[200],.2),selected:`${D(u[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:y[50],light:y[300],main:y[400],dark:y[700]},info:{contrastText:y[300],light:y[500],main:y[700],dark:y[900]},warning:{light:Y[400],main:Y[500],dark:Y[700]},error:{light:F[400],main:F[500],dark:F[700]},success:{light:B[400],main:B[500],dark:B[700]},grey:{...u},divider:D(u[700],.6),background:{default:u[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:u[400]},action:{hover:D(u[600],.2),selected:D(u[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}};['"Inter", "sans-serif"'].join(","),_.typography.pxToRem(48),_.typography.pxToRem(36),_.typography.pxToRem(30),_.typography.pxToRem(24),_.typography.pxToRem(20),_.typography.pxToRem(18),_.typography.pxToRem(18),_.typography.pxToRem(14),_.typography.pxToRem(14),_.typography.pxToRem(14),_.typography.pxToRem(12);const Ar={borderRadius:8},Tr=["none","var(--template-palette-baseShadow)",..._.shadows.slice(2)],Mr=Tr,Or={MuiButtonBase:{defaultProps:{disableTouchRipple:!0,disableRipple:!0},styleOverrides:{root:({theme:t})=>({boxSizing:"border-box",transition:"all 100ms ease-in","&:focus-visible":{outline:`3px solid ${D(t.palette.primary.main,.5)}`,outlineOffset:"2px"}})}},MuiButton:{styleOverrides:{root:({theme:t})=>({boxShadow:"none",borderRadius:t.shape.borderRadius,textTransform:"none",variants:[{props:{size:"small"},style:{height:"2.25rem",padding:"8px 12px"}},{props:{size:"medium"},style:{height:"2.5rem"}},{props:{color:"primary",variant:"contained"},style:{color:"white",backgroundColor:u[900],backgroundImage:`linear-gradient(to bottom, ${u[700]}, ${u[800]})`,boxShadow:`inset 0 1px 0 ${u[600]}, inset 0 -1px 0 1px hsl(220, 0%, 0%)`,border:`1px solid ${u[700]}`,"&:hover":{backgroundImage:"none",backgroundColor:u[700],boxShadow:"none"},"&:active":{backgroundColor:u[800]},...t.applyStyles("dark",{color:"black",backgroundColor:u[50],backgroundImage:`linear-gradient(to bottom, ${u[100]}, ${u[50]})`,boxShadow:"inset 0 -1px 0  hsl(220, 30%, 80%)",border:`1px solid ${u[50]}`,"&:hover":{backgroundImage:"none",backgroundColor:u[300],boxShadow:"none"},"&:active":{backgroundColor:u[400]}})}},{props:{color:"secondary",variant:"contained"},style:{color:"white",backgroundColor:y[300],backgroundImage:`linear-gradient(to bottom, ${D(y[400],.8)}, ${y[500]})`,boxShadow:`inset 0 2px 0 ${D(y[200],.2)}, inset 0 -2px 0 ${D(y[700],.4)}`,border:`1px solid ${y[500]}`,"&:hover":{backgroundColor:y[700],boxShadow:"none"},"&:active":{backgroundColor:y[700],backgroundImage:"none"}}},{props:{variant:"outlined"},style:{color:t.palette.text.primary,border:"1px solid",borderColor:u[200],backgroundColor:D(u[50],.3),"&:hover":{backgroundColor:u[100],borderColor:u[300]},"&:active":{backgroundColor:u[200]},...t.applyStyles("dark",{backgroundColor:u[800],borderColor:u[700],"&:hover":{backgroundColor:u[900],borderColor:u[600]},"&:active":{backgroundColor:u[900]}})}},{props:{color:"secondary",variant:"outlined"},style:{color:y[700],border:"1px solid",borderColor:y[200],backgroundColor:y[50],"&:hover":{backgroundColor:y[100],borderColor:y[400]},"&:active":{backgroundColor:D(y[200],.7)},...t.applyStyles("dark",{color:y[50],border:"1px solid",borderColor:y[900],backgroundColor:D(y[900],.3),"&:hover":{borderColor:y[700],backgroundColor:D(y[900],.6)},"&:active":{backgroundColor:D(y[900],.5)}})}},{props:{variant:"text"},style:{color:u[600],"&:hover":{backgroundColor:u[100]},"&:active":{backgroundColor:u[200]},...t.applyStyles("dark",{color:u[50],"&:hover":{backgroundColor:u[700]},"&:active":{backgroundColor:D(u[700],.7)}})}},{props:{color:"secondary",variant:"text"},style:{color:y[700],"&:hover":{backgroundColor:D(y[100],.5)},"&:active":{backgroundColor:D(y[200],.7)},...t.applyStyles("dark",{color:y[100],"&:hover":{backgroundColor:D(y[900],.5)},"&:active":{backgroundColor:D(y[900],.3)}})}}]})}},MuiIconButton:{styleOverrides:{root:({theme:t})=>({boxShadow:"none",borderRadius:t.shape.borderRadius,textTransform:"none",fontWeight:t.typography.fontWeightMedium,letterSpacing:0,color:t.palette.text.primary,border:"1px solid ",borderColor:u[200],backgroundColor:D(u[50],.3),"&:hover":{backgroundColor:u[100],borderColor:u[300]},"&:active":{backgroundColor:u[200]},...t.applyStyles("dark",{backgroundColor:u[800],borderColor:u[700],"&:hover":{backgroundColor:u[900],borderColor:u[600]},"&:active":{backgroundColor:u[900]}}),variants:[{props:{size:"small"},style:{width:"2.25rem",height:"2.25rem",padding:"0.25rem",[`& .${ve.root}`]:{fontSize:"1rem"}}},{props:{size:"medium"},style:{width:"2.5rem",height:"2.5rem"}}]})}},MuiToggleButtonGroup:{styleOverrides:{root:({theme:t})=>({borderRadius:"10px",boxShadow:`0 4px 16px ${D(u[400],.2)}`,[`& .${Ye.selected}`]:{color:y[500]},...t.applyStyles("dark",{[`& .${Ye.selected}`]:{color:"#fff"},boxShadow:`0 4px 16px ${D(y[700],.5)}`})})}},MuiToggleButton:{styleOverrides:{root:({theme:t})=>({padding:"12px 16px",textTransform:"none",borderRadius:"10px",fontWeight:500,...t.applyStyles("dark",{color:u[400],boxShadow:"0 4px 16px rgba(0, 0, 0, 0.5)",[`&.${ir.selected}`]:{color:y[300]}})})}},MuiCheckbox:{defaultProps:{disableRipple:!0,icon:e.jsx(Gt,{sx:{color:"hsla(210, 0%, 0%, 0.0)"}}),checkedIcon:e.jsx(Ht,{sx:{height:14,width:14}}),indeterminateIcon:e.jsx(Ut,{sx:{height:14,width:14}})},styleOverrides:{root:({theme:t})=>({margin:10,height:16,width:16,borderRadius:5,border:"1px solid ",borderColor:D(u[300],.8),boxShadow:"0 0 0 1.5px hsla(210, 0%, 0%, 0.04) inset",backgroundColor:D(u[100],.4),transition:"border-color, background-color, 120ms ease-in","&:hover":{borderColor:y[300]},"&.Mui-focusVisible":{outline:`3px solid ${D(y[500],.5)}`,outlineOffset:"2px",borderColor:y[400]},"&.Mui-checked":{color:"white",backgroundColor:y[500],borderColor:y[500],boxShadow:"none","&:hover":{backgroundColor:y[600]}},...t.applyStyles("dark",{borderColor:D(u[700],.8),boxShadow:"0 0 0 1.5px hsl(210, 0%, 0%) inset",backgroundColor:D(u[900],.8),"&:hover":{borderColor:y[300]},"&.Mui-focusVisible":{borderColor:y[400],outline:`3px solid ${D(y[500],.5)}`,outlineOffset:"2px"}})})}},MuiInputBase:{styleOverrides:{root:{border:"none"},input:{"&::placeholder":{opacity:.7,color:u[500]}}}},MuiOutlinedInput:{styleOverrides:{input:{padding:0},root:({theme:t})=>({padding:"8px 12px",color:t.palette.text.primary,borderRadius:t.shape.borderRadius,border:`1px solid ${t.palette.divider}`,backgroundColor:t.palette.background.default,transition:"border 120ms ease-in","&:hover":{borderColor:u[400]},[`&.${lr.focused}`]:{outline:`3px solid ${D(y[500],.5)}`,borderColor:y[400]},...t.applyStyles("dark",{"&:hover":{borderColor:u[500]}}),variants:[{props:{size:"small"},style:{height:"2.25rem"}},{props:{size:"medium"},style:{height:"2.5rem"}}]}),notchedOutline:{border:"none"}}},MuiInputAdornment:{styleOverrides:{root:({theme:t})=>({color:t.palette.grey[500],...t.applyStyles("dark",{color:t.palette.grey[400]})})}},MuiFormLabel:{styleOverrides:{root:({theme:t})=>({typography:t.typography.caption,marginBottom:8})}}},Er={MuiList:{styleOverrides:{root:{padding:"8px",display:"flex",flexDirection:"column",gap:0}}},MuiListItem:{styleOverrides:{root:({theme:t})=>({[`& .${ve.root}`]:{width:"1rem",height:"1rem",color:t.palette.text.secondary},[`& .${vr.root}`]:{fontWeight:500},[`& .${pt.root}`]:{display:"flex",gap:8,padding:"2px 8px",borderRadius:t.shape.borderRadius,opacity:.7,"&.Mui-selected":{opacity:1,backgroundColor:D(t.palette.action.selected,.3),[`& .${ve.root}`]:{color:t.palette.text.primary},"&:focus-visible":{backgroundColor:D(t.palette.action.selected,.3)},"&:hover":{backgroundColor:D(t.palette.action.selected,.5)}},"&:focus-visible":{backgroundColor:"transparent"}}})}},MuiListItemText:{styleOverrides:{primary:({theme:t})=>({fontSize:t.typography.body2.fontSize,fontWeight:500,lineHeight:t.typography.body2.lineHeight}),secondary:({theme:t})=>({fontSize:t.typography.caption.fontSize,lineHeight:t.typography.caption.lineHeight})}},MuiListSubheader:{styleOverrides:{root:({theme:t})=>({backgroundColor:"transparent",padding:"4px 8px",fontSize:t.typography.caption.fontSize,fontWeight:500,lineHeight:t.typography.caption.lineHeight})}},MuiListItemIcon:{styleOverrides:{root:{minWidth:0}}},MuiChip:{defaultProps:{size:"small"},styleOverrides:{root:({theme:t})=>({border:"1px solid",borderRadius:"999px",[`& .${W.label}`]:{fontWeight:600},variants:[{props:{color:"default"},style:{borderColor:u[200],backgroundColor:u[100],[`& .${W.label}`]:{color:u[500]},[`& .${W.icon}`]:{color:u[500]},...t.applyStyles("dark",{borderColor:u[700],backgroundColor:u[800],[`& .${W.label}`]:{color:u[300]},[`& .${W.icon}`]:{color:u[300]}})}},{props:{color:"success"},style:{borderColor:B[200],backgroundColor:B[50],[`& .${W.label}`]:{color:B[500]},[`& .${W.icon}`]:{color:B[500]},...t.applyStyles("dark",{borderColor:B[800],backgroundColor:B[900],[`& .${W.label}`]:{color:B[300]},[`& .${W.icon}`]:{color:B[300]}})}},{props:{color:"error"},style:{borderColor:F[100],backgroundColor:F[50],[`& .${W.label}`]:{color:F[500]},[`& .${W.icon}`]:{color:F[500]},...t.applyStyles("dark",{borderColor:F[800],backgroundColor:F[900],[`& .${W.label}`]:{color:F[200]},[`& .${W.icon}`]:{color:F[300]}})}},{props:{size:"small"},style:{maxHeight:20,[`& .${W.label}`]:{fontSize:t.typography.caption.fontSize},[`& .${ve.root}`]:{fontSize:t.typography.caption.fontSize}}},{props:{size:"medium"},style:{[`& .${W.label}`]:{fontSize:t.typography.caption.fontSize}}}]})}},MuiTablePagination:{styleOverrides:{actions:{display:"flex",gap:8,marginRight:6,[`& .${dr.root}`]:{minWidth:0,width:36,height:36}}}},MuiIcon:{defaultProps:{fontSize:"small"},styleOverrides:{root:{variants:[{props:{fontSize:"small"},style:{fontSize:"1rem"}}]}}}},Lr={MuiAlert:{styleOverrides:{root:({theme:t})=>({borderRadius:10,backgroundColor:Y[100],color:t.palette.text.primary,border:`1px solid ${D(Y[300],.5)}`,"& .MuiAlert-icon":{color:Y[500]},...t.applyStyles("dark",{backgroundColor:`${D(Y[900],.5)}`,border:`1px solid ${D(Y[800],.5)}`})})}},MuiDialog:{styleOverrides:{root:({theme:t})=>({"& .MuiDialog-paper":{borderRadius:"10px",border:"1px solid",borderColor:t.palette.divider}})}},MuiLinearProgress:{styleOverrides:{root:({theme:t})=>({height:8,borderRadius:8,backgroundColor:u[200],...t.applyStyles("dark",{backgroundColor:u[800]})})}}},zr={MuiMenuItem:{styleOverrides:{root:({theme:t})=>({borderRadius:t.shape.borderRadius,padding:"6px 8px",[`&.${Pe.focusVisible}`]:{backgroundColor:"transparent"},[`&.${Pe.selected}`]:{[`&.${Pe.focusVisible}`]:{backgroundColor:D(t.palette.action.selected,.3)}}})}},MuiMenu:{styleOverrides:{list:{gap:"0px",[`&.${cr.root}`]:{margin:"0 -8px"}},paper:({theme:t})=>({marginTop:"4px",borderRadius:t.shape.borderRadius,border:`1px solid ${t.palette.divider}`,backgroundImage:"none",background:"hsl(0, 0%, 100%)",boxShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px",[`& .${pt.root}`]:{"&.Mui-selected":{backgroundColor:D(t.palette.action.selected,.3)}},...t.applyStyles("dark",{background:u[900],boxShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"})})}},MuiSelect:{defaultProps:{IconComponent:s.forwardRef((t,r)=>e.jsx(_t,{fontSize:"small",...t,ref:r}))},styleOverrides:{root:({theme:t})=>({borderRadius:t.shape.borderRadius,border:"1px solid",borderColor:u[200],backgroundColor:t.palette.background.paper,boxShadow:"inset 0 1px 0 1px hsla(220, 0%, 100%, 0.6), inset 0 -1px 0 1px hsla(220, 35%, 90%, 0.5)","&:hover":{borderColor:u[300],backgroundColor:t.palette.background.paper,boxShadow:"none"},[`&.${Ze.focused}`]:{outlineOffset:0,borderColor:u[400]},"&:before, &:after":{display:"none"},...t.applyStyles("dark",{borderRadius:t.shape.borderRadius,borderColor:u[700],backgroundColor:t.palette.background.paper,boxShadow:`inset 0 1px 0 1px ${D(u[700],.15)}, inset 0 -1px 0 1px hsla(220, 0%, 0%, 0.7)`,"&:hover":{borderColor:D(u[700],.7),backgroundColor:t.palette.background.paper,boxShadow:"none"},[`&.${Ze.focused}`]:{outlineOffset:0,borderColor:u[900]},"&:before, &:after":{display:"none"}})}),select:({theme:t})=>({display:"flex",alignItems:"center",...t.applyStyles("dark",{display:"flex",alignItems:"center","&:focus-visible":{backgroundColor:u[900]}})})}},MuiLink:{defaultProps:{underline:"none"},styleOverrides:{root:({theme:t})=>({color:t.palette.text.primary,fontWeight:500,position:"relative",textDecoration:"none",width:"fit-content","&::before":{content:'""',position:"absolute",width:"100%",height:"1px",bottom:0,left:0,backgroundColor:t.palette.text.secondary,opacity:.3,transition:"width 0.3s ease, opacity 0.3s ease"},"&:hover::before":{width:0},"&:focus-visible":{outline:`3px solid ${D(y[500],.5)}`,outlineOffset:"4px",borderRadius:"2px"}})}},MuiDrawer:{styleOverrides:{paper:({theme:t})=>({backgroundColor:t.palette.background.default})}},MuiPaginationItem:{styleOverrides:{root:({theme:t})=>({"&.Mui-selected":{color:"white",backgroundColor:t.palette.grey[900]},...t.applyStyles("dark",{"&.Mui-selected":{color:"black",backgroundColor:t.palette.grey[50]}})})}},MuiTabs:{styleOverrides:{root:{minHeight:"fit-content"},indicator:({theme:t})=>({backgroundColor:t.palette.grey[800],...t.applyStyles("dark",{backgroundColor:t.palette.grey[200]})})}},MuiTab:{styleOverrides:{root:({theme:t})=>({padding:"6px 8px",marginBottom:"8px",textTransform:"none",minWidth:"fit-content",minHeight:"fit-content",color:t.palette.text.secondary,borderRadius:t.shape.borderRadius,border:"1px solid",borderColor:"transparent",":hover":{color:t.palette.text.primary,backgroundColor:u[100],borderColor:u[200]},[`&.${Qe.selected}`]:{color:u[900]},...t.applyStyles("dark",{":hover":{color:t.palette.text.primary,backgroundColor:u[800],borderColor:u[700]},[`&.${Qe.selected}`]:{color:"#fff"}})})}},MuiStepConnector:{styleOverrides:{line:({theme:t})=>({borderTop:"1px solid",borderColor:t.palette.divider,flex:1,borderRadius:"99px"})}},MuiStepIcon:{styleOverrides:{root:({theme:t})=>({color:"transparent",border:`1px solid ${u[400]}`,width:12,height:12,borderRadius:"50%","& text":{display:"none"},"&.Mui-active":{border:"none",color:t.palette.primary.main},"&.Mui-completed":{border:"none",color:t.palette.success.main},...t.applyStyles("dark",{border:`1px solid ${u[700]}`,"&.Mui-active":{border:"none",color:t.palette.primary.light},"&.Mui-completed":{border:"none",color:t.palette.success.light}}),variants:[{props:{completed:!0},style:{width:12,height:12}}]})}},MuiStepLabel:{styleOverrides:{label:({theme:t})=>({"&.Mui-completed":{opacity:.6,...t.applyStyles("dark",{opacity:.5})}})}}},$r={MuiAccordion:{defaultProps:{elevation:0,disableGutters:!0},styleOverrides:{root:({theme:t})=>({padding:4,overflow:"clip",backgroundColor:t.palette.background.default,border:"1px solid",borderColor:t.palette.divider,":before":{backgroundColor:"transparent"},"&:not(:last-of-type)":{borderBottom:"none"},"&:first-of-type":{borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:t.shape.borderRadius,borderBottomRightRadius:t.shape.borderRadius}})}},MuiAccordionSummary:{styleOverrides:{root:({theme:t})=>({border:"none",borderRadius:8,"&:hover":{backgroundColor:u[50]},"&:focus-visible":{backgroundColor:"transparent"},...t.applyStyles("dark",{"&:hover":{backgroundColor:u[800]}})})}},MuiAccordionDetails:{styleOverrides:{root:{mb:20,border:"none"}}},MuiPaper:{defaultProps:{elevation:0}},MuiCard:{styleOverrides:{root:({theme:t})=>({padding:16,gap:16,transition:"all 100ms ease",backgroundColor:u[50],borderRadius:t.shape.borderRadius,border:`1px solid ${t.palette.divider}`,boxShadow:"none",...t.applyStyles("dark",{backgroundColor:u[800]}),variants:[{props:{variant:"outlined"},style:{border:`1px solid ${t.palette.divider}`,boxShadow:"none",background:"hsl(0, 0%, 100%)",...t.applyStyles("dark",{background:D(u[900],.4)})}}]})}},MuiCardContent:{styleOverrides:{root:{padding:0,"&:last-child":{paddingBottom:0}}}},MuiCardHeader:{styleOverrides:{root:{padding:0}}},MuiCardActions:{styleOverrides:{root:{padding:0}}}};function Wr({children:t,disableCustomTheme:r,themeComponents:o}){const h=s.useMemo(()=>r?{}:ct({cssVariables:{colorSchemeSelector:"data-mui-color-scheme",cssVarPrefix:"template"},colorSchemes:Rr,shadows:Mr,shape:Ar,components:{...Or,...Er,...Lr,...zr,...$r,...o}}),[r,o]);return r?e.jsx(s.Fragment,{children:t}):e.jsx(ur,{theme:h,disableTransitionOnChange:!0,children:t})}const Nr=hr(P)({margin:"2px"}),Re=s.forwardRef(({to:t,children:r,onClick:o},h)=>e.jsx(P,{component:pe,to:t,ref:h,onClick:o,children:r}));function Br(){const[t,r]=s.useState(null),{logout:o}=se(),h=!!t,i=p=>{r(p.currentTarget)},d=()=>{r(null)},l=()=>{o(),d()};return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{"aria-label":"Open menu",onClick:i,sx:{borderColor:"transparent"},children:e.jsx(qt,{})}),e.jsxs(lt,{anchorEl:t,id:"menu",open:h,onClose:d,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiList-root":{padding:"4px"},"& .MuiPaper-root":{padding:0}},children:[e.jsx(Re,{to:"/profile",onClick:d,children:"Profile"}),e.jsx(X,{}),e.jsx(Re,{to:"/settings",onClick:d,children:"Settings"}),e.jsx(Re,{to:"/feedback",onClick:d,children:"Feedback"}),e.jsx(X,{}),e.jsxs(Nr,{onClick:l,children:[e.jsx(at,{fontSize:"small"}),e.jsx(fe,{children:"Logout"})]})]})]})}const Xe=240;function Fr(){const{user:t,viewRole:r}=se(),o=r?{userName:`Viewing as ${r}`,email:`${r.toLowerCase()}@example.com`,userType:r}:t;return e.jsxs(g,{sx:{display:"flex"},children:[e.jsx(ut,{}),e.jsx(dt,{position:"fixed",sx:{zIndex:h=>h.zIndex.drawer+1}}),e.jsxs(nt,{variant:"permanent",sx:{display:{xs:"none",md:"block"},width:Xe,flexShrink:0,"& .MuiDrawer-paper":{width:Xe,boxSizing:"border-box"}},children:[e.jsx(Le,{}),e.jsx(g,{sx:{overflow:"auto"},children:o&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",p:2},children:[e.jsx(it,{alt:o.userName,src:"/static/images/avatar/7.jpg",sx:{width:36,height:36}}),e.jsxs(g,{sx:{ml:2},children:[e.jsx(n,{variant:"body2",sx:{fontWeight:500,lineHeight:"16px"},children:o.userName}),e.jsx(n,{variant:"caption",sx:{color:"text.secondary"},children:o.email})]}),e.jsx(Br,{})]}),e.jsx(X,{}),e.jsx(Ct,{})]})})]})]})}const Vr=()=>{const t=Se();return e.jsxs(Ce,{maxWidth:"lg",component:"main",role:"main","aria-label":"Git Gud Drivers Homepage",children:[e.jsxs(g,{component:"section","aria-labelledby":"hero-title",sx:{textAlign:"center",py:8,backgroundColor:"background.paper",borderRadius:2,mb:4},children:[e.jsx(n,{variant:"h2",component:"h1",gutterBottom:!0,id:"hero-title",children:"Git Gud Drivers"}),e.jsx(n,{variant:"h5",color:"text.secondary",paragraph:!0,component:"p",children:"A rewards program for professional drivers committed to excellence"}),e.jsxs(g,{role:"navigation","aria-label":"Account access",children:[e.jsx(T,{variant:"contained",size:"large",onClick:()=>t("/register"),sx:{mr:2,minHeight:"44px",minWidth:"88px"},"aria-label":"Sign up for Git Gud Drivers",children:"Sign Up"}),e.jsx(T,{variant:"outlined",size:"large",onClick:()=>t("/login"),sx:{minHeight:"44px",minWidth:"88px"},"aria-label":"Sign in to your account",children:"Sign In"})]})]}),e.jsx(w,{container:!0,spacing:4,sx:{mb:6},justifyContent:"center",alignItems:"center",component:"section","aria-labelledby":"how-it-works-title",children:e.jsxs(w,{item:!0,xs:12,md:4,component:"article",role:"article",children:[e.jsx(n,{variant:"h5",gutterBottom:!0,component:"h2",id:"how-it-works-title",children:"How It Works"}),e.jsxs(g,{component:"ol",sx:{listStyleType:"decimal",pl:3,mb:2},"aria-label":"Steps to join Git Gud Drivers",children:[e.jsx("li",{children:"Apply as a driver"}),e.jsx("li",{children:"Get approved by a sponsor"}),e.jsx("li",{children:"Start earning points"}),e.jsx("li",{children:"Redeem rewards"})]}),e.jsx(n,{variant:"h6",gutterBottom:!0,component:"p",sx:{mt:2},children:"We hope to see you soon!"})]})})]})},he=({title:t,value:r})=>e.jsxs(g,{sx:{mb:1},children:[e.jsxs(n,{variant:"body1",component:"span",fontWeight:"bold",children:[t,":"]}),e.jsx(n,{variant:"body1",component:"span",sx:{ml:1},children:r})]}),Gr=()=>{const[t,r]=s.useState(null),[o,h]=s.useState(null),[i,d]=s.useState(!0);return s.useEffect(()=>{(async()=>{try{const p=await A.get("/api/admin/about",{withCredentials:!0});r(p.data)}catch(p){h(p.message)}finally{d(!1)}})()},[]),i?e.jsx(re,{}):o?e.jsxs(n,{color:"error",children:["Error: ",o]}):t?e.jsxs(g,{sx:{maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:"About Information"}),e.jsxs(g,{sx:{p:2,mb:2,border:1,borderColor:"divider",borderRadius:2},children:[e.jsx(he,{title:"Team",value:t.team}),e.jsx(he,{title:"Version",value:t.version.toString()}),e.jsx(he,{title:"Release Date",value:new Date(t.release).toLocaleDateString()}),e.jsx(he,{title:"Product",value:t.product}),e.jsx(he,{title:"Description",value:t.description})]})]}):e.jsx(n,{children:"No information available."})},Hr=()=>{const t=Se(),r=Pt(),{checkAuth:o}=se(),h=new URLSearchParams(r.search),i=h.get("step")==="2fa"?"2fa":"login",d=h.get("userId"),[l,p]=s.useState(i),[m,j]=s.useState(d||null),[x,b]=s.useState(!1),[a,f]=s.useState(""),[C,I]=s.useState(""),[c,S]=s.useState(""),[R,O]=s.useState(null);s.useEffect(()=>{i==="2fa"&&d&&(p("2fa"),j(d))},[i,d]);const ee=async $=>{var oe,ue;$.preventDefault(),b(!0),O(null);try{const N=await A.post("/api/user/login",{username:a,password:C});N.data.requiresTwoFactor?(p("2fa"),j(N.data.userId.toString()),t(`/login?step=2fa&userId=${N.data.userId}`,{replace:!0})):N.data.succeeded?(await o(),t("/dashboard")):O(N.data.message||"Login failed. Please try again.")}catch(N){O(((ue=(oe=N.response)==null?void 0:oe.data)==null?void 0:ue.message)||"Login failed. Please try again.")}finally{b(!1)}},xe=async $=>{var oe,ue;$.preventDefault(),b(!0);try{const N=await A.post("/api/user/verify-2fa",{userId:String(m),code:c},{withCredentials:!0});N.data.succeeded?(await o(),t("/dashboard")):O(N.data.message||"Invalid 2FA code. Please try again.")}catch(N){O(((ue=(oe=N.response)==null?void 0:oe.data)==null?void 0:ue.message)||"2FA verification failed. Please try again.")}finally{b(!1)}};return e.jsxs(g,{component:"form",onSubmit:l==="login"?ee:xe,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(n,{variant:"h4",component:"h1",gutterBottom:!0,children:l==="login"?"Login":"2FA Verification"}),R&&e.jsx(z,{severity:"error",sx:{mb:2},children:R}),l==="login"?e.jsxs(e.Fragment,{children:[e.jsx(M,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"username",value:a,onChange:$=>f($.target.value),required:!0}),e.jsx(M,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"current-password",value:C,onChange:$=>I($.target.value),required:!0})]}):e.jsx(M,{label:"2FA Code",variant:"outlined",margin:"normal",fullWidth:!0,value:c,onChange:$=>S($.target.value),required:!0}),e.jsx(T,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:x,children:x?e.jsx(re,{size:24}):l==="login"?"Log In":"Verify 2FA"}),l==="login"&&e.jsxs(g,{sx:{textAlign:"center",mt:2},children:[e.jsx(Oe,{component:pe,to:"/register",variant:"body2",sx:{display:"block",mb:1},children:"Don't have an account? Sign Up"}),e.jsx(Oe,{component:pe,to:"/reset-password",variant:"body2",children:"Forgot Password? Click here to Reset it"})]})]})},Ur=t=>{const[r,o]=s.useState(0);return s.useEffect(()=>{o((i=>{let d=0;return i.length>=8&&(d+=1),/[A-Z]/.test(i)&&(d+=1),/[0-9]/.test(i)&&(d+=1),/[^A-Za-z0-9]/.test(i)&&(d+=1),d/4*100})(t))},[t]),r},_r=t=>t.length<8?"Password must be at least 8 characters long.":/[A-Z]/.test(t)?/[0-9]/.test(t)?/[^A-Za-z0-9]/.test(t)?null:"Password must contain at least one special character.":"Password must contain at least one number.":"Password must contain at least one uppercase letter.",qr=()=>{const[t,r]=s.useState(""),[o,h]=s.useState(""),[i,d]=s.useState(""),[l,p]=s.useState(!1),[m,j]=s.useState(!1),[x,b]=s.useState(null),[a,f]=s.useState(null),C=Ur(i),I=Se(),c=async R=>{var ee,xe;R.preventDefault(),b(null),f(null);const O=_r(i);if(O){f(O);return}j(!0);try{const $=await A.post("/api/user/register",{username:t,email:o,password:i,enable2FA:l}),oe=await A.post("/api/user/login",{username:t,password:i});$.data.requiresTwoFactor?I(`/login?step=2fa&userId=${$.data.userId}`):I("/dashboard")}catch($){b(((xe=(ee=$.response)==null?void 0:ee.data)==null?void 0:xe.message)||"Registration failed. Please try again.")}finally{j(!1)}},S=R=>R<33?"error":R<66?"warning":"success";return e.jsxs(g,{component:"form",onSubmit:c,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(n,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create Account"}),x&&e.jsx(z,{severity:"error",children:x}),a&&e.jsx(z,{severity:"warning",children:a}),e.jsx(M,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,value:t,onChange:R=>r(R.target.value),required:!0}),e.jsx(M,{label:"Email",type:"email",variant:"outlined",margin:"normal",fullWidth:!0,value:o,onChange:R=>h(R.target.value),required:!0}),e.jsx(M,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,value:i,onChange:R=>d(R.target.value),required:!0}),e.jsxs(g,{sx:{width:"100%",mt:1},children:[e.jsx(ne,{variant:"determinate",value:C,color:S(C)}),e.jsxs(n,{variant:"body2",sx:{mt:1},children:["Password strength: ",C<33?"Weak":C<66?"Medium":"Strong"]})]}),e.jsx(ze,{control:e.jsx($e,{checked:l,onChange:R=>p(R.target.checked),color:"primary"}),label:"Enable Two-Factor Authentication (2FA)"}),e.jsx(T,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:m,children:m?e.jsx(re,{size:24}):"Register"}),e.jsx(Oe,{component:pe,to:"/login",variant:"body2",children:"Already have an account? Sign in"})]})},Yr=()=>{const[t,r]=s.useState({sponsorId:"",reason:""}),[o,h]=s.useState([]),[i,d]=s.useState(null),[l,p]=s.useState(null),m=s.useCallback(async()=>{try{const f=await A.get("/api/driver/available-sponsors");h(f.data),p(null)}catch{p("Failed to load sponsors. Please try again.")}},[]);s.useEffect(()=>{m()},[m]);const j=f=>{const{name:C,value:I}=f.target;r({...t,[C]:I})},x=f=>{r({...t,sponsorId:f.target.value===""?"":Number(f.target.value)})},b=async()=>{if(t.sponsorId===""){p("Please select a sponsor.");return}try{const f=await A.post("/api/driverapp/apply",t);d(f.data.message||"Application submitted successfully!"),p(null)}catch{p("Failed to submit application.")}},a=s.useMemo(()=>o.map(f=>e.jsx(P,{value:f.sponsorID,children:f.companyName},f.sponsorID)),[o]);return e.jsxs(g,{children:[e.jsx(n,{variant:"h5",children:"Driver Application"}),l&&e.jsx(z,{severity:"error",children:l}),i&&e.jsx(z,{severity:"success",children:i}),e.jsxs(Z,{fullWidth:!0,margin:"normal",children:[e.jsx(Q,{id:"sponsor-label",children:"Sponsor"}),e.jsx(q,{labelId:"sponsor-label",value:t.sponsorId,onChange:x,fullWidth:!0,children:a})]}),e.jsx(M,{label:"Reason for Application",name:"reason",onChange:j,fullWidth:!0,multiline:!0,margin:"normal"}),e.jsx(T,{variant:"contained",color:"primary",onClick:b,children:"Submit Application"})]})},Zr={0:"Submitted",1:"Approved",2:"Rejected"},Qr=()=>{const[t,r]=s.useState([]),[o,h]=s.useState(!0),[i,d]=s.useState(null),l=async()=>{var a;try{const f=await A.get("/api/sponsor/applications");r(f.data)}catch(f){d(((a=f.response)==null?void 0:a.data)||"Failed to load applications.")}finally{h(!1)}};s.useEffect(()=>{l()},[]);const p=async(a,f)=>{var C;try{await A.post(`/api/sponsor/applications/${a}/process?action=${f}`),r(I=>I.map(c=>c.applicationID===a?{...c,status:f==="approve"?1:2}:c))}catch(I){d(((C=I.response)==null?void 0:C.data)||`Failed to ${f} application.`)}};if(o)return e.jsx(re,{});if(i)return e.jsx(z,{severity:"error",children:i});const m=t.filter(a=>a.status===0),j=t.filter(a=>a.status===1),x=t.filter(a=>a.status===2),b=(a,f)=>a.length>0?a.map(C=>e.jsx(K,{size:{xs:12,sm:6,md:4},children:e.jsx(G,{children:e.jsxs(H,{children:[e.jsxs(n,{variant:"subtitle1",children:["Application ID: ",C.applicationID]}),e.jsxs(n,{children:["User ID: ",C.userID]}),e.jsxs(n,{children:["Apply Date: ",C.applyDate]}),e.jsxs(n,{children:["Status: ",Zr[C.status]]}),C.status===0&&e.jsxs(e.Fragment,{children:[e.jsx(T,{color:"primary",variant:"contained",onClick:()=>p(C.applicationID,"approve"),children:"Approve"}),e.jsx(T,{color:"secondary",variant:"contained",onClick:()=>p(C.applicationID,"reject"),sx:{ml:1},children:"Reject"})]})]})})},C.applicationID)):e.jsx(n,{variant:"body2",color:"textSecondary",sx:{mt:2},children:f});return e.jsxs(Ce,{children:[e.jsx(n,{variant:"h4",component:"h1",gutterBottom:!0,children:"Driver Applications"}),e.jsxs(g,{children:[e.jsx(n,{variant:"h6",children:"Submitted Applications"}),e.jsx(X,{sx:{mb:2}}),e.jsx(K,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:b(m,"No pending applications")})]}),e.jsxs(g,{sx:{mt:4},children:[e.jsx(n,{variant:"h6",children:"Approved Applications"}),e.jsx(X,{sx:{mb:2}}),e.jsx(K,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:b(j,"No approved applications")})]}),e.jsxs(g,{sx:{mt:4},children:[e.jsx(n,{variant:"h6",children:"Rejected Applications"}),e.jsx(X,{sx:{mb:2}}),e.jsx(K,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:b(x,"No rejected applications")})]})]})},Jr=(t="Driver")=>{switch(t){case"Admin":return[{check:r=>r.length>=20,message:"At least 20 characters long"},{check:r=>/[0-9]/.test(r),message:"Contains at least one digit"},{check:r=>/[a-z]/.test(r),message:"Contains at least one lowercase letter"},{check:r=>/[A-Z]/.test(r),message:"Contains at least one uppercase letter"},{check:r=>/[^A-Za-z0-9]/.test(r),message:"Contains at least three symbols"},{check:r=>new Set(r).size>=3,message:"Contains at least 3 unique characters"},{check:r=>/^(?=.*[!@#$%^&*])(?=.*[0-9])(?=.*[A-Z]).*$/.test(r),message:"Combination of numbers, symbols, and uppercase"}];case"Driver":return[{check:r=>r.length>=8,message:"At least 8 characters long"},{check:r=>/[0-9]/.test(r),message:"Contains at least one digit"},{check:r=>/[a-z]/.test(r),message:"Contains at least one lowercase letter"},{check:r=>/[A-Z]/.test(r),message:"Contains at least one uppercase letter"},{check:r=>/[^A-Za-z0-9]/.test(r),message:"Contains at least one special character"},{check:r=>new Set(r).size>=1,message:"Contains at least 1 unique character"}];default:return[{check:r=>r.length>=6,message:"At least 6 characters long"},{check:r=>/[0-9]/.test(r),message:"Contains at least one digit"},{check:r=>/[a-zA-Z]/.test(r),message:"Contains at least one letter"},{check:r=>new Set(r).size>=1,message:"Contains at least 1 unique character"}]}},wt=()=>{const[t,r]=s.useState(""),[o,h]=s.useState(""),[i,d]=s.useState(""),[l,p]=s.useState(""),[m,j]=s.useState(!1),[x,b]=s.useState(!1),[a,f]=s.useState("Driver");s.useEffect(()=>{(async()=>{try{const R=await A.get("/api/user/currentuser");f(R.data.userType)}catch{}})()},[]);const C=Jr(a),I=S=>C.every(R=>R.check(S)),c=async S=>{var R,O;if(S.preventDefault(),p(""),j(!1),b(!0),o!==i){p("New passwords do not match"),b(!1);return}if(!I(o)){p("New password does not meet all requirements"),b(!1);return}try{const ee=await A.post("/api/user/change-password",{currentPassword:t,newPassword:o});j(!0),r(""),h(""),d("")}catch(ee){A.isAxiosError(ee)?p(((O=(R=ee.response)==null?void 0:R.data)==null?void 0:O.message)||"Failed to change password"):p("An unexpected error occurred")}finally{b(!1)}};return e.jsxs(g,{sx:{width:"100%",maxWidth:400,margin:"auto",mt:4},children:[e.jsx(n,{variant:"h4",component:"h1",gutterBottom:!0,children:"Change Password"}),l&&e.jsx(z,{severity:"error",sx:{mt:2,mb:2},children:l}),m&&e.jsx(z,{severity:"success",sx:{mt:2,mb:2},children:"Password changed successfully!"}),e.jsxs(g,{component:"form",onSubmit:c,noValidate:!0,sx:{mt:1},children:[e.jsx(M,{margin:"normal",required:!0,fullWidth:!0,name:"currentPassword",label:"Current Password",type:"password",id:"currentPassword",autoComplete:"current-password",value:t,onChange:S=>r(S.target.value)}),e.jsx(M,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New Password",type:"password",id:"newPassword",autoComplete:"new-password",value:o,onChange:S=>h(S.target.value)}),e.jsx(M,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:i,onChange:S=>d(S.target.value)}),e.jsxs(g,{sx:{mt:4},children:[e.jsxs(n,{variant:"h6",children:["Password Requirements for ",a,":"]}),C.map((S,R)=>e.jsxs(g,{sx:{display:"flex",alignItems:"center",mt:1},children:[e.jsx(g,{sx:{flexGrow:1,mr:1},children:e.jsx(ne,{variant:"determinate",value:S.check(o)?100:0,color:S.check(o)?"success":"error"})}),e.jsx(g,{sx:{minWidth:200},children:e.jsx(n,{variant:"body2",color:"text.secondary",children:S.message})})]},R))]}),e.jsx(T,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:x,children:x?e.jsx(re,{size:24}):"Change Password"})]})]})},Kr=()=>{const[t,r]=s.useState([]),[o,h]=s.useState(null),[i,d]=s.useState(""),[l,p]=s.useState(!0),[m,j]=s.useState("");s.useEffect(()=>{x()},[]),s.useEffect(()=>{i&&b(i)},[i]);const x=async()=>{try{p(!0);const c=await A.get("/api/driver/my-sponsors");r(c.data),c.data.length>0&&!i&&d(c.data[0].sponsorId),j("")}catch{j("Failed to load sponsor points data")}finally{p(!1)}},b=async c=>{try{const S=await A.get(`/api/driver/sponsor-points/${c}`);h(S.data)}catch{}},a=c=>{d(c.target.value)};if(l)return e.jsx(g,{sx:{width:"100%",mt:2},children:e.jsx(ne,{})});if(m)return e.jsx(n,{color:"error",sx:{mt:2},children:m});if(t.length===0)return e.jsx(n,{sx:{mt:2},children:"You are not currently registered with any sponsors."});const f=t.find(c=>c.sponsorId===i),C=t.map(c=>({id:c.sponsorId,value:c.totalPoints,label:c.sponsorName})),I=(o==null?void 0:o.pointsHistory.map(c=>({date:new Date(c.date).toLocaleDateString(),points:c.points,reason:c.reason})).reverse())||[];return e.jsxs(g,{sx:{width:"100%",mb:2,mt:2},children:[e.jsxs(Z,{fullWidth:!0,sx:{mb:2},children:[e.jsx(Q,{children:"Select Sponsor"}),e.jsx(q,{value:i,label:"Select Sponsor",onChange:a,children:t.map(c=>e.jsx(P,{value:c.sponsorId,children:c.sponsorName},c.sponsorId))})]}),e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{item:!0,xs:12,children:e.jsx(te,{children:e.jsx(ie,{children:e.jsxs(le,{"aria-label":"sponsor points details",children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Sponsor"}),e.jsx(v,{align:"right",children:"Total Points"}),e.jsx(v,{align:"right",children:"Point Value ($)"}),e.jsx(v,{align:"right",children:"Total Value ($)"})]})}),e.jsx(ce,{children:f&&e.jsxs(E,{children:[e.jsx(v,{children:f.sponsorName}),e.jsx(v,{align:"right",children:f.totalPoints.toLocaleString()}),e.jsxs(v,{align:"right",children:["$",f.pointDollarValue.toFixed(2)]}),e.jsxs(v,{align:"right",children:["$",(f.totalPoints*f.pointDollarValue).toFixed(2)]})]})})]})})})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(te,{sx:{p:2},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Points Distribution Across Sponsors"}),e.jsx(g,{sx:{width:"100%",height:300},children:e.jsx(Ie,{series:[{data:C,highlightScope:{faded:"global",highlighted:"item"},faded:{innerRadius:30,additionalRadius:-30}}],height:300})})]})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(te,{sx:{p:2},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Recent Points History"}),I.length>0?e.jsx(g,{sx:{width:"100%",height:300},children:e.jsx(We,{xAxis:[{scaleType:"band",data:I.map(c=>c.date),label:"Date"}],series:[{data:I.map(c=>c.points),label:"Points"}],height:300,tooltip:{trigger:"item"}})}):e.jsx(n,{children:"No history data available"})]})})]})]})},Xr=()=>{const[t,r]=s.useState(null),[o,h]=s.useState(!0),[i,d]=s.useState("");return s.useEffect(()=>{(async()=>{try{h(!0);const p=await A.get("/api/driver/activity");r(p.data)}catch{d("Failed to load driver activity")}finally{h(!1)}})()},[]),o?e.jsx(ne,{}):i?e.jsx(n,{color:"error",children:i}):t?e.jsxs(g,{sx:{p:3},children:[t.pointValue&&e.jsx(G,{sx:{mb:4},children:e.jsxs(H,{children:[e.jsxs(n,{variant:"h6",gutterBottom:!0,children:["Points Value - ",t.pointValue.sponsorName||"Unknown Sponsor"]}),e.jsxs(n,{children:["Current Balance: ",t.pointValue.totalPoints.toLocaleString()," points"]}),e.jsxs(n,{children:["Point Value: $",t.pointValue.pointValue.toFixed(2)," each"]}),e.jsxs(n,{variant:"h5",sx:{mt:2},children:["Total Value: $",t.pointValue.totalValue.toFixed(2)]})]})}),e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Activity History"}),e.jsx(ie,{component:te,children:e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Date"}),e.jsx(v,{children:"Type"}),e.jsx(v,{children:"Points"}),e.jsx(v,{children:"Details"}),e.jsx(v,{children:"Status"})]})}),e.jsx(ce,{children:t.transactions&&t.transactions.length>0?t.transactions.map((l,p)=>e.jsxs(E,{children:[e.jsx(v,{children:l.date?new Date(l.date).toLocaleDateString():"N/A"}),e.jsx(v,{children:l.type}),e.jsxs(v,{sx:{color:l.points>0?"success.main":"error.main"},children:[l.points>0?"+":"",l.points]}),e.jsx(v,{children:l.reason}),e.jsx(v,{children:l.status&&e.jsx(we,{label:l.status,color:l.status==="Ordered"?"success":l.status==="Cancelled"?"error":"default",size:"small"})})]},p)):e.jsx(E,{children:e.jsx(v,{colSpan:5,align:"center",children:"No transactions available"})})})]})})]}):null};function et({icon:t,title:r,value:o,description:h}){return e.jsx(G,{sx:{height:"100%"},children:e.jsxs(H,{children:[e.jsx(t,{sx:{color:"primary.main",mb:1}}),e.jsx(n,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600",mb:1},children:r}),e.jsx(n,{variant:"h4",sx:{mb:1},children:o}),e.jsx(n,{sx:{color:"text.secondary",mb:1},children:h})]})})}function es(){const t=Ee(),r=fr(t.breakpoints.down("sm")),[o,h]=s.useState([]),[i,d]=s.useState(!0),[l,p]=s.useState(null);if(s.useEffect(()=>{(async()=>{try{const f=await fetch("/api/sponsor/drivers",{credentials:"include"});if(!f.ok)throw new Error("Failed to fetch drivers");const C=await f.json();h(C)}catch(f){p(f instanceof Error?f.message:"An error occurred while fetching drivers")}finally{d(!1)}})()},[]),i)return e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(re,{})});if(l)return e.jsx(z,{severity:"error",sx:{mb:2},children:l});const m=o.reduce((a,f)=>a+f.totalPoints,0),j=o.map(a=>({id:a.userID,value:a.totalPoints,label:a.email})),x=[...o].sort((a,f)=>f.totalPoints-a.totalPoints),b=Math.max(...o.map(a=>a.totalPoints));return e.jsxs(g,{sx:{width:"100%"},children:[e.jsx(n,{component:"h2",variant:"h6",sx:{mb:2},children:"Sponsored Drivers Overview"}),e.jsxs(K,{container:!0,spacing:2,columns:12,children:[e.jsx(K,{size:{xs:12,lg:9},children:e.jsx(G,{sx:{height:"100%"},children:e.jsx(H,{children:o.length===0?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsx(n,{color:"text.secondary",children:"No drivers found under your sponsorship."})}):e.jsx(ie,{children:e.jsxs(le,{sx:{minWidth:650},children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Driver ID"}),e.jsx(v,{children:"Email"}),e.jsx(v,{align:"right",children:"Total Points"}),e.jsx(v,{align:"right",children:"Progress"})]})}),e.jsx(ce,{children:o.map(a=>e.jsxs(E,{children:[e.jsx(v,{component:"th",scope:"row",children:a.userID}),e.jsx(v,{children:a.email}),e.jsx(v,{align:"right",children:a.totalPoints.toLocaleString()}),e.jsx(v,{align:"right",sx:{width:"30%"},children:e.jsxs(g,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(g,{sx:{width:"100%",mr:1},children:e.jsx(ne,{variant:"determinate",value:a.totalPoints/b*100})}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:[Math.round(a.totalPoints/b*100),"%"]})]})})]},a.userID))})]})})})})}),e.jsx(K,{size:{xs:12,lg:3},children:e.jsxs(V,{gap:2,direction:{xs:"column",sm:"row",lg:"column"},children:[e.jsx(et,{icon:Ve,title:"Active Drivers",value:o.length.toString(),description:"Currently sponsored drivers"}),e.jsx(et,{icon:Yt,title:"Total Points",value:m.toLocaleString(),description:"Accumulated driver points"})]})}),o.length>0&&e.jsx(K,{size:12,children:e.jsx(G,{sx:{mt:2},children:e.jsxs(H,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Points Distribution"}),e.jsx(g,{sx:{height:400},children:e.jsx(Ie,{series:[{data:j,highlightScope:{faded:"global",highlighted:"item"}}],height:350})})]})})}),o.length>0&&e.jsx(K,{size:12,children:e.jsx(G,{sx:{mt:2},children:e.jsxs(H,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Driver Leaderboard"}),e.jsx(ie,{children:e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Rank"}),e.jsx(v,{children:"Driver"}),e.jsx(v,{align:"right",children:"Points"}),e.jsx(v,{align:"right",children:"Progress"})]})}),e.jsx(ce,{children:x.map((a,f)=>e.jsxs(E,{children:[e.jsx(v,{children:f+1}),e.jsx(v,{children:a.email}),e.jsx(v,{align:"right",children:a.totalPoints.toLocaleString()}),e.jsx(v,{align:"right",sx:{width:"30%"},children:e.jsxs(g,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(g,{sx:{width:"100%",mr:1},children:e.jsx(ne,{variant:"determinate",value:a.totalPoints/b*100})}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:[Math.round(a.totalPoints/b*100),"%"]})]})})]},a.userID))})]})})]})})})]}),e.jsx(n,{component:"h2",variant:"h6",sx:{mb:2,mt:4},children:"Driver Management"}),e.jsx(K,{container:!0,spacing:2,columns:12,children:e.jsx(K,{size:{xs:12,sm:6,lg:4},children:e.jsx(G,{sx:{height:"100%"},children:e.jsxs(H,{children:[e.jsx(Ve,{sx:{color:"primary.main",mb:1}}),e.jsx(n,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600"},children:"Manage Drivers"}),e.jsx(n,{sx:{color:"text.secondary",mb:2},children:"Add or remove drivers from your sponsorship."}),e.jsx(T,{variant:"contained",size:"small",color:"primary",endIcon:e.jsx(Zt,{}),fullWidth:r,children:"Manage Drivers"})]})})})})]})}const ts=()=>{const[t,r]=s.useState([]),[o,h]=s.useState([]),[i,d]=s.useState(!0),[l,p]=s.useState(null),[m,j]=s.useState(null),[x,b]=s.useState(!1);s.useEffect(()=>{a()},[]);const a=async()=>{var I;try{const c=await A.get("/api/driver/available-sponsors",{withCredentials:!0});r(Array.isArray(c.data)?c.data:[])}catch(c){if(A.isAxiosError(c)){const S=((I=c.response)==null?void 0:I.data)||"Error loading sponsors. Please try again later.";p(typeof S=="string"?S:"An error occurred.")}else p("Error loading sponsors. Please try again later.");r([])}finally{d(!1)}},f=I=>{h(c=>c.includes(I)?c.filter(S=>S!==I):[...c,I])},C=async()=>{var I;if(o.length===0){p("Please select at least one sponsor");return}b(!0),p(null),j(null);try{const c=await A.post("/api/driver/register-sponsors",o,{withCredentials:!0,headers:{"Content-Type":"application/json"}});j(c.data||"Successfully registered with selected sponsors!"),h([]),a()}catch(c){if(A.isAxiosError(c)){const S=((I=c.response)==null?void 0:I.data)||"Failed to register with sponsors. Please try again.";p(typeof S=="string"?S:"Registration failed.")}else p("Failed to register with sponsors. Please try again.")}finally{b(!1)}};return i?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(re,{})}):e.jsxs(g,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(n,{variant:"h5",component:"h1",gutterBottom:!0,children:"Select Sponsors"}),e.jsx(G,{sx:{mb:2,bgcolor:"background.paper"},children:e.jsxs(H,{children:[e.jsxs(V,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e.jsx(n,{variant:"subtitle1",children:"Available Reward Programs"}),e.jsx(xt,{title:"Select multiple sponsors to join their reward programs",children:e.jsx(Qt,{color:"action",fontSize:"small"})})]}),l&&e.jsx(z,{severity:"error",sx:{mb:2},children:l}),m&&e.jsx(z,{severity:"success",sx:{mb:2},children:m}),e.jsx(pr,{children:t.length===0?e.jsx(n,{color:"text.secondary",children:"No available sponsors found."}):t.map(I=>e.jsxs(g,{sx:{mb:2},children:[e.jsx(ze,{control:e.jsx($e,{checked:o.includes(I.sponsorID),onChange:()=>f(I.sponsorID),color:"primary"}),label:e.jsxs(V,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Jt,{color:"action"}),e.jsx(n,{children:I.companyName}),e.jsx(we,{icon:e.jsx(Kt,{}),label:`$${I.pointDollarValue} per point`,size:"small",color:"primary",variant:"outlined"})]})}),e.jsx(X,{sx:{ml:7,my:1}})]},I.sponsorID))}),e.jsx(T,{variant:"contained",color:"primary",onClick:C,disabled:o.length===0||x,sx:{mt:2},children:x?e.jsx(re,{size:24,color:"inherit"}):`Register with ${o.length} Sponsor${o.length!==1?"s":""}`})]})})]})},rs=()=>{const{driverId:t}=Rt(),[r,o]=s.useState([]),[h,i]=s.useState(!0),[d,l]=s.useState("");return s.useEffect(()=>{(async()=>{try{i(!0);const m=await A.get("/api/driver/transactions");o(m.data),l("")}catch{l("Failed to load transaction data")}finally{i(!1)}})()},[t]),h?e.jsx(g,{sx:{width:"100%",mt:2},children:e.jsx(ne,{})}):d?e.jsx(n,{color:"error",sx:{mt:2},children:d}):e.jsx(te,{sx:{width:"100%",mb:2,mt:2},children:e.jsx(ie,{children:e.jsxs(le,{"aria-label":"driver transactions table",children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Date"}),e.jsx(v,{children:"Points Changed"}),e.jsx(v,{children:"Reason"})]})}),e.jsx(ce,{children:r.map(p=>e.jsxs(E,{children:[e.jsx(v,{children:new Date(p.transactionDate).toLocaleDateString()}),e.jsx(v,{children:p.pointsChanged}),e.jsx(v,{children:p.reason})]},p.transactionId))})]})})})},It=({dateRange:t,setDateRange:r})=>{const[o,h]=t,[i,d]=s.useState(!1),l=p=>{const m=new Date,j=new Date;j.setDate(m.getDate()-p),r([j,m])};return e.jsx(gt,{dateAdapter:mt,children:e.jsxs(V,{direction:"column",spacing:2,alignItems:"flex-start",sx:{mb:2},children:[e.jsx(ze,{control:e.jsx($e,{checked:i,onChange:()=>d(!i)}),label:"Custom Date Range"}),i?e.jsxs(V,{direction:"row",spacing:2,alignItems:"center",children:[e.jsxs(g,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ge,{fontSize:"small"}),e.jsx(ye,{label:"Start",value:o,onChange:p=>r([p,h]),disableFuture:!0})]}),e.jsxs(g,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ge,{fontSize:"small"}),e.jsx(ye,{label:"End",value:h,onChange:p=>r([o,p]),disableFuture:!0})]})]}):e.jsxs(V,{direction:"row",spacing:1,children:[e.jsx(T,{variant:"outlined",size:"small",onClick:()=>l(7),children:"Last 7 Days"}),e.jsx(T,{variant:"outlined",size:"small",onClick:()=>l(30),children:"Last 30 Days"}),e.jsx(T,{variant:"outlined",size:"small",onClick:()=>l(365),children:"Last Year"})]})]})})};function Dt({reportType:t,viewType:r,selectedSponsor:o,selectedDriver:h,dateRange:i}){const d=Ee(),[l,p]=s.useState([]),[m,j]=s.useState([]);s.useEffect(()=>{const f=(()=>{switch(t){case"salesBySponsor":return r==="detailed"?[{date:"Date 1",driver1:100,driver2:150,driver3:200},{date:"Date 2",driver1:120,driver2:140,driver3:210},{date:"Date 3",driver1:130,driver2:160,driver3:220}]:[{sponsor:"Sponsor A",totalPoints:450},{sponsor:"Sponsor B",totalPoints:470},{sponsor:"Sponsor C",totalPoints:510}];case"salesByDriver":return r==="detailed"?[{date:"Date 1",driver1:50,driver2:75,driver3:90},{date:"Date 2",driver1:60,driver2:80,driver3:95},{date:"Date 3",driver1:70,driver2:85,driver3:100}]:[{driver:"Driver 1",totalPoints:250},{driver:"Driver 2",totalPoints:240},{driver:"Driver 3",totalPoints:260}];case"invoice":return[{driver:"Driver 1",redeemedPoints:120,fee:10},{driver:"Driver 2",redeemedPoints:150,fee:15},{driver:"Driver 3",redeemedPoints:180,fee:20}];case"driverPoints":return r==="detailed"?[{date:"Date 1",pointEarned:50,pointRedeemed:20},{date:"Date 2",pointEarned:70,pointRedeemed:30},{date:"Date 3",pointEarned:60,pointRedeemed:25}]:[{driver:"Driver 1",totalPoints:150},{driver:"Driver 2",totalPoints:170},{driver:"Driver 3",totalPoints:140}];default:return[]}})();p(f),j(f.map(C=>C.date||C.sponsor||C.driver))},[t,r,o,h,i]);const x=()=>e.jsx(We,{xAxis:[{data:m,scaleType:"band"}],series:r==="detailed"&&(t==="salesBySponsor"||t==="salesByDriver")?[{data:l.map(a=>a.driver1||0),label:"Driver 1",stack:"drivers",color:d.palette.primary.light},{data:l.map(a=>a.driver2||0),label:"Driver 2",stack:"drivers",color:d.palette.primary.main},{data:l.map(a=>a.driver3||0),label:"Driver 3",stack:"drivers",color:d.palette.primary.dark}]:r==="detailed"&&t==="driverPoints"?[{data:l.map(a=>a.pointEarned||0),label:"Points Earned",color:d.palette.success.main},{data:l.map(a=>a.pointRedeemed||0),label:"Points Redeemed",color:d.palette.error.main}]:[{data:l.map(a=>a.totalPoints),label:t==="salesBySponsor"?"Total Sales by Sponsor":"Total Sales by Driver",color:d.palette.primary.main}],height:300,grid:{horizontal:!0}}),b=()=>e.jsx(Ie,{series:[{data:l.map(a=>({id:a.driver,value:a.redeemedPoints,label:a.driver,color:d.palette.primary.main}))}],height:300});return e.jsx("div",{children:t==="invoice"?b():x()})}function ss(){const[t,r]=s.useState("driverPoints"),[o,h]=s.useState("summary"),[i,d]=s.useState("all"),[l,p]=s.useState([null,null]);return e.jsxs(g,{children:[e.jsx(n,{variant:"h5",sx:{mb:2},"aria-label":"Sponsor Reports Dashboard",children:"Sponsor Reports Dashboard"}),e.jsxs(V,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"report-type-label",children:"Report Type"}),e.jsx(q,{labelId:"report-type-label",value:t,onChange:m=>r(m.target.value),label:"Report Type","aria-label":"Select Report Type for Sponsor",children:e.jsx(P,{value:"driverPoints",children:"Driver Points Tracking"})})]}),e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"view-type-label",children:"View Type"}),e.jsxs(q,{labelId:"view-type-label",value:o,onChange:m=>h(m.target.value),label:"View Type","aria-label":"Select View Type for Sponsor",children:[e.jsx(P,{value:"summary",children:"Summary"}),e.jsx(P,{value:"detailed",children:"Detailed"})]})]}),e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"select-driver-label",children:"Select Driver"}),e.jsxs(q,{labelId:"select-driver-label",value:i,onChange:m=>d(m.target.value),label:"Select Driver","aria-label":"Select Driver for Driver Points Tracking",children:[e.jsx(P,{value:"all",children:"All Drivers"}),e.jsx(P,{value:1,children:"Driver 1"}),e.jsx(P,{value:2,children:"Driver 2"})]})]})]}),e.jsx(It,{dateRange:l,setDateRange:p}),e.jsx(g,{sx:{mt:4},children:e.jsx(Dt,{reportType:t,viewType:o,selectedDriver:i,dateRange:l,"aria-label":"Sponsor Report Chart"})})]})}function os(){const[t,r]=s.useState("salesBySponsor"),[o,h]=s.useState("summary"),[i,d]=s.useState([null,null]),[l,p]=s.useState("all"),[m,j]=s.useState("all"),x=t==="salesByDriver"&&l!=="all";return e.jsxs(g,{children:[e.jsx(n,{variant:"h5",sx:{mb:2},"aria-label":"Admin Reports Dashboard",children:"Admin Reports Dashboard"}),e.jsxs(V,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"report-type-label",children:"Report Type"}),e.jsxs(q,{labelId:"report-type-label",value:t,onChange:b=>r(b.target.value),label:"Report Type","aria-label":"Select Report Type",children:[e.jsx(P,{value:"salesBySponsor",children:"Sales by Sponsor"}),e.jsx(P,{value:"salesByDriver",children:"Sales by Driver"}),e.jsx(P,{value:"invoice",children:"Invoice Report"})]})]}),e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"view-type-label",children:"View Type"}),e.jsxs(q,{labelId:"view-type-label",value:o,onChange:b=>h(b.target.value),label:"View Type","aria-label":"Select View Type",children:[e.jsx(P,{value:"summary",children:"Summary"}),e.jsx(P,{value:"detailed",children:"Detailed"})]})]}),(t==="salesBySponsor"||t==="invoice")&&e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"select-sponsor-label",children:"Select Sponsor"}),e.jsxs(q,{labelId:"select-sponsor-label",value:l,onChange:b=>p(b.target.value),label:"Select Sponsor","aria-label":"Select Sponsor",children:[e.jsx(P,{value:"all",children:"All Sponsors"}),e.jsx(P,{value:101,children:"Sponsor A"}),e.jsx(P,{value:102,children:"Sponsor B"})]})]}),t==="salesByDriver"&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"select-sponsor-label",children:"Select Sponsor"}),e.jsxs(q,{labelId:"select-sponsor-label",value:l,onChange:b=>p(b.target.value),label:"Select Sponsor","aria-label":"Select Sponsor for Sales by Driver",children:[e.jsx(P,{value:"all",children:"All Sponsors"}),e.jsx(P,{value:101,children:"Sponsor A"}),e.jsx(P,{value:102,children:"Sponsor B"})]})]}),x&&e.jsxs(Z,{sx:{minWidth:180},children:[e.jsx(Q,{id:"select-driver-label",children:"Select Driver"}),e.jsxs(q,{labelId:"select-driver-label",value:m,onChange:b=>j(b.target.value),label:"Select Driver","aria-label":"Select Driver for Individual Sponsor",children:[e.jsx(P,{value:"all",children:"All Drivers"}),e.jsx(P,{value:1,children:"Driver 1"}),e.jsx(P,{value:2,children:"Driver 2"})]})]})]})]}),e.jsx(It,{dateRange:i,setDateRange:d}),e.jsx(g,{sx:{mt:4},children:e.jsx(Dt,{reportType:t,viewType:o,selectedSponsor:l,selectedDriver:m,dateRange:i,"aria-label":"Admin Report Chart"})})]})}const as=()=>{const[t,r]=s.useState([]),[o,h]=s.useState(!0),[i,d]=s.useState(""),[l,p]=s.useState("");s.useEffect(()=>{m()},[]);const m=async()=>{try{h(!0);const x=await A.get("/api/admin/drivers/details");r(x.data),d("")}catch{d("Failed to load driver data")}finally{h(!1)}},j=Array.isArray(t)?t.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())||x.email.toLowerCase().includes(l.toLowerCase())||x.sponsorRelationships.some(b=>b.sponsorName.toLowerCase().includes(l.toLowerCase()))):[];return o?e.jsx(g,{sx:{width:"100%",mt:2},children:e.jsx(ne,{})}):i?e.jsx(z,{severity:"error",sx:{mt:2},children:i}):e.jsxs(g,{sx:{width:"100%",p:3},children:[e.jsx(n,{variant:"h5",gutterBottom:!0,children:"Driver-Sponsor Associations"}),e.jsxs(g,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(M,{fullWidth:!0,variant:"outlined",placeholder:"Search by driver name, email, or sponsor...",value:l,onChange:x=>p(x.target.value)}),e.jsx(ae,{sx:{ml:-4},children:e.jsx(Xt,{})})]}),e.jsx(ie,{component:te,children:e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Driver Name"}),e.jsx(v,{children:"Email"}),e.jsx(v,{children:"Sponsors"}),e.jsx(v,{align:"center",children:"Total Sponsors"}),e.jsx(v,{children:"Points Distribution"})]})}),e.jsx(ce,{children:j.map(x=>e.jsxs(E,{children:[e.jsx(v,{children:x.name}),e.jsx(v,{children:x.email}),e.jsx(v,{children:e.jsx(g,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:x.sponsorRelationships.map(b=>e.jsx(we,{label:b.sponsorName,size:"small",color:"primary"},b.sponsorId))})}),e.jsx(v,{align:"center",children:x.sponsorRelationships.length}),e.jsx(v,{children:e.jsx(g,{sx:{display:"flex",alignItems:"center",gap:1},children:x.sponsorRelationships.map(b=>e.jsx(xt,{title:`${b.sponsorName}: ${b.points} points`,children:e.jsx(g,{sx:{display:"flex",alignItems:"center"},children:e.jsx(n,{variant:"body2",children:b.points})})},b.sponsorId))})})]},x.userId))})]})})]})};var kt=(t=>(t.User="User",t.Point="Point",t.Purchase="Purchase",t.Application="Application",t.Product="Product",t.System="System",t))(kt||{});const ns=()=>{const[t,r]=s.useState([]),[o,h]=s.useState(0),[i,d]=s.useState(!1),[l,p]=s.useState(null),[m,j]=s.useState({page:0,pageSize:10}),x=async()=>{try{d(!0),p(null);const c=new URLSearchParams;m.userID&&c.append("userId",m.userID.toString()),m.category&&c.append("category",m.category),m.startDate&&c.append("startDate",m.startDate.toISOString()),m.endDate&&c.append("endDate",m.endDate.toISOString()),c.append("page",(m.page+1).toString()),c.append("pageSize",m.pageSize.toString());const S=await A.get(`/api/admin/audit-logs?${c.toString()}`);r(S.data.logs),h(S.data.totalCount)}catch{p("Failed to fetch audit logs")}finally{d(!1)}},b=async()=>{try{const c=new URLSearchParams;m.startDate&&c.append("startDate",m.startDate.toISOString()),m.endDate&&c.append("endDate",m.endDate.toISOString()),m.category&&c.append("category",m.category);const S=await A.get(`/api/admin/audit-logs/export?${c.toString()}`,{responseType:"blob"}),R=window.URL.createObjectURL(new Blob([S.data])),O=document.createElement("a");O.href=R,O.setAttribute("download",`audit_logs_${Je(new Date,"yyyyMMdd")}.csv`),document.body.appendChild(O),O.click(),O.remove()}catch{p("Failed to export audit logs")}};s.useEffect(()=>{x()},[m]);const a=(c,S)=>{j(R=>({...R,page:S}))},f=c=>{j(S=>({...S,pageSize:parseInt(c.target.value,10),page:0}))},C=c=>{const S=c.target.value;j(R=>({...R,category:S||void 0,page:0}))},I=c=>({User:"primary",Point:"success",Purchase:"info",Application:"warning",Product:"secondary",System:"error"})[c]||"default";return e.jsx(gt,{dateAdapter:mt,children:e.jsx(g,{sx:{p:3},children:e.jsxs(w,{container:!0,spacing:3,children:[e.jsxs(w,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{variant:"h4",children:"Audit Log Dashboard"}),e.jsx(T,{variant:"contained",startIcon:e.jsx(er,{}),onClick:b,disabled:i,children:"Export CSV"})]}),l&&e.jsx(w,{item:!0,xs:12,children:e.jsx(z,{severity:"error",children:l})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(te,{sx:{p:2,mb:2},children:e.jsxs(w,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(w,{item:!0,xs:12,sm:6,md:2,children:e.jsx(M,{fullWidth:!0,label:"User ID",type:"number",value:m.userID||"",onChange:c=>j(S=>({...S,userID:c.target.value?parseInt(c.target.value):void 0,page:0}))})}),e.jsx(w,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(Z,{fullWidth:!0,children:[e.jsx(Q,{children:"Category"}),e.jsxs(q,{value:m.category||"",label:"Category",onChange:C,children:[e.jsx(P,{value:"",children:"All"}),Object.values(kt).map(c=>e.jsx(P,{value:c,children:c},c))]})]})}),e.jsx(w,{item:!0,xs:12,sm:6,md:2,children:e.jsx(ye,{label:"Start Date",value:m.startDate,onChange:c=>j(S=>({...S,startDate:c||void 0,page:0})),slotProps:{textField:{fullWidth:!0}}})}),e.jsx(w,{item:!0,xs:12,sm:6,md:2,children:e.jsx(ye,{label:"End Date",value:m.endDate,onChange:c=>j(S=>({...S,endDate:c||void 0,page:0})),slotProps:{textField:{fullWidth:!0}}})}),e.jsx(w,{item:!0,xs:12,sm:6,md:1,children:e.jsx(ae,{onClick:()=>x(),disabled:i,children:e.jsx(tr,{})})})]})})}),e.jsx(w,{item:!0,xs:12,children:e.jsxs(te,{children:[e.jsx(ie,{children:e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Log ID"}),e.jsx(v,{children:"Timestamp"}),e.jsx(v,{children:"User"}),e.jsx(v,{children:"Category"}),e.jsx(v,{children:"Description"})]})}),e.jsx(ce,{children:i?e.jsx(E,{children:e.jsx(v,{colSpan:5,align:"center",children:"Loading..."})}):t.length===0?e.jsx(E,{children:e.jsx(v,{colSpan:5,align:"center",children:"No audit logs found"})}):t.map(c=>e.jsxs(E,{children:[e.jsx(v,{children:c.logID}),e.jsx(v,{children:Je(new Date(c.timestamp),"MMM dd, yyyy HH:mm:ss")}),e.jsx(v,{children:c.userName||c.userID||"N/A"}),e.jsx(v,{children:e.jsx(we,{label:c.category,size:"small",color:I(c.category)})}),e.jsx(v,{children:c.description})]},c.logID))})]})}),e.jsx(xr,{component:"div",count:o,page:m.page,onPageChange:a,rowsPerPage:m.pageSize,onRowsPerPageChange:f,rowsPerPageOptions:[5,10,25,50]})]})})]})})})},is=()=>{const{user:t}=se(),r=h=>{const[i,...d]=h.split(" ");switch(i){case"help":return`Available commands:
  help - Show this help message
  status - Show system status
  users - List recent user activities
  clear - Clear console
  audit [date] - Show audit logs for date (YYYY-MM-DD)
  metrics - Show system metrics
  version - Show system version`;case"status":return`System Status: Operational
Last backup: 2024-03-10
Active users: 42
Server load: Normal`;case"users":return`Recent User Activities:
admin1@gitgud.com - Login - 2 mins ago
driver2@email.com - Updated profile - 5 mins ago
sponsor1@company.com - Approved application - 10 mins ago`;case"metrics":return`System Metrics:
CPU Usage: 45%
Memory: 2.1GB/4GB
Active Sessions: 12
Response Time: 230ms`;case"audit":const l=d[0];return!l||!/^\d{4}-\d{2}-\d{2}$/.test(l)?"Error: Please provide a date in YYYY-MM-DD format":`Fetching audit logs for ${l}...
[${l} 09:15:23] User login - admin1@gitgud.com
[${l} 09:20:45] Configuration change - System settings updated
[${l} 10:30:12] New user registration - driver3@email.com`;case"version":return"GitGud Drivers v1.0.0";case"clear":return"clear";default:return`Unknown command: ${i}. Type 'help' for available commands.`}},o=[{type:"text",value:`Welcome ${(t==null?void 0:t.userName)||"Admin"} to the GitGud Drivers Admin Console
Type 'help' for available commands`}];return e.jsx(g,{sx:{p:2},children:e.jsxs(te,{elevation:3,sx:{bgcolor:"#1a1a1a",borderRadius:1,overflow:"hidden",height:"500px"},children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:1,bgcolor:"#2d2d2d",p:1,borderBottom:"1px solid #333"},children:[e.jsx(ot,{sx:{color:"#fff"}}),e.jsx(n,{variant:"h6",sx:{color:"#fff"},children:"Admin Console"})]}),e.jsx(At,{name:"Admin Console",prompt:"$",lineData:o,onInput:r})]})})},ls=()=>{const[t,r]=s.useState([]),[o,h]=s.useState([]),[i,d]=s.useState(!0),[l,p]=s.useState(null);if(s.useEffect(()=>{(async()=>{try{d(!0);const x=await fetch("/api/admin/drivers/details",{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch data");const b=await x.json();r(b);const a=new Map;b.forEach(f=>{f.sponsorRelationships.forEach(C=>{const I=a.get(C.sponsorId)||{sponsorId:C.sponsorId,sponsorName:C.sponsorName,totalDrivers:0,totalPoints:0,averagePoints:0};a.set(C.sponsorId,{...I,totalDrivers:I.totalDrivers+1,totalPoints:I.totalPoints+C.points,averagePoints:(I.totalPoints+C.points)/(I.totalDrivers+1)})})}),h(Array.from(a.values()))}catch(x){p(x instanceof Error?x.message:"An error occurred")}finally{d(!1)}})()},[]),i)return e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(re,{})});if(l)return e.jsx(z,{severity:"error",sx:{mb:2},children:l});const m=o.map(j=>({id:j.sponsorId,value:j.totalDrivers,label:j.sponsorName}));return o.map(j=>({id:j.sponsorId,value:j.totalPoints,label:j.sponsorName})),e.jsxs(g,{sx:{width:"100%"},children:[e.jsx(n,{variant:"h5",gutterBottom:!0,children:"Sponsor Management Overview"}),e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{item:!0,xs:12,children:e.jsx(G,{children:e.jsx(H,{children:e.jsxs(w,{container:!0,spacing:3,children:[e.jsxs(w,{item:!0,xs:12,md:4,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Total Sponsors"}),e.jsx(n,{variant:"h3",children:o.length})]}),e.jsxs(w,{item:!0,xs:12,md:4,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Total Drivers"}),e.jsx(n,{variant:"h3",children:t.length})]}),e.jsxs(w,{item:!0,xs:12,md:4,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Total Points"}),e.jsx(n,{variant:"h3",children:o.reduce((j,x)=>j+x.totalPoints,0).toLocaleString()})]})]})})})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsx(G,{children:e.jsxs(H,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Driver Distribution by Sponsor"}),e.jsx(g,{sx:{height:400},children:e.jsx(Ie,{series:[{data:m,highlightScope:{faded:"global",highlighted:"item"}}],height:350})})]})})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsx(G,{children:e.jsxs(H,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Total Points by Sponsor"}),e.jsx(g,{sx:{height:400},children:e.jsx(We,{xAxis:[{scaleType:"band",data:o.map(j=>j.sponsorName)}],series:[{data:o.map(j=>j.totalPoints),label:"Total Points"}],height:350})})]})})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(G,{children:e.jsxs(H,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Sponsor Details"}),e.jsx(ie,{component:te,children:e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(E,{children:[e.jsx(v,{children:"Sponsor Name"}),e.jsx(v,{align:"right",children:"Total Drivers"}),e.jsx(v,{align:"right",children:"Total Points"}),e.jsx(v,{align:"right",children:"Average Points per Driver"})]})}),e.jsx(ce,{children:o.map(j=>e.jsxs(E,{children:[e.jsx(v,{children:j.sponsorName}),e.jsx(v,{align:"right",children:j.totalDrivers}),e.jsx(v,{align:"right",children:j.totalPoints.toLocaleString()}),e.jsx(v,{align:"right",children:Math.round(j.averagePoints).toLocaleString()})]},j.sponsorId))})]})})]})})})]})]})},ds={MAIN:e.jsx(g,{children:e.jsx(n,{variant:"h6",children:"Dashboard Home"})}),CHANGE_PASSWORD:e.jsx(wt,{}),MANAGE_USERS:e.jsx(n,{children:"Manage Users"}),MANAGE_DRIVERS:e.jsx(as,{}),MANAGE_SPONSORS:e.jsx(ls,{}),MANAGE_ADMINS:e.jsx(n,{children:"Manage Admins"}),ADMIN_REPORTS:e.jsx(os,{}),ADMIN_AUDIT_REPORTS:e.jsx(ns,{}),ADMIN_CONSOLE:e.jsx(is,{}),DRIVER_APPLICATION:e.jsx(Yr,{}),DRIVER_REGISTRATION:e.jsx(ts,{}),DRIVER_POINTS:e.jsx(Kr,{}),DRIVER_ACTIVITY:e.jsx(Xr,{}),DRIVER_POINTS_HISTORY:e.jsx(rs,{}),APPLICATION_MANAGER:e.jsx(Qr,{}),SPONSOR_REPORTS:e.jsx(ss,{}),SPONSOR_AUDIT_REPORTS:e.jsx(n,{children:"Audit Reports"}),SPONSOR_DRIVERS:e.jsx(es,{})};function cs(){const{currentView:t}=St();return s.useEffect(()=>{},[t]),e.jsx(g,{sx:{width:"100%"},children:ds[t]||e.jsx(n,{children:"Select an option to view content"})})}const us=()=>{const{user:t,viewRole:r,setViewRole:o}=se();r||(t==null||t.userType);const h=d=>{o(d.target.value)},i=()=>{o(null)};return e.jsxs(g,{sx:{display:"flex",width:"100%",minHeight:"100vh"},children:[e.jsx(ut,{}),e.jsxs(g,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",ml:"15px"},children:[e.jsx(g,{sx:{p:2},children:e.jsxs(V,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(n,{variant:"h6",children:"Dashboard"}),t&&(t.userType==="Admin"||t.userType==="Sponsor")&&e.jsxs(q,{value:r||"",onChange:h,displayEmpty:!0,sx:{minWidth:180},renderValue:()=>"Select a role to view",children:[e.jsx(P,{disabled:!0,value:"",children:e.jsx("em",{children:"Select a role to view"})}),t.userType==="Admin"&&[e.jsx(P,{value:"Driver",children:"Driver"},"Driver"),e.jsx(P,{value:"Sponsor",children:"Sponsor"},"Sponsor"),e.jsx(P,{value:"Guest",children:"Guest"},"Guest")],t.userType==="Sponsor"&&e.jsx(P,{value:"Driver",children:"Driver"},"Driver")]}),r&&e.jsx(T,{onClick:i,children:'Exit "View As"'})]})}),e.jsx(cs,{})]})]})},tt="productCatalog",hs=10*60*1e3,ps=()=>{const[t,r]=s.useState([]),[o,h]=s.useState(!0),[i,d]=s.useState(null),[l,p]=s.useState([]),[m,j]=s.useState(!1),[x,b]=s.useState([]),[a,f]=s.useState(""),[C,I]=s.useState(""),[c,S]=s.useState(!1);s.useEffect(()=>{$()},[]);const R=k=>{p(L=>[...L,k])},O=()=>j(!0),ee=()=>j(!1),xe=()=>p([]);s.useEffect(()=>{const k=localStorage.getItem(tt);if(k){const{listings:L,timestamp:J}=JSON.parse(k);if(Date.now()-J<hs){r(L),h(!1);return}}oe()},[]);const $=async()=>{try{const k=await A.get("/api/driver/my-sponsors");b(k.data),k.data.length>0&&f(k.data[0].sponsorId)}catch{d("Failed to load sponsor points data")}},oe=async()=>{var k;try{const J=(await A.get("/api/catalog/products")).data.map(je=>({...je,pointCost:ue(je.price)}));r(J),localStorage.setItem(tt,JSON.stringify({listings:J,timestamp:Date.now()}))}catch(L){d(((k=L.response)==null?void 0:k.data)||"Failed to load products.")}finally{h(!1)}},ue=k=>{const L=x.find(je=>je.sponsorId===a);if(!L)return 0;const J=parseFloat(k.split(" ")[0]);return Math.ceil(J/L.pointDollarValue)},N=k=>{const L=x.find(J=>J.sponsorId===a);!L||!k.pointCost||(L.totalPoints<k.pointCost&&I(`Not enough points! You need ${k.pointCost} points but have ${L.totalPoints}`),S(!0))};if(o)return e.jsx(re,{});if(i)return e.jsx(z,{severity:"error",children:i});const ge=x.find(k=>k.sponsorId===a);return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{children:[e.jsx(n,{variant:"h4",component:"h1",gutterBottom:!0,children:"Product Catalog"}),e.jsxs(Z,{fullWidth:!0,sx:{mb:4},children:[e.jsx(Q,{children:"Select Sponsor"}),e.jsx(q,{value:a,label:"Select Sponsor",onChange:k=>f(k.target.value),children:x.map(k=>e.jsxs(P,{value:k.sponsorId,children:[k.sponsorName," - ",k.totalPoints.toLocaleString()," points available"]},k.sponsorId))})]}),ge&&e.jsxs(z,{severity:"info",sx:{mb:2},children:["You have ",ge.totalPoints.toLocaleString()," points available with ",ge.sponsorName,". Point Value: $",ge.pointDollarValue.toFixed(2)," per point"]}),e.jsx(g,{sx:{display:"flex",flexWrap:"wrap",gap:2,justifyContent:"flex-start"},children:t.map((k,L)=>{var J;return e.jsxs(G,{sx:{width:"calc(33.333% - 16px)",maxWidth:"calc(33.333% - 16px)",marginBottom:2},children:[e.jsx(br,{component:"img",height:"200",image:k.imageUrl,alt:k.name,sx:{objectFit:"cover"}}),e.jsxs(H,{children:[e.jsx(n,{variant:"h6",component:"p",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k.name}),e.jsx(he,{title:"Price",value:k.price}),e.jsx(he,{title:"Point Cost",value:`${((J=k.pointCost)==null?void 0:J.toLocaleString())||0} points`}),e.jsx(T,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{N(k),R(k)},disabled:!ge||(k.pointCost||0)>ge.totalPoints,sx:{mt:2},children:"Add to Cart"})]})]},L)})}),e.jsx(ht,{open:c,autoHideDuration:3e3,onClose:()=>S(!1),message:C}),e.jsxs(g,{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",mt:4,gap:2,children:[e.jsx(T,{variant:"contained",color:"secondary",onClick:O,children:"View Cart"}),e.jsx(T,{variant:"outlined",color:"error",onClick:xe,children:"Clear Cart"})]})]}),e.jsxs(jt,{open:m,onClose:ee,children:[e.jsx(bt,{children:"Your Cart"}),e.jsx(vt,{children:l.length>0?e.jsx(Te,{children:l.map((k,L)=>e.jsx(Me,{children:e.jsx(fe,{primary:k.name,secondary:`Price: ${parseFloat(k.pointCost).toFixed(2)}`})},L))}):e.jsx(n,{variant:"body1",children:"Your cart is empty."})})]})]})},xs=({question:t,answer:r})=>e.jsxs(gr,{children:[e.jsx(mr,{expandIcon:e.jsx(st,{}),"aria-controls":"panel-content",id:"panel-header",children:e.jsx(n,{children:t})}),e.jsx(jr,{children:e.jsx(n,{children:r})})]}),gs=()=>{const t=[{question:"How do I create an account?",answer:"To create an account, click on the 'Create New Account' link on the login page. Fill in your details and follow the prompts to complete registration."},{question:"What are the password requirements?",answer:"We recommend using a strong password that is at least 8 characters long, includes uppercase and lowercase letters, numbers, and special characters."},{question:"How can I reset my password?",answer:"If you've forgotten your password, click on the 'Forgot Password' link on the login page. Enter your email address, and we'll send you instructions to reset your password."},{question:"How do I earn points?",answer:"You can earn points by driving safely and completing objectives set by your sponsor."},{question:"How do I apply to a sponsor?",answer:"To apply to a sponsor, fill out the sponsor application form."},{question:"What can I spend my points on?",answer:"Points can be exchanged for purchases from temp not sure where yet."}];return e.jsxs("div",{children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:"Frequently Asked Questions"}),t.map((r,o)=>e.jsx(xs,{question:r.question,answer:r.answer},o))]})},ms=()=>{const[t,r]=s.useState(""),[o,h]=s.useState(""),[i,d]=s.useState(""),[l,p]=s.useState(!1),[m,j]=s.useState(""),x=a=>{if(a.preventDefault(),!t||!o||!i){j("Please fill in all fields");return}if(!/\S+@\S+\.\S+/.test(o)){j("Please enter a valid email address");return}p(!0),r(""),h(""),d(""),j("")},b=(a,f)=>{f!=="clickaway"&&p(!1)};return e.jsxs(g,{component:"form",onSubmit:x,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(n,{variant:"h4",component:"h1",gutterBottom:!0,children:"Provide Feedback"}),e.jsx(M,{label:"Your Name",fullWidth:!0,margin:"normal",value:t,onChange:a=>r(a.target.value),required:!0}),e.jsx(M,{label:"Your Email",type:"email",fullWidth:!0,margin:"normal",value:o,onChange:a=>h(a.target.value),required:!0}),e.jsx(M,{label:"Your Feedback",fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:i,onChange:a=>d(a.target.value),required:!0}),e.jsx(T,{type:"submit",variant:"contained",size:"large",fullWidth:!0,sx:{mt:3,mb:2},children:"Submit Feedback"}),m&&e.jsx(n,{color:"error",sx:{mt:2},children:m}),e.jsx(ht,{open:l,autoHideDuration:6e3,onClose:b,children:e.jsx(z,{onClose:b,severity:"success",sx:{width:"100%"},children:"Thank you for your feedback!"})})]})},js=()=>{const[t,r]=s.useState(!1),o=()=>{r(!0)},h=()=>{r(!1)};return e.jsxs(Ce,{maxWidth:"md",children:[e.jsx(n,{variant:"h4",align:"center",gutterBottom:!0,children:"Secure Checkout"}),e.jsxs(w,{container:!0,spacing:4,children:[e.jsx(w,{item:!0,xs:12,sm:7,children:e.jsxs(g,{children:[e.jsx(n,{variant:"h6",children:"1. Delivery Address"}),e.jsx(n,{variant:"body2",children:"All fields marked with * are required"}),e.jsxs(w,{container:!0,spacing:2,mt:2,children:[" ",e.jsx(w,{item:!0,xs:12,children:e.jsx(M,{label:"Email address *",fullWidth:!0,variant:"outlined"})}),e.jsx(w,{item:!0,xs:6,children:e.jsx(M,{label:"First name *",fullWidth:!0,variant:"outlined"})}),e.jsx(w,{item:!0,xs:6,children:e.jsx(M,{label:"Last name *",fullWidth:!0,variant:"outlined"})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(M,{label:"Address *",fullWidth:!0,variant:"outlined"})}),e.jsx(w,{item:!0,xs:6,children:e.jsx(M,{label:"City *",fullWidth:!0,variant:"outlined"})}),e.jsx(w,{item:!0,xs:6,children:e.jsx(M,{label:"ZIP code *",fullWidth:!0,variant:"outlined"})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(M,{label:"Country *",fullWidth:!0,variant:"outlined",defaultValue:"United States"})})]})]})}),e.jsx(w,{item:!0,xs:12,sm:5,children:e.jsxs(g,{children:[e.jsx(n,{variant:"h6",children:"Order Summary"}),e.jsxs(w,{container:!0,spacing:2,mt:2,alignItems:"center",children:[e.jsxs(w,{item:!0,xs:8,children:[e.jsx(n,{variant:"subtitle1",children:"Bath Mat"}),e.jsx(n,{variant:"body2",children:"Size: 61x43cm, Color: White"})]}),e.jsxs(w,{item:!0,xs:4,textAlign:"right",children:[e.jsx(ae,{size:"small",children:e.jsx(He,{})}),"1",e.jsx(ae,{size:"small",children:e.jsx(Ue,{})})]}),e.jsx(w,{item:!0,xs:12,children:e.jsx(X,{})}),e.jsxs(w,{item:!0,xs:8,children:[e.jsx(n,{variant:"subtitle1",children:"T-Shirt"}),e.jsx(n,{variant:"body2",children:"Size: L, Color: White"})]}),e.jsxs(w,{item:!0,xs:4,textAlign:"right",children:[e.jsx(ae,{size:"small",children:e.jsx(He,{})}),"1",e.jsx(ae,{size:"small",children:e.jsx(Ue,{})})]}),e.jsx(w,{item:!0,xs:12,children:e.jsx(X,{})})]}),e.jsxs(g,{mt:2,textAlign:"right",children:[e.jsx(n,{variant:"h6",children:"Total (2 items): $69.46"})," ",e.jsx(n,{variant:"h6",children:"Current Points: 6946"})," ",e.jsx(T,{variant:"contained",color:"primary",fullWidth:!0,onClick:o,sx:{mt:2},children:"Complete Order"})]})]})})]}),e.jsxs(jt,{open:t,onClose:h,children:[e.jsx(bt,{children:"Order Complete"}),e.jsxs(vt,{children:[e.jsx(n,{children:"Your order has been successfully completed! Remaining points: 0"})," "]}),e.jsx(yr,{children:e.jsx(T,{onClick:h,color:"primary",children:"Close"})})]})]})},rt=({title:t,buttons:r})=>e.jsxs(g,{sx:{mt:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:t}),r.map((o,h)=>e.jsx(T,{component:pe,to:o.path,variant:"contained",sx:{m:1},children:o.label},h))]}),bs=()=>e.jsxs(g,{sx:{width:"100%",maxWidth:600,margin:"auto",mt:4},children:[e.jsx(n,{variant:"h4",component:"h1",gutterBottom:!0,children:"Settings"}),e.jsx(rt,{title:"Account Settings",buttons:[{label:"Update Email",path:"/update-email"},{label:"Change Password",path:"/change-password"}]}),e.jsx(rt,{title:"Notification Settings",buttons:[{label:"Manage Notifications",path:"/notifications"},{label:"Set Preferences",path:"/preferences"}]})]}),vs=()=>{const{isAuthenticated:t}=se();return t?e.jsxs(g,{sx:{display:"flex"},children:[e.jsx(Fr,{}),e.jsx(g,{sx:{flexGrow:1},children:e.jsx(Mt,{})})]}):e.jsx(Ae,{to:"/",replace:!0})},fs=()=>{const{isAuthenticated:t}=se();return t?e.jsx(Ae,{to:"/dashboard",replace:!0}):e.jsx(Ae,{to:"/home",replace:!0})},ys=()=>e.jsx(Sr,{children:e.jsx(Cr,{children:e.jsxs(Wr,{children:[e.jsx(kr,{}),e.jsx(Le,{}),e.jsx(g,{sx:{mt:1,width:"100%"},children:e.jsxs(Tt,{children:[e.jsx(U,{path:"/",element:e.jsx(fs,{})}),e.jsx(U,{path:"/about",element:e.jsx(Gr,{})}),e.jsx(U,{path:"/login",element:e.jsx(Hr,{})}),e.jsx(U,{path:"/register",element:e.jsx(qr,{})}),e.jsx(U,{path:"/home",element:e.jsx(Vr,{})}),e.jsx(U,{path:"/faq",element:e.jsx(gs,{})}),e.jsx(U,{path:"/feedback",element:e.jsx(ms,{})}),e.jsxs(U,{element:e.jsx(vs,{}),children:[e.jsx(U,{path:"/dashboard",element:e.jsx(us,{})}),e.jsx(U,{path:"/catalog",element:e.jsx(ps,{})}),e.jsx(U,{path:"/change-password",element:e.jsx(wt,{})}),e.jsx(U,{path:"/settings",element:e.jsx(bs,{})}),e.jsx(U,{path:"/order",element:e.jsx(js,{})})]})]})})]})})});Ot.createRoot(document.getElementById("root")).render(e.jsx(Et,{children:e.jsx(ys,{})}));
