import{j as e,r as s,aF as T,aG as Ce,aH as ie,aI as wr,aJ as Ir,h as kr,aK as Pr,aL as V,aM as Dr,aN as Ae,aO as Rr,aP as Ar}from"./vendor-DRaz0WEw.js";import{B as Tr,b as Or,I as te,L as Te,a as Oe,c as Be,d as Fe,e as Se,E as Mr,f as or,C as Er,D as Wr,A as ve,S as Ve,g as fe,P as He,h as Ie,H as me,i as se,j as oe,k as Lr,T as h,l as A,m as ar,n as zr,o as B,p as Ee,N as $r,q as Z,r as nr,u as Nr,s as We,t as g,M as ir,v as C,w as Br,x as Fr,y as lr,z as Le,F as Vr,G as Hr,J as cr,K as y,O as ye,Q as Ge,R as Gr,U as Ur,V as qr,W as _r,X as Yr,Y as Zr,Z as dr,_ as W,$ as Jr,a0 as ke,a1 as Qr,a2 as Kr,a3 as Ue,a4 as qe,a5 as Xr,a6 as et,a7 as rt,a8 as ur,a9 as je,aa as P,ab as K,ac as L,ad as D,ae as Me,af as de,ag as ze,ah as $e,ai as _,aj as Y,ak as G,al as Q,am as ce,an as ue,ao as pe,ap as he,aq as U,ar as f,as as xe,at as we,au as tt,av as _e,aw as Ye,ax as st,ay as pr,az as ot,aA as at,aB as nt,aC as it,aD as lt,aE as ct,aF as Ze,aG as Je,aH as dt,aI as ut,aJ as pt,aK as ht,aL as xt,aM as gt,aN as hr,aO as xr,aP as gr,aQ as mr,aR as mt,aS as jt,aT as bt,aU as vt,aV as Qe,aW as Ke,aX as ft}from"./mui-DgOvv83M.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}})();function Ne({showBadge:r=!1,...t}){return e.jsx(Tr,{color:"error",variant:"dot",invisible:!r,sx:{[`& .${Or.badge}`]:{right:2,top:2}},children:e.jsx(te,{size:"small",...t})})}const jr=s.createContext(void 0),yt=({children:r})=>{const[t,o]=s.useState(()=>sessionStorage.getItem("isAuthenticated")==="true"),[c,a]=s.useState(()=>{const i=sessionStorage.getItem("user");return i?JSON.parse(i):null}),[l,d]=s.useState(()=>sessionStorage.getItem("viewRole")||null),[x,m]=s.useState(!t),v=s.useCallback(i=>{d(i),i?sessionStorage.setItem("viewRole",i):sessionStorage.removeItem("viewRole")},[]);s.useEffect(()=>{t?m(!1):p()},[]);const p=async()=>{m(!0);try{const i=await T.get("/api/user/currentuser",{withCredentials:!0});a(i.data),o(!0),sessionStorage.setItem("user",JSON.stringify(i.data)),sessionStorage.setItem("isAuthenticated","true")}catch{a(null),o(!1),sessionStorage.removeItem("user"),sessionStorage.removeItem("isAuthenticated")}finally{m(!1)}},n=async()=>{try{await T.post("/api/user/logout",{},{withCredentials:!0}),a(null),o(!1),v(null),sessionStorage.clear()}catch(i){console.error("Logout failed:",i)}};return e.jsx(jr.Provider,{value:{user:c,isAuthenticated:t,isLoading:x,viewRole:l,setViewRole:v,checkAuth:p,logout:n},children:r})},X=()=>{const r=s.useContext(jr);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},br=s.createContext(void 0),vr=()=>{const r=s.useContext(br);if(!r)throw new Error("useView must be used within a ViewProvider");return r},St=({children:r})=>{const[t,o]=s.useState("MAIN");return e.jsx(br.Provider,{value:{currentView:t,setCurrentView:o},children:r})},Xe={base:[{text:"Dashboard",icon:e.jsx(Wr,{}),view:"MAIN"}],Guest:[{text:"Applications",icon:e.jsx(ve,{}),view:"DRIVER_APPLICATION"}],Driver:[{text:"Applications",icon:e.jsx(ve,{}),view:"DRIVER_APPLICATION"},{text:"Product Catalog",icon:e.jsx(Ve,{}),path:"/catalog"},{text:"Register With Sponsors",icon:e.jsx(ve,{}),view:"DRIVER_REGISTRATION"},{text:"Points",icon:e.jsx(fe,{}),view:"DRIVER_POINTS"},{text:"Activity",icon:e.jsx(fe,{}),view:"DRIVER_ACTIVITY"},{text:"Profile",icon:e.jsx(fe,{}),view:"PROFILE"}],Admin:[{text:"Manage Users",icon:e.jsx(He,{}),nestedItems:[{text:"Drivers",icon:e.jsx(Ie,{}),view:"MANAGE_DRIVERS"},{text:"Sponsors",icon:e.jsx(Ie,{}),view:"MANAGE_USERS"},{text:"Admins",icon:e.jsx(Ie,{}),view:"MANAGE_USERS"}]},{text:"Reports Views",icon:e.jsx(me,{}),nestedItems:[{text:"General",icon:e.jsx(me,{}),view:"ADMIN_REPORTS"},{text:"Audits",icon:e.jsx(me,{}),view:"ADMIN_AUDIT_REPORTS"}]}],Sponsor:[{text:"Manage Drivers",icon:e.jsx(He,{}),view:"SPONSOR_DRIVERS"},{text:"Approve/Reject Applications",icon:e.jsx(ve,{}),view:"APPLICATION_MANAGER"},{text:"Product Catalog",icon:e.jsx(Ve,{}),path:"/catalog"},{text:"Reports Views",icon:e.jsx(me,{}),nestedItems:[{text:"General",icon:e.jsx(fe,{}),view:"SPONSOR_REPORTS"},{text:"Audits",icon:e.jsx(me,{}),view:"SPONSOR_AUDIT_REPORTS"}]}]};function fr(){const{setCurrentView:r}=vr(),{user:t,viewRole:o}=X(),c=Ce(),a=o||(t==null?void 0:t.userType)||"Guest",[l,d]=s.useState({}),x=[...Xe.base,...Xe[a]||[]],m=p=>{d(n=>({...n,[p]:!n[p]}))},v=(p,n)=>{n?c(n):p&&r(p)};return e.jsx(Te,{dense:!0,children:x.map((p,n)=>e.jsxs(s.Fragment,{children:[e.jsx(Oe,{disablePadding:!0,children:e.jsxs(Be,{onClick:()=>p.nestedItems?m(p.text):v(p.view,p.path),children:[e.jsx(Fe,{children:p.icon}),e.jsx(Se,{primary:p.text}),p.nestedItems?l[p.text]?e.jsx(Mr,{}):e.jsx(or,{}):null]})}),p.nestedItems&&e.jsx(Er,{in:l[p.text],timeout:"auto",unmountOnExit:!0,children:e.jsx(Te,{component:"div",disablePadding:!0,children:p.nestedItems.map((i,j)=>e.jsx(Oe,{disablePadding:!0,children:e.jsxs(Be,{onClick:()=>v(i.view,i.path),children:[e.jsx(Fe,{children:i.icon}),e.jsx(Se,{primary:i.text})]})},j))})})]},n))})}function Ct(){return e.jsx(se,{variant:"outlined",sx:{m:1.5,p:1.5},children:e.jsxs(oe,{children:[e.jsx(Lr,{fontSize:"small"}),e.jsx(h,{gutterBottom:!0,sx:{fontWeight:600},children:"Something"}),e.jsx(h,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"Earn points by driving safe!"}),e.jsx(A,{variant:"contained",size:"small",fullWidth:!0,children:"Make the pledge"})]})})}function wt({open:r,toggleDrawer:t}){const{user:o,viewRole:c,logout:a}=X(),l=c?{userName:`Viewing as ${c}`,email:`${c.toLowerCase()}@example.com`,userType:c}:o;return e.jsx(ar,{anchor:"right",open:r,onClose:t(!1),sx:{zIndex:d=>d.zIndex.drawer+1,[`& .${zr.paper}`]:{backgroundImage:"none",backgroundColor:"background.paper"}},children:e.jsxs(B,{sx:{maxWidth:"70dvw",height:"100%"},children:[e.jsxs(B,{direction:"row",sx:{p:2,pb:0,gap:1},children:[l?e.jsxs(B,{direction:"row",sx:{gap:1,alignItems:"center",flexGrow:1,p:1},children:[e.jsx(Ee,{alt:l.userName,src:"/static/images/avatar/7.jpg",sx:{width:24,height:24}}),e.jsx(h,{component:"p",variant:"h6",children:l.userName})]}):e.jsx(h,{variant:"body2",sx:{flexGrow:1,p:1},children:"Please log in to access more features."}),e.jsx(Ne,{showBadge:!0,children:e.jsx($r,{})})]}),e.jsx(Z,{}),e.jsxs(B,{sx:{flexGrow:1},children:[e.jsx(fr,{}),e.jsx(Z,{})]}),e.jsx(Ct,{}),l&&e.jsx(B,{sx:{p:2},children:e.jsx(A,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(nr,{}),onClick:a,children:"Logout"})})]})})}function It(r){const{mode:t,systemMode:o,setMode:c}=Nr(),a=We(),[l,d]=s.useState(null),x=!!l,m=j=>{d(j.currentTarget)},v=()=>{d(null)},p=j=>()=>{c(j),v()};if(!t)return e.jsx(g,{"data-screenshot":"toggle-mode",sx:{verticalAlign:"bottom",display:"inline-flex",width:"2.25rem",height:"2.25rem",borderRadius:a.shape.borderRadius,border:"1px solid",borderColor:a.palette.divider}});const i=(o||t)==="light"?e.jsx(Br,{}):e.jsx(Fr,{});return e.jsxs(s.Fragment,{children:[e.jsx(te,{"data-screenshot":"toggle-mode",onClick:m,disableRipple:!0,size:"small","aria-controls":x?"color-scheme-menu":void 0,"aria-haspopup":"true","aria-expanded":x?"true":void 0,...r,children:i}),e.jsxs(ir,{anchorEl:l,id:"color-scheme-menu",open:x,onClose:v,onClick:v,PaperProps:{variant:"outlined",sx:{my:"4px"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(C,{selected:t==="system",onClick:p("system"),children:"System"}),e.jsx(C,{selected:t==="light",onClick:p("light"),children:"Light"}),e.jsx(C,{selected:t==="dark",onClick:p("dark"),children:"Dark"})]})]})}function kt(){const[r,t]=s.useState(!1);X();const o=c=>()=>{t(c)};return e.jsx(lr,{position:"fixed",sx:{zIndex:c=>c.zIndex.drawer+1,boxShadow:0,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",maxWidth:"100vw",overflow:"hidden"},children:e.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:1,maxWidth:"100%",overflow:"hidden"},children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:1,flexShrink:0},children:[e.jsx(Pt,{}),e.jsx(h,{variant:"h5",component:"a",href:"/",sx:{color:"text.primary",textDecoration:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"GitGud Drivers"})]}),e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:{xs:1,md:2},flexWrap:"wrap",justifyContent:"flex-end",width:{xs:"100%",md:"auto"}},children:[e.jsx(h,{component:ie,to:"/about",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"About"}),e.jsx(h,{component:ie,to:"/faq",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"FAQ"}),e.jsx(It,{}),e.jsxs(g,{sx:{display:{xs:"block",md:"none"}},children:[e.jsx(Ne,{"aria-label":"menu",onClick:o(!0),children:e.jsx(Vr,{})}),e.jsx(wt,{open:r,toggleDrawer:o})]})]})]})})}function Pt(){return e.jsx(g,{sx:{width:"1.5rem",height:"1.5rem",bgcolor:"black",borderRadius:"999px",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(135deg, hsl(210, 98%, 60%) 0%, hsl(210, 100%, 35%) 100%)",color:"hsla(210, 100%, 95%, 0.9)",border:"1px solid",borderColor:"hsl(210, 100%, 55%)",boxShadow:"inset 0 2px 5px rgba(255, 255, 255, 0.3)"},children:e.jsx(Hr,{color:"inherit",sx:{fontSize:"1rem"}})})}const H=cr();[...H.shadows];const b={50:"hsl(210, 100%, 95%)",100:"hsl(210, 100%, 92%)",200:"hsl(210, 100%, 80%)",300:"hsl(210, 100%, 65%)",400:"hsl(210, 98%, 48%)",500:"hsl(210, 98%, 42%)",600:"hsl(210, 98%, 55%)",700:"hsl(210, 100%, 35%)",800:"hsl(210, 100%, 16%)",900:"hsl(210, 100%, 21%)"},u={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},$={50:"hsl(120, 80%, 98%)",100:"hsl(120, 75%, 94%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",600:"hsl(120, 70%, 25%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},q={50:"hsl(45, 100%, 97%)",100:"hsl(45, 92%, 90%)",200:"hsl(45, 94%, 80%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",600:"hsl(45, 91%, 25%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},N={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",600:"hsl(0, 91%, 25%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},Dt={light:{palette:{primary:{light:b[200],main:b[400],dark:b[700],contrastText:b[50]},info:{light:b[100],main:b[300],dark:b[600],contrastText:u[50]},warning:{light:q[300],main:q[400],dark:q[800]},error:{light:N[300],main:N[400],dark:N[800]},success:{light:$[300],main:$[400],dark:$[800]},grey:{...u},divider:y(u[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:u[800],secondary:u[600],warning:q[400]},action:{hover:y(u[200],.2),selected:`${y(u[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:b[50],light:b[300],main:b[400],dark:b[700]},info:{contrastText:b[300],light:b[500],main:b[700],dark:b[900]},warning:{light:q[400],main:q[500],dark:q[700]},error:{light:N[400],main:N[500],dark:N[700]},success:{light:$[400],main:$[500],dark:$[700]},grey:{...u},divider:y(u[700],.6),background:{default:u[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:u[400]},action:{hover:y(u[600],.2),selected:y(u[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}};['"Inter", "sans-serif"'].join(","),H.typography.pxToRem(48),H.typography.pxToRem(36),H.typography.pxToRem(30),H.typography.pxToRem(24),H.typography.pxToRem(20),H.typography.pxToRem(18),H.typography.pxToRem(18),H.typography.pxToRem(14),H.typography.pxToRem(14),H.typography.pxToRem(14),H.typography.pxToRem(12);const Rt={borderRadius:8},At=["none","var(--template-palette-baseShadow)",...H.shadows.slice(2)],Tt=At,Ot={MuiButtonBase:{defaultProps:{disableTouchRipple:!0,disableRipple:!0},styleOverrides:{root:({theme:r})=>({boxSizing:"border-box",transition:"all 100ms ease-in","&:focus-visible":{outline:`3px solid ${y(r.palette.primary.main,.5)}`,outlineOffset:"2px"}})}},MuiButton:{styleOverrides:{root:({theme:r})=>({boxShadow:"none",borderRadius:r.shape.borderRadius,textTransform:"none",variants:[{props:{size:"small"},style:{height:"2.25rem",padding:"8px 12px"}},{props:{size:"medium"},style:{height:"2.5rem"}},{props:{color:"primary",variant:"contained"},style:{color:"white",backgroundColor:u[900],backgroundImage:`linear-gradient(to bottom, ${u[700]}, ${u[800]})`,boxShadow:`inset 0 1px 0 ${u[600]}, inset 0 -1px 0 1px hsl(220, 0%, 0%)`,border:`1px solid ${u[700]}`,"&:hover":{backgroundImage:"none",backgroundColor:u[700],boxShadow:"none"},"&:active":{backgroundColor:u[800]},...r.applyStyles("dark",{color:"black",backgroundColor:u[50],backgroundImage:`linear-gradient(to bottom, ${u[100]}, ${u[50]})`,boxShadow:"inset 0 -1px 0  hsl(220, 30%, 80%)",border:`1px solid ${u[50]}`,"&:hover":{backgroundImage:"none",backgroundColor:u[300],boxShadow:"none"},"&:active":{backgroundColor:u[400]}})}},{props:{color:"secondary",variant:"contained"},style:{color:"white",backgroundColor:b[300],backgroundImage:`linear-gradient(to bottom, ${y(b[400],.8)}, ${b[500]})`,boxShadow:`inset 0 2px 0 ${y(b[200],.2)}, inset 0 -2px 0 ${y(b[700],.4)}`,border:`1px solid ${b[500]}`,"&:hover":{backgroundColor:b[700],boxShadow:"none"},"&:active":{backgroundColor:b[700],backgroundImage:"none"}}},{props:{variant:"outlined"},style:{color:r.palette.text.primary,border:"1px solid",borderColor:u[200],backgroundColor:y(u[50],.3),"&:hover":{backgroundColor:u[100],borderColor:u[300]},"&:active":{backgroundColor:u[200]},...r.applyStyles("dark",{backgroundColor:u[800],borderColor:u[700],"&:hover":{backgroundColor:u[900],borderColor:u[600]},"&:active":{backgroundColor:u[900]}})}},{props:{color:"secondary",variant:"outlined"},style:{color:b[700],border:"1px solid",borderColor:b[200],backgroundColor:b[50],"&:hover":{backgroundColor:b[100],borderColor:b[400]},"&:active":{backgroundColor:y(b[200],.7)},...r.applyStyles("dark",{color:b[50],border:"1px solid",borderColor:b[900],backgroundColor:y(b[900],.3),"&:hover":{borderColor:b[700],backgroundColor:y(b[900],.6)},"&:active":{backgroundColor:y(b[900],.5)}})}},{props:{variant:"text"},style:{color:u[600],"&:hover":{backgroundColor:u[100]},"&:active":{backgroundColor:u[200]},...r.applyStyles("dark",{color:u[50],"&:hover":{backgroundColor:u[700]},"&:active":{backgroundColor:y(u[700],.7)}})}},{props:{color:"secondary",variant:"text"},style:{color:b[700],"&:hover":{backgroundColor:y(b[100],.5)},"&:active":{backgroundColor:y(b[200],.7)},...r.applyStyles("dark",{color:b[100],"&:hover":{backgroundColor:y(b[900],.5)},"&:active":{backgroundColor:y(b[900],.3)}})}}]})}},MuiIconButton:{styleOverrides:{root:({theme:r})=>({boxShadow:"none",borderRadius:r.shape.borderRadius,textTransform:"none",fontWeight:r.typography.fontWeightMedium,letterSpacing:0,color:r.palette.text.primary,border:"1px solid ",borderColor:u[200],backgroundColor:y(u[50],.3),"&:hover":{backgroundColor:u[100],borderColor:u[300]},"&:active":{backgroundColor:u[200]},...r.applyStyles("dark",{backgroundColor:u[800],borderColor:u[700],"&:hover":{backgroundColor:u[900],borderColor:u[600]},"&:active":{backgroundColor:u[900]}}),variants:[{props:{size:"small"},style:{width:"2.25rem",height:"2.25rem",padding:"0.25rem",[`& .${ye.root}`]:{fontSize:"1rem"}}},{props:{size:"medium"},style:{width:"2.5rem",height:"2.5rem"}}]})}},MuiToggleButtonGroup:{styleOverrides:{root:({theme:r})=>({borderRadius:"10px",boxShadow:`0 4px 16px ${y(u[400],.2)}`,[`& .${Ge.selected}`]:{color:b[500]},...r.applyStyles("dark",{[`& .${Ge.selected}`]:{color:"#fff"},boxShadow:`0 4px 16px ${y(b[700],.5)}`})})}},MuiToggleButton:{styleOverrides:{root:({theme:r})=>({padding:"12px 16px",textTransform:"none",borderRadius:"10px",fontWeight:500,...r.applyStyles("dark",{color:u[400],boxShadow:"0 4px 16px rgba(0, 0, 0, 0.5)",[`&.${Gr.selected}`]:{color:b[300]}})})}},MuiCheckbox:{defaultProps:{disableRipple:!0,icon:e.jsx(Ur,{sx:{color:"hsla(210, 0%, 0%, 0.0)"}}),checkedIcon:e.jsx(qr,{sx:{height:14,width:14}}),indeterminateIcon:e.jsx(_r,{sx:{height:14,width:14}})},styleOverrides:{root:({theme:r})=>({margin:10,height:16,width:16,borderRadius:5,border:"1px solid ",borderColor:y(u[300],.8),boxShadow:"0 0 0 1.5px hsla(210, 0%, 0%, 0.04) inset",backgroundColor:y(u[100],.4),transition:"border-color, background-color, 120ms ease-in","&:hover":{borderColor:b[300]},"&.Mui-focusVisible":{outline:`3px solid ${y(b[500],.5)}`,outlineOffset:"2px",borderColor:b[400]},"&.Mui-checked":{color:"white",backgroundColor:b[500],borderColor:b[500],boxShadow:"none","&:hover":{backgroundColor:b[600]}},...r.applyStyles("dark",{borderColor:y(u[700],.8),boxShadow:"0 0 0 1.5px hsl(210, 0%, 0%) inset",backgroundColor:y(u[900],.8),"&:hover":{borderColor:b[300]},"&.Mui-focusVisible":{borderColor:b[400],outline:`3px solid ${y(b[500],.5)}`,outlineOffset:"2px"}})})}},MuiInputBase:{styleOverrides:{root:{border:"none"},input:{"&::placeholder":{opacity:.7,color:u[500]}}}},MuiOutlinedInput:{styleOverrides:{input:{padding:0},root:({theme:r})=>({padding:"8px 12px",color:r.palette.text.primary,borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,backgroundColor:r.palette.background.default,transition:"border 120ms ease-in","&:hover":{borderColor:u[400]},[`&.${Yr.focused}`]:{outline:`3px solid ${y(b[500],.5)}`,borderColor:b[400]},...r.applyStyles("dark",{"&:hover":{borderColor:u[500]}}),variants:[{props:{size:"small"},style:{height:"2.25rem"}},{props:{size:"medium"},style:{height:"2.5rem"}}]}),notchedOutline:{border:"none"}}},MuiInputAdornment:{styleOverrides:{root:({theme:r})=>({color:r.palette.grey[500],...r.applyStyles("dark",{color:r.palette.grey[400]})})}},MuiFormLabel:{styleOverrides:{root:({theme:r})=>({typography:r.typography.caption,marginBottom:8})}}},Mt={MuiList:{styleOverrides:{root:{padding:"8px",display:"flex",flexDirection:"column",gap:0}}},MuiListItem:{styleOverrides:{root:({theme:r})=>({[`& .${ye.root}`]:{width:"1rem",height:"1rem",color:r.palette.text.secondary},[`& .${Zr.root}`]:{fontWeight:500},[`& .${dr.root}`]:{display:"flex",gap:8,padding:"2px 8px",borderRadius:r.shape.borderRadius,opacity:.7,"&.Mui-selected":{opacity:1,backgroundColor:y(r.palette.action.selected,.3),[`& .${ye.root}`]:{color:r.palette.text.primary},"&:focus-visible":{backgroundColor:y(r.palette.action.selected,.3)},"&:hover":{backgroundColor:y(r.palette.action.selected,.5)}},"&:focus-visible":{backgroundColor:"transparent"}}})}},MuiListItemText:{styleOverrides:{primary:({theme:r})=>({fontSize:r.typography.body2.fontSize,fontWeight:500,lineHeight:r.typography.body2.lineHeight}),secondary:({theme:r})=>({fontSize:r.typography.caption.fontSize,lineHeight:r.typography.caption.lineHeight})}},MuiListSubheader:{styleOverrides:{root:({theme:r})=>({backgroundColor:"transparent",padding:"4px 8px",fontSize:r.typography.caption.fontSize,fontWeight:500,lineHeight:r.typography.caption.lineHeight})}},MuiListItemIcon:{styleOverrides:{root:{minWidth:0}}},MuiChip:{defaultProps:{size:"small"},styleOverrides:{root:({theme:r})=>({border:"1px solid",borderRadius:"999px",[`& .${W.label}`]:{fontWeight:600},variants:[{props:{color:"default"},style:{borderColor:u[200],backgroundColor:u[100],[`& .${W.label}`]:{color:u[500]},[`& .${W.icon}`]:{color:u[500]},...r.applyStyles("dark",{borderColor:u[700],backgroundColor:u[800],[`& .${W.label}`]:{color:u[300]},[`& .${W.icon}`]:{color:u[300]}})}},{props:{color:"success"},style:{borderColor:$[200],backgroundColor:$[50],[`& .${W.label}`]:{color:$[500]},[`& .${W.icon}`]:{color:$[500]},...r.applyStyles("dark",{borderColor:$[800],backgroundColor:$[900],[`& .${W.label}`]:{color:$[300]},[`& .${W.icon}`]:{color:$[300]}})}},{props:{color:"error"},style:{borderColor:N[100],backgroundColor:N[50],[`& .${W.label}`]:{color:N[500]},[`& .${W.icon}`]:{color:N[500]},...r.applyStyles("dark",{borderColor:N[800],backgroundColor:N[900],[`& .${W.label}`]:{color:N[200]},[`& .${W.icon}`]:{color:N[300]}})}},{props:{size:"small"},style:{maxHeight:20,[`& .${W.label}`]:{fontSize:r.typography.caption.fontSize},[`& .${ye.root}`]:{fontSize:r.typography.caption.fontSize}}},{props:{size:"medium"},style:{[`& .${W.label}`]:{fontSize:r.typography.caption.fontSize}}}]})}},MuiTablePagination:{styleOverrides:{actions:{display:"flex",gap:8,marginRight:6,[`& .${Jr.root}`]:{minWidth:0,width:36,height:36}}}},MuiIcon:{defaultProps:{fontSize:"small"},styleOverrides:{root:{variants:[{props:{fontSize:"small"},style:{fontSize:"1rem"}}]}}}},Et={MuiAlert:{styleOverrides:{root:({theme:r})=>({borderRadius:10,backgroundColor:q[100],color:r.palette.text.primary,border:`1px solid ${y(q[300],.5)}`,"& .MuiAlert-icon":{color:q[500]},...r.applyStyles("dark",{backgroundColor:`${y(q[900],.5)}`,border:`1px solid ${y(q[800],.5)}`})})}},MuiDialog:{styleOverrides:{root:({theme:r})=>({"& .MuiDialog-paper":{borderRadius:"10px",border:"1px solid",borderColor:r.palette.divider}})}},MuiLinearProgress:{styleOverrides:{root:({theme:r})=>({height:8,borderRadius:8,backgroundColor:u[200],...r.applyStyles("dark",{backgroundColor:u[800]})})}}},Wt={MuiMenuItem:{styleOverrides:{root:({theme:r})=>({borderRadius:r.shape.borderRadius,padding:"6px 8px",[`&.${ke.focusVisible}`]:{backgroundColor:"transparent"},[`&.${ke.selected}`]:{[`&.${ke.focusVisible}`]:{backgroundColor:y(r.palette.action.selected,.3)}}})}},MuiMenu:{styleOverrides:{list:{gap:"0px",[`&.${Qr.root}`]:{margin:"0 -8px"}},paper:({theme:r})=>({marginTop:"4px",borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,backgroundImage:"none",background:"hsl(0, 0%, 100%)",boxShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px",[`& .${dr.root}`]:{"&.Mui-selected":{backgroundColor:y(r.palette.action.selected,.3)}},...r.applyStyles("dark",{background:u[900],boxShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"})})}},MuiSelect:{defaultProps:{IconComponent:s.forwardRef((r,t)=>e.jsx(Kr,{fontSize:"small",...r,ref:t}))},styleOverrides:{root:({theme:r})=>({borderRadius:r.shape.borderRadius,border:"1px solid",borderColor:u[200],backgroundColor:r.palette.background.paper,boxShadow:"inset 0 1px 0 1px hsla(220, 0%, 100%, 0.6), inset 0 -1px 0 1px hsla(220, 35%, 90%, 0.5)","&:hover":{borderColor:u[300],backgroundColor:r.palette.background.paper,boxShadow:"none"},[`&.${Ue.focused}`]:{outlineOffset:0,borderColor:u[400]},"&:before, &:after":{display:"none"},...r.applyStyles("dark",{borderRadius:r.shape.borderRadius,borderColor:u[700],backgroundColor:r.palette.background.paper,boxShadow:`inset 0 1px 0 1px ${y(u[700],.15)}, inset 0 -1px 0 1px hsla(220, 0%, 0%, 0.7)`,"&:hover":{borderColor:y(u[700],.7),backgroundColor:r.palette.background.paper,boxShadow:"none"},[`&.${Ue.focused}`]:{outlineOffset:0,borderColor:u[900]},"&:before, &:after":{display:"none"}})}),select:({theme:r})=>({display:"flex",alignItems:"center",...r.applyStyles("dark",{display:"flex",alignItems:"center","&:focus-visible":{backgroundColor:u[900]}})})}},MuiLink:{defaultProps:{underline:"none"},styleOverrides:{root:({theme:r})=>({color:r.palette.text.primary,fontWeight:500,position:"relative",textDecoration:"none",width:"fit-content","&::before":{content:'""',position:"absolute",width:"100%",height:"1px",bottom:0,left:0,backgroundColor:r.palette.text.secondary,opacity:.3,transition:"width 0.3s ease, opacity 0.3s ease"},"&:hover::before":{width:0},"&:focus-visible":{outline:`3px solid ${y(b[500],.5)}`,outlineOffset:"4px",borderRadius:"2px"}})}},MuiDrawer:{styleOverrides:{paper:({theme:r})=>({backgroundColor:r.palette.background.default})}},MuiPaginationItem:{styleOverrides:{root:({theme:r})=>({"&.Mui-selected":{color:"white",backgroundColor:r.palette.grey[900]},...r.applyStyles("dark",{"&.Mui-selected":{color:"black",backgroundColor:r.palette.grey[50]}})})}},MuiTabs:{styleOverrides:{root:{minHeight:"fit-content"},indicator:({theme:r})=>({backgroundColor:r.palette.grey[800],...r.applyStyles("dark",{backgroundColor:r.palette.grey[200]})})}},MuiTab:{styleOverrides:{root:({theme:r})=>({padding:"6px 8px",marginBottom:"8px",textTransform:"none",minWidth:"fit-content",minHeight:"fit-content",color:r.palette.text.secondary,borderRadius:r.shape.borderRadius,border:"1px solid",borderColor:"transparent",":hover":{color:r.palette.text.primary,backgroundColor:u[100],borderColor:u[200]},[`&.${qe.selected}`]:{color:u[900]},...r.applyStyles("dark",{":hover":{color:r.palette.text.primary,backgroundColor:u[800],borderColor:u[700]},[`&.${qe.selected}`]:{color:"#fff"}})})}},MuiStepConnector:{styleOverrides:{line:({theme:r})=>({borderTop:"1px solid",borderColor:r.palette.divider,flex:1,borderRadius:"99px"})}},MuiStepIcon:{styleOverrides:{root:({theme:r})=>({color:"transparent",border:`1px solid ${u[400]}`,width:12,height:12,borderRadius:"50%","& text":{display:"none"},"&.Mui-active":{border:"none",color:r.palette.primary.main},"&.Mui-completed":{border:"none",color:r.palette.success.main},...r.applyStyles("dark",{border:`1px solid ${u[700]}`,"&.Mui-active":{border:"none",color:r.palette.primary.light},"&.Mui-completed":{border:"none",color:r.palette.success.light}}),variants:[{props:{completed:!0},style:{width:12,height:12}}]})}},MuiStepLabel:{styleOverrides:{label:({theme:r})=>({"&.Mui-completed":{opacity:.6,...r.applyStyles("dark",{opacity:.5})}})}}},Lt={MuiAccordion:{defaultProps:{elevation:0,disableGutters:!0},styleOverrides:{root:({theme:r})=>({padding:4,overflow:"clip",backgroundColor:r.palette.background.default,border:"1px solid",borderColor:r.palette.divider,":before":{backgroundColor:"transparent"},"&:not(:last-of-type)":{borderBottom:"none"},"&:first-of-type":{borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:r.shape.borderRadius,borderBottomRightRadius:r.shape.borderRadius}})}},MuiAccordionSummary:{styleOverrides:{root:({theme:r})=>({border:"none",borderRadius:8,"&:hover":{backgroundColor:u[50]},"&:focus-visible":{backgroundColor:"transparent"},...r.applyStyles("dark",{"&:hover":{backgroundColor:u[800]}})})}},MuiAccordionDetails:{styleOverrides:{root:{mb:20,border:"none"}}},MuiPaper:{defaultProps:{elevation:0}},MuiCard:{styleOverrides:{root:({theme:r})=>({padding:16,gap:16,transition:"all 100ms ease",backgroundColor:u[50],borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,boxShadow:"none",...r.applyStyles("dark",{backgroundColor:u[800]}),variants:[{props:{variant:"outlined"},style:{border:`1px solid ${r.palette.divider}`,boxShadow:"none",background:"hsl(0, 0%, 100%)",...r.applyStyles("dark",{background:y(u[900],.4)})}}]})}},MuiCardContent:{styleOverrides:{root:{padding:0,"&:last-child":{paddingBottom:0}}}},MuiCardHeader:{styleOverrides:{root:{padding:0}}},MuiCardActions:{styleOverrides:{root:{padding:0}}}};function zt({children:r,disableCustomTheme:t,themeComponents:o}){const c=s.useMemo(()=>t?{}:cr({cssVariables:{colorSchemeSelector:"data-mui-color-scheme",cssVarPrefix:"template"},colorSchemes:Dt,shadows:Tt,shape:Rt,components:{...Ot,...Mt,...Et,...Wt,...Lt,...o}}),[t,o]);return t?e.jsx(s.Fragment,{children:r}):e.jsx(Xr,{theme:c,disableTransitionOnChange:!0,children:r})}const $t=et(C)({margin:"2px"}),Pe=s.forwardRef(({to:r,children:t,onClick:o},c)=>e.jsx(C,{component:ie,to:r,ref:c,onClick:o,children:t}));function Nt(){const[r,t]=s.useState(null),{logout:o}=X(),c=!!r,a=x=>{t(x.currentTarget)},l=()=>{t(null)},d=()=>{o(),l()};return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{"aria-label":"Open menu",onClick:a,sx:{borderColor:"transparent"},children:e.jsx(rt,{})}),e.jsxs(ir,{anchorEl:r,id:"menu",open:c,onClose:l,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiList-root":{padding:"4px"},"& .MuiPaper-root":{padding:0}},children:[e.jsx(Pe,{to:"/profile",onClick:l,children:"Profile"}),e.jsx(Z,{}),e.jsx(Pe,{to:"/settings",onClick:l,children:"Settings"}),e.jsx(Pe,{to:"/feedback",onClick:l,children:"Feedback"}),e.jsx(Z,{}),e.jsxs($t,{onClick:d,children:[e.jsx(nr,{fontSize:"small"}),e.jsx(Se,{children:"Logout"})]})]})]})}const er=240;function Bt(){const{user:r,viewRole:t}=X(),o=t?{userName:`Viewing as ${t}`,email:`${t.toLowerCase()}@example.com`,userType:t}:r;return e.jsxs(g,{sx:{display:"flex"},children:[e.jsx(ur,{}),e.jsx(lr,{position:"fixed",sx:{zIndex:c=>c.zIndex.drawer+1}}),e.jsxs(ar,{variant:"permanent",sx:{display:{xs:"none",md:"block"},width:er,flexShrink:0,"& .MuiDrawer-paper":{width:er,boxSizing:"border-box"}},children:[e.jsx(Le,{}),e.jsx(g,{sx:{overflow:"auto"},children:o&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",p:2},children:[e.jsx(Ee,{alt:o.userName,src:"/static/images/avatar/7.jpg",sx:{width:36,height:36}}),e.jsxs(g,{sx:{ml:2},children:[e.jsx(h,{variant:"body2",sx:{fontWeight:500,lineHeight:"16px"},children:o.userName}),e.jsx(h,{variant:"caption",sx:{color:"text.secondary"},children:o.email})]}),e.jsx(Nt,{})]}),e.jsx(Z,{}),e.jsx(fr,{})]})})]})]})}const Ft=()=>{const r=Ce();return e.jsxs(je,{maxWidth:"lg",component:"main",role:"main","aria-label":"Git Gud Drivers Homepage",children:[e.jsxs(g,{component:"section","aria-labelledby":"hero-title",sx:{textAlign:"center",py:8,backgroundColor:"background.paper",borderRadius:2,mb:4},children:[e.jsx(h,{variant:"h2",component:"h1",gutterBottom:!0,id:"hero-title",children:"Git Gud Drivers"}),e.jsx(h,{variant:"h5",color:"text.secondary",paragraph:!0,component:"p",children:"A rewards program for professional drivers committed to excellence"}),e.jsxs(g,{role:"navigation","aria-label":"Account access",children:[e.jsx(A,{variant:"contained",size:"large",onClick:()=>r("/register"),sx:{mr:2,minHeight:"44px",minWidth:"88px"},"aria-label":"Sign up for Git Gud Drivers",children:"Sign Up"}),e.jsx(A,{variant:"outlined",size:"large",onClick:()=>r("/login"),sx:{minHeight:"44px",minWidth:"88px"},"aria-label":"Sign in to your account",children:"Sign In"})]})]}),e.jsx(P,{container:!0,spacing:4,sx:{mb:6},justifyContent:"center",alignItems:"center",component:"section","aria-labelledby":"how-it-works-title",children:e.jsxs(P,{item:!0,xs:12,md:4,component:"article",role:"article",children:[e.jsx(h,{variant:"h5",gutterBottom:!0,component:"h2",id:"how-it-works-title",children:"How It Works"}),e.jsxs(g,{component:"ol",sx:{listStyleType:"decimal",pl:3,mb:2},"aria-label":"Steps to join Git Gud Drivers",children:[e.jsx("li",{children:"Apply as a driver"}),e.jsx("li",{children:"Get approved by a sponsor"}),e.jsx("li",{children:"Start earning points"}),e.jsx("li",{children:"Redeem rewards"})]}),e.jsx(h,{variant:"h6",gutterBottom:!0,component:"p",sx:{mt:2},children:"We hope to see you soon!"})]})})]})},ne=({title:r,value:t})=>e.jsxs(g,{sx:{mb:1},children:[e.jsxs(h,{variant:"body1",component:"span",fontWeight:"bold",children:[r,":"]}),e.jsx(h,{variant:"body1",component:"span",sx:{ml:1},children:t})]}),Vt=()=>{const[r,t]=s.useState(null),[o,c]=s.useState(null),[a,l]=s.useState(!0);return s.useEffect(()=>{(async()=>{try{const x=await T.get("/api/admin/about",{withCredentials:!0});console.log("API Response:",x.data),t(x.data)}catch(x){c(x.message)}finally{l(!1)}})()},[]),a?e.jsx(K,{}):o?e.jsxs(h,{color:"error",children:["Error: ",o]}):r?e.jsxs(g,{sx:{maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"About Information"}),e.jsxs(g,{sx:{p:2,mb:2,border:1,borderColor:"divider",borderRadius:2},children:[e.jsx(ne,{title:"Team",value:r.team}),e.jsx(ne,{title:"Version",value:r.version.toString()}),e.jsx(ne,{title:"Release Date",value:new Date(r.release).toLocaleDateString()}),e.jsx(ne,{title:"Product",value:r.product}),e.jsx(ne,{title:"Description",value:r.description})]})]}):e.jsx(h,{children:"No information available."})},Ht=()=>{const r=Ce(),t=wr(),{checkAuth:o}=X(),c=new URLSearchParams(t.search),a=c.get("step")==="2fa"?"2fa":"login",l=c.get("userId"),[d,x]=s.useState(a),[m,v]=s.useState(l||null),[p,n]=s.useState(!1),[i,j]=s.useState(""),[w,R]=s.useState(""),[O,S]=s.useState(""),[k,F]=s.useState(null);s.useEffect(()=>{a==="2fa"&&l&&(x("2fa"),v(l))},[a,l]);const J=async E=>{var ee,ae;E.preventDefault(),n(!0),F(null);try{const z=await T.post("/api/user/login",{username:i,password:w});z.data.requiresTwoFactor?(x("2fa"),v(z.data.userId.toString()),r(`/login?step=2fa&userId=${z.data.userId}`,{replace:!0})):z.data.succeeded?(await o(),r("/dashboard")):F(z.data.message||"Login failed. Please try again.")}catch(z){F(((ae=(ee=z.response)==null?void 0:ee.data)==null?void 0:ae.message)||"Login failed. Please try again.")}finally{n(!1)}},le=async E=>{var ee,ae;E.preventDefault(),n(!0);try{const z=await T.post("/api/user/verify-2fa",{userId:String(m),code:O},{withCredentials:!0});z.data.succeeded?(await o(),r("/dashboard")):F(z.data.message||"Invalid 2FA code. Please try again.")}catch(z){F(((ae=(ee=z.response)==null?void 0:ee.data)==null?void 0:ae.message)||"2FA verification failed. Please try again.")}finally{n(!1)}};return e.jsxs(g,{component:"form",onSubmit:d==="login"?J:le,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:d==="login"?"Login":"2FA Verification"}),k&&e.jsx(L,{severity:"error",sx:{mb:2},children:k}),d==="login"?e.jsxs(e.Fragment,{children:[e.jsx(D,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"username",value:i,onChange:E=>j(E.target.value),required:!0}),e.jsx(D,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"current-password",value:w,onChange:E=>R(E.target.value),required:!0})]}):e.jsx(D,{label:"2FA Code",variant:"outlined",margin:"normal",fullWidth:!0,value:O,onChange:E=>S(E.target.value),required:!0}),e.jsx(A,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:p,children:p?e.jsx(K,{size:24}):d==="login"?"Log In":"Verify 2FA"}),d==="login"&&e.jsxs(g,{sx:{textAlign:"center",mt:2},children:[e.jsx(Me,{component:ie,to:"/register",variant:"body2",sx:{display:"block",mb:1},children:"Don't have an account? Sign Up"}),e.jsx(Me,{component:ie,to:"/reset-password",variant:"body2",children:"Forgot Password? Click here to Reset it"})]})]})},Gt=r=>{const[t,o]=s.useState(0);return s.useEffect(()=>{o((a=>{let l=0;return a.length>=8&&(l+=1),/[A-Z]/.test(a)&&(l+=1),/[0-9]/.test(a)&&(l+=1),/[^A-Za-z0-9]/.test(a)&&(l+=1),l/4*100})(r))},[r]),t},Ut=r=>r.length<8?"Password must be at least 8 characters long.":/[A-Z]/.test(r)?/[0-9]/.test(r)?/[^A-Za-z0-9]/.test(r)?null:"Password must contain at least one special character.":"Password must contain at least one number.":"Password must contain at least one uppercase letter.",qt=()=>{const[r,t]=s.useState(""),[o,c]=s.useState(""),[a,l]=s.useState(""),[d,x]=s.useState(!1),[m,v]=s.useState(!1),[p,n]=s.useState(null),[i,j]=s.useState(null),w=Gt(a),R=Ce(),O=async k=>{var J,le;k.preventDefault(),n(null),j(null);const F=Ut(a);if(F){j(F);return}v(!0);try{const E=await T.post("/api/user/register",{username:r,email:o,password:a,enable2FA:d}),ee=await T.post("/api/user/login",{username:r,password:a});E.data.requiresTwoFactor?R(`/login?step=2fa&userId=${E.data.userId}`):R("/dashboard")}catch(E){n(((le=(J=E.response)==null?void 0:J.data)==null?void 0:le.message)||"Registration failed. Please try again.")}finally{v(!1)}},S=k=>k<33?"error":k<66?"warning":"success";return e.jsxs(g,{component:"form",onSubmit:O,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create Account"}),p&&e.jsx(L,{severity:"error",children:p}),i&&e.jsx(L,{severity:"warning",children:i}),e.jsx(D,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,value:r,onChange:k=>t(k.target.value),required:!0}),e.jsx(D,{label:"Email",type:"email",variant:"outlined",margin:"normal",fullWidth:!0,value:o,onChange:k=>c(k.target.value),required:!0}),e.jsx(D,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,value:a,onChange:k=>l(k.target.value),required:!0}),e.jsxs(g,{sx:{width:"100%",mt:1},children:[e.jsx(de,{variant:"determinate",value:w,color:S(w)}),e.jsxs(h,{variant:"body2",sx:{mt:1},children:["Password strength: ",w<33?"Weak":w<66?"Medium":"Strong"]})]}),e.jsx(ze,{control:e.jsx($e,{checked:d,onChange:k=>x(k.target.checked),color:"primary"}),label:"Enable Two-Factor Authentication (2FA)"}),e.jsx(A,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:m,children:m?e.jsx(K,{size:24}):"Register"}),e.jsx(Me,{component:ie,to:"/login",variant:"body2",children:"Already have an account? Sign in"})]})},_t=()=>{const[r,t]=s.useState({sponsorId:"",reason:""}),[o,c]=s.useState([]),[a,l]=s.useState(null),[d,x]=s.useState(null),m=s.useCallback(async()=>{try{const j=await T.get("/api/driver/available-sponsors");c(j.data),x(null)}catch{x("Failed to load sponsors. Please try again.")}},[]);s.useEffect(()=>{m()},[m]);const v=j=>{const{name:w,value:R}=j.target;t({...r,[w]:R})},p=j=>{t({...r,sponsorId:j.target.value===""?"":Number(j.target.value)})},n=async()=>{if(r.sponsorId===""){x("Please select a sponsor.");return}try{const j=await T.post("/api/driverapp/apply",r);l(j.data.message||"Application submitted successfully!"),x(null)}catch{x("Failed to submit application.")}},i=s.useMemo(()=>o.map(j=>e.jsx(C,{value:j.sponsorID,children:j.companyName},j.sponsorID)),[o]);return e.jsxs(g,{children:[e.jsx(h,{variant:"h5",children:"Driver Application"}),d&&e.jsx(L,{severity:"error",children:d}),a&&e.jsx(L,{severity:"success",children:a}),e.jsxs(_,{fullWidth:!0,margin:"normal",children:[e.jsx(Y,{id:"sponsor-label",children:"Sponsor"}),e.jsx(G,{labelId:"sponsor-label",value:r.sponsorId,onChange:p,fullWidth:!0,children:i})]}),e.jsx(D,{label:"Reason for Application",name:"reason",onChange:v,fullWidth:!0,multiline:!0,margin:"normal"}),e.jsx(A,{variant:"contained",color:"primary",onClick:n,children:"Submit Application"})]})},Yt={0:"Submitted",1:"Approved",2:"Rejected"},Zt=()=>{const[r,t]=s.useState([]),[o,c]=s.useState(!0),[a,l]=s.useState(null),d=async()=>{var i;try{const j=await T.get("/api/sponsor/applications");t(j.data)}catch(j){l(((i=j.response)==null?void 0:i.data)||"Failed to load applications.")}finally{c(!1)}};s.useEffect(()=>{d()},[]);const x=async(i,j)=>{var w;try{await T.post(`/api/sponsor/applications/${i}/process?action=${j}`),t(R=>R.map(O=>O.applicationID===i?{...O,status:j==="approve"?1:2}:O))}catch(R){l(((w=R.response)==null?void 0:w.data)||`Failed to ${j} application.`)}};if(o)return e.jsx(K,{});if(a)return e.jsx(L,{severity:"error",children:a});const m=r.filter(i=>i.status===0),v=r.filter(i=>i.status===1),p=r.filter(i=>i.status===2),n=(i,j)=>i.length>0?i.map(w=>e.jsx(Q,{size:{xs:12,sm:6,md:4},children:e.jsx(se,{children:e.jsxs(oe,{children:[e.jsxs(h,{variant:"subtitle1",children:["Application ID: ",w.applicationID]}),e.jsxs(h,{children:["User ID: ",w.userID]}),e.jsxs(h,{children:["Apply Date: ",w.applyDate]}),e.jsxs(h,{children:["Status: ",Yt[w.status]]}),w.status===0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{color:"primary",variant:"contained",onClick:()=>x(w.applicationID,"approve"),children:"Approve"}),e.jsx(A,{color:"secondary",variant:"contained",onClick:()=>x(w.applicationID,"reject"),sx:{ml:1},children:"Reject"})]})]})})},w.applicationID)):e.jsx(h,{variant:"body2",color:"textSecondary",sx:{mt:2},children:j});return e.jsxs(je,{children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Driver Applications"}),e.jsxs(g,{children:[e.jsx(h,{variant:"h6",children:"Submitted Applications"}),e.jsx(Z,{sx:{mb:2}}),e.jsx(Q,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:n(m,"No pending applications")})]}),e.jsxs(g,{sx:{mt:4},children:[e.jsx(h,{variant:"h6",children:"Approved Applications"}),e.jsx(Z,{sx:{mb:2}}),e.jsx(Q,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:n(v,"No approved applications")})]}),e.jsxs(g,{sx:{mt:4},children:[e.jsx(h,{variant:"h6",children:"Rejected Applications"}),e.jsx(Z,{sx:{mb:2}}),e.jsx(Q,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:n(p,"No rejected applications")})]})]})},Jt=(r="Driver")=>{switch(r){case"Admin":return[{check:t=>t.length>=20,message:"At least 20 characters long"},{check:t=>/[0-9]/.test(t),message:"Contains at least one digit"},{check:t=>/[a-z]/.test(t),message:"Contains at least one lowercase letter"},{check:t=>/[A-Z]/.test(t),message:"Contains at least one uppercase letter"},{check:t=>/[^A-Za-z0-9]/.test(t),message:"Contains at least three symbols"},{check:t=>new Set(t).size>=3,message:"Contains at least 3 unique characters"},{check:t=>/^(?=.*[!@#$%^&*])(?=.*[0-9])(?=.*[A-Z]).*$/.test(t),message:"Combination of numbers, symbols, and uppercase"}];case"Driver":return[{check:t=>t.length>=8,message:"At least 8 characters long"},{check:t=>/[0-9]/.test(t),message:"Contains at least one digit"},{check:t=>/[a-z]/.test(t),message:"Contains at least one lowercase letter"},{check:t=>/[A-Z]/.test(t),message:"Contains at least one uppercase letter"},{check:t=>/[^A-Za-z0-9]/.test(t),message:"Contains at least one special character"},{check:t=>new Set(t).size>=1,message:"Contains at least 1 unique character"}];default:return[{check:t=>t.length>=6,message:"At least 6 characters long"},{check:t=>/[0-9]/.test(t),message:"Contains at least one digit"},{check:t=>/[a-zA-Z]/.test(t),message:"Contains at least one letter"},{check:t=>new Set(t).size>=1,message:"Contains at least 1 unique character"}]}},yr=()=>{const[r,t]=s.useState(""),[o,c]=s.useState(""),[a,l]=s.useState(""),[d,x]=s.useState(""),[m,v]=s.useState(!1),[p,n]=s.useState(!1),[i,j]=s.useState("Driver");s.useEffect(()=>{(async()=>{try{const k=await T.get("/api/user/currentuser");j(k.data.userType)}catch(k){console.error("Error fetching user role:",k)}})()},[]);const w=Jt(i),R=S=>w.every(k=>k.check(S)),O=async S=>{var k,F;if(S.preventDefault(),x(""),v(!1),n(!0),o!==a){x("New passwords do not match"),n(!1);return}if(!R(o)){x("New password does not meet all requirements"),n(!1);return}try{const J=await T.post("/api/user/change-password",{currentPassword:r,newPassword:o});v(!0),t(""),c(""),l("")}catch(J){T.isAxiosError(J)?x(((F=(k=J.response)==null?void 0:k.data)==null?void 0:F.message)||"Failed to change password"):x("An unexpected error occurred")}finally{n(!1)}};return e.jsxs(g,{sx:{width:"100%",maxWidth:400,margin:"auto",mt:4},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Change Password"}),d&&e.jsx(L,{severity:"error",sx:{mt:2,mb:2},children:d}),m&&e.jsx(L,{severity:"success",sx:{mt:2,mb:2},children:"Password changed successfully!"}),e.jsxs(g,{component:"form",onSubmit:O,noValidate:!0,sx:{mt:1},children:[e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,name:"currentPassword",label:"Current Password",type:"password",id:"currentPassword",autoComplete:"current-password",value:r,onChange:S=>t(S.target.value)}),e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New Password",type:"password",id:"newPassword",autoComplete:"new-password",value:o,onChange:S=>c(S.target.value)}),e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:a,onChange:S=>l(S.target.value)}),e.jsxs(g,{sx:{mt:4},children:[e.jsxs(h,{variant:"h6",children:["Password Requirements for ",i,":"]}),w.map((S,k)=>e.jsxs(g,{sx:{display:"flex",alignItems:"center",mt:1},children:[e.jsx(g,{sx:{flexGrow:1,mr:1},children:e.jsx(de,{variant:"determinate",value:S.check(o)?100:0,color:S.check(o)?"success":"error"})}),e.jsx(g,{sx:{minWidth:200},children:e.jsx(h,{variant:"body2",color:"text.secondary",children:S.message})})]},k))]}),e.jsx(A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:p,children:p?e.jsx(K,{size:24}):"Change Password"})]})]})},Qt=()=>{const[r,t]=s.useState([]),[o,c]=s.useState(""),[a,l]=s.useState(!0),[d,x]=s.useState("");s.useEffect(()=>{m()},[]);const m=async()=>{try{l(!0);const n=await T.get("/api/driver/my-sponsors");t(n.data),n.data.length>0&&!o&&c(n.data[0].sponsorId),x("")}catch(n){x("Failed to load sponsor points data"),console.error("Error fetching sponsor points:",n)}finally{l(!1)}},v=n=>{c(n.target.value)};if(a)return e.jsx(g,{sx:{width:"100%",mt:2},children:e.jsx(de,{})});if(d)return e.jsx(h,{color:"error",sx:{mt:2},children:d});if(r.length===0)return e.jsx(h,{sx:{mt:2},children:"You are not currently registered with any sponsors."});const p=r.find(n=>n.sponsorId===o);return e.jsxs(g,{sx:{width:"100%",mb:2,mt:2},children:[e.jsxs(_,{fullWidth:!0,sx:{mb:2},children:[e.jsx(Y,{children:"Select Sponsor"}),e.jsx(G,{value:o,label:"Select Sponsor",onChange:v,children:r.map(n=>e.jsx(C,{value:n.sponsorId,children:n.sponsorName},n.sponsorId))})]}),p&&e.jsx(ce,{children:e.jsx(ue,{children:e.jsxs(pe,{"aria-label":"sponsor points details",children:[e.jsx(he,{children:e.jsxs(U,{children:[e.jsx(f,{children:"Sponsor"}),e.jsx(f,{align:"right",children:"Total Points"}),e.jsx(f,{align:"right",children:"Point Value ($)"}),e.jsx(f,{align:"right",children:"Total Value ($)"})]})}),e.jsx(xe,{children:e.jsxs(U,{children:[e.jsx(f,{children:p.sponsorName}),e.jsx(f,{align:"right",children:p.totalPoints.toLocaleString()}),e.jsxs(f,{align:"right",children:["$",p.pointDollarValue.toFixed(2)]}),e.jsxs(f,{align:"right",children:["$",(p.totalPoints*p.pointDollarValue).toFixed(2)]})]})})]})})})]})},Kt=()=>{const[r,t]=s.useState(null),[o,c]=s.useState(!0),[a,l]=s.useState("");return s.useEffect(()=>{(async()=>{try{c(!0);const x=await T.get("/api/driver/activity");t(x.data)}catch(x){l("Failed to load driver activity"),console.error("Error fetching activity:",x)}finally{c(!1)}})()},[]),o?e.jsx(de,{}):a?e.jsx(h,{color:"error",children:a}):r?e.jsxs(g,{sx:{p:3},children:[r.pointValue&&e.jsx(se,{sx:{mb:4},children:e.jsxs(oe,{children:[e.jsxs(h,{variant:"h6",gutterBottom:!0,children:["Points Value - ",r.pointValue.sponsorName||"Unknown Sponsor"]}),e.jsxs(h,{children:["Current Balance: ",r.pointValue.totalPoints.toLocaleString()," points"]}),e.jsxs(h,{children:["Point Value: $",r.pointValue.pointValue.toFixed(2)," each"]}),e.jsxs(h,{variant:"h5",sx:{mt:2},children:["Total Value: $",r.pointValue.totalValue.toFixed(2)]})]})}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Activity History"}),e.jsx(ue,{component:ce,children:e.jsxs(pe,{children:[e.jsx(he,{children:e.jsxs(U,{children:[e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Type"}),e.jsx(f,{children:"Points"}),e.jsx(f,{children:"Details"}),e.jsx(f,{children:"Status"})]})}),e.jsx(xe,{children:r.transactions&&r.transactions.length>0?r.transactions.map((d,x)=>e.jsxs(U,{children:[e.jsx(f,{children:d.date?new Date(d.date).toLocaleDateString():"N/A"}),e.jsx(f,{children:d.type}),e.jsxs(f,{sx:{color:d.points>0?"success.main":"error.main"},children:[d.points>0?"+":"",d.points]}),e.jsx(f,{children:d.reason}),e.jsx(f,{children:d.status&&e.jsx(we,{label:d.status,color:d.status==="Ordered"?"success":d.status==="Cancelled"?"error":"default",size:"small"})})]},x)):e.jsx(U,{children:e.jsx(f,{colSpan:5,align:"center",children:"No transactions available"})})})]})})]}):null};function rr({icon:r,title:t,value:o,description:c}){return e.jsx(se,{sx:{height:"100%"},children:e.jsxs(oe,{children:[e.jsx(r,{sx:{color:"primary.main",mb:1}}),e.jsx(h,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600",mb:1},children:t}),e.jsx(h,{variant:"h4",sx:{mb:1},children:o}),e.jsx(h,{sx:{color:"text.secondary",mb:1},children:c})]})})}function Xt(){const r=We(),t=tt(r.breakpoints.down("sm")),[o,c]=s.useState([]),[a,l]=s.useState(!0),[d,x]=s.useState(null);if(s.useEffect(()=>{(async()=>{try{const p=await fetch("/api/sponsor/drivers",{credentials:"include"});if(!p.ok)throw new Error("Failed to fetch drivers");const n=await p.json();c(n)}catch(p){x(p instanceof Error?p.message:"An error occurred while fetching drivers")}finally{l(!1)}})()},[]),a)return e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(K,{})});if(d)return e.jsx(L,{severity:"error",sx:{mb:2},children:d});const m=o.reduce((v,p)=>v+p.totalPoints,0);return e.jsxs(g,{sx:{width:"100%"},children:[e.jsx(h,{component:"h2",variant:"h6",sx:{mb:2},children:"Sponsored Drivers Overview"}),e.jsxs(Q,{container:!0,spacing:2,columns:12,children:[e.jsx(Q,{size:{xs:12,lg:9},children:e.jsx(se,{sx:{height:"100%"},children:e.jsxs(oe,{children:[o.length===0?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsx(h,{color:"text.secondary",children:"No drivers found under your sponsorship."})}):e.jsx(ue,{children:e.jsxs(pe,{sx:{minWidth:650},children:[e.jsx(he,{children:e.jsxs(U,{children:[e.jsx(f,{children:"Driver ID"}),e.jsx(f,{children:"Email"}),e.jsx(f,{align:"right",children:"Total Points"})]})}),e.jsx(xe,{children:o.map(v=>e.jsxs(U,{children:[e.jsx(f,{component:"th",scope:"row",children:v.userID}),e.jsx(f,{children:v.email}),e.jsx(f,{align:"right",children:v.totalPoints.toLocaleString()})]},v.userID))})]})}),e.jsx(g,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(A,{variant:"contained",size:"small",color:"primary",endIcon:e.jsx(_e,{}),fullWidth:t,children:"View All Drivers"})})]})})}),e.jsx(Q,{size:{xs:12,lg:3},children:e.jsxs(B,{gap:2,direction:{xs:"column",sm:"row",lg:"column"},children:[e.jsx(rr,{icon:Ye,title:"Active Drivers",value:o.length.toString(),description:"Currently sponsored drivers"}),e.jsx(rr,{icon:st,title:"Total Points",value:m.toLocaleString(),description:"Accumulated driver points"})]})})]}),e.jsx(h,{component:"h2",variant:"h6",sx:{mb:2,mt:4},children:"Driver Management"}),e.jsx(Q,{container:!0,spacing:2,columns:12,children:e.jsx(Q,{size:{xs:12,sm:6,lg:4},children:e.jsx(se,{sx:{height:"100%"},children:e.jsxs(oe,{children:[e.jsx(Ye,{sx:{color:"primary.main",mb:1}}),e.jsx(h,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600"},children:"Manage Drivers"}),e.jsx(h,{sx:{color:"text.secondary",mb:2},children:"Add or remove drivers from your sponsorship."}),e.jsx(A,{variant:"contained",size:"small",color:"primary",endIcon:e.jsx(_e,{}),fullWidth:t,children:"Manage Drivers"})]})})})})]})}const es=()=>{const[r,t]=s.useState([]),[o,c]=s.useState([]),[a,l]=s.useState(!0),[d,x]=s.useState(null),[m,v]=s.useState(null),[p,n]=s.useState(!1);s.useEffect(()=>{i()},[]);const i=async()=>{var R,O;try{const S=await T.get("/api/driver/available-sponsors",{withCredentials:!0});t(Array.isArray(S.data)?S.data:[]),console.log("Sponsors response:",S.data)}catch(S){if(T.isAxiosError(S)){const k=((R=S.response)==null?void 0:R.data)||"Error loading sponsors. Please try again later.";x(typeof k=="string"?k:"An error occurred."),console.error("Axios error:",(O=S.response)==null?void 0:O.data)}else x("Error loading sponsors. Please try again later."),console.error("Error:",S);t([])}finally{l(!1)}},j=R=>{c(O=>O.includes(R)?O.filter(S=>S!==R):[...O,R])},w=async()=>{var R,O;if(o.length===0){x("Please select at least one sponsor");return}n(!0),x(null),v(null);try{const S=await T.post("/api/driver/register-sponsors",o,{withCredentials:!0,headers:{"Content-Type":"application/json"}});v(S.data||"Successfully registered with selected sponsors!"),c([]),i()}catch(S){if(T.isAxiosError(S)){const k=((R=S.response)==null?void 0:R.data)||"Failed to register with sponsors. Please try again.";x(typeof k=="string"?k:"Registration failed."),console.error("Axios error:",(O=S.response)==null?void 0:O.data)}else x("Failed to register with sponsors. Please try again."),console.error("Error:",S)}finally{n(!1)}};return a?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(K,{})}):e.jsxs(g,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(h,{variant:"h5",component:"h1",gutterBottom:!0,children:"Select Sponsors"}),e.jsx(se,{sx:{mb:2,bgcolor:"background.paper"},children:e.jsxs(oe,{children:[e.jsxs(B,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e.jsx(h,{variant:"subtitle1",children:"Available Reward Programs"}),e.jsx(pr,{title:"Select multiple sponsors to join their reward programs",children:e.jsx(ot,{color:"action",fontSize:"small"})})]}),d&&e.jsx(L,{severity:"error",sx:{mb:2},children:d}),m&&e.jsx(L,{severity:"success",sx:{mb:2},children:m}),e.jsx(at,{children:r.length===0?e.jsx(h,{color:"text.secondary",children:"No available sponsors found."}):r.map(R=>e.jsxs(g,{sx:{mb:2},children:[e.jsx(ze,{control:e.jsx($e,{checked:o.includes(R.sponsorID),onChange:()=>j(R.sponsorID),color:"primary"}),label:e.jsxs(B,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(nt,{color:"action"}),e.jsx(h,{children:R.companyName}),e.jsx(we,{icon:e.jsx(it,{}),label:`$${R.pointDollarValue} per point`,size:"small",color:"primary",variant:"outlined"})]})}),e.jsx(Z,{sx:{ml:7,my:1}})]},R.sponsorID))}),e.jsx(A,{variant:"contained",color:"primary",onClick:w,disabled:o.length===0||p,sx:{mt:2},children:p?e.jsx(K,{size:24,color:"inherit"}):`Register with ${o.length} Sponsor${o.length!==1?"s":""}`})]})})]})},rs=()=>{const{driverId:r}=Ir(),[t,o]=s.useState([]),[c,a]=s.useState(!0),[l,d]=s.useState("");return s.useEffect(()=>{(async()=>{try{a(!0);const m=await T.get("/api/driver/transactions");o(m.data),d("")}catch(m){d("Failed to load transaction data"),console.error("Error fetching transactions:",m)}finally{a(!1)}})()},[r]),c?e.jsx(g,{sx:{width:"100%",mt:2},children:e.jsx(de,{})}):l?e.jsx(h,{color:"error",sx:{mt:2},children:l}):e.jsx(ce,{sx:{width:"100%",mb:2,mt:2},children:e.jsx(ue,{children:e.jsxs(pe,{"aria-label":"driver transactions table",children:[e.jsx(he,{children:e.jsxs(U,{children:[e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Points Changed"}),e.jsx(f,{children:"Reason"})]})}),e.jsx(xe,{children:t.map(x=>e.jsxs(U,{children:[e.jsx(f,{children:new Date(x.transactionDate).toLocaleDateString()}),e.jsx(f,{children:x.pointsChanged}),e.jsx(f,{children:x.reason})]},x.transactionId))})]})})})},Sr=({dateRange:r,setDateRange:t})=>{const[o,c]=r,[a,l]=s.useState(!1),d=x=>{const m=new Date,v=new Date;v.setDate(m.getDate()-x),t([v,m])};return e.jsx(lt,{dateAdapter:ct,children:e.jsxs(B,{direction:"column",spacing:2,alignItems:"flex-start",sx:{mb:2},children:[e.jsx(ze,{control:e.jsx($e,{checked:a,onChange:()=>l(!a)}),label:"Custom Date Range"}),a?e.jsxs(B,{direction:"row",spacing:2,alignItems:"center",children:[e.jsxs(g,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ze,{fontSize:"small"}),e.jsx(Je,{label:"Start",value:o,onChange:x=>t([x,c]),disableFuture:!0})]}),e.jsxs(g,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ze,{fontSize:"small"}),e.jsx(Je,{label:"End",value:c,onChange:x=>t([o,x]),disableFuture:!0})]})]}):e.jsxs(B,{direction:"row",spacing:1,children:[e.jsx(A,{variant:"outlined",size:"small",onClick:()=>d(7),children:"Last 7 Days"}),e.jsx(A,{variant:"outlined",size:"small",onClick:()=>d(30),children:"Last 30 Days"}),e.jsx(A,{variant:"outlined",size:"small",onClick:()=>d(365),children:"Last Year"})]})]})})};function Cr({reportType:r,viewType:t,selectedSponsor:o,selectedDriver:c,dateRange:a}){const l=We(),[d,x]=s.useState([]),[m,v]=s.useState([]);s.useEffect(()=>{const j=(()=>{switch(r){case"salesBySponsor":return t==="detailed"?[{date:"Date 1",driver1:100,driver2:150,driver3:200},{date:"Date 2",driver1:120,driver2:140,driver3:210},{date:"Date 3",driver1:130,driver2:160,driver3:220}]:[{sponsor:"Sponsor A",totalPoints:450},{sponsor:"Sponsor B",totalPoints:470},{sponsor:"Sponsor C",totalPoints:510}];case"salesByDriver":return t==="detailed"?[{date:"Date 1",driver1:50,driver2:75,driver3:90},{date:"Date 2",driver1:60,driver2:80,driver3:95},{date:"Date 3",driver1:70,driver2:85,driver3:100}]:[{driver:"Driver 1",totalPoints:250},{driver:"Driver 2",totalPoints:240},{driver:"Driver 3",totalPoints:260}];case"invoice":return[{driver:"Driver 1",redeemedPoints:120,fee:10},{driver:"Driver 2",redeemedPoints:150,fee:15},{driver:"Driver 3",redeemedPoints:180,fee:20}];case"driverPoints":return t==="detailed"?[{date:"Date 1",pointEarned:50,pointRedeemed:20},{date:"Date 2",pointEarned:70,pointRedeemed:30},{date:"Date 3",pointEarned:60,pointRedeemed:25}]:[{driver:"Driver 1",totalPoints:150},{driver:"Driver 2",totalPoints:170},{driver:"Driver 3",totalPoints:140}];default:return[]}})();x(j),v(j.map(w=>w.date||w.sponsor||w.driver))},[r,t,o,c,a]);const p=()=>e.jsx(dt,{xAxis:[{data:m,scaleType:"band"}],series:t==="detailed"&&(r==="salesBySponsor"||r==="salesByDriver")?[{data:d.map(i=>i.driver1||0),label:"Driver 1",stack:"drivers",color:l.palette.primary.light},{data:d.map(i=>i.driver2||0),label:"Driver 2",stack:"drivers",color:l.palette.primary.main},{data:d.map(i=>i.driver3||0),label:"Driver 3",stack:"drivers",color:l.palette.primary.dark}]:t==="detailed"&&r==="driverPoints"?[{data:d.map(i=>i.pointEarned||0),label:"Points Earned",color:l.palette.success.main},{data:d.map(i=>i.pointRedeemed||0),label:"Points Redeemed",color:l.palette.error.main}]:[{data:d.map(i=>i.totalPoints),label:r==="salesBySponsor"?"Total Sales by Sponsor":"Total Sales by Driver",color:l.palette.primary.main}],height:300,grid:{horizontal:!0}}),n=()=>e.jsx(ut,{series:[{data:d.map(i=>({id:i.driver,value:i.redeemedPoints,label:i.driver,color:l.palette.primary.main}))}],height:300});return e.jsx("div",{children:r==="invoice"?n():p()})}function ts(){const[r,t]=s.useState("driverPoints"),[o,c]=s.useState("summary"),[a,l]=s.useState("all"),[d,x]=s.useState([null,null]);return e.jsxs(g,{children:[e.jsx(h,{variant:"h5",sx:{mb:2},"aria-label":"Sponsor Reports Dashboard",children:"Sponsor Reports Dashboard"}),e.jsxs(B,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"report-type-label",children:"Report Type"}),e.jsx(G,{labelId:"report-type-label",value:r,onChange:m=>t(m.target.value),label:"Report Type","aria-label":"Select Report Type for Sponsor",children:e.jsx(C,{value:"driverPoints",children:"Driver Points Tracking"})})]}),e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"view-type-label",children:"View Type"}),e.jsxs(G,{labelId:"view-type-label",value:o,onChange:m=>c(m.target.value),label:"View Type","aria-label":"Select View Type for Sponsor",children:[e.jsx(C,{value:"summary",children:"Summary"}),e.jsx(C,{value:"detailed",children:"Detailed"})]})]}),e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"select-driver-label",children:"Select Driver"}),e.jsxs(G,{labelId:"select-driver-label",value:a,onChange:m=>l(m.target.value),label:"Select Driver","aria-label":"Select Driver for Driver Points Tracking",children:[e.jsx(C,{value:"all",children:"All Drivers"}),e.jsx(C,{value:1,children:"Driver 1"}),e.jsx(C,{value:2,children:"Driver 2"})]})]})]}),e.jsx(Sr,{dateRange:d,setDateRange:x}),e.jsx(g,{sx:{mt:4},children:e.jsx(Cr,{reportType:r,viewType:o,selectedDriver:a,dateRange:d,"aria-label":"Sponsor Report Chart"})})]})}function ss(){const[r,t]=s.useState("salesBySponsor"),[o,c]=s.useState("summary"),[a,l]=s.useState([null,null]),[d,x]=s.useState("all"),[m,v]=s.useState("all"),p=r==="salesByDriver"&&d!=="all";return e.jsxs(g,{children:[e.jsx(h,{variant:"h5",sx:{mb:2},"aria-label":"Admin Reports Dashboard",children:"Admin Reports Dashboard"}),e.jsxs(B,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"report-type-label",children:"Report Type"}),e.jsxs(G,{labelId:"report-type-label",value:r,onChange:n=>t(n.target.value),label:"Report Type","aria-label":"Select Report Type",children:[e.jsx(C,{value:"salesBySponsor",children:"Sales by Sponsor"}),e.jsx(C,{value:"salesByDriver",children:"Sales by Driver"}),e.jsx(C,{value:"invoice",children:"Invoice Report"})]})]}),e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"view-type-label",children:"View Type"}),e.jsxs(G,{labelId:"view-type-label",value:o,onChange:n=>c(n.target.value),label:"View Type","aria-label":"Select View Type",children:[e.jsx(C,{value:"summary",children:"Summary"}),e.jsx(C,{value:"detailed",children:"Detailed"})]})]}),(r==="salesBySponsor"||r==="invoice")&&e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"select-sponsor-label",children:"Select Sponsor"}),e.jsxs(G,{labelId:"select-sponsor-label",value:d,onChange:n=>x(n.target.value),label:"Select Sponsor","aria-label":"Select Sponsor",children:[e.jsx(C,{value:"all",children:"All Sponsors"}),e.jsx(C,{value:101,children:"Sponsor A"}),e.jsx(C,{value:102,children:"Sponsor B"})]})]}),r==="salesByDriver"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"select-sponsor-label",children:"Select Sponsor"}),e.jsxs(G,{labelId:"select-sponsor-label",value:d,onChange:n=>x(n.target.value),label:"Select Sponsor","aria-label":"Select Sponsor for Sales by Driver",children:[e.jsx(C,{value:"all",children:"All Sponsors"}),e.jsx(C,{value:101,children:"Sponsor A"}),e.jsx(C,{value:102,children:"Sponsor B"})]})]}),p&&e.jsxs(_,{sx:{minWidth:180},children:[e.jsx(Y,{id:"select-driver-label",children:"Select Driver"}),e.jsxs(G,{labelId:"select-driver-label",value:m,onChange:n=>v(n.target.value),label:"Select Driver","aria-label":"Select Driver for Individual Sponsor",children:[e.jsx(C,{value:"all",children:"All Drivers"}),e.jsx(C,{value:1,children:"Driver 1"}),e.jsx(C,{value:2,children:"Driver 2"})]})]})]})]}),e.jsx(Sr,{dateRange:a,setDateRange:l}),e.jsx(g,{sx:{mt:4},children:e.jsx(Cr,{reportType:r,viewType:o,selectedSponsor:d,selectedDriver:m,dateRange:a,"aria-label":"Admin Report Chart"})})]})}const os=()=>{const[r,t]=s.useState([]),[o,c]=s.useState(!0),[a,l]=s.useState(""),[d,x]=s.useState("");s.useEffect(()=>{m()},[]);const m=async()=>{try{c(!0);const p=await T.get("/api/admin/drivers/details");t(p.data),l("")}catch(p){l("Failed to load driver data"),console.error("Error fetching drivers:",p)}finally{c(!1)}},v=Array.isArray(r)?r.filter(p=>p.name.toLowerCase().includes(d.toLowerCase())||p.email.toLowerCase().includes(d.toLowerCase())||p.sponsorRelationships.some(n=>n.sponsorName.toLowerCase().includes(d.toLowerCase()))):[];return o?e.jsx(g,{sx:{width:"100%",mt:2},children:e.jsx(de,{})}):a?e.jsx(L,{severity:"error",sx:{mt:2},children:a}):e.jsxs(g,{sx:{width:"100%",p:3},children:[e.jsx(h,{variant:"h5",gutterBottom:!0,children:"Driver-Sponsor Associations"}),e.jsxs(g,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(D,{fullWidth:!0,variant:"outlined",placeholder:"Search by driver name, email, or sponsor...",value:d,onChange:p=>x(p.target.value)}),e.jsx(te,{sx:{ml:-4},children:e.jsx(pt,{})})]}),e.jsx(ue,{component:ce,children:e.jsxs(pe,{children:[e.jsx(he,{children:e.jsxs(U,{children:[e.jsx(f,{children:"Driver Name"}),e.jsx(f,{children:"Email"}),e.jsx(f,{children:"Sponsors"}),e.jsx(f,{align:"center",children:"Total Sponsors"}),e.jsx(f,{children:"Points Distribution"})]})}),e.jsx(xe,{children:v.map(p=>e.jsxs(U,{children:[e.jsx(f,{children:p.name}),e.jsx(f,{children:p.email}),e.jsx(f,{children:e.jsx(g,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:p.sponsorRelationships.map(n=>e.jsx(we,{label:n.sponsorName,size:"small",color:"primary"},n.sponsorId))})}),e.jsx(f,{align:"center",children:p.sponsorRelationships.length}),e.jsx(f,{children:e.jsx(g,{sx:{display:"flex",alignItems:"center",gap:1},children:p.sponsorRelationships.map(n=>e.jsx(pr,{title:`${n.sponsorName}: ${n.points} points`,children:e.jsx(g,{sx:{display:"flex",alignItems:"center"},children:e.jsx(h,{variant:"body2",children:n.points})})},n.sponsorId))})})]},p.userId))})]})})]})},De={1:"User",2:"Point",3:"Purchase",4:"Application",5:"Product",6:"System"},Re=[{logID:1,userID:1,category:1,description:"Admin User logged in",timestamp:"2024-11-06T14:23:30Z"},{logID:2,userID:10,category:2,description:"Points added to DriverTR1",timestamp:"2024-11-06T14:50:00Z"},{logID:3,userID:10,category:3,description:"DriverTR1 purchased glasses",timestamp:"2024-11-06T15:10:00Z"},{logID:4,userID:10,category:4,description:"Applied for sponsorship with Speedy Stats",timestamp:"2024-11-06T15:10:00Z"},{logID:5,userID:1,category:5,description:"New Product Added to catalog",timestamp:"2024-11-06T15:10:00Z"},{logID:6,userID:1,category:6,description:"System back up complete",timestamp:"2024-11-06T15:10:00Z"}],as=()=>{var p;const[r,t]=s.useState(Re);s.useState(Re.length);const[o,c]=s.useState({page:0,pageSize:10}),a=(n,i)=>{c(j=>({...j,page:i}))},l=n=>{c(i=>({...i,pageSize:parseInt(n.target.value,10),page:0}))},d=n=>{const i=n.target.value===""?void 0:parseInt(n.target.value);c(j=>({...j,category:i,page:0}))},x=n=>De[n]||"Unknown",m=r.filter(n=>{const i=o.userID?n.userID===o.userID:!0,j=o.category?n.category===o.category:!0,w=o.searchTerm?n.description.toLowerCase().includes(o.searchTerm.toLowerCase()):!0;return i&&j&&w}),v=m.slice(o.page*o.pageSize,(o.page+1)*o.pageSize);return e.jsx(g,{sx:{p:3},children:e.jsxs(P,{container:!0,spacing:3,children:[e.jsx(P,{item:!0,xs:12,children:e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Audit Log Dashboard"})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(ce,{sx:{p:2,mb:2},children:e.jsxs(P,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(P,{item:!0,xs:12,sm:6,md:3,children:e.jsx(D,{fullWidth:!0,label:"User ID",type:"number",value:o.userID||"",onChange:n=>c(i=>({...i,userID:n.target.value?parseInt(n.target.value):void 0,page:0}))})}),e.jsx(P,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(_,{fullWidth:!0,children:[e.jsx(Y,{children:"Category"}),e.jsxs(G,{value:((p=o.category)==null?void 0:p.toString())||"",label:"Category",onChange:d,children:[e.jsx(C,{value:"",children:"All"}),Object.keys(De).map(n=>e.jsx(C,{value:n,children:De[parseInt(n)]},n))]})]})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(D,{fullWidth:!0,label:"Search Description",value:o.searchTerm||"",onChange:n=>c(i=>({...i,searchTerm:n.target.value||void 0,page:0}))})})]})})}),e.jsx(P,{item:!0,xs:12,children:e.jsxs(ce,{children:[e.jsx(g,{sx:{display:"flex",justifyContent:"flex-end",p:2},children:e.jsx(te,{onClick:()=>t([...Re]),children:e.jsx(ht,{})})}),e.jsx(ue,{children:e.jsxs(pe,{children:[e.jsx(he,{children:e.jsxs(U,{children:[e.jsx(f,{children:"Log ID"}),e.jsx(f,{children:"User ID"}),e.jsx(f,{children:"Category"}),e.jsx(f,{children:"Description"}),e.jsx(f,{children:"Timestamp"})]})}),e.jsx(xe,{children:v.map(n=>e.jsxs(U,{children:[e.jsx(f,{children:n.logID}),e.jsx(f,{children:n.userID}),e.jsx(f,{children:e.jsx(we,{label:x(n.category),size:"small",color:ns(n.category)})}),e.jsx(f,{children:n.description}),e.jsx(f,{children:kr(new Date(n.timestamp),"MMM dd, yyyy HH:mm:ss")})]},n.logID))})]})}),e.jsx(xt,{component:"div",count:m.length,page:o.page,onPageChange:a,rowsPerPage:o.pageSize,onRowsPerPageChange:l,rowsPerPageOptions:[5,10,25,50]})]})})]})})},ns=r=>({0:"primary",1:"secondary",2:"success",3:"info",4:"warning",5:"error"})[r]||"default",is=({profileData:r,onSave:t=c=>console.log("Default save function",c),onUpdate:o=c=>console.log("Default update function",c)})=>{const c=r||{firstName:"",lastName:"",phone:"",address:"",gender:"",nationality:"",preferredPronouns:"",dateOfBirth:"",profilePicture:""},[a,l]=s.useState(c),[d,x]=s.useState("");s.useEffect(()=>{const i=localStorage.getItem("userProfile");if(i){const j=JSON.parse(i);l(j),typeof j.profilePicture=="string"&&x(j.profilePicture)}},[]),s.useEffect(()=>{localStorage.setItem("userProfile",JSON.stringify(a))},[a]);const m=i=>{const{name:j,value:w}=i.target;l({...a,[j]:w})},v=i=>{const j=i.target.files?i.target.files[0]:null;if(j){const w=URL.createObjectURL(j);x(w),l({...a,profilePicture:j})}},p=()=>{t(a),localStorage.setItem("userProfile",JSON.stringify(a))},n=()=>{o(a),localStorage.setItem("userProfile",JSON.stringify(a))};return e.jsx(je,{maxWidth:"xs",children:e.jsxs(g,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ee,{sx:{m:1,bgcolor:"primary.light"},children:e.jsx(gt,{})}),e.jsx(h,{variant:"h5",children:"User Profile"}),e.jsxs(g,{sx:{mt:3},children:[e.jsxs(P,{container:!0,spacing:2,children:[e.jsx(P,{item:!0,xs:12,sm:6,children:e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,label:"First Name",name:"firstName",value:a.firstName,onChange:m})}),e.jsx(P,{item:!0,xs:12,sm:6,children:e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,label:"Last Name",name:"lastName",value:a.lastName,onChange:m})})]}),e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,label:"Phone Number",name:"phone",value:a.phone,onChange:m}),e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,label:"Address",name:"address",value:a.address,onChange:m}),e.jsxs(D,{select:!0,margin:"normal",fullWidth:!0,label:"Gender",name:"gender",value:a.gender,onChange:m,children:[e.jsx(C,{value:"Male",children:"Male"}),e.jsx(C,{value:"Female",children:"Female"}),e.jsx(C,{value:"Non-Binary",children:"Non-Binary"}),e.jsx(C,{value:"Other",children:"Other"})]}),e.jsx(D,{margin:"normal",required:!0,fullWidth:!0,label:"Nationality",name:"nationality",value:a.nationality,onChange:m}),e.jsx(D,{margin:"normal",fullWidth:!0,label:"Preferred Pronouns",name:"preferredPronouns",value:a.preferredPronouns,onChange:m}),e.jsx(D,{margin:"normal",fullWidth:!0,label:"Date of Birth",name:"dateOfBirth",type:"date",InputLabelProps:{shrink:!0},value:a.dateOfBirth,onChange:m}),d&&e.jsx(g,{component:"img",src:d,alt:"Profile Preview",sx:{width:"100%",height:"auto",maxHeight:"200px",mt:2,mb:2}}),e.jsxs(A,{variant:"contained",component:"label",fullWidth:!0,sx:{mt:2,mb:2},children:["Upload Profile Picture",e.jsx("input",{type:"file",hidden:!0,name:"profilePicture",accept:"image/*",onChange:v})]}),e.jsx(A,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:p,children:"Save"}),e.jsx(A,{fullWidth:!0,variant:"outlined",sx:{mt:1,mb:2},onClick:n,children:"Update Profile"})]})]})})},ls={MAIN:e.jsx(g,{children:e.jsx(h,{variant:"h6",children:"Dashboard Home"})}),CHANGE_PASSWORD:e.jsx(yr,{}),MANAGE_USERS:e.jsx(h,{children:"Manage Users"}),MANAGE_DRIVERS:e.jsx(os,{}),ADMIN_REPORTS:e.jsx(ss,{}),ADMIN_AUDIT_REPORTS:e.jsx(as,{}),DRIVER_APPLICATION:e.jsx(_t,{}),DRIVER_REGISTRATION:e.jsx(es,{}),DRIVER_POINTS:e.jsx(Qt,{}),DRIVER_ACTIVITY:e.jsx(Kt,{}),DRIVER_POINTS_HISTORY:e.jsx(rs,{}),PROFILE:e.jsx(is,{}),APPLICATION_MANAGER:e.jsx(Zt,{}),SPONSOR_REPORTS:e.jsx(ts,{}),SPONSOR_AUDIT_REPORTS:e.jsx(h,{children:"Audit Reports"}),SPONSOR_DRIVERS:e.jsx(Xt,{})};function cs(){const{currentView:r}=vr();return s.useEffect(()=>{console.log("Rendering MainGrid with current view:",r)},[r]),e.jsx(g,{sx:{width:"100%"},children:ls[r]||e.jsx(h,{children:"Select an option to view content"})})}const ds=()=>{const{user:r,viewRole:t,setViewRole:o}=X();t||(r==null||r.userType);const c=l=>{o(l.target.value)},a=()=>{o(null)};return e.jsxs(g,{sx:{display:"flex",width:"100%",minHeight:"100vh"},children:[e.jsx(ur,{}),e.jsxs(g,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",ml:"15px"},children:[e.jsx(g,{sx:{p:2},children:e.jsxs(B,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(h,{variant:"h6",children:"Dashboard"}),r&&(r.userType==="Admin"||r.userType==="Sponsor")&&e.jsxs(G,{value:t||"",onChange:c,displayEmpty:!0,sx:{minWidth:180},renderValue:()=>"Select a role to view",children:[e.jsx(C,{disabled:!0,value:"",children:e.jsx("em",{children:"Select a role to view"})}),r.userType==="Admin"&&[e.jsx(C,{value:"Driver",children:"Driver"},"Driver"),e.jsx(C,{value:"Sponsor",children:"Sponsor"},"Sponsor"),e.jsx(C,{value:"Guest",children:"Guest"},"Guest")],r.userType==="Sponsor"&&e.jsx(C,{value:"Driver",children:"Driver"},"Driver")]}),t&&e.jsx(A,{onClick:a,children:'Exit "View As"'})]})}),e.jsx(cs,{})]})]})},tr="productCatalog",us=10*60*1e3,ps=()=>{const[r,t]=s.useState([]),[o,c]=s.useState(!0),[a,l]=s.useState(null),[d,x]=s.useState([]),[m,v]=s.useState(!1),[p,n]=s.useState([]),[i,j]=s.useState(""),[w,R]=s.useState(""),[O,S]=s.useState(!1);s.useEffect(()=>{E()},[]),s.useEffect(()=>{const I=localStorage.getItem(tr);if(I){const{listings:M,timestamp:re}=JSON.parse(I);if(Date.now()-re<us){t(M),c(!1);return}}ee()},[]);const k=I=>x(M=>[...M,I]),F=()=>v(!0),J=()=>v(!1),le=()=>x([]),E=async()=>{try{const I=await T.get("/api/driver/my-sponsors");n(I.data),I.data.length>0&&j(I.data[0].sponsorId)}catch(I){l("Failed to load sponsor points data"),console.error("Error fetching sponsor points:",I)}},ee=async()=>{var I;try{const re=(await T.get("/api/catalog/products")).data.map(be=>({...be,pointCost:ae(be.price)}));t(re),localStorage.setItem(tr,JSON.stringify({listings:re,timestamp:Date.now()}))}catch(M){l(((I=M.response)==null?void 0:I.data)||"Failed to load products.")}finally{c(!1)}},ae=I=>{const M=p.find(be=>be.sponsorId===i);if(!M)return 0;const re=parseFloat(I.split(" ")[0]);return Math.ceil(re/M.pointDollarValue)},z=I=>{const M=p.find(re=>re.sponsorId===i);!M||!I.pointCost||(M.totalPoints<I.pointCost&&R(`Not enough points! You need ${I.pointCost} points but have ${M.totalPoints}`),S(!0))};if(o)return e.jsx(K,{});if(a)return e.jsx(L,{severity:"error",children:a});const ge=p.find(I=>I.sponsorId===i);return e.jsxs(e.Fragment,{children:[e.jsxs(je,{children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Product Catalog"}),e.jsxs(_,{fullWidth:!0,sx:{mb:4},children:[e.jsx(Y,{children:"Select Sponsor"}),e.jsx(G,{value:i,label:"Select Sponsor",onChange:I=>j(I.target.value),children:p.map(I=>e.jsxs(C,{value:I.sponsorId,children:[I.sponsorName," - ",I.totalPoints.toLocaleString()," points available"]},I.sponsorId))})]}),ge&&e.jsxs(L,{severity:"info",sx:{mb:2},children:["You have ",ge.totalPoints.toLocaleString()," points available with"," ",ge.sponsorName,". Point Value: $",ge.pointDollarValue.toFixed(2)," per point."]}),e.jsx(g,{sx:{display:"flex",flexWrap:"wrap",gap:2,justifyContent:"flex-start"},children:r.map((I,M)=>e.jsx(hs,{listing:I,selectedSponsor:ge,onPurchase:()=>{z(I),k(I)}},M))}),e.jsx(hr,{open:O,autoHideDuration:3e3,onClose:()=>S(!1),message:w}),e.jsxs(g,{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",mt:4,gap:2,children:[e.jsx(A,{variant:"contained",color:"secondary",onClick:F,children:"View Cart"}),e.jsx(A,{variant:"outlined",color:"error",onClick:le,children:"Clear Cart"})]})]}),e.jsxs(xr,{open:m,onClose:J,children:[e.jsx(gr,{children:"Your Cart"}),e.jsx(mr,{children:d.length>0?e.jsx(Te,{children:d.map((I,M)=>e.jsx(Oe,{children:e.jsx(Se,{primary:I.name,secondary:`Price: ${I.price}`})},M))}):e.jsx(h,{variant:"body1",children:"Your cart is empty."})})]})]})},hs=({listing:r,selectedSponsor:t,onPurchase:o})=>{var c;return e.jsxs(se,{sx:{width:"calc(33.333% - 16px)",maxWidth:"calc(33.333% - 16px)",marginBottom:2},children:[e.jsx(mt,{component:"img",height:"200",image:r.imageUrl,alt:r.altText||`Image of ${r.name}`,sx:{objectFit:"cover"}}),e.jsxs(oe,{children:[e.jsx(h,{variant:"h6",component:"p",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.name}),e.jsx(ne,{title:"Price",value:r.price}),e.jsx(ne,{title:"Point Cost",value:`${((c=r.pointCost)==null?void 0:c.toLocaleString())||0} points`}),e.jsx(A,{fullWidth:!0,variant:"contained",color:"primary",onClick:o,disabled:!t||(r.pointCost||0)>((t==null?void 0:t.totalPoints)||0),sx:{mt:2},children:"Add to Cart"})]})]})},xs=({question:r,answer:t})=>e.jsxs(jt,{children:[e.jsx(bt,{expandIcon:e.jsx(or,{}),"aria-controls":"panel-content",id:"panel-header",children:e.jsx(h,{children:r})}),e.jsx(vt,{children:e.jsx(h,{children:t})})]}),gs=()=>{const r=[{question:"How do I create an account?",answer:"To create an account, click on the 'Create New Account' link on the login page. Fill in your details and follow the prompts to complete registration."},{question:"What are the password requirements?",answer:"We recommend using a strong password that is at least 8 characters long, includes uppercase and lowercase letters, numbers, and special characters."},{question:"How can I reset my password?",answer:"If you've forgotten your password, click on the 'Forgot Password' link on the login page. Enter your email address, and we'll send you instructions to reset your password."},{question:"How do I earn points?",answer:"You can earn points by driving safely and completing objectives set by your sponsor."},{question:"How do I apply to a sponsor?",answer:"To apply to a sponsor, fill out the sponsor application form."},{question:"What can I spend my points on?",answer:"Points can be exchanged for purchases from temp not sure where yet."}];return e.jsxs("div",{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Frequently Asked Questions"}),r.map((t,o)=>e.jsx(xs,{question:t.question,answer:t.answer},o))]})},ms=()=>{const[r,t]=s.useState(""),[o,c]=s.useState(""),[a,l]=s.useState(""),[d,x]=s.useState(!1),[m,v]=s.useState(""),p=i=>{if(i.preventDefault(),!r||!o||!a){v("Please fill in all fields");return}if(!/\S+@\S+\.\S+/.test(o)){v("Please enter a valid email address");return}console.log("Feedback submitted:",{name:r,email:o,message:a}),x(!0),t(""),c(""),l(""),v("")},n=(i,j)=>{j!=="clickaway"&&x(!1)};return e.jsxs(g,{component:"form",onSubmit:p,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Provide Feedback"}),e.jsx(D,{label:"Your Name",fullWidth:!0,margin:"normal",value:r,onChange:i=>t(i.target.value),required:!0}),e.jsx(D,{label:"Your Email",type:"email",fullWidth:!0,margin:"normal",value:o,onChange:i=>c(i.target.value),required:!0}),e.jsx(D,{label:"Your Feedback",fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:a,onChange:i=>l(i.target.value),required:!0}),e.jsx(A,{type:"submit",variant:"contained",size:"large",fullWidth:!0,sx:{mt:3,mb:2},children:"Submit Feedback"}),m&&e.jsx(h,{color:"error",sx:{mt:2},children:m}),e.jsx(hr,{open:d,autoHideDuration:6e3,onClose:n,children:e.jsx(L,{onClose:n,severity:"success",sx:{width:"100%"},children:"Thank you for your feedback!"})})]})},js=()=>{const[r,t]=s.useState(!1),o=()=>{t(!0)},c=()=>{t(!1)};return e.jsxs(je,{maxWidth:"md",children:[e.jsx(h,{variant:"h4",align:"center",gutterBottom:!0,children:"Secure Checkout"}),e.jsxs(P,{container:!0,spacing:4,children:[e.jsx(P,{item:!0,xs:12,sm:7,children:e.jsxs(g,{children:[e.jsx(h,{variant:"h6",children:"1. Delivery Address"}),e.jsx(h,{variant:"body2",children:"All fields marked with * are required"}),e.jsxs(P,{container:!0,spacing:2,mt:2,children:[" ",e.jsx(P,{item:!0,xs:12,children:e.jsx(D,{label:"Email address *",fullWidth:!0,variant:"outlined"})}),e.jsx(P,{item:!0,xs:6,children:e.jsx(D,{label:"First name *",fullWidth:!0,variant:"outlined"})}),e.jsx(P,{item:!0,xs:6,children:e.jsx(D,{label:"Last name *",fullWidth:!0,variant:"outlined"})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(D,{label:"Address *",fullWidth:!0,variant:"outlined"})}),e.jsx(P,{item:!0,xs:6,children:e.jsx(D,{label:"City *",fullWidth:!0,variant:"outlined"})}),e.jsx(P,{item:!0,xs:6,children:e.jsx(D,{label:"ZIP code *",fullWidth:!0,variant:"outlined"})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(D,{label:"Country *",fullWidth:!0,variant:"outlined",defaultValue:"United States"})})]})]})}),e.jsx(P,{item:!0,xs:12,sm:5,children:e.jsxs(g,{children:[e.jsx(h,{variant:"h6",children:"Order Summary"}),e.jsxs(P,{container:!0,spacing:2,mt:2,alignItems:"center",children:[e.jsxs(P,{item:!0,xs:8,children:[e.jsx(h,{variant:"subtitle1",children:"Bath Mat"}),e.jsx(h,{variant:"body2",children:"Size: 61x43cm, Color: White"})]}),e.jsxs(P,{item:!0,xs:4,textAlign:"right",children:[e.jsx(te,{size:"small",children:e.jsx(Qe,{})}),"1",e.jsx(te,{size:"small",children:e.jsx(Ke,{})})]}),e.jsx(P,{item:!0,xs:12,children:e.jsx(Z,{})}),e.jsxs(P,{item:!0,xs:8,children:[e.jsx(h,{variant:"subtitle1",children:"T-Shirt"}),e.jsx(h,{variant:"body2",children:"Size: L, Color: White"})]}),e.jsxs(P,{item:!0,xs:4,textAlign:"right",children:[e.jsx(te,{size:"small",children:e.jsx(Qe,{})}),"1",e.jsx(te,{size:"small",children:e.jsx(Ke,{})})]}),e.jsx(P,{item:!0,xs:12,children:e.jsx(Z,{})})]}),e.jsxs(g,{mt:2,textAlign:"right",children:[e.jsx(h,{variant:"h6",children:"Total (2 items): $69.46"})," ",e.jsx(h,{variant:"h6",children:"Current Points: 6946"})," ",e.jsx(A,{variant:"contained",color:"primary",fullWidth:!0,onClick:o,sx:{mt:2},children:"Complete Order"})]})]})})]}),e.jsxs(xr,{open:r,onClose:c,children:[e.jsx(gr,{children:"Order Complete"}),e.jsxs(mr,{children:[e.jsx(h,{children:"Your order has been successfully completed! Remaining points: 0"})," "]}),e.jsx(ft,{children:e.jsx(A,{onClick:c,color:"primary",children:"Close"})})]})]})},sr=({title:r,buttons:t})=>e.jsxs(g,{sx:{mt:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),t.map((o,c)=>e.jsx(A,{component:ie,to:o.path,variant:"contained",sx:{m:1},children:o.label},c))]}),bs=()=>e.jsxs(g,{sx:{width:"100%",maxWidth:600,margin:"auto",mt:4},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Settings"}),e.jsx(sr,{title:"Account Settings",buttons:[{label:"Update Email",path:"/update-email"},{label:"Change Password",path:"/change-password"},{label:"View Profile",path:"/profile"}]}),e.jsx(sr,{title:"Notification Settings",buttons:[{label:"Manage Notifications",path:"/notifications"},{label:"Set Preferences",path:"/preferences"}]})]}),vs=()=>{const{isAuthenticated:r}=X();return r?e.jsxs(g,{sx:{display:"flex"},children:[e.jsx(Bt,{}),e.jsx(g,{sx:{flexGrow:1},children:e.jsx(Dr,{})})]}):e.jsx(Ae,{to:"/",replace:!0})},fs=()=>{const{isAuthenticated:r}=X();return r?e.jsx(Ae,{to:"/dashboard",replace:!0}):e.jsx(Ae,{to:"/home",replace:!0})},ys=()=>e.jsx(yt,{children:e.jsx(St,{children:e.jsxs(zt,{children:[e.jsx(kt,{}),e.jsx(Le,{}),e.jsx(g,{sx:{mt:1,width:"100%"},children:e.jsxs(Pr,{children:[e.jsx(V,{path:"/",element:e.jsx(fs,{})}),e.jsx(V,{path:"/about",element:e.jsx(Vt,{})}),e.jsx(V,{path:"/login",element:e.jsx(Ht,{})}),e.jsx(V,{path:"/register",element:e.jsx(qt,{})}),e.jsx(V,{path:"/home",element:e.jsx(Ft,{})}),e.jsx(V,{path:"/faq",element:e.jsx(gs,{})}),e.jsx(V,{path:"/feedback",element:e.jsx(ms,{})}),e.jsxs(V,{element:e.jsx(vs,{}),children:[e.jsx(V,{path:"/dashboard",element:e.jsx(ds,{})}),e.jsx(V,{path:"/catalog",element:e.jsx(ps,{})}),e.jsx(V,{path:"/change-password",element:e.jsx(yr,{})}),e.jsx(V,{path:"/settings",element:e.jsx(bs,{})}),e.jsx(V,{path:"/order",element:e.jsx(js,{})})]})]})})]})})});Rr.createRoot(document.getElementById("root")).render(e.jsx(Ar,{children:e.jsx(ys,{})}));
