import{j as e,r as s,g as R,L as X,u as je,h as ir,i as lr,l as cr,m as dr,o as W,O as ur,N as ge,p as pr,B as hr}from"./vendor-CHAfpT6Q.js";import{B as xr,b as gr,I as fe,L as ke,a as Ie,c as Re,d as Ae,e as me,E as mr,f as Fe,C as br,D as jr,A as ce,g as de,P as Pe,H as re,h as Z,i as Q,j as fr,T as d,k as D,l as Ve,m as yr,S as H,n as Be,N as vr,o as q,p as He,u as Sr,q as _e,r as b,M as qe,s as z,t as wr,v as Cr,w as Ge,x as ye,y as kr,z as Ir,F as Ue,G as f,J as ue,K as De,O as Rr,Q as Ar,R as Pr,U as Dr,V as Or,W as Mr,X as Ye,Y as A,Z as Tr,_ as pe,$ as Er,a0 as zr,a1 as Oe,a2 as Me,a3 as Lr,a4 as $r,a5 as Wr,a6 as Ze,a7 as ve,a8 as B,a9 as G,aa as L,ab as P,ac as be,ad as se,ae as Qe,af as Je,ag as Ke,ah as Xe,ai as Se,aj as _,ak as te,al as oe,am as ae,an as ne,ao as V,ap as C,aq as Te,ar as ie,as as we,at as Nr,au as Ee,av as ze,aw as Fr,ax as Vr,ay as Br,az as Hr,aA as _r,aB as qr,aC as Gr,aD as Ur,aE as Yr,aF as Zr,aG as Qr,aH as Jr,aI as Kr}from"./mui-NuvPaHLQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))u(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();function Ce({showBadge:r=!1,...t}){return e.jsx(xr,{color:"error",variant:"dot",invisible:!r,sx:{[`& .${gr.badge}`]:{right:2,top:2}},children:e.jsx(fe,{size:"small",...t})})}const er=s.createContext(void 0),Xr=({children:r})=>{const[t,a]=s.useState(()=>sessionStorage.getItem("isAuthenticated")==="true"),[u,i]=s.useState(()=>{const p=sessionStorage.getItem("user");return p?JSON.parse(p):null}),[c,n]=s.useState(()=>sessionStorage.getItem("viewRole")||null),[l,m]=s.useState(!t),x=s.useCallback(p=>{n(p),p?sessionStorage.setItem("viewRole",p):sessionStorage.removeItem("viewRole")},[]);s.useEffect(()=>{t?m(!1):y()},[]);const y=async()=>{m(!0);try{const p=await R.get("/api/user/currentuser",{withCredentials:!0});i(p.data),a(!0),sessionStorage.setItem("user",JSON.stringify(p.data)),sessionStorage.setItem("isAuthenticated","true")}catch{i(null),a(!1),sessionStorage.removeItem("user"),sessionStorage.removeItem("isAuthenticated")}finally{m(!1)}},S=async()=>{try{await R.post("/api/user/logout",{},{withCredentials:!0}),i(null),a(!1),x(null),sessionStorage.clear()}catch(p){console.error("Logout failed:",p)}};return e.jsx(er.Provider,{value:{user:u,isAuthenticated:t,isLoading:l,viewRole:c,setViewRole:x,checkAuth:y,logout:S},children:r})},U=()=>{const r=s.useContext(er);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},rr=s.createContext(void 0),tr=()=>{const r=s.useContext(rr);if(!r)throw new Error("useView must be used within a ViewProvider");return r},sr=({children:r})=>{const[t,a]=s.useState("MAIN");return e.jsx(rr.Provider,{value:{currentView:t,setCurrentView:a},children:r})},Le={base:[{text:"Dashboard",icon:e.jsx(jr,{}),view:"MAIN"}],Guest:[{text:"Applications",icon:e.jsx(ce,{}),view:"DRIVER_APPLICATION"}],Driver:[{text:"Applications",icon:e.jsx(ce,{}),view:"DRIVER_APPLICATION"},{text:"Register With Sponsors",icon:e.jsx(ce,{}),view:"DRIVER_REGISTRATION"},{text:"Points",icon:e.jsx(de,{}),view:"DRIVER_POINTS"},{text:"Activity",icon:e.jsx(de,{}),view:"DRIVER_ACTIVITY"}],Admin:[{text:"Manage Users",icon:e.jsx(Pe,{}),view:"MANAGE_USERS"},{text:"Reports Views",icon:e.jsx(re,{}),nestedItems:[{text:"Sales",icon:e.jsx(de,{}),view:"ADMIN_SALES_REPORTS"},{text:"Invoices",icon:e.jsx(re,{}),view:"ADMIN_INVOICE_REPORTS"},{text:"Audits",icon:e.jsx(re,{}),view:"ADMIN_AUDIT_REPORTS"}]}],Sponsor:[{text:"Manage Drivers",icon:e.jsx(Pe,{}),view:"SPONSOR_DRIVERS"},{text:"Approve/Reject Applications",icon:e.jsx(ce,{}),view:"APPLICATION_MANAGER"},{text:"Reports Views",icon:e.jsx(re,{}),nestedItems:[{text:"Points",icon:e.jsx(de,{}),view:"SPONSOR_POINTS_REPORTS"},{text:"Audits",icon:e.jsx(re,{}),view:"SPONSOR_AUDIT_REPORTS"}]}]};function or(){const{setCurrentView:r}=tr(),{user:t,viewRole:a}=U(),u=a||(t==null?void 0:t.userType)||"Guest",[i,c]=s.useState({}),n=[...Le.base,...Le[u]||[]],l=x=>{c(y=>({...y,[x]:!y[x]}))},m=x=>{x&&(console.log(`Menu item clicked to set view: "${x}"`),r(x))};return e.jsx(sr,{children:e.jsx(ke,{dense:!0,children:n.map((x,y)=>e.jsxs(s.Fragment,{children:[e.jsx(Ie,{disablePadding:!0,children:e.jsxs(Re,{onClick:()=>x.nestedItems?l(x.text):m(x.view),children:[e.jsx(Ae,{children:x.icon}),e.jsx(me,{primary:x.text}),x.nestedItems?i[x.text]?e.jsx(mr,{}):e.jsx(Fe,{}):null]})}),x.nestedItems&&e.jsx(br,{in:i[x.text],timeout:"auto",unmountOnExit:!0,children:e.jsx(ke,{component:"div",disablePadding:!0,children:x.nestedItems.map((S,p)=>e.jsx(Ie,{disablePadding:!0,children:e.jsxs(Re,{onClick:()=>m(S.view),children:[e.jsx(Ae,{children:S.icon}),e.jsx(me,{primary:S.text})]})},p))})})]},y))})})}function et(){return e.jsx(Z,{variant:"outlined",sx:{m:1.5,p:1.5},children:e.jsxs(Q,{children:[e.jsx(fr,{fontSize:"small"}),e.jsx(d,{gutterBottom:!0,sx:{fontWeight:600},children:"Something"}),e.jsx(d,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"Earn points by driving safe!"}),e.jsx(D,{variant:"contained",size:"small",fullWidth:!0,children:"Make the pledge"})]})})}function rt({open:r,toggleDrawer:t}){const{user:a,viewRole:u,logout:i}=U(),c=u?{userName:`Viewing as ${u}`,email:`${u.toLowerCase()}@example.com`,userType:u}:a;return e.jsx(Ve,{anchor:"right",open:r,onClose:t(!1),sx:{zIndex:n=>n.zIndex.drawer+1,[`& .${yr.paper}`]:{backgroundImage:"none",backgroundColor:"background.paper"}},children:e.jsxs(H,{sx:{maxWidth:"70dvw",height:"100%"},children:[e.jsxs(H,{direction:"row",sx:{p:2,pb:0,gap:1},children:[c?e.jsxs(H,{direction:"row",sx:{gap:1,alignItems:"center",flexGrow:1,p:1},children:[e.jsx(Be,{alt:c.userName,src:"/static/images/avatar/7.jpg",sx:{width:24,height:24}}),e.jsx(d,{component:"p",variant:"h6",children:c.userName})]}):e.jsx(d,{variant:"body2",sx:{flexGrow:1,p:1},children:"Please log in to access more features."}),e.jsx(Ce,{showBadge:!0,children:e.jsx(vr,{})})]}),e.jsx(q,{}),e.jsxs(H,{sx:{flexGrow:1},children:[e.jsx(or,{}),e.jsx(q,{})]}),e.jsx(et,{}),c&&e.jsx(H,{sx:{p:2},children:e.jsx(D,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(He,{}),onClick:i,children:"Logout"})})]})})}function tt(r){const{mode:t,systemMode:a,setMode:u}=Sr(),i=_e(),[c,n]=s.useState(null),l=!!c,m=j=>{n(j.currentTarget)},x=()=>{n(null)},y=j=>()=>{u(j),x()};if(!t)return e.jsx(b,{"data-screenshot":"toggle-mode",sx:{verticalAlign:"bottom",display:"inline-flex",width:"2.25rem",height:"2.25rem",borderRadius:i.shape.borderRadius,border:"1px solid",borderColor:i.palette.divider}});const p=(a||t)==="light"?e.jsx(wr,{}):e.jsx(Cr,{});return e.jsxs(s.Fragment,{children:[e.jsx(fe,{"data-screenshot":"toggle-mode",onClick:m,disableRipple:!0,size:"small","aria-controls":l?"color-scheme-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,...r,children:p}),e.jsxs(qe,{anchorEl:c,id:"color-scheme-menu",open:l,onClose:x,onClick:x,PaperProps:{variant:"outlined",sx:{my:"4px"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(z,{selected:t==="system",onClick:y("system"),children:"System"}),e.jsx(z,{selected:t==="light",onClick:y("light"),children:"Light"}),e.jsx(z,{selected:t==="dark",onClick:y("dark"),children:"Dark"})]})]})}function st(){const[r,t]=s.useState(!1);U();const a=u=>()=>{t(u)};return e.jsx(Ge,{position:"fixed",sx:{zIndex:u=>u.zIndex.drawer+1,boxShadow:0,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",maxWidth:"100vw",overflow:"hidden"},children:e.jsxs(ye,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:1,maxWidth:"100%",overflow:"hidden"},children:[e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:1,flexShrink:0},children:[e.jsx(ot,{}),e.jsx(d,{variant:"h5",component:"a",href:"/",sx:{color:"text.primary",textDecoration:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"GitGud Drivers"})]}),e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:{xs:1,md:2},flexWrap:"wrap",justifyContent:"flex-end",width:{xs:"100%",md:"auto"}},children:[e.jsx(d,{component:X,to:"/about",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"About"}),e.jsx(d,{component:X,to:"/faq",sx:{color:"text.primary",textDecoration:"none",fontSize:{xs:"0.9rem",md:"1rem"},whiteSpace:"nowrap"},children:"FAQ"}),e.jsx(tt,{}),e.jsxs(b,{sx:{display:{xs:"block",md:"none"}},children:[e.jsx(Ce,{"aria-label":"menu",onClick:a(!0),children:e.jsx(kr,{})}),e.jsx(rt,{open:r,toggleDrawer:a})]})]})]})})}function ot(){return e.jsx(b,{sx:{width:"1.5rem",height:"1.5rem",bgcolor:"black",borderRadius:"999px",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(135deg, hsl(210, 98%, 60%) 0%, hsl(210, 100%, 35%) 100%)",color:"hsla(210, 100%, 95%, 0.9)",border:"1px solid",borderColor:"hsl(210, 100%, 55%)",boxShadow:"inset 0 2px 5px rgba(255, 255, 255, 0.3)"},children:e.jsx(Ir,{color:"inherit",sx:{fontSize:"1rem"}})})}const E=Ue();[...E.shadows];const g={50:"hsl(210, 100%, 95%)",100:"hsl(210, 100%, 92%)",200:"hsl(210, 100%, 80%)",300:"hsl(210, 100%, 65%)",400:"hsl(210, 98%, 48%)",500:"hsl(210, 98%, 42%)",600:"hsl(210, 98%, 55%)",700:"hsl(210, 100%, 35%)",800:"hsl(210, 100%, 16%)",900:"hsl(210, 100%, 21%)"},o={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},M={50:"hsl(120, 80%, 98%)",100:"hsl(120, 75%, 94%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",600:"hsl(120, 70%, 25%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},N={50:"hsl(45, 100%, 97%)",100:"hsl(45, 92%, 90%)",200:"hsl(45, 94%, 80%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",600:"hsl(45, 91%, 25%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},T={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",600:"hsl(0, 91%, 25%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},at={light:{palette:{primary:{light:g[200],main:g[400],dark:g[700],contrastText:g[50]},info:{light:g[100],main:g[300],dark:g[600],contrastText:o[50]},warning:{light:N[300],main:N[400],dark:N[800]},error:{light:T[300],main:T[400],dark:T[800]},success:{light:M[300],main:M[400],dark:M[800]},grey:{...o},divider:f(o[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:o[800],secondary:o[600],warning:N[400]},action:{hover:f(o[200],.2),selected:`${f(o[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:g[50],light:g[300],main:g[400],dark:g[700]},info:{contrastText:g[300],light:g[500],main:g[700],dark:g[900]},warning:{light:N[400],main:N[500],dark:N[700]},error:{light:T[400],main:T[500],dark:T[700]},success:{light:M[400],main:M[500],dark:M[700]},grey:{...o},divider:f(o[700],.6),background:{default:o[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:o[400]},action:{hover:f(o[600],.2),selected:f(o[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}};['"Inter", "sans-serif"'].join(","),E.typography.pxToRem(48),E.typography.pxToRem(36),E.typography.pxToRem(30),E.typography.pxToRem(24),E.typography.pxToRem(20),E.typography.pxToRem(18),E.typography.pxToRem(18),E.typography.pxToRem(14),E.typography.pxToRem(14),E.typography.pxToRem(14),E.typography.pxToRem(12);const nt={borderRadius:8},it=["none","var(--template-palette-baseShadow)",...E.shadows.slice(2)],lt=it,ct={MuiButtonBase:{defaultProps:{disableTouchRipple:!0,disableRipple:!0},styleOverrides:{root:({theme:r})=>({boxSizing:"border-box",transition:"all 100ms ease-in","&:focus-visible":{outline:`3px solid ${f(r.palette.primary.main,.5)}`,outlineOffset:"2px"}})}},MuiButton:{styleOverrides:{root:({theme:r})=>({boxShadow:"none",borderRadius:r.shape.borderRadius,textTransform:"none",variants:[{props:{size:"small"},style:{height:"2.25rem",padding:"8px 12px"}},{props:{size:"medium"},style:{height:"2.5rem"}},{props:{color:"primary",variant:"contained"},style:{color:"white",backgroundColor:o[900],backgroundImage:`linear-gradient(to bottom, ${o[700]}, ${o[800]})`,boxShadow:`inset 0 1px 0 ${o[600]}, inset 0 -1px 0 1px hsl(220, 0%, 0%)`,border:`1px solid ${o[700]}`,"&:hover":{backgroundImage:"none",backgroundColor:o[700],boxShadow:"none"},"&:active":{backgroundColor:o[800]},...r.applyStyles("dark",{color:"black",backgroundColor:o[50],backgroundImage:`linear-gradient(to bottom, ${o[100]}, ${o[50]})`,boxShadow:"inset 0 -1px 0  hsl(220, 30%, 80%)",border:`1px solid ${o[50]}`,"&:hover":{backgroundImage:"none",backgroundColor:o[300],boxShadow:"none"},"&:active":{backgroundColor:o[400]}})}},{props:{color:"secondary",variant:"contained"},style:{color:"white",backgroundColor:g[300],backgroundImage:`linear-gradient(to bottom, ${f(g[400],.8)}, ${g[500]})`,boxShadow:`inset 0 2px 0 ${f(g[200],.2)}, inset 0 -2px 0 ${f(g[700],.4)}`,border:`1px solid ${g[500]}`,"&:hover":{backgroundColor:g[700],boxShadow:"none"},"&:active":{backgroundColor:g[700],backgroundImage:"none"}}},{props:{variant:"outlined"},style:{color:r.palette.text.primary,border:"1px solid",borderColor:o[200],backgroundColor:f(o[50],.3),"&:hover":{backgroundColor:o[100],borderColor:o[300]},"&:active":{backgroundColor:o[200]},...r.applyStyles("dark",{backgroundColor:o[800],borderColor:o[700],"&:hover":{backgroundColor:o[900],borderColor:o[600]},"&:active":{backgroundColor:o[900]}})}},{props:{color:"secondary",variant:"outlined"},style:{color:g[700],border:"1px solid",borderColor:g[200],backgroundColor:g[50],"&:hover":{backgroundColor:g[100],borderColor:g[400]},"&:active":{backgroundColor:f(g[200],.7)},...r.applyStyles("dark",{color:g[50],border:"1px solid",borderColor:g[900],backgroundColor:f(g[900],.3),"&:hover":{borderColor:g[700],backgroundColor:f(g[900],.6)},"&:active":{backgroundColor:f(g[900],.5)}})}},{props:{variant:"text"},style:{color:o[600],"&:hover":{backgroundColor:o[100]},"&:active":{backgroundColor:o[200]},...r.applyStyles("dark",{color:o[50],"&:hover":{backgroundColor:o[700]},"&:active":{backgroundColor:f(o[700],.7)}})}},{props:{color:"secondary",variant:"text"},style:{color:g[700],"&:hover":{backgroundColor:f(g[100],.5)},"&:active":{backgroundColor:f(g[200],.7)},...r.applyStyles("dark",{color:g[100],"&:hover":{backgroundColor:f(g[900],.5)},"&:active":{backgroundColor:f(g[900],.3)}})}}]})}},MuiIconButton:{styleOverrides:{root:({theme:r})=>({boxShadow:"none",borderRadius:r.shape.borderRadius,textTransform:"none",fontWeight:r.typography.fontWeightMedium,letterSpacing:0,color:r.palette.text.primary,border:"1px solid ",borderColor:o[200],backgroundColor:f(o[50],.3),"&:hover":{backgroundColor:o[100],borderColor:o[300]},"&:active":{backgroundColor:o[200]},...r.applyStyles("dark",{backgroundColor:o[800],borderColor:o[700],"&:hover":{backgroundColor:o[900],borderColor:o[600]},"&:active":{backgroundColor:o[900]}}),variants:[{props:{size:"small"},style:{width:"2.25rem",height:"2.25rem",padding:"0.25rem",[`& .${ue.root}`]:{fontSize:"1rem"}}},{props:{size:"medium"},style:{width:"2.5rem",height:"2.5rem"}}]})}},MuiToggleButtonGroup:{styleOverrides:{root:({theme:r})=>({borderRadius:"10px",boxShadow:`0 4px 16px ${f(o[400],.2)}`,[`& .${De.selected}`]:{color:g[500]},...r.applyStyles("dark",{[`& .${De.selected}`]:{color:"#fff"},boxShadow:`0 4px 16px ${f(g[700],.5)}`})})}},MuiToggleButton:{styleOverrides:{root:({theme:r})=>({padding:"12px 16px",textTransform:"none",borderRadius:"10px",fontWeight:500,...r.applyStyles("dark",{color:o[400],boxShadow:"0 4px 16px rgba(0, 0, 0, 0.5)",[`&.${Rr.selected}`]:{color:g[300]}})})}},MuiCheckbox:{defaultProps:{disableRipple:!0,icon:e.jsx(Ar,{sx:{color:"hsla(210, 0%, 0%, 0.0)"}}),checkedIcon:e.jsx(Pr,{sx:{height:14,width:14}}),indeterminateIcon:e.jsx(Dr,{sx:{height:14,width:14}})},styleOverrides:{root:({theme:r})=>({margin:10,height:16,width:16,borderRadius:5,border:"1px solid ",borderColor:f(o[300],.8),boxShadow:"0 0 0 1.5px hsla(210, 0%, 0%, 0.04) inset",backgroundColor:f(o[100],.4),transition:"border-color, background-color, 120ms ease-in","&:hover":{borderColor:g[300]},"&.Mui-focusVisible":{outline:`3px solid ${f(g[500],.5)}`,outlineOffset:"2px",borderColor:g[400]},"&.Mui-checked":{color:"white",backgroundColor:g[500],borderColor:g[500],boxShadow:"none","&:hover":{backgroundColor:g[600]}},...r.applyStyles("dark",{borderColor:f(o[700],.8),boxShadow:"0 0 0 1.5px hsl(210, 0%, 0%) inset",backgroundColor:f(o[900],.8),"&:hover":{borderColor:g[300]},"&.Mui-focusVisible":{borderColor:g[400],outline:`3px solid ${f(g[500],.5)}`,outlineOffset:"2px"}})})}},MuiInputBase:{styleOverrides:{root:{border:"none"},input:{"&::placeholder":{opacity:.7,color:o[500]}}}},MuiOutlinedInput:{styleOverrides:{input:{padding:0},root:({theme:r})=>({padding:"8px 12px",color:r.palette.text.primary,borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,backgroundColor:r.palette.background.default,transition:"border 120ms ease-in","&:hover":{borderColor:o[400]},[`&.${Or.focused}`]:{outline:`3px solid ${f(g[500],.5)}`,borderColor:g[400]},...r.applyStyles("dark",{"&:hover":{borderColor:o[500]}}),variants:[{props:{size:"small"},style:{height:"2.25rem"}},{props:{size:"medium"},style:{height:"2.5rem"}}]}),notchedOutline:{border:"none"}}},MuiInputAdornment:{styleOverrides:{root:({theme:r})=>({color:r.palette.grey[500],...r.applyStyles("dark",{color:r.palette.grey[400]})})}},MuiFormLabel:{styleOverrides:{root:({theme:r})=>({typography:r.typography.caption,marginBottom:8})}}},dt={MuiList:{styleOverrides:{root:{padding:"8px",display:"flex",flexDirection:"column",gap:0}}},MuiListItem:{styleOverrides:{root:({theme:r})=>({[`& .${ue.root}`]:{width:"1rem",height:"1rem",color:r.palette.text.secondary},[`& .${Mr.root}`]:{fontWeight:500},[`& .${Ye.root}`]:{display:"flex",gap:8,padding:"2px 8px",borderRadius:r.shape.borderRadius,opacity:.7,"&.Mui-selected":{opacity:1,backgroundColor:f(r.palette.action.selected,.3),[`& .${ue.root}`]:{color:r.palette.text.primary},"&:focus-visible":{backgroundColor:f(r.palette.action.selected,.3)},"&:hover":{backgroundColor:f(r.palette.action.selected,.5)}},"&:focus-visible":{backgroundColor:"transparent"}}})}},MuiListItemText:{styleOverrides:{primary:({theme:r})=>({fontSize:r.typography.body2.fontSize,fontWeight:500,lineHeight:r.typography.body2.lineHeight}),secondary:({theme:r})=>({fontSize:r.typography.caption.fontSize,lineHeight:r.typography.caption.lineHeight})}},MuiListSubheader:{styleOverrides:{root:({theme:r})=>({backgroundColor:"transparent",padding:"4px 8px",fontSize:r.typography.caption.fontSize,fontWeight:500,lineHeight:r.typography.caption.lineHeight})}},MuiListItemIcon:{styleOverrides:{root:{minWidth:0}}},MuiChip:{defaultProps:{size:"small"},styleOverrides:{root:({theme:r})=>({border:"1px solid",borderRadius:"999px",[`& .${A.label}`]:{fontWeight:600},variants:[{props:{color:"default"},style:{borderColor:o[200],backgroundColor:o[100],[`& .${A.label}`]:{color:o[500]},[`& .${A.icon}`]:{color:o[500]},...r.applyStyles("dark",{borderColor:o[700],backgroundColor:o[800],[`& .${A.label}`]:{color:o[300]},[`& .${A.icon}`]:{color:o[300]}})}},{props:{color:"success"},style:{borderColor:M[200],backgroundColor:M[50],[`& .${A.label}`]:{color:M[500]},[`& .${A.icon}`]:{color:M[500]},...r.applyStyles("dark",{borderColor:M[800],backgroundColor:M[900],[`& .${A.label}`]:{color:M[300]},[`& .${A.icon}`]:{color:M[300]}})}},{props:{color:"error"},style:{borderColor:T[100],backgroundColor:T[50],[`& .${A.label}`]:{color:T[500]},[`& .${A.icon}`]:{color:T[500]},...r.applyStyles("dark",{borderColor:T[800],backgroundColor:T[900],[`& .${A.label}`]:{color:T[200]},[`& .${A.icon}`]:{color:T[300]}})}},{props:{size:"small"},style:{maxHeight:20,[`& .${A.label}`]:{fontSize:r.typography.caption.fontSize},[`& .${ue.root}`]:{fontSize:r.typography.caption.fontSize}}},{props:{size:"medium"},style:{[`& .${A.label}`]:{fontSize:r.typography.caption.fontSize}}}]})}},MuiTablePagination:{styleOverrides:{actions:{display:"flex",gap:8,marginRight:6,[`& .${Tr.root}`]:{minWidth:0,width:36,height:36}}}},MuiIcon:{defaultProps:{fontSize:"small"},styleOverrides:{root:{variants:[{props:{fontSize:"small"},style:{fontSize:"1rem"}}]}}}},ut={MuiAlert:{styleOverrides:{root:({theme:r})=>({borderRadius:10,backgroundColor:N[100],color:r.palette.text.primary,border:`1px solid ${f(N[300],.5)}`,"& .MuiAlert-icon":{color:N[500]},...r.applyStyles("dark",{backgroundColor:`${f(N[900],.5)}`,border:`1px solid ${f(N[800],.5)}`})})}},MuiDialog:{styleOverrides:{root:({theme:r})=>({"& .MuiDialog-paper":{borderRadius:"10px",border:"1px solid",borderColor:r.palette.divider}})}},MuiLinearProgress:{styleOverrides:{root:({theme:r})=>({height:8,borderRadius:8,backgroundColor:o[200],...r.applyStyles("dark",{backgroundColor:o[800]})})}}},pt={MuiMenuItem:{styleOverrides:{root:({theme:r})=>({borderRadius:r.shape.borderRadius,padding:"6px 8px",[`&.${pe.focusVisible}`]:{backgroundColor:"transparent"},[`&.${pe.selected}`]:{[`&.${pe.focusVisible}`]:{backgroundColor:f(r.palette.action.selected,.3)}}})}},MuiMenu:{styleOverrides:{list:{gap:"0px",[`&.${Er.root}`]:{margin:"0 -8px"}},paper:({theme:r})=>({marginTop:"4px",borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,backgroundImage:"none",background:"hsl(0, 0%, 100%)",boxShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px",[`& .${Ye.root}`]:{"&.Mui-selected":{backgroundColor:f(r.palette.action.selected,.3)}},...r.applyStyles("dark",{background:o[900],boxShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"})})}},MuiSelect:{defaultProps:{IconComponent:s.forwardRef((r,t)=>e.jsx(zr,{fontSize:"small",...r,ref:t}))},styleOverrides:{root:({theme:r})=>({borderRadius:r.shape.borderRadius,border:"1px solid",borderColor:o[200],backgroundColor:r.palette.background.paper,boxShadow:"inset 0 1px 0 1px hsla(220, 0%, 100%, 0.6), inset 0 -1px 0 1px hsla(220, 35%, 90%, 0.5)","&:hover":{borderColor:o[300],backgroundColor:r.palette.background.paper,boxShadow:"none"},[`&.${Oe.focused}`]:{outlineOffset:0,borderColor:o[400]},"&:before, &:after":{display:"none"},...r.applyStyles("dark",{borderRadius:r.shape.borderRadius,borderColor:o[700],backgroundColor:r.palette.background.paper,boxShadow:`inset 0 1px 0 1px ${f(o[700],.15)}, inset 0 -1px 0 1px hsla(220, 0%, 0%, 0.7)`,"&:hover":{borderColor:f(o[700],.7),backgroundColor:r.palette.background.paper,boxShadow:"none"},[`&.${Oe.focused}`]:{outlineOffset:0,borderColor:o[900]},"&:before, &:after":{display:"none"}})}),select:({theme:r})=>({display:"flex",alignItems:"center",...r.applyStyles("dark",{display:"flex",alignItems:"center","&:focus-visible":{backgroundColor:o[900]}})})}},MuiLink:{defaultProps:{underline:"none"},styleOverrides:{root:({theme:r})=>({color:r.palette.text.primary,fontWeight:500,position:"relative",textDecoration:"none",width:"fit-content","&::before":{content:'""',position:"absolute",width:"100%",height:"1px",bottom:0,left:0,backgroundColor:r.palette.text.secondary,opacity:.3,transition:"width 0.3s ease, opacity 0.3s ease"},"&:hover::before":{width:0},"&:focus-visible":{outline:`3px solid ${f(g[500],.5)}`,outlineOffset:"4px",borderRadius:"2px"}})}},MuiDrawer:{styleOverrides:{paper:({theme:r})=>({backgroundColor:r.palette.background.default})}},MuiPaginationItem:{styleOverrides:{root:({theme:r})=>({"&.Mui-selected":{color:"white",backgroundColor:r.palette.grey[900]},...r.applyStyles("dark",{"&.Mui-selected":{color:"black",backgroundColor:r.palette.grey[50]}})})}},MuiTabs:{styleOverrides:{root:{minHeight:"fit-content"},indicator:({theme:r})=>({backgroundColor:r.palette.grey[800],...r.applyStyles("dark",{backgroundColor:r.palette.grey[200]})})}},MuiTab:{styleOverrides:{root:({theme:r})=>({padding:"6px 8px",marginBottom:"8px",textTransform:"none",minWidth:"fit-content",minHeight:"fit-content",color:r.palette.text.secondary,borderRadius:r.shape.borderRadius,border:"1px solid",borderColor:"transparent",":hover":{color:r.palette.text.primary,backgroundColor:o[100],borderColor:o[200]},[`&.${Me.selected}`]:{color:o[900]},...r.applyStyles("dark",{":hover":{color:r.palette.text.primary,backgroundColor:o[800],borderColor:o[700]},[`&.${Me.selected}`]:{color:"#fff"}})})}},MuiStepConnector:{styleOverrides:{line:({theme:r})=>({borderTop:"1px solid",borderColor:r.palette.divider,flex:1,borderRadius:"99px"})}},MuiStepIcon:{styleOverrides:{root:({theme:r})=>({color:"transparent",border:`1px solid ${o[400]}`,width:12,height:12,borderRadius:"50%","& text":{display:"none"},"&.Mui-active":{border:"none",color:r.palette.primary.main},"&.Mui-completed":{border:"none",color:r.palette.success.main},...r.applyStyles("dark",{border:`1px solid ${o[700]}`,"&.Mui-active":{border:"none",color:r.palette.primary.light},"&.Mui-completed":{border:"none",color:r.palette.success.light}}),variants:[{props:{completed:!0},style:{width:12,height:12}}]})}},MuiStepLabel:{styleOverrides:{label:({theme:r})=>({"&.Mui-completed":{opacity:.6,...r.applyStyles("dark",{opacity:.5})}})}}},ht={MuiAccordion:{defaultProps:{elevation:0,disableGutters:!0},styleOverrides:{root:({theme:r})=>({padding:4,overflow:"clip",backgroundColor:r.palette.background.default,border:"1px solid",borderColor:r.palette.divider,":before":{backgroundColor:"transparent"},"&:not(:last-of-type)":{borderBottom:"none"},"&:first-of-type":{borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:r.shape.borderRadius,borderBottomRightRadius:r.shape.borderRadius}})}},MuiAccordionSummary:{styleOverrides:{root:({theme:r})=>({border:"none",borderRadius:8,"&:hover":{backgroundColor:o[50]},"&:focus-visible":{backgroundColor:"transparent"},...r.applyStyles("dark",{"&:hover":{backgroundColor:o[800]}})})}},MuiAccordionDetails:{styleOverrides:{root:{mb:20,border:"none"}}},MuiPaper:{defaultProps:{elevation:0}},MuiCard:{styleOverrides:{root:({theme:r})=>({padding:16,gap:16,transition:"all 100ms ease",backgroundColor:o[50],borderRadius:r.shape.borderRadius,border:`1px solid ${r.palette.divider}`,boxShadow:"none",...r.applyStyles("dark",{backgroundColor:o[800]}),variants:[{props:{variant:"outlined"},style:{border:`1px solid ${r.palette.divider}`,boxShadow:"none",background:"hsl(0, 0%, 100%)",...r.applyStyles("dark",{background:f(o[900],.4)})}}]})}},MuiCardContent:{styleOverrides:{root:{padding:0,"&:last-child":{paddingBottom:0}}}},MuiCardHeader:{styleOverrides:{root:{padding:0}}},MuiCardActions:{styleOverrides:{root:{padding:0}}}};function xt({children:r,disableCustomTheme:t,themeComponents:a}){const u=s.useMemo(()=>t?{}:Ue({cssVariables:{colorSchemeSelector:"data-mui-color-scheme",cssVarPrefix:"template"},colorSchemes:at,shadows:lt,shape:nt,components:{...ct,...dt,...ut,...pt,...ht,...a}}),[t,a]);return t?e.jsx(s.Fragment,{children:r}):e.jsx(Lr,{theme:u,disableTransitionOnChange:!0,children:r})}const gt=$r(z)({margin:"2px"}),he=s.forwardRef(({to:r,children:t,onClick:a},u)=>e.jsx(z,{component:X,to:r,ref:u,onClick:a,children:t}));function mt(){const[r,t]=s.useState(null),{logout:a}=U(),u=!!r,i=l=>{t(l.currentTarget)},c=()=>{t(null)},n=()=>{a(),c()};return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{"aria-label":"Open menu",onClick:i,sx:{borderColor:"transparent"},children:e.jsx(Wr,{})}),e.jsxs(qe,{anchorEl:r,id:"menu",open:u,onClose:c,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiList-root":{padding:"4px"},"& .MuiPaper-root":{padding:0}},children:[e.jsx(he,{to:"/profile",onClick:c,children:"Profile"}),e.jsx(q,{}),e.jsx(he,{to:"/settings",onClick:c,children:"Settings"}),e.jsx(he,{to:"/feedback",onClick:c,children:"Feedback"}),e.jsx(q,{}),e.jsxs(gt,{onClick:n,children:[e.jsx(He,{fontSize:"small"}),e.jsx(me,{children:"Logout"})]})]})]})}const $e=240;function bt(){const{user:r,viewRole:t}=U(),a=t?{userName:`Viewing as ${t}`,email:`${t.toLowerCase()}@example.com`,userType:t}:r;return e.jsxs(b,{sx:{display:"flex"},children:[e.jsx(Ze,{}),e.jsx(Ge,{position:"fixed",sx:{zIndex:u=>u.zIndex.drawer+1}}),e.jsxs(Ve,{variant:"permanent",sx:{display:{xs:"none",md:"block"},width:$e,flexShrink:0,"& .MuiDrawer-paper":{width:$e,boxSizing:"border-box"}},children:[e.jsx(ye,{}),e.jsx(b,{sx:{overflow:"auto"},children:a&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{sx:{display:"flex",alignItems:"center",p:2},children:[e.jsx(Be,{alt:a.userName,src:"/static/images/avatar/7.jpg",sx:{width:36,height:36}}),e.jsxs(b,{sx:{ml:2},children:[e.jsx(d,{variant:"body2",sx:{fontWeight:500,lineHeight:"16px"},children:a.userName}),e.jsx(d,{variant:"caption",sx:{color:"text.secondary"},children:a.email})]}),e.jsx(mt,{})]}),e.jsx(q,{}),e.jsx(or,{})]})})]})]})}const jt=()=>{const r=je();return e.jsxs(ve,{maxWidth:"md",children:[e.jsxs(b,{sx:{textAlign:"center",py:8,backgroundColor:"background.paper",borderRadius:2,mb:4},children:[e.jsx(d,{variant:"h2",component:"h1",gutterBottom:!0,children:"Git Gud Drivers"}),e.jsx(d,{variant:"h5",color:"text.secondary",paragraph:!0,children:"A rewards program for professional drivers committed to excellence"}),e.jsx(D,{variant:"contained",size:"large",onClick:()=>r("/register"),sx:{mr:2},children:"Sign Up"}),e.jsx(D,{variant:"outlined",size:"large",onClick:()=>r("/login"),children:"Sign In"})]}),e.jsx(B,{container:!0,spacing:4,sx:{mb:6},justifyContent:"center",alignItems:"center",children:e.jsxs(B,{item:!0,xs:12,md:4,children:[e.jsx(d,{variant:"h5",gutterBottom:!0,children:"How It Works"}),e.jsxs(d,{children:["1. Apply as a driver",e.jsx("br",{}),"2. Get approved by a sponsor",e.jsx("br",{}),"3. Start earning points",e.jsx("br",{}),"4. Redeem rewards"]}),e.jsxs(d,{variant:"h6",gutterBottom:!0,children:[e.jsx("br",{}),"We hope to see you soon!"]})]})})]})},K=({title:r,value:t})=>e.jsxs(b,{sx:{mb:1},children:[e.jsxs(d,{variant:"body1",component:"span",fontWeight:"bold",children:[r,":"]}),e.jsx(d,{variant:"body1",component:"span",sx:{ml:1},children:t})]}),ft=()=>{const[r,t]=s.useState(null),[a,u]=s.useState(null),[i,c]=s.useState(!0);return s.useEffect(()=>{(async()=>{try{const l=await R.get("/api/admin/about",{withCredentials:!0});console.log("API Response:",l.data),t(l.data)}catch(l){u(l.message)}finally{c(!1)}})()},[]),i?e.jsx(G,{}):a?e.jsxs(d,{color:"error",children:["Error: ",a]}):r?e.jsxs(b,{sx:{maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(d,{variant:"h4",gutterBottom:!0,children:"About Information"}),e.jsxs(b,{sx:{p:2,mb:2,border:1,borderColor:"divider",borderRadius:2},children:[e.jsx(K,{title:"Team",value:r.team}),e.jsx(K,{title:"Version",value:r.version.toString()}),e.jsx(K,{title:"Release Date",value:new Date(r.release).toLocaleDateString()}),e.jsx(K,{title:"Product",value:r.product}),e.jsx(K,{title:"Description",value:r.description})]})]}):e.jsx(d,{children:"No information available."})},yt=()=>{const r=je(),t=ir(),{checkAuth:a}=U(),u=new URLSearchParams(t.search),i=u.get("step")==="2fa"?"2fa":"login",c=u.get("userId"),[n,l]=s.useState(i),[m,x]=s.useState(c||null),[y,S]=s.useState(!1),[p,j]=s.useState(""),[h,v]=s.useState(""),[I,w]=s.useState(""),[k,F]=s.useState(null);s.useEffect(()=>{i==="2fa"&&c&&(l("2fa"),x(c))},[i,c]);const Y=async O=>{var J,ee;O.preventDefault(),S(!0),F(null);try{const $=await R.post("/api/user/login",{username:p,password:h});$.data.requiresTwoFactor?(l("2fa"),x($.data.userId.toString()),r(`/login?step=2fa&userId=${$.data.userId}`,{replace:!0})):$.data.succeeded?(await a(),r("/dashboard")):F($.data.message||"Login failed. Please try again.")}catch($){F(((ee=(J=$.response)==null?void 0:J.data)==null?void 0:ee.message)||"Login failed. Please try again.")}finally{S(!1)}},le=async O=>{var J,ee;O.preventDefault(),S(!0);try{const $=await R.post("/api/user/verify-2fa",{userId:String(m),code:I},{withCredentials:!0});$.data.succeeded?(await a(),r("/dashboard")):F($.data.message||"Invalid 2FA code. Please try again.")}catch($){F(((ee=(J=$.response)==null?void 0:J.data)==null?void 0:ee.message)||"2FA verification failed. Please try again.")}finally{S(!1)}};return e.jsxs(b,{component:"form",onSubmit:n==="login"?Y:le,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:n==="login"?"Login":"2FA Verification"}),k&&e.jsx(L,{severity:"error",sx:{mb:2},children:k}),n==="login"?e.jsxs(e.Fragment,{children:[e.jsx(P,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"username",value:p,onChange:O=>j(O.target.value),required:!0}),e.jsx(P,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"current-password",value:h,onChange:O=>v(O.target.value),required:!0})]}):e.jsx(P,{label:"2FA Code",variant:"outlined",margin:"normal",fullWidth:!0,value:I,onChange:O=>w(O.target.value),required:!0}),e.jsx(D,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:y,children:y?e.jsx(G,{size:24}):n==="login"?"Log In":"Verify 2FA"}),n==="login"&&e.jsxs(b,{sx:{textAlign:"center",mt:2},children:[e.jsx(be,{component:X,to:"/register",variant:"body2",sx:{display:"block",mb:1},children:"Don't have an account? Sign Up"}),e.jsx(be,{component:X,to:"/reset-password",variant:"body2",children:"Forgot Password? Click here to Reset it"})]})]})},vt=r=>{const[t,a]=s.useState(0);return s.useEffect(()=>{a((i=>{let c=0;return i.length>=8&&(c+=1),/[A-Z]/.test(i)&&(c+=1),/[0-9]/.test(i)&&(c+=1),/[^A-Za-z0-9]/.test(i)&&(c+=1),c/4*100})(r))},[r]),t},St=r=>r.length<8?"Password must be at least 8 characters long.":/[A-Z]/.test(r)?/[0-9]/.test(r)?/[^A-Za-z0-9]/.test(r)?null:"Password must contain at least one special character.":"Password must contain at least one number.":"Password must contain at least one uppercase letter.",wt=()=>{const[r,t]=s.useState(""),[a,u]=s.useState(""),[i,c]=s.useState(""),[n,l]=s.useState(!1),[m,x]=s.useState(!1),[y,S]=s.useState(null),[p,j]=s.useState(null),h=vt(i),v=je(),I=async k=>{var Y,le;k.preventDefault(),S(null),j(null);const F=St(i);if(F){j(F);return}x(!0);try{const O=await R.post("/api/user/register",{username:r,email:a,password:i,enable2FA:n}),J=await R.post("/api/user/login",{username:r,password:i});O.data.requiresTwoFactor?v(`/login?step=2fa&userId=${O.data.userId}`):v("/dashboard")}catch(O){S(((le=(Y=O.response)==null?void 0:Y.data)==null?void 0:le.message)||"Registration failed. Please try again.")}finally{x(!1)}},w=k=>k<33?"error":k<66?"warning":"success";return e.jsxs(b,{component:"form",onSubmit:I,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:400,margin:"auto",padding:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create Account"}),y&&e.jsx(L,{severity:"error",children:y}),p&&e.jsx(L,{severity:"warning",children:p}),e.jsx(P,{label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,value:r,onChange:k=>t(k.target.value),required:!0}),e.jsx(P,{label:"Email",type:"email",variant:"outlined",margin:"normal",fullWidth:!0,value:a,onChange:k=>u(k.target.value),required:!0}),e.jsx(P,{label:"Password",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,value:i,onChange:k=>c(k.target.value),required:!0}),e.jsxs(b,{sx:{width:"100%",mt:1},children:[e.jsx(se,{variant:"determinate",value:h,color:w(h)}),e.jsxs(d,{variant:"body2",sx:{mt:1},children:["Password strength: ",h<33?"Weak":h<66?"Medium":"Strong"]})]}),e.jsx(Qe,{control:e.jsx(Je,{checked:n,onChange:k=>l(k.target.checked),color:"primary"}),label:"Enable Two-Factor Authentication (2FA)"}),e.jsx(D,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,sx:{mt:3,mb:2},disabled:m,children:m?e.jsx(G,{size:24}):"Register"}),e.jsx(be,{component:X,to:"/login",variant:"body2",children:"Already have an account? Sign in"})]})},Ct=()=>{const[r,t]=s.useState({sponsorId:"",reason:""}),[a,u]=s.useState([]),[i,c]=s.useState(null),[n,l]=s.useState(null),m=s.useCallback(async()=>{try{const j=await R.get("/api/driver/available-sponsors");u(j.data),l(null)}catch{l("Failed to load sponsors. Please try again.")}},[]);s.useEffect(()=>{m()},[m]);const x=j=>{const{name:h,value:v}=j.target;t({...r,[h]:v})},y=j=>{t({...r,sponsorId:j.target.value===""?"":Number(j.target.value)})},S=async()=>{if(r.sponsorId===""){l("Please select a sponsor.");return}try{const j=await R.post("/api/driverapp/apply",r);c(j.data.message||"Application submitted successfully!"),l(null)}catch{l("Failed to submit application.")}},p=s.useMemo(()=>a.map(j=>e.jsx(z,{value:j.sponsorID,children:j.companyName},j.sponsorID)),[a]);return e.jsxs(b,{children:[e.jsx(d,{variant:"h5",children:"Driver Application"}),n&&e.jsx(L,{severity:"error",children:n}),i&&e.jsx(L,{severity:"success",children:i}),e.jsxs(Ke,{fullWidth:!0,margin:"normal",children:[e.jsx(Xe,{id:"sponsor-label",children:"Sponsor"}),e.jsx(Se,{labelId:"sponsor-label",value:r.sponsorId,onChange:y,fullWidth:!0,children:p})]}),e.jsx(P,{label:"Reason for Application",name:"reason",onChange:x,fullWidth:!0,multiline:!0,margin:"normal"}),e.jsx(D,{variant:"contained",color:"primary",onClick:S,children:"Submit Application"})]})},kt={0:"Submitted",1:"Approved",2:"Rejected"},It=()=>{const[r,t]=s.useState([]),[a,u]=s.useState(!0),[i,c]=s.useState(null),n=async()=>{var p;try{const j=await R.get("/api/sponsor/applications");t(j.data)}catch(j){c(((p=j.response)==null?void 0:p.data)||"Failed to load applications.")}finally{u(!1)}};s.useEffect(()=>{n()},[]);const l=async(p,j)=>{var h;try{await R.post(`/api/sponsor/applications/${p}/process?action=${j}`),t(v=>v.map(I=>I.applicationID===p?{...I,status:j==="approve"?1:2}:I))}catch(v){c(((h=v.response)==null?void 0:h.data)||`Failed to ${j} application.`)}};if(a)return e.jsx(G,{});if(i)return e.jsx(L,{severity:"error",children:i});const m=r.filter(p=>p.status===0),x=r.filter(p=>p.status===1),y=r.filter(p=>p.status===2),S=(p,j)=>p.length>0?p.map(h=>e.jsx(_,{size:{xs:12,sm:6,md:4},children:e.jsx(Z,{children:e.jsxs(Q,{children:[e.jsxs(d,{variant:"subtitle1",children:["Application ID: ",h.applicationID]}),e.jsxs(d,{children:["User ID: ",h.userID]}),e.jsxs(d,{children:["Apply Date: ",h.applyDate]}),e.jsxs(d,{children:["Status: ",kt[h.status]]}),h.status===0&&e.jsxs(e.Fragment,{children:[e.jsx(D,{color:"primary",variant:"contained",onClick:()=>l(h.applicationID,"approve"),children:"Approve"}),e.jsx(D,{color:"secondary",variant:"contained",onClick:()=>l(h.applicationID,"reject"),sx:{ml:1},children:"Reject"})]})]})})},h.applicationID)):e.jsx(d,{variant:"body2",color:"textSecondary",sx:{mt:2},children:j});return e.jsxs(ve,{children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"Driver Applications"}),e.jsxs(b,{children:[e.jsx(d,{variant:"h6",children:"Submitted Applications"}),e.jsx(q,{sx:{mb:2}}),e.jsx(_,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:S(m,"No pending applications")})]}),e.jsxs(b,{sx:{mt:4},children:[e.jsx(d,{variant:"h6",children:"Approved Applications"}),e.jsx(q,{sx:{mb:2}}),e.jsx(_,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:S(x,"No approved applications")})]}),e.jsxs(b,{sx:{mt:4},children:[e.jsx(d,{variant:"h6",children:"Rejected Applications"}),e.jsx(q,{sx:{mb:2}}),e.jsx(_,{container:!0,spacing:2,style:{maxHeight:"300px",overflowY:"auto"},children:S(y,"No rejected applications")})]})]})},Rt=(r="Driver")=>{switch(r){case"Admin":return[{check:t=>t.length>=20,message:"At least 20 characters long"},{check:t=>/[0-9]/.test(t),message:"Contains at least one digit"},{check:t=>/[a-z]/.test(t),message:"Contains at least one lowercase letter"},{check:t=>/[A-Z]/.test(t),message:"Contains at least one uppercase letter"},{check:t=>/[^A-Za-z0-9]/.test(t),message:"Contains at least three symbols"},{check:t=>new Set(t).size>=3,message:"Contains at least 3 unique characters"},{check:t=>/^(?=.*[!@#$%^&*])(?=.*[0-9])(?=.*[A-Z]).*$/.test(t),message:"Combination of numbers, symbols, and uppercase"}];case"Driver":return[{check:t=>t.length>=8,message:"At least 8 characters long"},{check:t=>/[0-9]/.test(t),message:"Contains at least one digit"},{check:t=>/[a-z]/.test(t),message:"Contains at least one lowercase letter"},{check:t=>/[A-Z]/.test(t),message:"Contains at least one uppercase letter"},{check:t=>/[^A-Za-z0-9]/.test(t),message:"Contains at least one special character"},{check:t=>new Set(t).size>=1,message:"Contains at least 1 unique character"}];default:return[{check:t=>t.length>=6,message:"At least 6 characters long"},{check:t=>/[0-9]/.test(t),message:"Contains at least one digit"},{check:t=>/[a-zA-Z]/.test(t),message:"Contains at least one letter"},{check:t=>new Set(t).size>=1,message:"Contains at least 1 unique character"}]}},ar=()=>{const[r,t]=s.useState(""),[a,u]=s.useState(""),[i,c]=s.useState(""),[n,l]=s.useState(""),[m,x]=s.useState(!1),[y,S]=s.useState(!1),[p,j]=s.useState("Driver");s.useEffect(()=>{(async()=>{try{const k=await R.get("/api/user/currentuser");j(k.data.userType)}catch(k){console.error("Error fetching user role:",k)}})()},[]);const h=Rt(p),v=w=>h.every(k=>k.check(w)),I=async w=>{var k,F;if(w.preventDefault(),l(""),x(!1),S(!0),a!==i){l("New passwords do not match"),S(!1);return}if(!v(a)){l("New password does not meet all requirements"),S(!1);return}try{const Y=await R.post("/api/user/change-password",{currentPassword:r,newPassword:a});x(!0),t(""),u(""),c("")}catch(Y){R.isAxiosError(Y)?l(((F=(k=Y.response)==null?void 0:k.data)==null?void 0:F.message)||"Failed to change password"):l("An unexpected error occurred")}finally{S(!1)}};return e.jsxs(b,{sx:{width:"100%",maxWidth:400,margin:"auto",mt:4},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"Change Password"}),n&&e.jsx(L,{severity:"error",sx:{mt:2,mb:2},children:n}),m&&e.jsx(L,{severity:"success",sx:{mt:2,mb:2},children:"Password changed successfully!"}),e.jsxs(b,{component:"form",onSubmit:I,noValidate:!0,sx:{mt:1},children:[e.jsx(P,{margin:"normal",required:!0,fullWidth:!0,name:"currentPassword",label:"Current Password",type:"password",id:"currentPassword",autoComplete:"current-password",value:r,onChange:w=>t(w.target.value)}),e.jsx(P,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New Password",type:"password",id:"newPassword",autoComplete:"new-password",value:a,onChange:w=>u(w.target.value)}),e.jsx(P,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:i,onChange:w=>c(w.target.value)}),e.jsxs(b,{sx:{mt:4},children:[e.jsxs(d,{variant:"h6",children:["Password Requirements for ",p,":"]}),h.map((w,k)=>e.jsxs(b,{sx:{display:"flex",alignItems:"center",mt:1},children:[e.jsx(b,{sx:{flexGrow:1,mr:1},children:e.jsx(se,{variant:"determinate",value:w.check(a)?100:0,color:w.check(a)?"success":"error"})}),e.jsx(b,{sx:{minWidth:200},children:e.jsx(d,{variant:"body2",color:"text.secondary",children:w.message})})]},k))]}),e.jsx(D,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:y,children:y?e.jsx(G,{size:24}):"Change Password"})]})]})},At=()=>{const[r,t]=s.useState([]),[a,u]=s.useState(!0),[i,c]=s.useState(""),[n,l]=s.useState("points"),[m,x]=s.useState("desc");s.useEffect(()=>{y()},[n,m]);const y=async()=>{try{u(!0);const p=await R.get("/api/sponsor/drivers",{params:{sortBy:n,sortOrder:m}});t(p.data),c("")}catch(p){c("Failed to load drivers data"),console.error("Error fetching drivers:",p)}finally{u(!1)}},S=p=>{n===p?x(m==="asc"?"desc":"asc"):(l(p),x("desc"))};return a?e.jsx(b,{sx:{width:"100%",mt:2},children:e.jsx(se,{})}):i?e.jsx(d,{color:"error",sx:{mt:2},children:i}):e.jsx(te,{sx:{width:"100%",mb:2,mt:2},children:e.jsx(oe,{children:e.jsxs(ae,{"aria-label":"drivers points table",children:[e.jsx(ne,{children:e.jsxs(V,{children:[e.jsx(C,{children:e.jsx(Te,{active:n==="userID",direction:n==="userID"?m:"asc",onClick:()=>S("userID"),children:"Driver Name"})}),e.jsx(C,{children:e.jsx(Te,{active:n==="points",direction:n==="points"?m:"asc",onClick:()=>S("points"),children:"Total Points"})})]})}),e.jsx(ie,{children:r.map(p=>e.jsx(V,{children:e.jsx(C,{children:p.totalPoints.toLocaleString()})},p.userID))})]})})})},Pt=()=>{const[r,t]=s.useState(null),[a,u]=s.useState(!0),[i,c]=s.useState("");return s.useEffect(()=>{(async()=>{try{u(!0);const l=await R.get("/api/driver/activity");t(l.data)}catch(l){c("Failed to load driver activity"),console.error("Error fetching activity:",l)}finally{u(!1)}})()},[]),a?e.jsx(se,{}):i?e.jsx(d,{color:"error",children:i}):r?e.jsxs(b,{sx:{p:3},children:[r.pointValue&&e.jsx(Z,{sx:{mb:4},children:e.jsxs(Q,{children:[e.jsxs(d,{variant:"h6",gutterBottom:!0,children:["Points Value - ",r.pointValue.sponsorName||"Unknown Sponsor"]}),e.jsxs(d,{children:["Current Balance: ",r.pointValue.totalPoints.toLocaleString()," points"]}),e.jsxs(d,{children:["Point Value: $",r.pointValue.pointValue.toFixed(2)," each"]}),e.jsxs(d,{variant:"h5",sx:{mt:2},children:["Total Value: $",r.pointValue.totalValue.toFixed(2)]})]})}),e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Activity History"}),e.jsx(oe,{component:te,children:e.jsxs(ae,{children:[e.jsx(ne,{children:e.jsxs(V,{children:[e.jsx(C,{children:"Date"}),e.jsx(C,{children:"Type"}),e.jsx(C,{children:"Points"}),e.jsx(C,{children:"Details"}),e.jsx(C,{children:"Status"})]})}),e.jsx(ie,{children:r.transactions&&r.transactions.length>0?r.transactions.map((n,l)=>e.jsxs(V,{children:[e.jsx(C,{children:n.date?new Date(n.date).toLocaleDateString():"N/A"}),e.jsx(C,{children:n.type}),e.jsxs(C,{sx:{color:n.points>0?"success.main":"error.main"},children:[n.points>0?"+":"",n.points]}),e.jsx(C,{children:n.reason}),e.jsx(C,{children:n.status&&e.jsx(we,{label:n.status,color:n.status==="Ordered"?"success":n.status==="Cancelled"?"error":"default",size:"small"})})]},l)):e.jsx(V,{children:e.jsx(C,{colSpan:5,align:"center",children:"No transactions available"})})})]})})]}):null};function We({icon:r,title:t,value:a,description:u}){return e.jsx(Z,{sx:{height:"100%"},children:e.jsxs(Q,{children:[e.jsx(r,{sx:{color:"primary.main",mb:1}}),e.jsx(d,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600",mb:1},children:t}),e.jsx(d,{variant:"h4",sx:{mb:1},children:a}),e.jsx(d,{sx:{color:"text.secondary",mb:1},children:u})]})})}function Dt(){const r=_e(),t=Nr(r.breakpoints.down("sm")),[a,u]=s.useState([]),[i,c]=s.useState(!0),[n,l]=s.useState(null);if(s.useEffect(()=>{(async()=>{try{const y=await fetch("/api/sponsor/drivers",{credentials:"include"});if(!y.ok)throw new Error("Failed to fetch drivers");const S=await y.json();u(S)}catch(y){l(y instanceof Error?y.message:"An error occurred while fetching drivers")}finally{c(!1)}})()},[]),i)return e.jsx(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(G,{})});if(n)return e.jsx(L,{severity:"error",sx:{mb:2},children:n});const m=a.reduce((x,y)=>x+y.totalPoints,0);return e.jsxs(b,{sx:{width:"100%"},children:[e.jsx(d,{component:"h2",variant:"h6",sx:{mb:2},children:"Sponsored Drivers Overview"}),e.jsxs(_,{container:!0,spacing:2,columns:12,children:[e.jsx(_,{size:{xs:12,lg:9},children:e.jsx(Z,{sx:{height:"100%"},children:e.jsxs(Q,{children:[a.length===0?e.jsx(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsx(d,{color:"text.secondary",children:"No drivers found under your sponsorship."})}):e.jsx(oe,{children:e.jsxs(ae,{sx:{minWidth:650},children:[e.jsx(ne,{children:e.jsxs(V,{children:[e.jsx(C,{children:"Driver ID"}),e.jsx(C,{children:"Email"}),e.jsx(C,{align:"right",children:"Total Points"})]})}),e.jsx(ie,{children:a.map(x=>e.jsxs(V,{children:[e.jsx(C,{component:"th",scope:"row",children:x.userID}),e.jsx(C,{children:x.email}),e.jsx(C,{align:"right",children:x.totalPoints.toLocaleString()})]},x.userID))})]})}),e.jsx(b,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{variant:"contained",size:"small",color:"primary",endIcon:e.jsx(Ee,{}),fullWidth:t,children:"View All Drivers"})})]})})}),e.jsx(_,{size:{xs:12,lg:3},children:e.jsxs(H,{gap:2,direction:{xs:"column",sm:"row",lg:"column"},children:[e.jsx(We,{icon:ze,title:"Active Drivers",value:a.length.toString(),description:"Currently sponsored drivers"}),e.jsx(We,{icon:Fr,title:"Total Points",value:m.toLocaleString(),description:"Accumulated driver points"})]})})]}),e.jsx(d,{component:"h2",variant:"h6",sx:{mb:2,mt:4},children:"Driver Management"}),e.jsx(_,{container:!0,spacing:2,columns:12,children:e.jsx(_,{size:{xs:12,sm:6,lg:4},children:e.jsx(Z,{sx:{height:"100%"},children:e.jsxs(Q,{children:[e.jsx(ze,{sx:{color:"primary.main",mb:1}}),e.jsx(d,{component:"h2",variant:"subtitle2",sx:{fontWeight:"600"},children:"Manage Drivers"}),e.jsx(d,{sx:{color:"text.secondary",mb:2},children:"Add or remove drivers from your sponsorship."}),e.jsx(D,{variant:"contained",size:"small",color:"primary",endIcon:e.jsx(Ee,{}),fullWidth:t,children:"Manage Drivers"})]})})})})]})}const Ot=()=>{const[r,t]=s.useState([]),[a,u]=s.useState([]),[i,c]=s.useState(!0),[n,l]=s.useState(null),[m,x]=s.useState(null),[y,S]=s.useState(!1);s.useEffect(()=>{p()},[]);const p=async()=>{var v,I;try{const w=await R.get("/api/driver/available-sponsors",{withCredentials:!0});t(Array.isArray(w.data)?w.data:[]),console.log("Sponsors response:",w.data)}catch(w){if(R.isAxiosError(w)){const k=((v=w.response)==null?void 0:v.data)||"Error loading sponsors. Please try again later.";l(typeof k=="string"?k:"An error occurred."),console.error("Axios error:",(I=w.response)==null?void 0:I.data)}else l("Error loading sponsors. Please try again later."),console.error("Error:",w);t([])}finally{c(!1)}},j=v=>{u(I=>I.includes(v)?I.filter(w=>w!==v):[...I,v])},h=async()=>{var v,I;if(a.length===0){l("Please select at least one sponsor");return}S(!0),l(null),x(null);try{const w=await R.post("/api/driver/register-sponsors",a,{withCredentials:!0,headers:{"Content-Type":"application/json"}});x(w.data||"Successfully registered with selected sponsors!"),u([]),p()}catch(w){if(R.isAxiosError(w)){const k=((v=w.response)==null?void 0:v.data)||"Failed to register with sponsors. Please try again.";l(typeof k=="string"?k:"Registration failed."),console.error("Axios error:",(I=w.response)==null?void 0:I.data)}else l("Failed to register with sponsors. Please try again."),console.error("Error:",w)}finally{S(!1)}};return i?e.jsx(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(G,{})}):e.jsxs(b,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(d,{variant:"h5",component:"h1",gutterBottom:!0,children:"Select Sponsors"}),e.jsx(Z,{sx:{mb:2,bgcolor:"background.paper"},children:e.jsxs(Q,{children:[e.jsxs(H,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e.jsx(d,{variant:"subtitle1",children:"Available Reward Programs"}),e.jsx(Vr,{title:"Select multiple sponsors to join their reward programs",children:e.jsx(Br,{color:"action",fontSize:"small"})})]}),n&&e.jsx(L,{severity:"error",sx:{mb:2},children:n}),m&&e.jsx(L,{severity:"success",sx:{mb:2},children:m}),e.jsx(Hr,{children:r.length===0?e.jsx(d,{color:"text.secondary",children:"No available sponsors found."}):r.map(v=>e.jsxs(b,{sx:{mb:2},children:[e.jsx(Qe,{control:e.jsx(Je,{checked:a.includes(v.sponsorID),onChange:()=>j(v.sponsorID),color:"primary"}),label:e.jsxs(H,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(_r,{color:"action"}),e.jsx(d,{children:v.companyName}),e.jsx(we,{icon:e.jsx(qr,{}),label:`$${v.pointDollarValue} per point`,size:"small",color:"primary",variant:"outlined"})]})}),e.jsx(q,{sx:{ml:7,my:1}})]},v.sponsorID))}),e.jsx(D,{variant:"contained",color:"primary",onClick:h,disabled:a.length===0||y,sx:{mt:2},children:y?e.jsx(G,{size:24,color:"inherit"}):`Register with ${a.length} Sponsor${a.length!==1?"s":""}`})]})})]})},Mt=()=>{const{driverId:r}=lr(),[t,a]=s.useState([]),[u,i]=s.useState(!0),[c,n]=s.useState("");return s.useEffect(()=>{(async()=>{try{i(!0);const m=await R.get("/api/driver/transactions");a(m.data),n("")}catch(m){n("Failed to load transaction data"),console.error("Error fetching transactions:",m)}finally{i(!1)}})()},[r]),u?e.jsx(b,{sx:{width:"100%",mt:2},children:e.jsx(se,{})}):c?e.jsx(d,{color:"error",sx:{mt:2},children:c}):e.jsx(te,{sx:{width:"100%",mb:2,mt:2},children:e.jsx(oe,{children:e.jsxs(ae,{"aria-label":"driver transactions table",children:[e.jsx(ne,{children:e.jsxs(V,{children:[e.jsx(C,{children:"Date"}),e.jsx(C,{children:"Points Changed"}),e.jsx(C,{children:"Reason"})]})}),e.jsx(ie,{children:t.map(l=>e.jsxs(V,{children:[e.jsx(C,{children:new Date(l.transactionDate).toLocaleDateString()}),e.jsx(C,{children:l.pointsChanged}),e.jsx(C,{children:l.reason})]},l.transactionId))})]})})})},xe={1:"User",2:"Point",3:"Purchase",4:"Application",5:"Product",6:"System"},nr=()=>{var j;const[r,t]=s.useState([]),[a,u]=s.useState(0),[i,c]=s.useState(!1),[n,l]=s.useState({page:0,pageSize:10}),m=async()=>{try{c(!0);const h=new URLSearchParams;n.userID&&h.append("userID",n.userID.toString()),n.category!==void 0&&h.append("category",n.category.toString()),n.searchTerm&&h.append("searchTerm",n.searchTerm),h.append("page",(n.page+1).toString()),h.append("pageSize",n.pageSize.toString());const I=await(await fetch(`/api/auditlog?${h.toString()}`)).json();t(I.logs),u(I.totalCount)}catch(h){console.error("Error fetching audit logs:",h)}finally{c(!1)}};s.useEffect(()=>{m()},[n]);const x=(h,v)=>{l(I=>({...I,page:v}))},y=h=>{l(v=>({...v,pageSize:parseInt(h.target.value,10),page:0}))},S=h=>{const v=h.target.value===""?void 0:parseInt(h.target.value);l(I=>({...I,category:v,page:0}))},p=h=>xe[h]||"Unknown";return e.jsx(b,{sx:{p:3},children:e.jsxs(B,{container:!0,spacing:3,children:[e.jsx(B,{item:!0,xs:12,children:e.jsx(d,{variant:"h4",gutterBottom:!0,children:"Audit Log Dashboard"})}),e.jsx(B,{item:!0,xs:12,children:e.jsx(te,{sx:{p:2,mb:2},children:e.jsxs(B,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(B,{item:!0,xs:12,sm:6,md:3,children:e.jsx(P,{fullWidth:!0,label:"User ID",type:"number",value:n.userID||"",onChange:h=>l(v=>({...v,userID:h.target.value?parseInt(h.target.value):void 0,page:0}))})}),e.jsx(B,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(Ke,{fullWidth:!0,children:[e.jsx(Xe,{children:"Category"}),e.jsxs(Se,{value:((j=n.category)==null?void 0:j.toString())||"",label:"Category",onChange:S,children:[e.jsx(z,{value:"",children:"All"}),Object.keys(xe).map(h=>e.jsx(z,{value:h,children:xe[parseInt(h)]},h))]})]})}),e.jsx(B,{item:!0,xs:12,children:e.jsx(P,{fullWidth:!0,label:"Search Description",value:n.searchTerm||"",onChange:h=>l(v=>({...v,searchTerm:h.target.value||void 0,page:0}))})})]})})}),e.jsx(B,{item:!0,xs:12,children:e.jsxs(te,{children:[e.jsx(b,{sx:{display:"flex",justifyContent:"flex-end",p:2},children:e.jsx(fe,{onClick:()=>m(),disabled:i,children:e.jsx(Gr,{})})}),e.jsx(oe,{children:e.jsxs(ae,{children:[e.jsx(ne,{children:e.jsxs(V,{children:[e.jsx(C,{children:"Log ID"}),e.jsx(C,{children:"User ID"}),e.jsx(C,{children:"Category"}),e.jsx(C,{children:"Description"}),e.jsx(C,{children:"Timestamp"})]})}),e.jsx(ie,{children:r.map(h=>e.jsxs(V,{children:[e.jsx(C,{children:h.logID}),e.jsx(C,{children:h.userID}),e.jsx(C,{children:e.jsx(we,{label:p(h.category),size:"small",color:Tt(h.category)})}),e.jsx(C,{children:h.description}),e.jsx(C,{children:cr(new Date(h.timestamp),"MMM dd, yyyy HH:mm:ss")})]},h.logID))})]})}),e.jsx(Ur,{component:"div",count:a,page:n.page,onPageChange:x,rowsPerPage:n.pageSize,onRowsPerPageChange:y,rowsPerPageOptions:[5,10,25,50]})]})})]})})},Tt=r=>({0:"primary",1:"secondary",2:"success",3:"info",4:"warning",5:"error"})[r]||"default",Et={MAIN:e.jsx(b,{children:e.jsx(d,{variant:"h6",children:"Dashboard Home"})}),CHANGE_PASSWORD:e.jsx(ar,{}),MANAGE_USERS:e.jsx(d,{children:"Manage Users"}),ADMIN_SALES_REPORTS:e.jsx(d,{children:"Sales Reports"}),ADMIN_INVOICE_REPORTS:e.jsx(d,{children:"Invoice Reports"}),ADMIN_AUDIT_REPORTS:e.jsx(nr,{}),DRIVER_APPLICATION:e.jsx(Ct,{}),DRIVER_REGISTRATION:e.jsx(Ot,{}),DRIVER_POINTS:e.jsx(At,{}),DRIVER_ACTIVITY:e.jsx(Pt,{}),DRIVER_POINTS_HISTORY:e.jsx(Mt,{}),APPLICATION_MANAGER:e.jsx(It,{}),SPONSOR_POINTS_REPORTS:e.jsx(d,{children:"Points Reports"}),SPONSOR_AUDIT_REPORTS:e.jsx(d,{children:"Audit Reports"}),SPONSOR_DRIVERS:e.jsx(Dt,{})};function zt(){const{currentView:r}=tr();return s.useEffect(()=>{console.log("Rendering MainGrid with current view:",r)},[r]),e.jsx(b,{sx:{width:"100%"},children:Et[r]||e.jsx(d,{children:"Select an option to view content"})})}const Lt=()=>{const{user:r,viewRole:t,setViewRole:a}=U();t||(r==null||r.userType);const u=c=>{a(c.target.value)},i=()=>{a(null)};return e.jsxs(b,{sx:{display:"flex",width:"100%",minHeight:"100vh"},children:[e.jsx(Ze,{}),e.jsxs(b,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",ml:"15px"},children:[e.jsx(b,{sx:{p:2},children:e.jsxs(H,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(d,{variant:"h6",children:"Dashboard"}),r&&(r.userType==="Admin"||r.userType==="Sponsor")&&e.jsxs(Se,{value:t||"",onChange:u,displayEmpty:!0,sx:{minWidth:180},renderValue:()=>"Select a role to view",children:[e.jsx(z,{disabled:!0,value:"",children:e.jsx("em",{children:"Select a role to view"})}),r.userType==="Admin"&&[e.jsx(z,{value:"Driver",children:"Driver"},"Driver"),e.jsx(z,{value:"Sponsor",children:"Sponsor"},"Sponsor"),e.jsx(z,{value:"Guest",children:"Guest"},"Guest")],r.userType==="Sponsor"&&e.jsx(z,{value:"Driver",children:"Driver"},"Driver")]}),t&&e.jsx(D,{onClick:i,children:'Exit "View As"'})]})}),e.jsx(zt,{})]})]})},Ne="productCatalog",$t=10*60*1e3,Wt=()=>{const[r,t]=s.useState([]),[a,u]=s.useState(!0),[i,c]=s.useState(null),n=async()=>{var l;try{const m=await R.get("/api/catalog/products");t(m.data),u(!1),localStorage.setItem(Ne,JSON.stringify({listings:m.data,timestamp:Date.now()}))}catch(m){c(((l=m.response)==null?void 0:l.data)||"Failed to load products."),u(!1)}};return s.useEffect(()=>{const l=localStorage.getItem(Ne);if(l){const{listings:m,timestamp:x}=JSON.parse(l);if(Date.now()-x<$t){t(m),u(!1);return}}n()},[]),a?e.jsx(G,{}):i?e.jsx(L,{severity:"error",children:i}):e.jsxs(ve,{children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"Product Catalog"}),e.jsx(b,{sx:{display:"flex",flexWrap:"wrap",gap:2,justifyContent:"flex-start"},children:r.map((l,m)=>e.jsxs(Z,{sx:{width:"calc(33.333% - 16px)",maxWidth:"calc(33.333% - 16px)",marginBottom:2},children:[e.jsx(Yr,{component:"img",height:"200",image:l.imageUrl,alt:l.name,sx:{objectFit:"cover"}}),e.jsxs(Q,{children:[e.jsx(d,{variant:"h6",component:"p",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l.name}),e.jsx(K,{title:"Price",value:l.price})]})]},m))})]})},Nt=({question:r,answer:t})=>e.jsxs(Zr,{children:[e.jsx(Qr,{expandIcon:e.jsx(Fe,{}),"aria-controls":"panel-content",id:"panel-header",children:e.jsx(d,{children:r})}),e.jsx(Jr,{children:e.jsx(d,{children:t})})]}),Ft=()=>{const r=[{question:"How do I create an account?",answer:"To create an account, click on the 'Create New Account' link on the login page. Fill in your details and follow the prompts to complete registration."},{question:"What are the password requirements?",answer:"We recommend using a strong password that is at least 8 characters long, includes uppercase and lowercase letters, numbers, and special characters."},{question:"How can I reset my password?",answer:"If you've forgotten your password, click on the 'Forgot Password' link on the login page. Enter your email address, and we'll send you instructions to reset your password."},{question:"How do I earn points?",answer:"You can earn points by driving safely and completing objectives set by your sponsor."},{question:"How do I apply to a sponsor?",answer:"To apply to a sponsor, fill out the sponsor application form."},{question:"What can I spend my points on?",answer:"Points can be exchanged for purchases from temp not sure where yet."}];return e.jsxs("div",{children:[e.jsx(d,{variant:"h4",gutterBottom:!0,children:"Frequently Asked Questions"}),r.map((t,a)=>e.jsx(Nt,{question:t.question,answer:t.answer},a))]})},Vt=()=>{const[r,t]=s.useState(""),[a,u]=s.useState(""),[i,c]=s.useState(""),[n,l]=s.useState(!1),[m,x]=s.useState(""),y=p=>{if(p.preventDefault(),!r||!a||!i){x("Please fill in all fields");return}if(!/\S+@\S+\.\S+/.test(a)){x("Please enter a valid email address");return}console.log("Feedback submitted:",{name:r,email:a,message:i}),l(!0),t(""),u(""),c(""),x("")},S=(p,j)=>{j!=="clickaway"&&l(!1)};return e.jsxs(b,{component:"form",onSubmit:y,sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,margin:"auto",p:3,boxShadow:3,borderRadius:2,backgroundColor:"background.paper"},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"Provide Feedback"}),e.jsx(P,{label:"Your Name",fullWidth:!0,margin:"normal",value:r,onChange:p=>t(p.target.value),required:!0}),e.jsx(P,{label:"Your Email",type:"email",fullWidth:!0,margin:"normal",value:a,onChange:p=>u(p.target.value),required:!0}),e.jsx(P,{label:"Your Feedback",fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:i,onChange:p=>c(p.target.value),required:!0}),e.jsx(D,{type:"submit",variant:"contained",size:"large",fullWidth:!0,sx:{mt:3,mb:2},children:"Submit Feedback"}),m&&e.jsx(d,{color:"error",sx:{mt:2},children:m}),e.jsx(Kr,{open:n,autoHideDuration:6e3,onClose:S,children:e.jsx(L,{onClose:S,severity:"success",sx:{width:"100%"},children:"Thank you for your feedback!"})})]})},Bt=()=>{const{isAuthenticated:r}=U();return r?e.jsxs(b,{sx:{display:"flex"},children:[e.jsx(bt,{}),e.jsx(b,{sx:{flexGrow:1},children:e.jsx(ur,{})})]}):e.jsx(ge,{to:"/",replace:!0})},Ht=()=>{const{isAuthenticated:r}=U();return r?e.jsx(ge,{to:"/dashboard",replace:!0}):e.jsx(ge,{to:"/home",replace:!0})},_t=()=>e.jsx(Xr,{children:e.jsx(sr,{children:e.jsxs(xt,{children:[e.jsx(st,{}),e.jsx(ye,{}),e.jsx(b,{sx:{mt:1,width:"100%"},children:e.jsxs(dr,{children:[e.jsx(W,{path:"/",element:e.jsx(Ht,{})}),e.jsx(W,{path:"/about",element:e.jsx(ft,{})}),e.jsx(W,{path:"/login",element:e.jsx(yt,{})}),e.jsx(W,{path:"/register",element:e.jsx(wt,{})}),e.jsx(W,{path:"/home",element:e.jsx(jt,{})}),e.jsx(W,{path:"/faq",element:e.jsx(Ft,{})}),e.jsx(W,{path:"/feedback",element:e.jsx(Vt,{})}),e.jsx(W,{path:"/audit-logs",element:e.jsx(nr,{})}),e.jsxs(W,{element:e.jsx(Bt,{}),children:[e.jsx(W,{path:"/dashboard",element:e.jsx(Lt,{})}),e.jsx(W,{path:"/catalog",element:e.jsx(Wt,{})}),e.jsx(W,{path:"/change-password",element:e.jsx(ar,{})})]})]})})]})})});pr.createRoot(document.getElementById("root")).render(e.jsx(hr,{children:e.jsx(_t,{})}));
